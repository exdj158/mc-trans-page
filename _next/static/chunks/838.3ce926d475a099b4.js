(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{4230:function(t,e,n){var r=n(1702),o=n(4488),i=n(1340),a=/"/g,l=r("".replace);t.exports=function(t,e,n,r){var u=i(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+l(i(r),a,"&quot;")+'"'),s+">"+u+"</"+e+">"}},1150:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},3429:function(t,e,n){var r=n(7293);t.exports=function(t){return r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})}},6977:function(t,e,n){"use strict";var r=n(2109),o=n(1702),i=n(9303),a=n(863),l=n(8415),u=n(7293),s=RangeError,c=String,f=Math.floor,h=o(l),d=o("".slice),p=o(1..toFixed),y=function(t,e,n){return 0===e?n:e%2==1?y(t,e-1,n*t):y(t*t,e/2,n)},g=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e},v=function(t,e,n){for(var r=-1,o=n;++r<6;)o+=e*t[r],t[r]=o%1e7,o=f(o/1e7)},m=function(t,e){for(var n=6,r=0;--n>=0;)r+=t[n],t[n]=f(r/e),r=r%e*1e7},b=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var r=c(t[e]);n=""===n?r:n+h("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:u(function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)})||!u(function(){p({})})},{toFixed:function(t){var e,n,r,o,l=a(this),u=i(t),f=[0,0,0,0,0,0],p="",w="0";if(u<0||u>20)throw s("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return c(l);if(l<0&&(p="-",l=-l),l>1e-21){if(n=(e=g(l*y(2,69,1))-69)<0?l*y(2,-e,1):l/y(2,e,1),n*=4503599627370496,(e=52-e)>0){for(v(f,0,n),r=u;r>=7;)v(f,1e7,0),r-=7;for(v(f,y(10,r,1),0),r=e-1;r>=23;)m(f,8388608),r-=23;m(f,1<<r),v(f,1,1),m(f,2),w=b(f)}else v(f,0,n),v(f,1<<-e,0),w=b(f)+h("0",u)}return u>0?p+((o=w.length)<=u?"0."+h("0",u-o)+w:d(w,0,o-u)+"."+d(w,o-u)):p+w}})},7852:function(t,e,n){"use strict";var r,o=n(2109),i=n(1702),a=n(1236).f,l=n(7466),u=n(1340),s=n(3929),c=n(4488),f=n(4964),h=n(1913),d=i("".endsWith),p=i("".slice),y=Math.min,g=f("endsWith");o({target:"String",proto:!0,forced:!(!h&&!g&&(r=a(String.prototype,"endsWith"))&&!r.writable)&&!g},{endsWith:function(t){var e=u(c(this));s(t);var n=arguments.length>1?arguments[1]:void 0,r=e.length,o=void 0===n?r:y(l(n),r),i=u(t);return d?d(e,i,o):p(e,o-i.length,o)===i}})},9254:function(t,e,n){"use strict";var r=n(2109),o=n(4230);r({target:"String",proto:!0,forced:n(3429)("link")},{link:function(t){return o(this,"a","href",t)}})},4765:function(t,e,n){"use strict";var r=n(6916),o=n(7007),i=n(9670),a=n(8554),l=n(4488),u=n(1150),s=n(1340),c=n(8173),f=n(7651);o("search",function(t,e,n){return[function(e){var n=l(this),o=a(e)?void 0:c(e,t);return o?r(o,e,n):RegExp(e)[t](s(n))},function(t){var r=i(this),o=s(t),a=n(e,r,o);if(a.done)return a.value;var l=r.lastIndex;u(l,0)||(r.lastIndex=0);var c=f(r,o);return u(r.lastIndex,l)||(r.lastIndex=l),null===c?-1:c.index}]})},2098:function(t,e,n){"use strict";n(7710)("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},n(9320))},8478:function(t,e,n){n(2098)},4316:function(t){var e;e=function(){return(function t(e,n,r){function o(a,l){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var u=Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=n[a]={exports:{}};e[a][0].call(s.exports,function(t){return o(e[a][1][t]||t)},s,s.exports,t,e,n,r)}return n[a].exports}for(var i=void 0,a=0;a<r.length;a++)o(r[a]);return o})({1:[function(t,e,n){!function(t){"use strict";var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",u=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function s(t){var e=0|t;return 0<t||t===e?e:e-1}function c(t){for(var e,n,r=1,o=t.length,i=t[0]+"";r<o;){for(n=14-(e=t[r++]+"").length;n--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function f(t,e){var n,r,o=t.c,i=e.c,a=t.s,l=e.s,u=t.e,s=e.e;if(!a||!l)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-l:a;if(a!=l)return a;if(n=a<0,r=u==s,!o||!i)return r?0:!o^n?1:-1;if(!r)return s<u^n?1:-1;for(l=(u=o.length)<(s=i.length)?u:s,a=0;a<l;a++)if(o[a]!=i[a])return o[a]>i[a]^n?1:-1;return u==s?0:s<u^n?1:-1}function h(t,e,n,r){if(t<e||n<t||t!==(t<0?o(t):i(t)))throw Error(a+(r||"Argument")+("number"==typeof t?t<e||n<t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function d(t){var e=t.c.length-1;return s(t.e/14)==e&&t.c[e]%2!=0}function p(t,e){return(1<t.length?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function y(t,e,n){var r,o;if(e<0){for(o=n+".";++e;o+=n);t=o+t}else if(++e>(r=t.length)){for(o=n,e-=r;--e;o+=n);t+=o}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,g,v,m,b,w,S,C,k,O=H.prototype={constructor:H,toString:null,valueOf:null},R=new H(1),P=20,E=4,M=-7,_=21,j=-1e7,A=1e7,T=!1,I=1,x=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},N="0123456789abcdefghijklmnopqrstuvwxyz";function H(t,e){var n,o,a,u,s,c,f,d,p=this;if(!(p instanceof H))return new H(t,e);if(null==e){if(t instanceof H)return p.s=t.s,p.e=t.e,void(p.c=(t=t.c)?t.slice():t);if((c="number"==typeof t)&&0*t==0){if(p.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,s=t;10<=s;s/=10,u++);return p.e=u,void(p.c=[t])}d=String(t)}else{if(d=String(t),!r.test(d))return v(p,d,c);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}-1<(u=d.indexOf("."))&&(d=d.replace(".","")),0<(s=d.search(/e/i))?(u<0&&(u=s),u+=+d.slice(s+1),d=d.substring(0,s)):u<0&&(u=d.length)}else{if(h(e,2,N.length,"Base"),d=String(t),10==e)return V(p=new H(t instanceof H?t:d),P+p.e+1,E);if(c="number"==typeof t){if(0*t!=0)return v(p,d,c,e);if(p.s=1/t<0?(d=d.slice(1),-1):1,H.DEBUG&&15<d.replace(/^0\.0*|\./,"").length)throw Error(l+t);c=!1}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=N.slice(0,e),u=s=0,f=d.length;s<f;s++)if(0>n.indexOf(o=d.charAt(s))){if("."==o){if(u<s){u=f;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,s=-1,u=0;continue}return v(p,String(t),c,e)}-1<(u=(d=g(d,e,10,p.s)).indexOf("."))?d=d.replace(".",""):u=d.length}for(s=0;48===d.charCodeAt(s);s++);for(f=d.length;48===d.charCodeAt(--f););if(d=d.slice(s,++f)){if(f-=s,c&&H.DEBUG&&15<f&&(9007199254740991<t||t!==i(t)))throw Error(l+p.s*t);if(A<(u=u-s-1))p.c=p.e=null;else if(u<j)p.c=[p.e=0];else{if(p.e=u,p.c=[],s=(u+1)%14,u<0&&(s+=14),s<f){for(s&&p.c.push(+d.slice(0,s)),f-=14;s<f;)p.c.push(+d.slice(s,s+=14));s=14-(d=d.slice(s)).length}else s-=f;for(;s--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function B(t,e,n,r){var o,i,a,l,u;if(null==n?n=E:h(n,0,8),!t.c)return t.toString();if(o=t.c[0],a=t.e,null==e)u=c(t.c),u=1==r||2==r&&(a<=M||_<=a)?p(u,a):y(u,a,"0");else if(i=(t=V(new H(t),e,n)).e,l=(u=c(t.c)).length,1==r||2==r&&(e<=i||i<=M)){for(;l<e;u+="0",l++);u=p(u,i)}else if(e-=a,u=y(u,i,"0"),l<i+1){if(0<--e)for(u+=".";e--;u+="0");}else if(0<(e+=i-l))for(i+1==l&&(u+=".");e--;u+="0");return t.s<0&&o?"-"+u:u}function L(t,e){for(var n,r=1,o=new H(t[0]);r<t.length;r++){if(!(n=new H(t[r])).s){o=n;break}e.call(o,n)&&(o=n)}return o}function U(t,e,n){for(var r=1,o=e.length;!e[--o];e.pop());for(o=e[0];10<=o;o/=10,r++);return(n=r+14*n-1)>A?t.c=t.e=null:t.c=n<j?[t.e=0]:(t.e=n,e),t}function V(t,e,n,r){var a,l,s,c,f,h,d,p=t.c;if(p){t:{for(a=1,c=p[0];10<=c;c/=10,a++);if((l=e-a)<0)l+=14,s=e,d=(f=p[h=0])/u[a-s-1]%10|0;else if((h=o((l+1)/14))>=p.length){if(!r)break t;for(;p.length<=h;p.push(0));f=d=0,s=(l%=14)-14+(a=1)}else{for(f=c=p[h],a=1;10<=c;c/=10,a++);d=(s=(l%=14)-14+a)<0?0:f/u[a-s-1]%10|0}if(r=r||e<0||null!=p[h+1]||(s<0?f:f%u[a-s-1]),r=n<4?(d||r)&&(0==n||n==(t.s<0?3:2)):5<d||5==d&&(4==n||r||6==n&&(0<l?0<s?f/u[a-s]:0:p[h-1])%10&1||n==(t.s<0?8:7)),e<1||!p[0])return p.length=0,r?(e-=t.e+1,p[0]=u[(14-e%14)%14],t.e=-e||0):p[0]=t.e=0,t;if(0==l?(p.length=h,c=1,h--):(p.length=h+1,c=u[14-l],p[h]=0<s?i(f/u[a-s]%u[s])*c:0),r)for(;;){if(0==h){for(l=1,s=p[0];10<=s;s/=10,l++);for(s=p[0]+=c,c=1;10<=s;s/=10,c++);l!=c&&(t.e++,1e14==p[0]&&(p[0]=1));break}if(p[h]+=c,1e14!=p[h])break;p[h--]=0,c=1}for(l=p.length;0===p[--l];p.pop());}t.e>A?t.c=t.e=null:t.e<j&&(t.c=[t.e=0])}return t}function F(t){var e,n=t.e;return null===n?t.toString():(e=c(t.c),e=n<=M||_<=n?p(e,n):y(e,n,"0"),t.s<0?"-"+e:e)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(h(n=t[e],0,1e9,e),P=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(h(n=t[e],0,8,e),E=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(h(n[0],-1e9,0,e),h(n[1],0,1e9,e),M=n[0],_=n[1]):(h(n,-1e9,1e9,e),M=-(_=n<0?-n:n))),t.hasOwnProperty(e="RANGE")){if((n=t[e])&&n.pop)h(n[0],-1e9,-1,e),h(n[1],1,1e9,e),j=n[0],A=n[1];else{if(h(n,-1e9,1e9,e),!n)throw Error(a+e+" cannot be zero: "+n);j=-(A=n<0?-n:n)}}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(a+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw T=!n,Error(a+"crypto unavailable");T=n}else T=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(h(n=t[e],0,9,e),I=n),t.hasOwnProperty(e="POW_PRECISION")&&(h(n=t[e],0,1e9,e),x=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(a+e+" not an object: "+n);D=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(a+e+" invalid: "+n);N=n}}return{DECIMAL_PLACES:P,ROUNDING_MODE:E,EXPONENTIAL_AT:[M,_],RANGE:[j,A],CRYPTO:T,MODULO_MODE:I,POW_PRECISION:x,FORMAT:D,ALPHABET:N}},H.isBigNumber=function(t){return t instanceof H||t&&!0===t._isBigNumber||!1},H.maximum=H.max=function(){return L(arguments,O.lt)},H.minimum=H.min=function(){return L(arguments,O.gt)},H.random=(m=9007199254740992*Math.random()&2097151?function(){return i(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,l,s,c=0,f=[],d=new H(R);if(null==t?t=P:h(t,0,1e9),l=o(t/14),T){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(l*=2));c<l;)9e15<=(s=131072*e[c]+(e[c+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),e[c]=n[0],e[c+1]=n[1]):(f.push(s%1e14),c+=2);c=l/2}else{if(!crypto.randomBytes)throw T=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(l*=7);c<l;)9e15<=(s=281474976710656*(31&e[c])+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])?crypto.randomBytes(7).copy(e,c):(f.push(s%1e14),c+=7);c=l/7}}if(!T)for(;c<l;)(s=m())<9e15&&(f[c++]=s%1e14);for(l=f[--c],t%=14,l&&t&&(s=u[14-t],f[c]=i(l/s)*s);0===f[c];f.pop(),c--);if(c<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=14);for(c=1,s=f[0];10<=s;s/=10,c++);c<14&&(r-=14-c)}return d.e=r,d.c=f,d}),H.sum=function(){for(var t=1,e=arguments,n=new H(e[0]);t<e.length;)n=n.plus(e[t++]);return n},g=function(){var t="0123456789";function e(t,e,n,r){for(var o,i,a=[0],l=0,u=t.length;l<u;){for(i=a.length;i--;a[i]*=e);for(a[0]+=r.indexOf(t.charAt(l++)),o=0;o<a.length;o++)a[o]>n-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/n|0,a[o]%=n)}return a.reverse()}return function(r,o,i,a,l){var u,s,f,h,d,p,g,v,m=r.indexOf("."),b=P,w=E;for(0<=m&&(h=x,x=0,r=r.replace(".",""),p=(v=new H(o)).pow(r.length-m),x=h,v.c=e(y(c(p.c),p.e,"0"),10,i,t),v.e=v.c.length),f=h=(g=e(r,o,i,l?(u=N,t):(u=t,N))).length;0==g[--h];g.pop());if(!g[0])return u.charAt(0);if(m<0?--f:(p.c=g,p.e=f,p.s=a,g=(p=n(p,v,b,w,i)).c,d=p.r,f=p.e),m=g[s=f+b+1],h=i/2,d=d||s<0||null!=g[s+1],d=w<4?(null!=m||d)&&(0==w||w==(p.s<0?3:2)):h<m||m==h&&(4==w||d||6==w&&1&g[s-1]||w==(p.s<0?8:7)),s<1||!g[0])r=d?y(u.charAt(1),-b,u.charAt(0)):u.charAt(0);else{if(g.length=s,d)for(--i;++g[--s]>i;)g[s]=0,s||(++f,g=[1].concat(g));for(h=g.length;!g[--h];);for(m=0,r="";m<=h;r+=u.charAt(g[m++]));r=y(r,f,u.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,o,i,a,l=0,u=t.length,s=e%1e7,c=e/1e7|0;for(t=t.slice();u--;)l=((o=s*(i=t[u]%1e7)+(r=c*i+(a=t[u]/1e7|0)*s)%1e7*1e7+l)/n|0)+(r/1e7|0)+c*a,t[u]=o%n;return l&&(t=[l].concat(t)),t}function e(t,e,n,r){var o,i;if(n!=r)i=r<n?1:-1;else for(o=i=0;o<n;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function n(t,e,n,r){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*r+t[n]-e[n];for(;!t[0]&&1<t.length;t.splice(0,1));}return function(r,o,a,l,u){var c,f,h,d,p,y,g,v,m,b,w,S,C,k,O,R,P,E=r.s==o.s?1:-1,M=r.c,_=o.c;if(!(M&&M[0]&&_&&_[0]))return new H(r.s&&o.s&&(M?!_||M[0]!=_[0]:_)?M&&0==M[0]||!_?0*E:E/0:NaN);for(m=(v=new H(E)).c=[],E=a+(f=r.e-o.e)+1,u||(u=1e14,f=s(r.e/14)-s(o.e/14),E=E/14|0),h=0;_[h]==(M[h]||0);h++);if(_[h]>(M[h]||0)&&f--,E<0)m.push(1),d=!0;else{for(k=M.length,R=_.length,E+=2,1<(p=i(u/(_[h=0]+1)))&&(_=t(_,p,u),M=t(M,p,u),R=_.length,k=M.length),C=R,w=(b=M.slice(0,R)).length;w<R;b[w++]=0);P=[0].concat(P=_.slice()),O=_[0],_[1]>=u/2&&O++;do{if(p=0,(c=e(_,b,R,w))<0){if(S=b[0],R!=w&&(S=S*u+(b[1]||0)),1<(p=i(S/O)))for(u<=p&&(p=u-1),g=(y=t(_,p,u)).length,w=b.length;1==e(y,b,g,w);)p--,n(y,R<g?P:_,g,u),g=y.length,c=1;else 0==p&&(c=p=1),g=(y=_.slice()).length;if(g<w&&(y=[0].concat(y)),n(b,y,w,u),w=b.length,-1==c)for(;1>e(_,b,R,w);)p++,n(b,R<w?P:_,w,u),w=b.length}else 0===c&&(p++,b=[0]);m[h++]=p,b[0]?b[w++]=M[C]||0:(b=[M[C]],w=1)}while((C++<k||null!=b[0])&&E--);d=null!=b[0],m[0]||m.splice(0,1)}if(1e14==u){for(h=1,E=m[0];10<=E;E/=10,h++);V(v,a+(v.e=h+14*f-1)+1,l,d)}else v.e=f,v.r=+d;return v}}(),b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,S=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,k=/^\s*\+(?=[\w.])|^\s+|\s+$/g,v=function(t,e,n,r){var o,i=n?e:e.replace(k,"");if(C.test(i))t.s=isNaN(i)?null:i<0?-1:1,t.c=t.e=null;else{if(!n&&(i=i.replace(b,function(t,e,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?t:e}),r&&(o=r,i=i.replace(w,"$1").replace(S,"0.$1")),e!=i))return new H(i,o);if(H.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+e);t.c=t.e=t.s=null}},O.absoluteValue=O.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},O.comparedTo=function(t,e){return f(this,new H(t,e))},O.decimalPlaces=O.dp=function(t,e){var n,r,o;if(null!=t)return h(t,0,1e9),null==e?e=E:h(e,0,8),V(new H(this),t+this.e+1,e);if(!(n=this.c))return null;if(r=((o=n.length-1)-s(this.e/14))*14,o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},O.dividedBy=O.div=function(t,e){return n(this,new H(t,e),P,E)},O.dividedToIntegerBy=O.idiv=function(t,e){return n(this,new H(t,e),0,1)},O.exponentiatedBy=O.pow=function(t,e){var n,r,l,u,s,c,f,h,p=this;if((t=new H(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+F(t));if(null!=e&&(e=new H(e)),s=14<t.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return h=new H(Math.pow(+F(p),s?2-d(t):+F(t))),e?h.mod(e):h;if(c=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(r=!c&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(9<t.e&&(0<p.e||p.e<-1||(0==p.e?1<p.c[0]||s&&24e7<=p.c[1]:p.c[0]<8e13||s&&p.c[0]<=9999975e7)))return p.s<0&&d(t),u=-0,-1<p.e&&(u=1/u),new H(c?1/u:u);x&&(u=o(x/14+2))}for(f=s?(n=new H(.5),c&&(t.s=1),d(t)):(l=Math.abs(+F(t)))%2,h=new H(R);;){if(f){if(!(h=h.times(p)).c)break;u?h.c.length>u&&(h.c.length=u):r&&(h=h.mod(e))}if(l){if(0===(l=i(l/2)))break;f=l%2}else if(V(t=t.times(n),t.e+1,1),14<t.e)f=d(t);else{if(0==(l=+F(t)))break;f=l%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):r&&(p=p.mod(e))}return r?h:(c&&(h=R.div(h)),e?h.mod(e):u?V(h,x,E,void 0):h)},O.integerValue=function(t){var e=new H(this);return null==t?t=E:h(t,0,8),V(e,e.e+1,t)},O.isEqualTo=O.eq=function(t,e){return 0===f(this,new H(t,e))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(t,e){return 0<f(this,new H(t,e))},O.isGreaterThanOrEqualTo=O.gte=function(t,e){return 1===(e=f(this,new H(t,e)))||0===e},O.isInteger=function(){return!!this.c&&s(this.e/14)>this.c.length-2},O.isLessThan=O.lt=function(t,e){return 0>f(this,new H(t,e))},O.isLessThanOrEqualTo=O.lte=function(t,e){return -1===(e=f(this,new H(t,e)))||0===e},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return 0<this.s},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(t,e){var n,r,o,i,a=this.s;if(e=(t=new H(t,e)).s,!a||!e)return new H(NaN);if(a!=e)return t.s=-e,this.plus(t);var l=this.e/14,u=t.e/14,c=this.c,f=t.c;if(!l||!u){if(!c||!f)return c?(t.s=-e,t):new H(f?this:NaN);if(!c[0]||!f[0])return f[0]?(t.s=-e,t):new H(c[0]?this:-0)}if(l=s(l),u=s(u),c=c.slice(),a=l-u){for((o=(i=a<0)?(a=-a,c):(u=l,f)).reverse(),e=a;e--;o.push(0));o.reverse()}else for(r=(i=(a=c.length)<(e=f.length))?a:e,a=e=0;e<r;e++)if(c[e]!=f[e]){i=c[e]<f[e];break}if(i&&(o=c,c=f,f=o,t.s=-t.s),0<(e=(r=f.length)-(n=c.length)))for(;e--;c[n++]=0);for(e=1e14-1;a<r;){if(c[--r]<f[r]){for(n=r;n&&!c[--n];c[n]=e);--c[n],c[r]+=1e14}c[r]-=f[r]}for(;0==c[0];c.splice(0,1),--u);return c[0]?U(t,c,u):(t.s=3==E?-1:1,t.c=[t.e=0],t)},O.modulo=O.mod=function(t,e){var r,o;return t=new H(t,e),this.c&&t.s&&(!t.c||t.c[0])?t.c&&(!this.c||this.c[0])?(9==I?(o=t.s,t.s=1,r=n(this,t,0,3),t.s=o,r.s*=o):r=n(this,t,0,I),(t=this.minus(r.times(t))).c[0]||1!=I||(t.s=this.s),t):new H(this):new H(NaN)},O.multipliedBy=O.times=function(t,e){var n,r,o,i,a,l,u,c,f,h,d,p,y,g=this.c,v=(t=new H(t,e)).c;if(!(g&&v&&g[0]&&v[0]))return this.s&&t.s&&(!g||g[0]||v)&&(!v||v[0]||g)?(t.s*=this.s,g&&v?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(r=s(this.e/14)+s(t.e/14),t.s*=this.s,(u=g.length)<(h=v.length)&&(y=g,g=v,v=y,o=u,u=h,h=o),o=u+h,y=[];o--;y.push(0));for(o=h;0<=--o;){for(n=0,d=v[o]%1e7,p=v[o]/1e7|0,i=o+(a=u);o<i;)n=((c=d*(c=g[--a]%1e7)+(l=p*c+(f=g[a]/1e7|0)*d)%1e7*1e7+y[i]+n)/1e14|0)+(l/1e7|0)+p*f,y[i--]=c%1e14;y[i]=n}return n?++r:y.splice(0,1),U(t,y,r)},O.negated=function(){var t=new H(this);return t.s=-t.s||null,t},O.plus=function(t,e){var n,r=this.s;if(e=(t=new H(t,e)).s,!r||!e)return new H(NaN);if(r!=e)return t.s=-e,this.minus(t);var o=this.e/14,i=t.e/14,a=this.c,l=t.c;if(!o||!i){if(!a||!l)return new H(r/0);if(!a[0]||!l[0])return l[0]?t:new H(a[0]?this:0*r)}if(o=s(o),i=s(i),a=a.slice(),r=o-i){for((n=0<r?(i=o,l):(r=-r,a)).reverse();r--;n.push(0));n.reverse()}for((r=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=r),r=0;e;)r=(a[--e]=a[e]+l[e]+r)/1e14|0,a[e]=1e14===a[e]?0:a[e]%1e14;return r&&(a=[r].concat(a),++i),U(t,a,i)},O.precision=O.sd=function(t,e){var n,r,o;if(null!=t&&!!t!==t)return h(t,1,1e9),null==e?e=E:h(e,0,8),V(new H(this),t,e);if(!(n=this.c))return null;if(r=14*(o=n.length-1)+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];10<=o;o/=10,r++);}return t&&this.e+1>r&&(r=this.e+1),r},O.shiftedBy=function(t){return h(t,-9007199254740991,9007199254740991),this.times("1e"+t)},O.squareRoot=O.sqrt=function(){var t,e,r,o,i,a=this.c,l=this.s,u=this.e,f=P+4,h=new H("0.5");if(1!==l||!a||!a[0])return new H(!l||l<0&&(!a||a[0])?NaN:a?this:1/0);if((r=0==(l=Math.sqrt(+F(this)))||l==1/0?(((e=c(a)).length+u)%2==0&&(e+="0"),l=Math.sqrt(+e),u=s((u+1)/2)-(u<0||u%2),new H(e=l==1/0?"1e"+u:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+u)):new H(l+"")).c[0]){for((l=(u=r.e)+f)<3&&(l=0);;)if(i=r,r=h.times(i.plus(n(this,i,f,1))),c(i.c).slice(0,l)===(e=c(r.c)).slice(0,l)){if(r.e<u&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(V(r,r.e+P+2,1),t=!r.times(r).eq(this));break}if(!o&&(V(i,i.e+P+2,0),i.times(i).eq(this))){r=i;break}f+=4,l+=4,o=1}}return V(r,r.e+P+1,E,t)},O.toExponential=function(t,e){return null!=t&&(h(t,0,1e9),t++),B(this,t,e,1)},O.toFixed=function(t,e){return null!=t&&(h(t,0,1e9),t=t+this.e+1),B(this,t,e)},O.toFormat=function(t,e,n){var r;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=D;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=this.toFixed(t,e),this.c){var o,i=r.split("."),l=+n.groupSize,u=+n.secondaryGroupSize,s=n.groupSeparator||"",c=i[0],f=i[1],h=this.s<0,d=h?c.slice(1):c,p=d.length;if(u&&(o=l,l=u,p-=u=o),0<l&&0<p){for(o=p%l||l,c=d.substr(0,o);o<p;o+=l)c+=s+d.substr(o,l);0<u&&(c+=s+d.slice(o)),h&&(c="-"+c)}r=f?c+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):c}return(n.prefix||"")+r+(n.suffix||"")},O.toFraction=function(t){var e,r,o,i,l,s,f,h,d,p,y,g,v=this.c;if(null!=t&&(!(f=new H(t)).isInteger()&&(f.c||1!==f.s)||f.lt(R)))throw Error(a+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+F(f));if(!v)return new H(this);for(e=new H(R),d=r=new H(R),o=h=new H(R),g=c(v),l=e.e=g.length-this.e-1,e.c[0]=u[(s=l%14)<0?14+s:s],t=!t||0<f.comparedTo(e)?0<l?e:d:f,s=A,A=1/0,f=new H(g),h.c[0]=0;p=n(f,e,0,1),1!=(i=r.plus(p.times(o))).comparedTo(t);)r=o,o=i,d=h.plus(p.times(i=d)),h=i,e=f.minus(p.times(i=e)),f=i;return i=n(t.minus(r),o,0,1),h=h.plus(i.times(d)),r=r.plus(i.times(o)),h.s=d.s=this.s,y=1>n(d,o,l*=2,E).minus(this).abs().comparedTo(n(h,r,l,E).minus(this).abs())?[d,o]:[h,r],A=s,y},O.toNumber=function(){return+F(this)},O.toPrecision=function(t,e){return null!=t&&h(t,1,1e9),B(this,t,e,2)},O.toString=function(t){var e,n=this,r=n.s,o=n.e;return null===o?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(e=null==t?o<=M||_<=o?p(c(n.c),o):y(c(n.c),o,"0"):10===t?y(c((n=V(new H(n),P+o+1,E)).c),n.e,"0"):(h(t,2,N.length,"Base"),g(y(c(n.c),o,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},O.valueOf=O.toJSON=function(){return F(this)},O._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(O[Symbol.toStringTag]="BigNumber",O[Symbol.for("nodejs.util.inspect.custom")]=O.valueOf),null!=e&&H.set(e),H}()).default=n.BigNumber=n,void 0!==e&&e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(this)},{}],2:[function(t,e,n){"use strict";e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=t("./globalState"),i=t("./validating"),a=t("./parsing"),l=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],u={general:{scale:1024,suffixes:l,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:l,marker:"d"}},s={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if("string"==typeof e&&(e=a.parseFormat(e)),!i.validateFormat(e))return"ERROR: invalid format";var r=e.prefix||"",l=e.postfix||"",c=function(t,e,n){var r,i,a,l,c,h,y,g,v,m,b,w,S,C,k,O,R,P,E,M,_,j,A,T,I,x,D,N;switch(e.output){case"currency":return O=e=p(e,o.currentCurrencyDefaultFormat()),R=o.currentCurrency(),P=Object.assign({},s,O),E=void 0,M="",_=!!P.totalLength||!!P.forceAverage||P.average,j=O.currencyPosition||R.position,A=O.currencySymbol||R.symbol,P.spaceSeparated&&(M=" "),"infix"===j&&(E=M+A+M),T=d({instance:t,providedFormat:O,state:o,decimalSeparator:E}),"prefix"===j&&(T=t._value<0&&"sign"===P.negative?"-".concat(M).concat(A).concat(T.slice(1)):A+M+T),j&&"postfix"!==j||(T=T+(M=_?"":M)+A),T;case"percent":return x=(I=e=p(e,o.currentPercentageDefaultFormat())).prefixSymbol,D=d({instance:n(100*t._value),providedFormat:I,state:o}),N=Object.assign({},s,I),x?"%".concat(N.spaceSeparated?" ":"").concat(D):"".concat(D).concat(N.spaceSeparated?" ":"","%");case"byte":return m=u[(v=e=p(e,o.currentByteDefaultFormat())).base||"binary"],w=(b=f(t._value,m.suffixes,m.scale)).value,S=b.suffix,C=d({instance:n(w),providedFormat:v,state:o,defaults:o.currentByteDefaultFormat()}),k=o.currentAbbreviations(),"".concat(C).concat(k.spaced?" ":"").concat(S);case"time":return e=p(e,o.currentTimeDefaultFormat()),h=Math.floor(t._value/60/60),y=Math.floor((t._value-60*h*60)/60),g=Math.round(t._value-60*h*60-60*y),"".concat(h,":").concat(y<10?"0":"").concat(y,":").concat(g<10?"0":"").concat(g);case"ordinal":return r=e=p(e,o.currentOrdinalDefaultFormat()),i=o.currentOrdinal(),a=Object.assign({},s,r),l=d({instance:t,providedFormat:r,state:o}),c=i(t._value),"".concat(l).concat(a.spaceSeparated?" ":"").concat(c);default:return d({instance:t,providedFormat:e,numbro:n})}}(t,e,n);return(c=r+c)+l}function f(t,e,n){var r=e[0],o=Math.abs(t);if(n<=o){for(var i=1;i<e.length;++i){var a=Math.pow(n,i),l=Math.pow(n,i+1);if(a<=o&&o<l){r=e[i],t/=a;break}}r===e[0]&&(t/=Math.pow(n,e.length-1),r=e[e.length-1])}return{value:t,suffix:r}}function h(t){for(var e="",n=0;n<t;n++)e+="0";return e}function d(t){var e,n,i,a,l,u,c,f,d,p=t.instance,y=t.providedFormat,g=t.state,v=void 0===g?o:g,m=t.decimalSeparator,b=t.defaults,w=void 0===b?v.currentDefaults():b,S=p._value;if(0===S&&v.hasZeroFormat())return v.getZeroFormat();if(!isFinite(S))return S.toString();var C,k,O,R,P,E,M,_,j=Object.assign({},s,w,y),A=j.totalLength,T=A?0:j.characteristic,I=j.optionalCharacteristic,x=j.forceAverage,D=!!A||!!x||j.average,N=A?-1:D&&void 0===y.mantissa?0:j.mantissa,H=!A&&(void 0===y.optionalMantissa?-1===N:j.optionalMantissa),B=j.trimMantissa,L=j.thousandSeparated,U=j.spaceSeparated,V=j.negative,F=j.forceSign,W=j.exponential,z="";if(D){var Y,G,K,q,Z,$,X,J,Q,tt,te=(G=(Y={value:S,forceAverage:x,abbreviations:v.currentAbbreviations(),spaceSeparated:U,totalLength:A}).value,K=Y.forceAverage,q=Y.abbreviations,Z=Y.spaceSeparated,X=void 0===($=Y.totalLength)?0:$,J="",tt=-1,(Q=Math.abs(G))>=1e12&&!K||"trillion"===K?(J=q.trillion,G/=1e12):Q<1e12&&Q>=1e9&&!K||"billion"===K?(J=q.billion,G/=1e9):Q<1e9&&Q>=1e6&&!K||"million"===K?(J=q.million,G/=1e6):(Q<1e6&&Q>=1e3&&!K||"thousand"===K)&&(J=q.thousand,G/=1e3),J&&(J=(void 0!==Z&&Z?" ":"")+J),X&&(tt=Math.max(X-G.toString().split(".")[0].length,0)),{value:G,abbreviation:J,mantissaPrecision:tt});S=te.value,z+=te.abbreviation,A&&(N=te.mantissaPrecision)}if(W){var tn=(k=(C={value:S,characteristicPrecision:T}).value,R=void 0===(O=C.characteristicPrecision)?0:O,E=(P=r(k.toExponential().split("e"),2))[0],M=P[1],_=+E,R&&1<R&&(_*=Math.pow(10,R-1),M=0<=(M=+M-(R-1))?"+".concat(M):M),{value:_,abbreviation:"e".concat(M)});S=tn.value,z=tn.abbreviation+z}var tr,to,ti=function(t,e,n,o,i){if(-1===o)return t;var a=-1!==e.toString().indexOf("e")?function(t,e){var n=t.toString(),o=r(n.split("e"),2),i=o[0],a=o[1],l=r(i.split("."),2),u=l[0],s=l[1],c=void 0===s?"":s;if(0<+a)n=u+c+h(a-c.length);else{var f=".";f=0>+u?"-0".concat(f):"0".concat(f);var d=(h(-a-1)+Math.abs(u)+c).substr(0,e);d.length<e&&(d+=h(e-d.length)),n=f+d}return 0<+a&&0<e&&(n+=".".concat(h(e))),n}(e,o):(Math.round(+"".concat(e,"e+").concat(o))/Math.pow(10,o)).toFixed(o),l=r(a.toString().split("."),2),u=l[0],s=l[1],c=void 0===s?"":s;if(c.match(/^0+$/)&&(n||i))return u;var f=c.match(/0+$/);return i&&f?"".concat(u,".").concat(c.toString().slice(0,f.index)):a.toString()}(S.toString(),S,H,N,B);return e=ti=function(t,e,n,o){var i=t,a=r(i.toString().split("."),2),l=a[0],u=a[1];if(l.match(/^-?0$/)&&n)return u?"".concat(l.replace("0",""),".").concat(u):l.replace("0","");if(l.length<o)for(var s=o-l.length,c=0;c<s;c++)i="0".concat(i);return i.toString()}(ti,0,I,T),n=S,i=m,l=(a=v.currentDelimiters()).thousands,i=i||a.decimal,u=a.thousandsSize||3,f=(c=e.toString()).split(".")[0],d=c.split(".")[1],L&&(n<0&&(f=f.slice(1)),(function(t,e){for(var n=[],r=0,o=t;0<o;o--)r===e&&(n.unshift(o),r=0),r++;return n})(f.length,u).forEach(function(t,e){f=f.slice(0,t+e)+l+f.slice(t+e)}),n<0&&(f="-".concat(f))),ti=c=d?f+i+d:f,(D||W)&&(ti+=z),(F||S<0)&&(tr=ti,ti=0===(to=S)?tr:0==+tr?tr.replace("-",""):0<to?"+".concat(tr):"sign"===V?tr:"(".concat(tr.replace("-",""),")")),ti}function p(t,e){if(!t)return e;var n=Object.keys(t);return 1===n.length&&"output"===n[0]?e:t}e.exports=function(t){return{format:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return c.apply(void 0,n.concat([t]))},getByteUnit:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(function(t){var e=u.general;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(function(t){var e=u.binary;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(function(t){var e=u.decimal;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},formatOrDefault:p}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,n){"use strict";var r=t("./en-US"),o=t("./validating"),i=t("./parsing"),a={},l=void 0,u={},s=null,c={};function f(){return u[l]}a.languages=function(){return Object.assign({},u)},a.currentLanguage=function(){return l},a.currentCurrency=function(){return f().currency},a.currentAbbreviations=function(){return f().abbreviations},a.currentDelimiters=function(){return f().delimiters},a.currentOrdinal=function(){return f().ordinal},a.currentDefaults=function(){return Object.assign({},f().defaults,c)},a.currentOrdinalDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().ordinalFormat)},a.currentByteDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().byteFormat)},a.currentPercentageDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().percentageFormat)},a.currentCurrencyDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().currencyFormat)},a.currentTimeDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().timeFormat)},a.setDefaults=function(t){t=i.parseFormat(t),o.validateFormat(t)&&(c=t)},a.getZeroFormat=function(){return s},a.setZeroFormat=function(t){return s="string"==typeof t?t:null},a.hasZeroFormat=function(){return null!==s},a.languageData=function(t){if(t){if(u[t])return u[t];throw Error('Unknown tag "'.concat(t,'"'))}return f()},a.registerLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!o.validateLanguage(t))throw Error("Invalid language data");u[t.languageTag]=t,e&&(l=t.languageTag)},a.setLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:r.languageTag;if(!u[t]){var n=t.split("-")[0],o=Object.keys(u).find(function(t){return t.split("-")[0]===n});return u[o]?void(l=o):void(l=e)}l=t},a.registerLanguage(r),l=r.languageTag,e.exports=a},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,n){"use strict";e.exports=function(e){return{loadLanguagesInNode:function(n){n.forEach(function(n){var r=void 0;try{r=t("../languages/".concat(n))}catch(o){console.error('Unable to load "'.concat(n,'". No matching language file found.'))}r&&e.registerLanguage(r)})}}}},{}],6:[function(t,e,n){"use strict";var r=t("bignumber.js");function o(t,e,n){var o=new r(t._value),i=e;return n.isNumbro(e)&&(i=e._value),i=new r(i),t._value=o.minus(i).toNumber(),t}e.exports=function(t){return{add:function(e,n){var o,i,a;return i=new r((o=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new r(a),o._value=i.plus(a).toNumber(),o},subtract:function(e,n){return o(e,n,t)},multiply:function(e,n){var o,i,a;return i=new r((o=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new r(a),o._value=i.times(a).toNumber(),o},divide:function(e,n){var o,i,a;return i=new r((o=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new r(a),o._value=i.dividedBy(a).toNumber(),o},set:function(e,n){var r,o;return r=e,o=n,t.isNumbro(n)&&(o=n._value),r._value=o,r},difference:function(e,n){var r;return o(r=t(e._value),n,t),Math.abs(r._value)}}}},{"bignumber.js":1}],7:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=t("./globalState"),i=t("./validating"),a=t("./loading")(d),l=t("./unformatting"),u=t("./formatting")(d),s=t("./manipulating")(d),c=t("./parsing"),f=function(){var t,e;function n(t){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,n),this._value=t}return t=[{key:"clone",value:function(){return d(this._value)}},{key:"format",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return u.format(this,t)}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=c.parseFormat(t)),(t=u.formatOrDefault(t,o.currentCurrencyDefaultFormat())).output="currency",u.format(this,t)}},{key:"formatTime",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",u.format(this,t)}},{key:"binaryByteUnits",value:function(){return u.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return u.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return u.getByteUnit(this)}},{key:"difference",value:function(t){return s.difference(this,t)}},{key:"add",value:function(t){return s.add(this,t)}},{key:"subtract",value:function(t){return s.subtract(this,t)}},{key:"multiply",value:function(t){return s.multiply(this,t)}},{key:"divide",value:function(t){return s.divide(this,t)}},{key:"set",value:function(t){return s.set(this,h(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}],r(n.prototype,t),e&&r(n,e),n}();function h(t){var e=t;return d.isNumbro(t)?e=t._value:"string"==typeof t?e=d.unformat(t):isNaN(t)&&(e=NaN),e}function d(t){return new f(h(t))}d.version="2.1.2",d.isNumbro=function(t){return t instanceof f},d.language=o.currentLanguage,d.registerLanguage=o.registerLanguage,d.setLanguage=o.setLanguage,d.languages=o.languages,d.languageData=o.languageData,d.zeroFormat=o.setZeroFormat,d.defaultFormat=o.currentDefaults,d.setDefaults=o.setDefaults,d.defaultCurrencyFormat=o.currentCurrencyDefaultFormat,d.validate=i.validate,d.loadLanguagesInNode=a.loadLanguagesInNode,d.unformat=l.unformat,e.exports=d},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,n){"use strict";e.exports={parseFormat:function(t){var e,n,r,o,i,a,l,u,s,c,f,h,d,p,y,g,v,m,b,w,S=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(n=S,t=(r=(e=t).match(/^{([^}]*)}/))?(n.prefix=r[1],e.slice(r[0].length)):e,i=S,function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return -1!==t.indexOf("bd")?(e.output="byte",e.base="general"):-1!==t.indexOf("b")?(e.output="byte",e.base="binary"):-1!==t.indexOf("d")?(e.output="byte",e.base="decimal"):-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time";e.output="percent"}else e.output="currency"}(t=(a=(o=t).match(/{([^}]*)}$/))?(i.postfix=a[1],o.slice(0,-a[0].length)):o,S),l=S,(u=t.match(/[1-9]+[0-9]*/))&&(l.totalLength=+u[0]),s=S,(c=t.split(".")[0].match(/0+/))&&(s.characteristic=c[0].length),function(t,e){if(-1!==t.indexOf(".")){var n=t.split(".")[0];e.optionalCharacteristic=-1===n.indexOf("0")}}(t,S),f=S,-1!==t.indexOf("a")&&(f.average=!0),d=S,-1!==(h=t).indexOf("K")?d.forceAverage="thousand":-1!==h.indexOf("M")?d.forceAverage="million":-1!==h.indexOf("B")?d.forceAverage="billion":-1!==h.indexOf("T")&&(d.forceAverage="trillion"),function(t,e){var n=t.split(".")[1];if(n){var r=n.match(/0+/);r&&(e.mantissa=r[0].length)}}(t,S),y=S,(p=t).match(/\[\.]/)?y.optionalMantissa=!0:p.match(/\./)&&(y.optionalMantissa=!1),g=S,-1!==t.indexOf(",")&&(g.thousandSeparated=!0),v=S,-1!==t.indexOf(" ")&&(v.spaceSeparated=!0),b=S,(m=t).match(/^\+?\([^)]*\)$/)&&(b.negative="parenthesis"),m.match(/^\+?-/)&&(b.negative="sign"),w=S,t.match(/^\+/)&&(w.forceSign=!0),S)}}},{}],9:[function(t,e,n){"use strict";var r=[{key:"ZiB",factor:11805916207174113e5},{key:"ZB",factor:1e21},{key:"YiB",factor:12089258196146292e8},{key:"YB",factor:1e24},{key:"TiB",factor:1099511627776},{key:"TB",factor:1e12},{key:"PiB",factor:0x4000000000000},{key:"PB",factor:1e15},{key:"MiB",factor:1048576},{key:"MB",factor:1e6},{key:"KiB",factor:1024},{key:"KB",factor:1e3},{key:"GiB",factor:1073741824},{key:"GB",factor:1e9},{key:"EiB",factor:0x1000000000000000},{key:"EB",factor:1e18},{key:"B",factor:1}];function o(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}e.exports={unformat:function(e,n){var i,a,l,u=t("./globalState"),s=u.currentDelimiters(),c=u.currentCurrency().symbol,f=u.currentOrdinal(),h=u.getZeroFormat(),d=u.currentAbbreviations(),p=void 0;if("string"==typeof e)p=!function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var n=t.split(":");if(3!==n.length)return!1;var r=+n[0],o=+n[1],i=+n[2];return!isNaN(r)&&!isNaN(o)&&!isNaN(i)}(e,s)?function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,l=5<arguments.length?arguments[5]:void 0,u=6<arguments.length?arguments[6]:void 0;if(""!==t)return t===a?0:function t(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length?arguments[3]:void 0,l=4<arguments.length?arguments[4]:void 0,u=5<arguments.length?arguments[5]:void 0,s=6<arguments.length?arguments[6]:void 0;if(!isNaN(+e))return+e;var c="",f=e.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(f!==e)return -1*t(f,n,i,a,l,u,s);for(var h=0;h<r.length;h++){var d=r[h];if((c=e.replace(d.key,""))!==e)return t(c,n,i,a,l,u,s)*d.factor}if((c=e.replace("%",""))!==e)return t(c,n,i,a,l,u,s)/100;var p=parseFloat(e);if(!isNaN(p)){var y=a(p);if(y&&"."!==y&&(c=e.replace(RegExp("".concat(o(y),"$")),""))!==e)return t(c,n,i,a,l,u,s);var g={};Object.keys(u).forEach(function(t){g[u[t]]=t});for(var v=Object.keys(g).sort().reverse(),m=v.length,b=0;b<m;b++){var w=v[b],S=g[w];if((c=e.replace(w,""))!==e){var C=void 0;switch(S){case"thousand":C=1e3;break;case"million":C=1e6;break;case"billion":C=1e9;break;case"trillion":C=1e12}return t(c,n,i,a,l,u,s)*C}}}}(function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=t.replace(n,"");return(r=r.replace(RegExp("([0-9])".concat(o(e.thousands),"([0-9])"),"g"),"$1$2")).replace(e.decimal,".")}(t,e,n),e,n,i,a,l,u)}(e,s,c,f,h,d,n):(a=+(i=e.split(":"))[0],l=+i[1],+i[2]+60*l+3600*a);else{if("number"!=typeof e)return;p=e}if(void 0!==p)return p}}},{"./globalState":4}],10:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./unformatting"),i=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,a={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return 0<=t},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},l={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(i)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function u(t){return!!o.unformat(t)}function s(t,e,n){var o,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],l=Object.keys(t).map(function(o){if(!e[o])return console.error("".concat(n," Invalid key: ").concat(o)),!1;var i=t[o],l=e[o];if("string"==typeof l&&(l={type:l}),"format"===l.type){if(!s(i,a,"[Validate ".concat(o,"]"),!0))return!1}else if(r(i)!==l.type)return console.error("".concat(n," ").concat(o,' type mismatched: "').concat(l.type,'" expected, "').concat(r(i),'" provided')),!1;if(l.restrictions&&l.restrictions.length)for(var u=l.restrictions.length,c=0;c<u;c++){var f=l.restrictions[c],h=f.restriction,d=f.message;if(!h(i,t))return console.error("".concat(n," ").concat(o," invalid value: ").concat(d)),!1}return l.restriction&&!l.restriction(i,t)?(console.error("".concat(n," ").concat(o," invalid value: ").concat(l.message)),!1):l.validValues&&-1===l.validValues.indexOf(i)?(console.error("".concat(n," ").concat(o," invalid value: must be among ").concat(JSON.stringify(l.validValues),', "').concat(i,'" provided')),!1):!l.children||!!s(i,l.children,"[Validate ".concat(o,"]"))});return i||l.push.apply(l,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(o=Object.keys(e).map(function(r){var o=e[r];if("string"==typeof o&&(o={type:o}),o.mandatory){var i=o.mandatory;if("function"==typeof i&&(i=i(t)),i&&void 0===t[r])return console.error("".concat(n,' Missing mandatory key "').concat(r,'"')),!1}return!0}))||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),l.reduce(function(t,e){return t&&e},!0)}function c(t){return s(t,a,"[Validate format]")}e.exports={validate:function(t,e){var n=u(t),r=c(e);return n&&r},validateFormat:c,validateInput:u,validateLanguage:function(t){return s(t,l,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)},t.exports=e()},4319:function(t,e,n){!function(e,r){"use strict";var o;try{o=n(381)}catch(i){}t.exports=r(o)}(0,function(t){"use strict";var e="function"==typeof t,n=!!window.addEventListener,r=window.document,o=window.setTimeout,i=function(t,e,r,o){n?t.addEventListener(e,r,!!o):t.attachEvent("on"+e,r)},a=function(t,e,r,o){n?t.removeEventListener(e,r,!!o):t.detachEvent("on"+e,r)},l=function(t,e){return -1!==(" "+t.className+" ").indexOf(" "+e+" ")},u=function(t,e){l(t,e)||(t.className=""===t.className?e:t.className+" "+e)},s=function(t,e){var n;t.className=(n=(" "+t.className+" ").replace(" "+e+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,"")},c=function(t){return/Array/.test(Object.prototype.toString.call(t))},f=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},h=function(t){var e=t.getDay();return 0===e||6===e},d=function(t,e){return[31,t%4==0&&t%100!=0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e]},p=function(t){f(t)&&t.setHours(0,0,0,0)},y=function(t,e){return t.getTime()===e.getTime()},g=function(t,e,n){var r,o;for(r in e)(o=void 0!==t[r])&&"object"==typeof e[r]&&null!==e[r]&&void 0===e[r].nodeName?f(e[r])?n&&(t[r]=new Date(e[r].getTime())):c(e[r])?n&&(t[r]=e[r].slice(0)):t[r]=g({},e[r],n):(n||!o)&&(t[r]=e[r]);return t},v=function(t,e,n){var o;r.createEvent?((o=r.createEvent("HTMLEvents")).initEvent(e,!0,!1),o=g(o,n),t.dispatchEvent(o)):r.createEventObject&&(o=g(o=r.createEventObject(),n),t.fireEvent("on"+e,o))},m=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},b={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},w=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},S=function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},C=function(t,e){t.setHours(0,0,0,0);var n=t.getDate(),r=t.getDay(),o=e-1,i=function(t){return(t+7-1)%7};t.setDate(n+o-i(r));var a=new Date(t.getFullYear(),0,e);return 1+Math.round(((t.getTime()-a.getTime())/864e5-o+i(a.getDay()))/7)},k=function(n,r,o,i){var a=new Date(o,r,n);return'<td class="pika-week">'+(e?t(a).isoWeek():C(a,i))+"</td>"},O=function(t){var e,n=[];for(t.showWeekNumber&&n.push("<th></th>"),e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+w(t,e)+'">'+w(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"},R=function(t,e,n,r,o,i){var a,l,u,s,f,h=t._o,d=n===h.minYear,p=n===h.maxYear,y='<div id="'+i+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,v=!0;for(u=[],a=0;a<12;a++)u.push('<option value="'+(n===o?a-e:12+a-e)+'"'+(a===r?' selected="selected"':"")+(d&&a<h.minMonth||p&&a>h.maxMonth?' disabled="disabled"':"")+">"+h.i18n.months[a]+"</option>");for(s='<div class="pika-label">'+h.i18n.months[r]+'<select class="pika-select pika-select-month" tabindex="-1">'+u.join("")+"</select></div>",c(h.yearRange)?(a=h.yearRange[0],l=h.yearRange[1]+1):(a=n-h.yearRange,l=1+n+h.yearRange),u=[];a<l&&a<=h.maxYear;a++)a>=h.minYear&&u.push('<option value="'+a+'"'+(a===n?' selected="selected"':"")+">"+a+"</option>");return f='<div class="pika-label">'+n+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+u.join("")+"</select></div>",h.showMonthAfterYear?y+=f+s:y+=s+f,d&&(0===r||h.minMonth>=r)&&(g=!1),p&&(11===r||h.maxMonth<=r)&&(v=!1),0===e&&(y+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(y+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),y+"</div>"},P=function(a){var u=this,s=u.config(a);u._onMouseDown=function(t){if(u._v){var e=(t=t||window.event).target||t.srcElement;if(e){if(!l(e,"is-disabled")&&(!l(e,"pika-button")||l(e,"is-empty")||l(e.parentNode,"is-disabled")?l(e,"pika-prev")?u.prevMonth():l(e,"pika-next")&&u.nextMonth():(u.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),s.bound&&o(function(){u.hide(),s.blurFieldOnSelect&&s.field&&s.field.blur()},100))),l(e,"pika-select"))u._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},u._onChange=function(t){var e=(t=t||window.event).target||t.srcElement;e&&(l(e,"pika-select-month")?u.gotoMonth(e.value):l(e,"pika-select-year")&&u.gotoYear(e.value))},u._onKeyChange=function(t){if(t=t||window.event,u.isVisible())switch(t.keyCode){case 13:case 27:s.field&&s.field.blur();break;case 37:u.adjustDate("subtract",1);break;case 38:u.adjustDate("subtract",7);break;case 39:u.adjustDate("add",1);break;case 40:u.adjustDate("add",7);break;case 8:case 46:u.setDate(null)}},u._parseFieldValue=function(){if(s.parse)return s.parse(s.field.value,s.format);if(!e)return new Date(Date.parse(s.field.value));var n=t(s.field.value,s.format,s.formatStrict);return n&&n.isValid()?n.toDate():null},u._onInputChange=function(t){var e;t.firedBy!==u&&(e=u._parseFieldValue(),f(e)&&u.setDate(e),u._v||u.show())},u._onInputFocus=function(){u.show()},u._onInputClick=function(){u.show()},u._onInputBlur=function(){var t=r.activeElement;do if(l(t,"pika-single"))return;while(t=t.parentNode);u._c||(u._b=o(function(){u.hide()},50)),u._c=!1},u._onClick=function(t){var e=(t=t||window.event).target||t.srcElement,r=e;if(e){!n&&l(e,"pika-select")&&!e.onchange&&(e.setAttribute("onchange","return;"),i(e,"change",u._onChange));do if(l(r,"pika-single")||r===s.trigger)return;while(r=r.parentNode);u._v&&e!==s.trigger&&r!==s.trigger&&u.hide()}},u.el=r.createElement("div"),u.el.className="pika-single"+(s.isRTL?" is-rtl":"")+(s.theme?" "+s.theme:""),i(u.el,"mousedown",u._onMouseDown,!0),i(u.el,"touchend",u._onMouseDown,!0),i(u.el,"change",u._onChange),s.keyboardInput&&i(r,"keydown",u._onKeyChange),s.field&&(s.container?s.container.appendChild(u.el):s.bound?r.body.appendChild(u.el):s.field.parentNode.insertBefore(u.el,s.field.nextSibling),i(s.field,"change",u._onInputChange),s.defaultDate||(s.defaultDate=u._parseFieldValue(),s.setDefaultDate=!0));var c=s.defaultDate;f(c)?s.setDefaultDate?u.setDate(c,!0):u.gotoDate(c):u.gotoDate(new Date),s.bound?(this.hide(),u.el.className+=" is-bound",i(s.trigger,"click",u._onInputClick),i(s.trigger,"focus",u._onInputFocus),i(s.trigger,"blur",u._onInputBlur)):this.show()};return P.prototype={config:function(t){this._o||(this._o=g({},b,!0));var e=g(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,f(e.minDate)||(e.minDate=!1),f(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),c(e.yearRange)){var r=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||r,e.yearRange[1]=parseInt(e.yearRange[1],10)||r}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||b.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return(n=n||this._o.format,f(this._d))?this._o.toString?this._o.toString(this._d,n):e?t(this._d).format(n):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(n,r){e&&t.isMoment(n)&&this.setDate(n.toDate(),r)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),f(t)){var n=this._o.minDate,r=this._o.maxDate;f(n)&&t<n?t=n:f(r)&&t>r&&(t=r),this._d=new Date(t.getTime()),p(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(t){var e=!0;if(f(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=t.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),e=o<n.getTime()||r.getTime()<o}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){var n,r=this.getDate()||new Date,o=864e5*parseInt(e);"add"===t?n=new Date(r.valueOf()+o):"subtract"===t&&(n=new Date(r.valueOf()-o)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=m(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=m({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(p(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=b.minDate,this._o.minYear=b.minYear,this._o.minMonth=b.minMonth,this._o.startRange=b.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(p(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=b.maxDate,this._o.maxYear=b.maxYear,this._o.maxMonth=b.maxMonth,this._o.endRange=b.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e,n=this._o,r=n.minYear,i=n.maxYear,a=n.minMonth,l=n.maxMonth,u="";this._y<=r&&(this._y=r,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=i&&(this._y=i,!isNaN(l)&&this._m>l&&(this._m=l));for(var s=0;s<n.numberOfMonths;s++)e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),u+='<div class="pika-lendar">'+R(this,s,this.calendars[s].year,this.calendars[s].month,this.calendars[0].year,e)+this.render(this.calendars[s].year,this.calendars[s].month,e)+"</div>";this.el.innerHTML=u,n.bound&&"hidden"!==n.field.type&&o(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var t,e,n,o,i,a,l,c,f,h,d,p;if(!this._o.container){if(this.el.style.position="absolute",e=t=this._o.trigger,n=this.el.offsetWidth,o=this.el.offsetHeight,i=window.innerWidth||r.documentElement.clientWidth,a=window.innerHeight||r.documentElement.clientHeight,l=window.pageYOffset||r.body.scrollTop||r.documentElement.scrollTop,d=!0,p=!0,"function"==typeof t.getBoundingClientRect)c=(h=t.getBoundingClientRect()).left+window.pageXOffset,f=h.bottom+window.pageYOffset;else for(c=e.offsetLeft,f=e.offsetTop+e.offsetHeight;e=e.offsetParent;)c+=e.offsetLeft,f+=e.offsetTop;(this._o.reposition&&c+n>i||this._o.position.indexOf("right")>-1&&c-n+t.offsetWidth>0)&&(c=c-n+t.offsetWidth,d=!1),(this._o.reposition&&f+o>a+l||this._o.position.indexOf("top")>-1&&f-o-t.offsetHeight>0)&&(f=f-o-t.offsetHeight,p=!1),this.el.style.left=c+"px",this.el.style.top=f+"px",u(this.el,d?"left-aligned":"right-aligned"),u(this.el,p?"bottom-aligned":"top-aligned"),s(this.el,d?"right-aligned":"left-aligned"),s(this.el,p?"top-aligned":"bottom-aligned")}},render:function(t,e,n){var r=this._o,o=new Date,i=d(t,e),a=new Date(t,e,1).getDay(),l=[],u=[];p(o),r.firstDay>0&&(a-=r.firstDay)<0&&(a+=7);for(var s=0===e?11:e-1,c=11===e?0:e+1,g=0===e?t-1:t,v=11===e?t+1:t,m=d(g,s),b=i+a,w=b;w>7;)w-=7;b+=7-w;for(var C=!1,R=0,P=0;R<b;R++){var E,M,_=new Date(t,e,1+(R-a)),j=!!f(this._d)&&y(_,this._d),A=y(_,o),T=-1!==r.events.indexOf(_.toDateString()),I=R<a||R>=i+a,x=1+(R-a),D=e,N=t,H=r.startRange&&y(r.startRange,_),B=r.endRange&&y(r.endRange,_),L=r.startRange&&r.endRange&&r.startRange<_&&_<r.endRange,U=r.minDate&&_<r.minDate||r.maxDate&&_>r.maxDate||r.disableWeekends&&h(_)||r.disableDayFn&&r.disableDayFn(_);I&&(R<a?(x=m+x,D=s,N=g):(x-=i,D=c,N=v));var V={day:x,month:D,year:N,hasEvent:T,isSelected:j,isToday:A,isDisabled:U,isEmpty:I,isStartRange:H,isEndRange:B,isInRange:L,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:r.enableSelectionDaysInNextAndPreviousMonths};r.pickWholeWeek&&j&&(C=!0),u.push(S(V)),7==++P&&(r.showWeekNumber&&u.unshift(k(R-a,e,t,r.firstWeekOfYearMinDays)),l.push((E=u,M=r.isRTL,'<tr class="pika-row'+(r.pickWholeWeek?" pick-whole-week":"")+(C?" is-selected":"")+'">'+(M?E.reverse():E).join("")+"</tr>")),u=[],P=0,C=!1)}return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+O(r)+"<tbody>"+l.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),s(this.el,"is-hidden"),this._o.bound&&(i(r,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;!1!==t&&(this._o.bound&&a(r,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),u(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var t=this._o;this.hide(),a(this.el,"mousedown",this._onMouseDown,!0),a(this.el,"touchend",this._onMouseDown,!0),a(this.el,"change",this._onChange),t.keyboardInput&&a(r,"keydown",this._onKeyChange),t.field&&(a(t.field,"change",this._onInputChange),t.bound&&(a(t.trigger,"click",this._onInputClick),a(t.trigger,"focus",this._onInputFocus),a(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},P})},2838:function(t,e,n){"use strict";n.r(e),n.d(e,{registerAllCellTypes:function(){return ek},registerAllEditors:function(){return tX},registerAllModules:function(){return yE},registerAllPlugins:function(){return yP},registerAllRenderers:function(){return eo},registerAllValidators:function(){return eh}}),n(6992),n(1539),n(8783),n(4129),n(3948),n(2772),n(2707),n(9826),n(4916),n(5306),n(7327),n(6649),n(6078),n(2526),n(1817),n(9653),n(8304),n(489),n(2419),n(4819),n(5003),n(2165);var r,o,i,a,l,u,s,c,f,h,d,p,y,g,v,m,b,w,S,C,k,O,R,P,E,M,_,j=n(631),A=n(766),T=n(8539),I=n(7772),x=n(4020);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==D(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==D(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===D(e)?e:String(e)}(r.key),r)}}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function B(t,e){return(B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var U="handsontableEditor",V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=L(i);if(e){var r=L(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"EDITOR_TYPE",get:function(){return"handsontable"}}],n=[{key:"open",value:function(){H(L(i.prototype),"open",this).call(this),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),(0,A.Mq)(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}},{key:"close",value:function(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),H(L(i.prototype),"close",this).call(this)}},{key:"prepare",value:function(t,e,n,r,o,a){H(L(i.prototype),"prepare",this).call(this,t,e,n,r,o,a);var l=this,u={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,afterOnCellMouseDown:function(t,e){var n=this.getSourceData(e.row,e.col);void 0!==n&&l.setValue(n),l.instance.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&(0,I.l7)(u,a.handsontable),this.htOptions=u}},{key:"beginEditing",value:function(t,e){var n=this.hot.getSettings().onBeginEditing;n&&!1===n()||H(L(i.prototype),"beginEditing",this).call(this,t,e)}},{key:"createElements",value:function(){H(L(i.prototype),"createElements",this).call(this);var t=this.hot.rootDocument.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()}},{key:"finishEditing",value:function(t,e,n){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){var r=this.htEditor.getInstance().getValue();void 0!==r&&this.setValue(r)}H(L(i.prototype),"finishEditing",this).call(this,t,e,n)}},{key:"assignHooks",value:function(){var t=this;this.hot.addHook("afterDestroy",function(){t.htEditor&&t.htEditor.destroy()})}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor");H(L(i.prototype),"registerShortcuts",this).call(this);var n={group:U,relativeToGroup:x.HJ,position:"before"},r=function(e,n){var r=t.htEditor.getInstance();if(void 0!==e&&(e<0||r.flipped&&e>r.countRows()-1?r.deselectCell():r.selectCell(e,0),r.getData().length))return n.preventDefault(),(0,T.mM)(n),t.hot.listen(),t.TEXTAREA.focus(),!1};e.addShortcuts([{keys:[["ArrowUp"]],callback:function(e){var n,o=t.htEditor.getInstance();return!o.getSelectedLast()&&o.flipped?n=o.countRows()-1:o.getSelectedLast()&&(n=o.flipped?Math.max(0,o.getSelectedLast()[0]-1):o.getSelectedLast()[0]-1),r(n,e)},preventDefault:!1},{keys:[["ArrowDown"]],callback:function(e){var n,o=t.htEditor.getInstance();return o.getSelectedLast()||o.flipped?o.getSelectedLast()&&(o.flipped?n=o.getSelectedLast()[0]+1:o.flipped||(n=Math.min(o.countRows()-1,o.getSelectedLast()[0]+1))):n=0,r(n,e)},preventDefault:!1}],n)}},{key:"unregisterShortcuts",value:function(){H(L(i.prototype),"unregisterShortcuts",this).call(this),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(U)}}],N(i.prototype,n),r&&N(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(j.H),F=n(613),W=n(1799),z=n(9272),Y=n(1975),G=n(337);function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q(r.key),r)}}function Z(){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function $(t,e){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function X(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==K(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===K(e)?e:String(e)}var tt=new WeakMap,te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=J(i);if(e){var r=J(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===K(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return X(t)}(this,t)});function i(t){var e,n,r,a;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=X(e=o.call(this,t)),r="sortByRelevance",a=function(t,e,n){var r,o,i,a,l=[],u=[],s=t.length,c=e.length;if(0===s){for(i=0;i<c;i++)u.push(i);return u}for(i=0;i<c;i++){if(o=(0,z.oN)((0,W.Pz)(e[i])),n)a=o.indexOf(t);else{var f=this.cellProperties.locale;a=o.toLocaleLowerCase(f).indexOf(t.toLocaleLowerCase(f))}-1!==a&&(r=o.length-a-s,l.push({baseIndex:i,index:a,charsLeft:r,value:o}))}for(l.sort(function(t,e){if(-1===e.index)return -1;if(-1===t.index)return 1;if(t.index<e.index)return -1;if(e.index<t.index)return 1;if(t.index===e.index){if(t.charsLeft<e.charsLeft)return -1;if(t.charsLeft>e.charsLeft)return 1}return 0}),i=0,c=l.length;i<c;i++)u.push(l[i].baseIndex);return u},(r=Q(r))in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,e.query=null,e.strippedChoices=[],e.rawChoices=[],tt.set(X(e),{skipOne:!1,isMacOS:e.hot.rootWindow.navigator.platform.indexOf("Mac")>-1}),e}return r=[{key:"EDITOR_TYPE",get:function(){return"autocomplete"}}],n=[{key:"getValue",value:function(){var t=this,e=this.rawChoices.find(function(e){return t.stripValueIfNeeded(e)===t.TEXTAREA.value});return(0,W.$K)(e)?e:this.TEXTAREA.value}},{key:"createElements",value:function(){Z(J(i.prototype),"createElements",this).call(this),(0,A.cn)(this.htContainer,"autocompleteEditor"),(0,A.cn)(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll")}},{key:"open",value:function(){var t=this,e=tt.get(this);Z(J(i.prototype),"open",this).call(this);var n=this.htEditor.getInstance(),r=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.showEditableElement(),this.focus();var o=(0,A.np)();0===o&&e.isMacOS&&(o+=15),this.addHook("beforeKeyDown",function(e){return t.onBeforeKeyDown(e)}),n.updateSettings({colWidths:r?[(0,A.iO)(this.TEXTAREA)-2]:void 0,width:r?(0,A.iO)(this.TEXTAREA)+o:void 0,renderer:function(e,n,r,o,i,a,l){(0,G.V)(e,n,r,o,i,a,l);var u,s,c=t.cellProperties,f=c.filteringCaseSensitive,h=c.allowHtml,d=c.locale,p=t.query,y=(0,W.Pz)(a);y&&!h&&-1!==(u=!0===f?y.indexOf(p):y.toLocaleLowerCase(d).indexOf(p.toLocaleLowerCase(d)))&&(s=y.substr(u,p.length),y=y.replace(s,"<strong>".concat(s,"</strong>"))),n.innerHTML=y},autoColumnSize:!0}),e.skipOne&&(e.skipOne=!1),this.hot._registerTimeout(function(){t.queryChoices(t.TEXTAREA.value)})}},{key:"close",value:function(){this.removeHooksByKey("beforeKeyDown"),Z(J(i.prototype),"close",this).call(this)}},{key:"discardEditor",value:function(t){Z(J(i.prototype),"discardEditor",this).call(this,t),this.hot.view.render()}},{key:"queryChoices",value:function(t){var e=this,n=this.cellProperties.source;this.query=t,"function"==typeof n?n.call(this.cellProperties,t,function(t){e.rawChoices=t,e.updateChoicesList(e.stripValuesIfNeeded(t))}):Array.isArray(n)?(this.rawChoices=n,this.updateChoicesList(this.stripValuesIfNeeded(n))):this.updateChoicesList([])}},{key:"updateChoicesList",value:function(t){var e=(0,A.qK)(this.TEXTAREA),n=(0,A.kg)(this.TEXTAREA),r=this.cellProperties.sortByRelevance,o=this.cellProperties.filter,i=null,a=null,l=t;r&&(i=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));var u=Array.isArray(i)?i.length:0;if(!1===o)u&&(a=i[0]);else{for(var s=[],c=0,f=l.length;c<f&&(!r||!(u<=c));c++)u?s.push(l[i[c]]):s.push(l[c]);a=0,l=s}this.strippedChoices=l,this.htEditor.loadData((0,F.jz)([l])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(a),this.hot.listen(),(0,A.Mq)(this.TEXTAREA,e,e===n?void 0:n)}},{key:"flipDropdownIfNeeded",value:function(){var t=(0,A.$g)(this.hot.view._wt.wtTable.TABLE),e=t===this.hot.rootWindow,n=this.cellProperties.preventOverflow;if(e||!e&&(n||"horizontal"===n))return!1;var r=(0,A.cv)(this.TEXTAREA),o=(0,A.Pb)(this.TEXTAREA),i=this.getDropdownHeight(),a=t.scrollTop,l=(0,A.Pb)(this.hot.view._wt.wtTable.THEAD),u=(0,A.cv)(t),s=r.top-u.top-l+a,c=t.scrollHeight-s-l-o,f=i>c&&s>c;return f?this.flipDropdown(i):this.unflipDropdown(),this.limitDropdownIfNeeded(f?s:c,i),f}},{key:"limitDropdownIfNeeded",value:function(t,e){if(e>t){var n=0,r=0,o=0,i=null;do n+=o=this.htEditor.getRowHeight(r)||this.htEditor.view._wt.getSetting("defaultRowHeight"),r+=1;while(n<t);i=n-o,this.htEditor.flipped&&(this.htEditor.rootElement.style.top="".concat(parseInt(this.htEditor.rootElement.style.top,10)+e-i,"px")),this.setDropdownHeight(n-o)}}},{key:"flipDropdown",value:function(t){var e=this.htEditor.rootElement.style;e.position="absolute",e.top="".concat(-t,"px"),this.htEditor.flipped=!0}},{key:"unflipDropdown",value:function(){var t=this.htEditor.rootElement.style;t.position="absolute",t.top="",this.htEditor.flipped=void 0}},{key:"updateDropdownHeight",value:function(){var t=this.htEditor.getColWidth(0)+(0,A.np)(this.hot.rootDocument)+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}},{key:"setDropdownHeight",value:function(t){this.htEditor.updateSettings({height:t})}},{key:"highlightBestMatchingChoice",value:function(t){"number"==typeof t?this.htEditor.selectCell(t,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}},{key:"getDropdownHeight",value:function(){var t=this.htEditor.getInstance().getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8}},{key:"stripValueIfNeeded",value:function(t){return this.stripValuesIfNeeded([t])[0]}},{key:"stripValuesIfNeeded",value:function(t){var e=this.cellProperties.allowHtml,n=(0,F.Sc)(t,function(t){return(0,W.Pz)(t)});return(0,F.Sc)(n,function(t){return e?t:(0,z.oN)(t)})}},{key:"allowKeyEventPropagation",value:function(t){var e=this.htEditor.getSelectedRangeLast(),n={row:e?e.from.row:-1},r=!1;return t===Y.nx.ARROW_DOWN&&n.row>0&&n.row<this.htEditor.countRows()-1&&(r=!0),t===Y.nx.ARROW_UP&&n.row>-1&&(r=!0),r}},{key:"onBeforeKeyDown",value:function(t){var e=this,n=tt.get(this);if(n.skipOne=!1,(0,Y.EA)(t.keyCode)||t.keyCode===Y.nx.BACKSPACE||t.keyCode===Y.nx.DELETE||t.keyCode===Y.nx.INSERT){var r=10;if(t.keyCode===Y.nx.C&&(t.ctrlKey||t.metaKey))return;this.isOpened()||(r+=10),this.htEditor&&this.hot._registerTimeout(function(){e.queryChoices(e.TEXTAREA.value),n.skipOne=!0},r)}}}],q(i.prototype,n),r&&q(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(V),tn=n(7746);function tr(t){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tr(e)?e:String(e)}(r.key),r)}}function ti(t,e){return(ti=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ta(t){return(ta=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ti(t,e)}(o,t);var e,n,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ta(o);if(e){var r=ta(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tr(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),r.apply(this,arguments)}return n=[{key:"EDITOR_TYPE",get:function(){return"checkbox"}}],to(o.prototype,[{key:"beginEditing",value:function(t,e){if(e&&"mouseup"===e.type){var n=this.TD.querySelector('input[type="checkbox"]');(0,A.pv)(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}]),n&&to(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(tn.Hf),tu=n(381),ts=n(4319),tc=n(6487);function tf(t){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function th(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tf(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tf(e)?e:String(e)}(r.key),r)}}function td(){return(td="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ty(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function tp(t,e){return(tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ty(t){return(ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tg="date",tv="dateEditor",tm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tp(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ty(i);if(e){var r=ty(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tf(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).defaultDateFormat="DD/MM/YYYY",e.isCellEdited=!1,e.parentDestroyed=!1,e.$datePicker=null,e}return n=[{key:"init",value:function(){var t=this;if("function"!=typeof tu)throw Error("You need to include moment.js to your project.");if("function"!=typeof ts)throw Error("You need to include Pikaday to your project.");td(ty(i.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",function(){t.parentDestroyed=!0,t.destroyElements()})}},{key:"createElements",value:function(){td(ty(i.prototype),"createElements",this).call(this),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),(0,A.cn)(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),new tc.Z(this).addEventListener(this.datePicker,"mousedown",function(t){return t.stopPropagation()})}},{key:"destroyElements",value:function(){var t=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),t&&t.removeChild(this.datePicker)}},{key:"prepare",value:function(t,e,n,r,o,a){td(ty(i.prototype),"prepare",this).call(this,t,e,n,r,o,a)}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.hot.getShortcutManager().getContext("editor");td(ty(i.prototype),"open",this).call(this),this.showDatepicker(t),e.addShortcut({keys:[["Enter"]],callback:function(t){t.stopPropagation()},group:tv})}},{key:"close",value:function(){var t,e=this;this._opened=!1,null!==(t=this.$datePicker)&&void 0!==t&&t.destroy&&this.$datePicker.destroy(),this.instance._registerTimeout(function(){e.instance._refreshBorders()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(tv),td(ty(i.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=this.originalValue;void 0!==n&&this.setValue(n)}td(ty(i.prototype),"finishEditing",this).call(this,t,e)}},{key:"showDatepicker",value:function(t){var e,n=this.TD.getBoundingClientRect(),r=this.cellProperties.dateFormat||this.defaultDateFormat,o=this.instance.view.isMouseDown(),i=!!t&&(0,Y.DC)(t.keyCode);this.datePicker.style.display="block",this.$datePicker=new ts(this.getDatePickerConfig()),this.$datePicker._onInputFocus=function(){},this.datePickerStyle.top="".concat(this.hot.rootWindow.pageYOffset+n.top+(0,A.Pb)(this.TD),"px");var a=this.hot.rootWindow.pageXOffset;a=this.hot.isRtl()?n.right-(0,A.iO)(this.datePicker):n.left,this.datePickerStyle.left="".concat(a,"px"),this.originalValue?(tu(e=this.originalValue,r,!0).isValid()&&this.$datePicker.setMoment(tu(e,r),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),i||o||this.setValue("")):this.cellProperties.defaultDate?(tu(e=this.cellProperties.defaultDate,r,!0).isValid()&&this.$datePicker.setMoment(tu(e,r),!0),i||o||this.setValue("")):this.$datePicker.gotoToday()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var t=this,e=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&(0,I.ZB)(n,this.cellProperties.datePickerConfig);var r=n.onSelect,o=n.onClose;return n.field=e,n.trigger=e,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.isRTL=!1,n.onSelect=function(e){var n=e;isNaN(n.getTime())||(n=tu(n).format(t.cellProperties.dateFormat||t.defaultDateFormat)),t.setValue(n),t.hideDatepicker(),r&&r()},n.onClose=function(){t.parentDestroyed||t.finishEditing(!1),o&&o()},n}}],r=[{key:"EDITOR_TYPE",get:function(){return tg}}],n&&th(i.prototype,n),r&&th(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(j.H),tb=n(3909);function tw(t){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tw(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tw(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tw(e)?e:String(e)}(r.key),r)}}function tC(){return(tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tO(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function tk(t,e){return(tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tO(t){return(tO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tk(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tO(i);if(e){var r=tO(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tw(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"EDITOR_TYPE",get:function(){return"dropdown"}}],n=[{key:"prepare",value:function(t,e,n,r,o,a){tC(tO(i.prototype),"prepare",this).call(this,t,e,n,r,o,a),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}],tS(i.prototype,n),r&&tS(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(te);function tP(t){return(tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tE(t,e){return(tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tM(t){return(tM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().add("beforeValidate",function(t,e,n){var r=this.getCellMeta(e,this.propToCol(n));r.editor===tR&&void 0===r.strict&&(r.filter=!1,r.strict=!0)});var t_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tE(t,e)}(r,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tM(r);if(e){var o=tM(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tP(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),n.apply(this,arguments)}return function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tP(e)?e:String(e)}(r.key),r)}}(r,[{key:"EDITOR_TYPE",get:function(){return"numeric"}}]),Object.defineProperty(r,"prototype",{writable:!1}),r}(j.H);function tj(t){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tj(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tj(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tj(e)?e:String(e)}(r.key),r)}}function tT(){return(tT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tx(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function tI(t,e){return(tI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tx(t){return(tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tI(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tx(i);if(e){var r=tx(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tj(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"EDITOR_TYPE",get:function(){return"password"}}],n=[{key:"createElements",value:function(){tT(tx(i.prototype),"createElements",this).call(this),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,(0,A.cS)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}],tA(i.prototype,n),r&&tA(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(j.H);function tN(t){return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tH(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tN(e)?e:String(e)}(r.key),r)}}function tB(){return(tB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tU(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function tL(t,e){return(tL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tU(t){return(tU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tV="ht_editor_visible",tF="selectEditor",tW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tL(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tU(i);if(e){var r=tU(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tN(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"EDITOR_TYPE",get:function(){return"select"}}],n=[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),(0,A.cn)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(t){this.select.value=t}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",(0,A.pv)(this.select,tV)&&(0,A.IV)(this.select,tV),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var t=this;this.addHook("afterScrollHorizontally",function(){return t.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return t.refreshDimensions()}),this.addHook("afterColumnResize",function(){return t.refreshDimensions()}),this.addHook("afterRowResize",function(){return t.refreshDimensions()})}},{key:"prepare",value:function(t,e,n,r,o,a){var l,u=this;tB(tU(i.prototype),"prepare",this).call(this,t,e,n,r,o,a);var s=this.cellProperties.selectOptions;l="function"==typeof s?this.prepareOptions(s(this.row,this.col,this.prop)):this.prepareOptions(s),(0,A.cS)(this.select),(0,I._l)(l,function(t,e){var n=u.hot.rootDocument.createElement("OPTION");n.value=e,(0,A.uS)(n,t),u.select.appendChild(n)})}},{key:"prepareOptions",value:function(t){var e={};if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)e[t[n]]=t[n];else"object"===tN(t)&&(e=t);return e}},{key:"refreshValue",value:function(){var t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===tn.ed.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var t=this.getEditedCellRect(),e=t.top,n=t.start,r=t.width,o=t.height,i=this.select.style;i.height="".concat(o,"px"),i.width="".concat(r,"px"),i.top="".concat(e,"px"),i[this.hot.isRtl()?"right":"left"]="".concat(n,"px"),i.margin="0px",(0,A.cn)(this.select,tV)}}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor");!1!==this.isInFullEditMode()&&e.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var e=t.select.selectedIndex-1;e>=0&&(t.select[e].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var e=t.select.selectedIndex+1;e<=t.select.length-1&&(t.select[e].selected=!0)}}],{group:tF})}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(tF)}}],tH(i.prototype,n),r&&tH(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(tn.Hf);function tz(t){return(tz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tz(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tz(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tz(e)?e:String(e)}(r.key),r)}}function tG(){return(tG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tq(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function tK(t,e){return(tK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tq(t){return(tq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tK(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tq(i);if(e){var r=tq(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tz(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"EDITOR_TYPE",get:function(){return"time"}}],n=[{key:"prepare",value:function(t,e,n,r,o,a){tG(tq(i.prototype),"prepare",this).call(this,t,e,n,r,o,a),this.TEXTAREA.dir="ltr"}}],tY(i.prototype,n),r&&tY(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(j.H),t$=n(6187);function tX(){(0,t$.qm)(tn.Hf),(0,t$.qm)(te),(0,t$.qm)(tl),(0,t$.qm)(tm),(0,t$.qm)(tR),(0,t$.qm)(V),(0,t$.qm)(t_),(0,t$.qm)(tD),(0,t$.qm)(tW),(0,t$.qm)(j.H),(0,t$.qm)(tZ)}var tJ=n(6285);function tQ(t,e,n,r,o,i,a){tJ.Z.apply(this,[t,e,n,r,o,i,a]),(0,A.uS)(e,null==i?"":i,!1)}function t0(t,e,n,r,o,i,a){var l=t.rootDocument,u=a.allowHtml?tQ:G.V,s=l.createElement("DIV");if(s.className="htAutocompleteArrow",s.appendChild(l.createTextNode(String.fromCharCode(9660))),u.apply(this,[t,e,n,r,o,i,a]),e.firstChild||e.appendChild(l.createTextNode(String.fromCharCode(160))),e.insertBefore(s,e.firstChild),(0,A.cn)(e,"htAutocomplete"),!t.acArrowListener){var c=new tc.Z(t);t.acArrowListener=function(o){(0,A.pv)(o.target,"htAutocompleteArrow")&&t.view._wt.getSetting("onCellDblClick",null,t._createCellCoords(n,r),e)},c.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",function(){c.destroy()})}}tQ.RENDERER_TYPE="html",t0.RENDERER_TYPE="autocomplete",n(6699),n(2023),n(9714),n(2564);var t1=new WeakMap,t2=new WeakMap,t3="data-row",t4="data-col",t8="checkbox";function t9(t,e,n,r,o,i,a){var l=t.rootDocument;tJ.Z.apply(this,[t,e,n,r,o,i,a]),function(t){var e=t2.get(t);if(!e){var n=t.rootElement;(e=new tc.Z(t)).addEventListener(n,"click",function(e){return function(t,e){var n=t.target;if(t6(n)&&n.hasAttribute(t3)&&n.hasAttribute(t4)){var r=parseInt(n.getAttribute(t3),10),o=parseInt(n.getAttribute(t4),10);e.getCellMeta(r,o).readOnly&&t.preventDefault()}}(e,t)}),e.addEventListener(n,"mouseup",function(e){var n;t6(n=e.target)&&n.hasAttribute(t3)&&n.hasAttribute(t4)&&setTimeout(t.listen,10)}),e.addEventListener(n,"change",function(e){return function(t,e){var n=t.target;if(t6(n)&&n.hasAttribute(t3)&&n.hasAttribute(t4)){var r=parseInt(n.getAttribute(t3),10),o=parseInt(n.getAttribute(t4),10),i=e.getCellMeta(r,o);if(!i.readOnly){var a=null;a=t.target.checked?void 0===i.uncheckedTemplate||i.checkedTemplate:void 0!==i.uncheckedTemplate&&i.uncheckedTemplate,e.setDataAtCell(r,o,a)}}}(e,t)}),t2.set(t,e)}}(t);var u=((f=l.createElement("input")).className="htCheckboxRendererInput",f.type="checkbox",f.setAttribute("autocomplete","off"),f.setAttribute("tabindex","-1"),f.cloneNode(!1)),s=a.label,c=!1;if(void 0===a.checkedTemplate&&(a.checkedTemplate=!0),void 0===a.uncheckedTemplate&&(a.uncheckedTemplate=!1),(0,A.cS)(e),i===a.checkedTemplate||(0,W.Pz)(i).toLocaleLowerCase(a.locale)===(0,W.Pz)(a.checkedTemplate).toLocaleLowerCase(a.locale)?u.checked=!0:i===a.uncheckedTemplate||(0,W.Pz)(i).toLocaleLowerCase(a.locale)===(0,W.Pz)(a.uncheckedTemplate).toLocaleLowerCase(a.locale)?u.checked=!1:(0,W.xb)(i)?(0,A.cn)(u,"noValue"):(u.style.display="none",(0,A.cn)(u,"htBadValue"),c=!0),u.setAttribute(t3,n),u.setAttribute(t4,r),!c&&s){var f,h,d,p,y="";if(s.value)y="function"==typeof s.value?s.value.call(this,n,r,o,i):s.value;else if(s.property){var g=t.getDataAtRowProp(n,s.property);y=null!==g?g:""}var v=(h=y,d=!0!==s.separated,(p=l.createElement("label")).className="htCheckboxRendererLabel ".concat(d?"fullWidth":""),p.appendChild(l.createTextNode(h)),p.cloneNode(!0));"before"===s.position?s.separated?(e.appendChild(v),e.appendChild(u)):(v.appendChild(u),u=v):s.position&&"after"!==s.position||(s.separated?(e.appendChild(u),e.appendChild(v)):(v.insertBefore(u,v.firstChild),u=v))}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getSelectedRange();if(n)for(var r=0;r<n.length;r++){for(var o=n[r].getTopStartCorner(),i=o.row,a=o.col,l=n[r].getBottomEndCorner(),u=l.row,s=l.col,c=[],f=i;f<=u;f+=1)for(var h=a;h<=s;h+=1){var d=t.getCellMeta(f,h);if("checkbox"!==d.type)return;if(!0!==d.readOnly){void 0===d.checkedTemplate&&(d.checkedTemplate=!0),void 0===d.uncheckedTemplate&&(d.uncheckedTemplate=!1);var p=t.getDataAtCell(f,h);!1===e?[d.checkedTemplate,d.checkedTemplate.toString()].includes(p)?c.push([f,h,d.uncheckedTemplate]):[d.uncheckedTemplate,d.uncheckedTemplate.toString(),null,void 0].includes(p)&&c.push([f,h,d.checkedTemplate]):c.push([f,h,d.uncheckedTemplate])}}c.length>0&&t.setDataAtCell(c)}}function b(){var e=t.getSelectedRange();if(e){for(var n=0;n<e.length;n++)for(var r=e[n].getTopStartCorner(),o=e[n].getBottomEndCorner(),i=r.row;i<=o.row;i++)for(var a=r.col;a<=o.col;a++){var l=t.getCellMeta(i,a);if("checkbox"!==l.type)return!1;var u=t.getCell(i,a);if(null==u||u.querySelectorAll("input[type=checkbox]").length>0&&!l.readOnly)return!0}return!1}}s&&(!s||s.separated)||e.appendChild(u),c&&e.appendChild(l.createTextNode("#bad-value#")),t1.has(t)||(t1.set(t,!0),t.getShortcutManager().getContext("grid").addShortcuts([{keys:[["space"]],callback:function(){return m(),!b()}},{keys:[["enter"]],callback:function(){return m(),!b()},runOnlyIf:function(){return t.getSettings().enterBeginsEditing}},{keys:[["delete"],["backspace"]],callback:function(){return m(!0),!b()},relativeToGroup:x.PP,position:"before"}],{group:"checkboxRenderer"}))}function t6(t){return"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}tb.Z.getSingleton().add("modifyAutoColumnSizeSeed",function(t,e,n){var r=e.label,o=e.type,i=e.row,a=e.column,l=e.prop;if(o===t8){if(r){var u=r.value,s=r.property,c=n;if(u)c="function"==typeof u?u(i,a,l,n):u;else if(s){var f=this.getDataAtRowProp(i,s);c=null!==f?f:n}t=c}return t}}),t9.RENDERER_TYPE=t8,n(9600);var t7=n(4316),t5=n(2226);function et(t,e,n,r,o,i,a){var l=i;if((0,t5.kE)(l)){var u=a.numericFormat,s=u&&u.culture||"-",c=u&&u.pattern,f=a.className||"",h=f.length?f.split(" "):[];if(void 0!==s&&!t7.languages()[s]){var d=s.replace("-",""),p=t7.allLanguages?t7.allLanguages[s]:t7[d];p&&t7.registerLanguage(p)}t7.setLanguage(s),l=t7(l).format(c||"0"),0>h.indexOf("htLeft")&&0>h.indexOf("htCenter")&&0>h.indexOf("htRight")&&0>h.indexOf("htJustify")&&h.push("htRight"),0>h.indexOf("htNumeric")&&h.push("htNumeric"),a.className=h.join(" "),e.dir="ltr"}(0,G.V)(t,e,n,r,o,l,a)}function ee(t,e,n,r,o,i,a){G.V.apply(this,[t,e,n,r,o,i,a]);var l=a.hashLength||e.innerHTML.length,u=a.hashSymbol||"*",s="";(0,t5.q4)(l-1,function(){s+=u}),(0,A.uS)(e,s)}function en(t,e,n,r,o,i,a){G.V.apply(this,[t,e,n,r,o,i,a]),e.dir="ltr"}et.RENDERER_TYPE="numeric",ee.RENDERER_TYPE="password",en.RENDERER_TYPE="time";var er=n(9847);function eo(){(0,er.zn)(t0),(0,er.zn)(tJ.Z),(0,er.zn)(t9),(0,er.zn)(tQ),(0,er.zn)(et),(0,er.zn)(ee),(0,er.zn)(G.V),(0,er.zn)(en)}function ei(t,e){var n=t;if(null==n&&(n=""),this.allowEmpty&&""===n){e(!0);return}this.strict&&this.source?"function"==typeof this.source?this.source(n,ea(n,e)):ea(n,e)(this.source):e(!0)}function ea(t,e){return function(n){for(var r=!1,o=0,i=n.length;o<i;o++)if(t===n[o]){r=!0;break}e(r)}}function el(t,e){var n=(0,t$.Jq)(tg,this.instance),r=t,o=!0;null==r&&(r="");var i=tu(r,this.dateFormat||n.defaultDateFormat,!0).isValid(),a=tu(new Date(r)).isValid()||i;if(this.allowEmpty&&""===r&&(a=!0,i=!0),a||(o=!1),!a&&i&&(o=!0),a&&!i){if(!0===this.correctFormat){var l,u,s,c,f,h,d=(l=r,u=this.dateFormat,c=tu((s=new Date(l),isNaN(new Date("".concat(l,"T00:00")).getDate())?s:new Date(s.getTime()+6e4*s.getTimezoneOffset()))),f=tu(l,u),h=l.search(/[A-z]/g)>-1,(c.isValid()&&c.format("x")===f.format("x")||!f.isValid()||h?c:f).format(u)),p=this.instance.toVisualRow(this.row),y=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(p,y,d,"dateValidator"),o=!0}else o=!1}e(o)}function eu(t,e){var n=t;null==n&&(n=""),e(!!this.allowEmpty&&""===n||""!==n&&(0,t5.kE)(t))}ei.VALIDATOR_TYPE="autocomplete",n(4765),el.VALIDATOR_TYPE="date",eu.VALIDATOR_TYPE="numeric";var es=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function ec(t,e){var n=this.timeFormat||"h:mm:ss a",r=!0,o=t;null===o&&(o=""),o=/^\d{3,}$/.test(o)?parseInt(o,10):o;var i=/^\d{1,2}$/.test(o);i&&(o+=":00");var a=tu(o,es,!0).isValid()?tu(o):tu(o,n),l=a.isValid(),u=tu(o,n,!0).isValid()&&!i;if(this.allowEmpty&&""===o&&(l=!0,u=!0),l||(r=!1),!l&&u&&(r=!0),l&&!u){if(!0===this.correctFormat){var s=a.format(n),c=this.instance.toVisualRow(this.row),f=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(c,f,s,"timeValidator"),r=!0}else r=!1}e(r)}ec.VALIDATOR_TYPE="time";var ef=n(8894);function eh(){(0,ef.Ie)(ei),(0,ef.Ie)(el),(0,ef.Ie)(eu),(0,ef.Ie)(ec)}var ed={CELL_TYPE:"autocomplete",editor:te,renderer:t0,validator:ei},ep={CELL_TYPE:"checkbox",editor:tl,renderer:t9},ey={CELL_TYPE:"date",editor:tm,renderer:t0,validator:el},eg={CELL_TYPE:"dropdown",editor:tR,renderer:t0,validator:ei},ev={CELL_TYPE:"handsontable",editor:V,renderer:t0},em={CELL_TYPE:"numeric",editor:t_,renderer:et,validator:eu,dataType:"number"},eb={CELL_TYPE:"password",editor:tD,renderer:ee,copyable:!1},ew=n(5864),eS={CELL_TYPE:"time",editor:tZ,renderer:en,validator:ec},eC=n(6475);function ek(){(0,eC.xN)(ed),(0,eC.xN)(ep),(0,eC.xN)(ey),(0,eC.xN)(eg),(0,eC.xN)(ev),(0,eC.xN)(em),(0,eC.xN)(eb),(0,eC.xN)(ew.n),(0,eC.xN)(eS)}n(7042),n(1038),n(189),n(8309),n(1532),n(4747),n(2222),n(561),n(8478);var eO=n(8298);function eR(t){return(eR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function eE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==eR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eR(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eR(e)?e:String(e)}(r.key),r)}}var eM=new Map([["plugin",eO._j],["cell-type",eC.V1],["editor",t$.Wu],["renderer",er.Y3],["validator",ef.oh]]),e_=new WeakMap,ej=[],eA=null,eT=new WeakSet,eI=function(){var t,e;function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,eT),eT.add(this),(0,I.jW)(this,"hot",t,{writable:!1}),e_.set(this,{hooks:{}}),eA=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return e.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(t){return e.onUpdateSettings(t)}),this.hot.addHook("beforeInit",function(){return e.init()})}return e=[{key:"PLUGIN_KEY",get:function(){return"base"}},{key:"SETTING_KEYS",get:function(){return[this.PLUGIN_KEY]}}],t=[{key:"init",value:function(){var t=this;this.pluginName=this.hot.getPluginName(this);var e=this.constructor.PLUGIN_DEPS,n=Array.isArray(e)?e:[];if(n.length>0){var r=[];if(n.forEach(function(t){var e,n=function(t){if(Array.isArray(t))return t}(e=t.split(":"))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,2)||function(t,e){if(t){if("string"==typeof t)return eP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eP(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],i=n[1];if(!eM.has(o))throw Error('Unknown plugin dependency type "'.concat(o,'" was found.'));eM.get(o)(i)||r.push(" - ".concat(i," (").concat(o,")"))}),r.length>0){var o=["The ".concat(this.pluginName," plugin requires the following modules:\n"),"".concat(r.join("\n"),"\n")].join("");ej.push(o)}}if(eA||(eA=(0,eO.a9)()),eA.indexOf("UndoRedo")>=0&&eA.splice(eA.indexOf("UndoRedo"),1),eA.indexOf(this.pluginName)>=0&&eA.splice(eA.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",function(){t.isEnabled&&t.isEnabled()&&t.enablePlugin()}),0===eA.length){if(ej.length>0)throw Error(["".concat(ej.join("\n"),"\n"),"You have to import and register them manually."].join(""));this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(t,e){e_.get(this).hooks[t]=e_.get(this).hooks[t]||[];var n=e_.get(this).hooks[t];this.hot.addHook(t,e),n.push(e),e_.get(this).hooks[t]=n}},{key:"removeHooks",value:function(t){var e=this;(0,F.Bk)(e_.get(this).hooks[t]||[],function(n){e.hot.removeHook(t,n)})}},{key:"clearHooks",value:function(){var t=this,e=e_.get(this).hooks;(0,I._l)(e,function(e,n){return t.removeHooks(n)}),e.length=0}},{key:"callOnPluginsReady",value:function(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}},{key:"onAfterPluginsInitialized",value:function(){(0,F.Bk)(this.pluginsInitializedCallbacks,function(t){return t()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(t){var e=(function(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n})(this,eT,ex).call(this,t);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&e&&this.updatePlugin(t))}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var t=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),(0,I._l)(this,function(e,n){"hot"!==n&&(t[n]=null)}),delete this.t,delete this.hot}}],eE(n.prototype,t),e&&eE(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function ex(t){if(!t)return!1;var e=this.constructor.SETTING_KEYS;if("boolean"==typeof e)return e;for(var n=0;n<e.length;n++)if(void 0!==t[e[n]])return!0;return!1}var eD=n(5965);function eN(t){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eH(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function eB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==eN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eN(e)?e:String(e)}(r.key),r)}}n(4564);var eL=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return t=[{key:"addRow",value:function(t,e){if(this.columns.length)throw Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:t};this.rows.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(t){if(null!=this.hot.getColHeader(0)){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(t,e){if(this.rows.length)throw Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:t};this.columns.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(t){this.injected||this.injectTable(),(0,F.Bk)(this.rows,function(e){t(e.row,(0,A.Pb)(e.table)-1)})}},{key:"getWidths",value:function(t){this.injected||this.injectTable(),(0,F.Bk)(this.columns,function(e){var n=e.table.getBoundingClientRect().width;t(e.col,Math.ceil(n))})}},{key:"setSettings",value:function(t){this.settings=t}},{key:"setSetting",value:function(t,e){this.settings||(this.settings={}),this.settings[t]=e}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(t){return this.settings?this.settings[t]:null}},{key:"createColGroupsCol",value:function(){var t=this,e=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&e.appendChild(this.createColElement(-1)),this.samples.forEach(function(n){(0,F.Bk)(n.strings,function(n){e.appendChild(t.createColElement(n.col))})}),e}},{key:"createRow",value:function(t){var e=this,n=this.hot.rootDocument,r=n.createDocumentFragment(),o=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,o),r.appendChild(o)),this.samples.forEach(function(o){(0,F.Bk)(o.strings,function(o){var i=o.col,a=e.hot.getCellMeta(t,i);a.col=i,a.row=t;var l=e.hot.getCellRenderer(a),u=n.createElement("td");u.setAttribute("ghost-table",1),l(e.hot,u,t,i,e.hot.colToProp(i),o.value,a),r.appendChild(u)})}),r}},{key:"appendColumnHeadersRow",value:function(){var t=this,e=this.hot.rootDocument,n=e.createDocumentFragment(),r=[];if(this.hot.hasRowHeaders()){var o=e.createElement("th");r.push([-1,o]),n.appendChild(o)}this.samples.forEach(function(t){(0,F.Bk)(t.strings,function(t){var o=t.col,i=e.createElement("th");r.push([o,i]),n.appendChild(i)})}),this.table.tHead.appendChild(n),(0,F.Bk)(r,function(e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,2)||function(t,e){if(t){if("string"==typeof t)return eH(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eH(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1];t.hot.view.appendColHeader(r,o)})}},{key:"createCol",value:function(t){var e=this,n=this.hot.rootDocument,r=n.createDocumentFragment();return this.samples.forEach(function(o){(0,F.Bk)(o.strings,function(o){var i=o.row,a=e.hot.getCellMeta(i,t);a.col=t,a.row=i;var l=e.hot.getCellRenderer(a),u=n.createElement("td"),s=n.createElement("tr");u.setAttribute("ghost-table",1),l(e.hot,u,i,t,e.hot.colToProp(t),o.value,a),s.appendChild(u),r.appendChild(s)})}),r}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(t){var e=this.hot.rootDocument.createElement("col");return e.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(t),"px"),e}},{key:"createTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),r=e.createElement("table"),o=e.createElement("thead"),i=e.createElement("tbody"),a=e.createElement("colgroup"),l=e.createElement("tr"),u=e.createElement("th");return this.isVertical()&&r.appendChild(a),this.isHorizontal()&&(l.appendChild(u),o.appendChild(l),r.style.tableLayout="auto",r.style.width="auto"),r.appendChild(o),this.isVertical()&&i.appendChild(l),r.appendChild(i),(0,A.cn)(r,t),n.appendChild(r),{fragment:n,table:r,tHead:o,tBody:i,colGroup:a,tr:l,th:u}}},{key:"createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),r=e.createElement("div"),o="htGhostTable htAutoSize ".concat(t.trim());return(0,A.cn)(r,o),n.appendChild(r),{fragment:n,container:r}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}],eB(n.prototype,t),e&&eB(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function eU(t){return(eU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eF(r.key),r)}}function eF(t){var e=function(t,e){if("object"!==eU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eU(e)?e:String(e)}n(7941);var eW=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.samples=null,this.dataFactory=t,this.customSampleCount=null,this.allowDuplicates=!1}return e=[{key:"SAMPLE_COUNT",get:function(){return 3}}],t=[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:n.SAMPLE_COUNT}},{key:"setSampleCount",value:function(t){this.customSampleCount=t}},{key:"setAllowDuplicates",value:function(t){this.allowDuplicates=t}},{key:"generateRowSamples",value:function(t,e){return this.generateSamples("row",e,t)}},{key:"generateColumnSamples",value:function(t,e){return this.generateSamples("col",e,t)}},{key:"generateSamples",value:function(t,e,n){var r=this,o=new Map,i="number"==typeof n?{from:n,to:n}:n,a=i.from,l=i.to;return(0,t5.q4)(a,l,function(n){var i=r.generateSample(t,e,n);o.set(n,i)}),o}},{key:"generateSample",value:function(t,e,n){var r=this;if("row"!==t&&"col"!==t)throw Error("Unsupported sample type");var o=new Map,i="row"===t?"col":"row",a=[];return(0,t5.q4)(e.from,e.to,function(e){var l,u,s,c="row"===t?r.dataFactory(n,e):r.dataFactory(e,n),f=c.value,h=c.bundleSeed,d="string"==typeof h&&h.length>0;s=d?h:(0,I.Kn)(f)?"".concat(Object.keys(f).length):Array.isArray(f)?"".concat(f.length):"".concat((0,W.Pz)(f).length),o.has(s)||o.set(s,{needed:r.getSampleCount(),strings:[]});var p=o.get(s);p.needed&&(!(a.indexOf(f)>-1)||r.allowDuplicates||d)&&(p.strings.push((l={value:f},(u=eF(u=i))in l?Object.defineProperty(l,u,{value:e,enumerable:!0,configurable:!0,writable:!0}):l[u]=e,l)),a.push(f),p.needed-=1)}),o}}],eV(n.prototype,t),e&&eV(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),ez=n(2792),eY=n(4165);function eG(t){return(eG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eK(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return eq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eq(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eq(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function eZ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==eG(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==eG(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===eG(e)?e:String(e)}(r.key),r)}}function e$(){return(e$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eQ(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function eX(t,e){return(eX=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eJ(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eQ(t){return(eQ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("modifyAutoColumnSizeSeed");var e0="autoColumnSize",e1=new WeakMap,e2=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eX(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=eQ(i);if(e){var r=eQ(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===eG(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return eJ(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),e1.set(eJ(e),{cachedColumnHeaders:[]}),e.ghostTable=new eL(e.hot),e.samplesGenerator=new eW(function(t,n){var r=e.hot.getCellMeta(t,n),o="";r.spanned||(o=e.hot.getDataAtCell(t,n));var i="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(i=e.hot.runHooks("modifyAutoColumnSizeSeed",i,r,o)),{value:o,bundleSeed:i}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new eY.L,e.hot.columnIndexMapper.registerMap("autoColumnSize",e.columnWidthsMap),e.addHook("beforeColumnResize",function(t,n,r){return e.onBeforeColumnResize(t,n,r)}),e}return n=[{key:"isEnabled",value:function(){return!1!==this.hot.getSettings()[e0]&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[e0];e&&null!==e.useHeaders&&void 0!==e.useHeaders&&this.ghostTable.setSetting("useHeaders",e.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeChangeRender",function(e){return t.onBeforeChange(e)}),this.addHook("afterFormulasValuesUpdate",function(e){return t.onAfterFormulasValuesUpdate(e)}),this.addHook("beforeViewRender",function(e){return t.onBeforeViewRender(e)}),this.addHook("modifyColWidth",function(e,n){return t.getColumnWidth(n,e)}),this.addHook("afterInit",function(){return t.onAfterInit()}),e$(eQ(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.findColumnsWhereHeaderWasChanged();t.length&&(this.clearCache(t),this.calculateVisibleColumnsWidth()),e$(eQ(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var t=this;e$(eQ(i.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(e,n,r){return t.onBeforeColumnResize(e,n,r)})}},{key:"calculateVisibleColumnsWidth",value:function(){if(this.hot.countRows()){var t=this.hot.renderCall,e=this.getFirstVisibleColumn(),n=this.getLastVisibleColumn();-1!==e&&-1!==n&&this.calculateColumnsWidth({from:e,to:n},void 0,t)}}},{key:"calculateColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="number"==typeof e?{from:e,to:e}:e,i="number"==typeof n?{from:n,to:n}:n;(0,t5.q4)(o.from,o.to,function(e){var n=t.hot.toPhysicalColumn(e);if(null===n&&(n=e),r||null===t.columnWidthsMap.getValueAtIndex(n)&&!t.hot._getColWidthFromSettings(n)){var o=t.samplesGenerator.generateColumnSamples(e,i);(0,F.Bk)(o,function(e){var n=eK(e,2),r=n[0],o=n[1];return t.ghostTable.addColumn(r,o)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){t.ghostTable.getWidths(function(e,n){var r=t.hot.toPhysicalColumn(e);t.columnWidthsMap.setValueAtIndex(r,n)})},!0),this.measuredColumns=o.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=0,r=this.hot.countCols()-1,o=null;this.inProgress=!0;var a=this.getSyncCalculationLimit();this.firstCalculation&&a>=0&&(this.calculateColumnsWidth({from:0,to:a},e),this.firstCalculation=!1,n=a+1),n<r?function a(){if(!t.hot){(0,eD.Wx)(o),t.inProgress=!1;return}t.calculateColumnsWidth({from:n,to:Math.min(n+i.CALCULATION_STEP,r)},e),(n=n+i.CALCULATION_STEP+1)<r?o=(0,eD.U7)(a):((0,eD.Wx)(o),t.inProgress=!1,t.hot.view.adjustElementsSize())}():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[e0],e=t&&(0,I.nr)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&(0,I.nr)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[e0],e=i.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return(0,I.Kn)(t)&&(e=t.syncLimit,(0,z.wK)(e)?e=(0,t5.N1)(n,e):e>>=0),Math.min(e,n)}},{key:"getColumnWidth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=e;return void 0===r&&(r=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t)),n&&"number"==typeof r&&(r=Math.max(r,ez.Z.DEFAULT_WIDTH))),r}},{key:"getFirstVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getFirstVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getFirstRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return -1}},{key:"getLastVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getLastVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getLastRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return -1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var t=this.hot.getColHeader(),e=e1.get(this).cachedColumnHeaders;return(0,F.k$)(t,function(t,n,r){var o=e.length;return(o-1<r||e[r]!==n)&&t.push(r),o-1<r?e.push(n):e[r]=n,t},[])}},{key:"clearCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length?this.hot.batchExecution(function(){(0,F.Bk)(e,function(e){t.columnWidthsMap.setValueAtIndex(e,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!(0,F.w7)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(t){return null===t}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){t.hot&&t.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(t){var e=this,n=(0,F.Sc)(t,function(t){var n=eK(t,2)[1];return e.hot.toPhysicalColumn(e.hot.propToCol(n))});this.clearCache(Array.from(new Set(n)))}},{key:"onBeforeColumnResize",value:function(t,e,n){var r=t;return n&&(this.calculateColumnsWidth(e,void 0,!0),r=this.getColumnWidth(e,void 0,!1)),r}},{key:"onAfterInit",value:function(){e1.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(t){var e=(0,F.w7)(t,function(t){var e;return(0,W.$K)(null===(e=t.address)||void 0===e?void 0:e.col)}),n=(0,F.Sc)(e,function(t){return t.address.col});this.clearCache(Array.from(new Set(n)))}},{key:"destroy",value:function(){this.ghostTable.clean(),e$(eQ(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return e0}},{key:"PLUGIN_PRIORITY",get:function(){return 10}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}],n&&eZ(i.prototype,n),r&&eZ(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI),e3={horizontal:"horizontal",vertical:"vertical"};function e4(t){return(e4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e8(t,e){if(t){if("string"==typeof t)return e9(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e9(t,e)}}function e9(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function e6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==e4(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==e4(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===e4(e)?e:String(e)}(r.key),r)}}function e7(){return(e7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ne(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function e5(t,e){return(e5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nt(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("modifyAutofillRange"),tb.Z.getSingleton().register("beforeAutofill"),tb.Z.getSingleton().register("afterAutofill");var nn="autofill",nr=["fillHandle"],no=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e5(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ne(i);if(e){var r=ne(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===e4(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nt(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).eventManager=new tc.Z(nt(e)),e.addingStarted=!1,e.mouseDownOnCellCorner=!1,e.mouseDragOutside=!1,e.handleDraggedCells=0,e.directions=[],e.autoInsertRow=!1,e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",function(e){return t.onAfterCellCornerMouseDown(e)}),this.addHook("afterOnCellCornerDblClick",function(e){return t.onCellCornerDblClick(e)}),this.addHook("beforeOnCellMouseOver",function(e,n){return t.onBeforeCellMouseOver(n)}),e7(ne(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),e7(ne(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),e7(ne(i.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var t=this,e=this.hot.getSelectedRangeLast(),n=e.getTopStartCorner(),r=n.row,o=n.col,i=e.getBottomEndCorner(),a=i.row,l=i.col,u=this.hot.runHooks("modifyCopyableRange",[{startRow:r,startCol:o,endRow:a,endCol:l}]),s=[],c=[],f=[];return(0,F.Bk)(u,function(t){for(var e=t.startRow;e<=t.endRow;e+=1)-1===s.indexOf(e)&&s.push(e);for(var n=t.startCol;n<=t.endCol;n+=1)-1===c.indexOf(n)&&c.push(n)}),(0,F.Bk)(s,function(e){var n=[];(0,F.Bk)(c,function(r){n.push(t.hot.getCopyableData(e,r))}),f.push(n)}),f}},{key:"fillIn",value:function(){var t,e,n,r,o,i=this;if(this.hot.selection.highlight.getFill().isEmpty())return!1;var a=function(t){if(Array.isArray(t))return t}(t=this.hot.selection.highlight.getFill().getVisualCorners())||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,4)||e8(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],u=a[1],s=a[2],c=a[3],f=this.hot.getSelectedRangeLast(),h=f.getTopStartCorner(),d=f.getBottomEndCorner();this.resetSelectionOfDraggedArea();var p=[h.row,h.col,d.row,d.col],y=this.hot.runHooks("modifyAutofillRange",[Math.min(h.row,l),Math.min(h.col,u),Math.max(d.row,s),Math.max(d.col,c)],p),g=(e=function(t,e){return i.hot._createCellCoords(t,e)},y[0]===p[0]&&y[1]<p[1]?(o="left",n=e(y[0],y[1]),r=e(y[2],p[1]-1)):y[2]===p[2]&&y[0]===p[0]&&y[3]>p[3]?(o="right",n=e(y[0],p[3]+1),r=e(y[2],y[3])):y[0]<p[0]&&y[1]===p[1]?(o="up",n=e(y[0],y[1]),r=e(p[0]-1,y[3])):y[2]>p[2]&&y[1]===p[1]&&(o="down",n=e(p[2]+1,y[1]),r=e(y[2],y[3])),n&&n.normalize(),r&&r.normalize(),{directionOfDrag:o,startOfDragCoords:n,endOfDragCoords:r}),v=g.directionOfDrag,m=g.startOfDragCoords,b=g.endOfDragCoords;if(m&&m.row>-1&&m.col>-1){var w=this.getSelectionData(),S=f.clone(),C=this.hot._createCellRange(m,m,b),k=this.hot.runHooks("beforeAutofill",w,S,C,v);if(!1===k)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;var O=function(t,e,n,r){var o=n.length,i=n?n[0].length:0,a=[],l=e.row-t.row,u=e.col-t.col;if(-1!==["down","up"].indexOf(r)){for(var s=[],c=0;c<u;c++){var f=parseInt(n[0][c],10),h=parseInt(n[o-1][c],10),d=("down"===r?h-f:f-h)/(o-1)||0;s.push(d)}a.push(s)}if(-1!==["right","left"].indexOf(r))for(var p=0;p<l;p++){var y=parseInt(n[p][0],10),g=parseInt(n[p][i-1],10),v=("right"===r?g-y:y-g)/(i-1)||0;a.push([v])}return a}(m,b,w,v),R=k;if(["up","left"].indexOf(v)>-1&&!(1===k.length&&0===k[0].length)){if(R=[],"up"===v)for(var P=b.row-m.row+1,E=P%k.length,M=0;M<P;M++)R.push(k[(M+(k.length-E))%k.length]);else for(var _=b.col-m.col+1,j=_%k[0].length,A=0;A<k.length;A++){R.push([]);for(var T=0;T<_;T++)R[A].push(k[A][(T+(k[A].length-j))%k[A].length])}}this.hot.populateFromArray(m.row,m.col,R,b.row,b.col,"".concat(this.pluginName,".fill"),null,v,O),this.setSelection(y),this.hot.runHooks("afterAutofill",R,S,C,v),this.hot.render()}else this.hot._refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}},{key:"getCoordsOfDragAndDropBorders",value:function(t){var e=this.hot.getSelectedRangeLast(),n=e.getBottomEndCorner(),r=t;if(this.directions.includes(e3.vertical)&&this.directions.includes(e3.horizontal)){var o=e.getTopStartCorner();(n.col<=t.col||o.col>=t.col)&&(r=this.hot._createCellCoords(n.row,t.col)),(n.row<t.row||o.row>t.row)&&(r=this.hot._createCellCoords(t.row,n.col))}else if(this.directions.includes(e3.vertical))r=this.hot._createCellCoords(t.row,n.col);else{if(!this.directions.includes(e3.horizontal))return;r=this.hot._createCellCoords(n.row,t.col)}return this.reduceSelectionAreaIfNeeded(r)}},{key:"showBorder",value:function(t){var e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}},{key:"addRow",value:function(){var t=this;this.hot._registerTimeout(function(){t.hot.alter("insert_row_below",void 0,1,"".concat(t.pluginName,".fill")),t.addingStarted=!1},200)}},{key:"addNewRowIfNeeded",value:function(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){var t=this.hot.getSelectedLast(),e=this.hot.selection.highlight.getFill().getVisualCorners(),n=this.hot.countRows();t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(t){for(var e,n=this.hot.getData(),r=this.hot.countRows(),o=t[2]+1;o<r;o++){for(var i=t[1];i<=t[3];i++)if(n[o][i])return -1;var a=n[o][t[1]-1],l=n[o][t[3]+1];(a||l)&&(e=o)}return e}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(t,e){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(t[0],t[1])).add(this.hot._createCellCoords(e,t[3])).commit()}},{key:"setSelection",value:function(t){var e,n;(e=this.hot).selectCell.apply(e,((function(t){if(Array.isArray(t))return e9(t)})(n=(0,F.Sc)(t,function(t){return Math.max(t,0)}))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||e8(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([!1,!1]))}},{key:"selectAdjacent",value:function(){var t=this.hot.getSelectedLast(),e=this.getIndexOfLastAdjacentFilledInRow(t);return -1!==e&&void 0!==e&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}},{key:"redrawBorders",value:function(t){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(t).commit(),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(t){var e=this.hot.rootDocument.documentElement,n=(0,A.cv)(this.hot.table).top-(this.hot.rootWindow.pageYOffset||e.scrollTop)+(0,A.Pb)(this.hot.table),r=(0,A.cv)(this.hot.table).left-(this.hot.rootWindow.pageXOffset||e.scrollLeft)+(0,A.iO)(this.hot.table);return t.clientY>n&&t.clientX<=r}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()}),this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)})}},{key:"onCellCornerDblClick",value:function(){this.selectAdjacent()&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(t),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(t){var e=this.getIfMouseWasDraggedOutside(t);!1===this.addingStarted&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var t,e,n=(t=this.hot.getSettings().fillHandle,e={},!0===t?(e.directions=Object.keys(e3),e.autoInsertRow=!0):(0,I.Kn)(t)?((0,W.$K)(t.autoInsertRow)?t.direction===e3.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,(0,W.$K)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(e3)):"string"==typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e);this.directions=n.directions,this.autoInsertRow=n.autoInsertRow}},{key:"destroy",value:function(){e7(ne(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return nn}},{key:"PLUGIN_PRIORITY",get:function(){return 20}},{key:"SETTING_KEYS",get:function(){return[nn].concat(nr)}}],n&&e6(i.prototype,n),r&&e6(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function ni(t){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ni(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ni(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ni(e)?e:String(e)}(r.key),r)}}function nu(){return(nu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nc(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ns(t,e){return(ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nc(t){return(nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nf="autoRowSize",nh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ns(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nc(i);if(e){var r=nc(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ni(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).rowHeightsMap=void 0,e.headerHeight=null,e.ghostTable=new eL(e.hot),e.samplesGenerator=new eW(function(t,n){var r;return t>=0?r=e.hot.getDataAtCell(t,n):-1===t&&(r=e.hot.getColHeader(n)),{value:r}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredRows=0,e.rowHeightsMap=new eY.L,e.hot.rowIndexMapper.registerMap("autoRowSize",e.rowHeightsMap),e.addHook("beforeRowResize",function(t,n,r){return e.onBeforeRowResize(t,n,r)}),e}return n=[{key:"isEnabled",value:function(){var t=this.hot.getSettings()[nf];return!0===t||(0,I.Kn)(t)}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeChangeRender",function(e){return t.onBeforeChange(e)}),this.addHook("beforeColumnResize",function(){return t.recalculateAllRowsHeight()}),this.addHook("beforeViewRender",function(e){return t.onBeforeViewRender(e)}),this.addHook("modifyRowHeight",function(e,n){return t.getRowHeight(n,e)}),this.addHook("modifyColumnHeaderHeight",function(){return t.getColumnHeaderHeight()}),nu(nc(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this;this.headerHeight=null,nu(nc(i.prototype),"disablePlugin",this).call(this),this.addHook("beforeRowResize",function(e,n,r){return t.onBeforeRowResize(e,n,r)})}},{key:"calculateRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="number"==typeof e?{from:e,to:e}:e,i="number"==typeof n?{from:n,to:n}:n;if(null!==this.hot.getColHeader(0)){var a=this.samplesGenerator.generateRowSamples(-1,i);this.ghostTable.addColumnHeadersRow(a.get(-1))}(0,t5.q4)(o.from,o.to,function(e){if(r||null===t.rowHeightsMap.getValueAtIndex(e)){var n=t.samplesGenerator.generateRowSamples(e,i);(0,F.Bk)(n,function(e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,2)||function(t,e){if(t){if("string"==typeof t)return na(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return na(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1];return t.ghostTable.addRow(r,o)})}}),this.ghostTable.rows.length&&(this.hot.batchExecution(function(){t.ghostTable.getHeights(function(e,n){e<0?t.headerHeight=n:t.rowHeightsMap.setValueAtIndex(t.hot.toPhysicalRow(e),n)})},!0),this.measuredRows=o.to+1,this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=0,r=this.hot.countRows()-1,o=null;this.inProgress=!0;var a=this.getSyncCalculationLimit();this.firstCalculation&&a>=0&&(this.calculateRowsHeight({from:0,to:a},e),this.firstCalculation=!1,n=a+1),n<r?function a(){if(!t.hot){(0,eD.Wx)(o),t.inProgress=!1;return}t.calculateRowsHeight({from:n,to:Math.min(n+i.CALCULATION_STEP,r)},e),(n=n+i.CALCULATION_STEP+1)<r?o=(0,eD.U7)(a):((0,eD.Wx)(o),t.inProgress=!1,t.hot.view.adjustElementsSize(!0),t.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&t.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())}():(this.inProgress=!1,this.hot.view.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[nf],e=t&&(0,I.nr)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&(0,I.nr)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){(0,A.pn)(this.hot.view._wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[nf],e=i.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return(0,I.Kn)(t)&&(e=t.syncLimit,(0,z.wK)(e)?e=(0,t5.N1)(n,e):e>>=0),Math.min(e,n)}},{key:"getRowHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(t)),r=e;return null!==n&&n>(e||0)&&(r=n),r}},{key:"getColumnHeaderHeight",value:function(){return this.headerHeight}},{key:"getFirstVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getFirstVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getLastVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.headerHeight=null,this.rowHeightsMap.init()}},{key:"clearCacheByRange",value:function(t){var e=this,n="number"==typeof t?{from:t,to:t}:t,r=n.from,o=n.to;this.hot.batchExecution(function(){(0,t5.q4)(Math.min(r,o),Math.max(r,o),function(t){e.rowHeightsMap.setValueAtIndex(t,null)})},!0)}},{key:"isNeedRecalculate",value:function(){return!!(0,F.w7)(this.rowHeightsMap.getValues().slice(0,this.measuredRows),function(t){return null===t}).length}},{key:"onBeforeViewRender",value:function(){var t=this.hot.renderCall,e=this.hot.getSettings().fixedRowsBottom,n=this.getFirstVisibleRow(),r=this.getLastVisibleRow();if(-1!==n&&-1!==r){if(this.calculateRowsHeight({from:n,to:r},void 0,t),e){var o=this.hot.countRows()-1;this.calculateRowsHeight({from:o-e,to:o})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}}},{key:"onBeforeRowMove",value:function(t,e){this.clearCacheByRange({from:t,to:e}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(t,e,n){var r=t;return n&&(this.calculateRowsHeight(e,void 0,!0),r=this.getRowHeight(e)),r}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){t.hot&&t.recalculateAllRowsHeight()},0)}},{key:"onBeforeChange",value:function(t){var e=null;1===t.length?e=t[0][0]:t.length>1&&(e={from:t[0][0],to:t[t.length-1][0]}),null!==e&&this.clearCacheByRange(e)}},{key:"destroy",value:function(){this.ghostTable.clean(),nu(nc(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return nf}},{key:"PLUGIN_PRIORITY",get:function(){return 40}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}],n&&nl(i.prototype,n),r&&nl(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI),nd=n(1023),np=n(8863),ny=new Map([["indexesSequence",{getListWithInsertedItems:nd.S,getListWithRemovedItems:nd.t}],["physicallyIndexed",{getListWithInsertedItems:np.S,getListWithRemovedItems:np.t}]]),ng=function(t){if(!1===ny.has(t))throw Error("Alter strategy with ID '".concat(t,"' does not exist."));return ny.get(t)},nv=n(3166),nm=n(1496);function nb(t){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nb(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nb(e)?e:String(e)}(r.key),r)}}function nS(){return(nS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nk(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function nC(t,e){return(nC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nk(t){return(nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nO=ng("physicallyIndexed"),nR=nO.getListWithInsertedItems,nP=nO.getListWithRemovedItems,nE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nC(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nk(i);if(e){var r=nk(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.call(this,function(t){return t})}return n=[{key:"insert",value:function(t,e){var n=(0,nv.X)(this.indexedValues,e);this.indexedValues=nR(n,t,e,this.initValueOrFn),nS(nk(i.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){var e=nP(this.indexedValues,t);this.indexedValues=(0,nv.i)(e,t),nS(nk(i.prototype),"remove",this).call(this,t)}}],nw(i.prototype,n),r&&nw(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(nm.n);function nM(t){return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nM(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nM(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nM(e)?e:String(e)}(r.key),r)}}function nA(){return(nA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nI(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function nT(t,e){return(nT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nI(t){return(nI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nx=ng("physicallyIndexed"),nD=nx.getListWithInsertedItems,nN=nx.getListWithRemovedItems,nH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nT(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nI(i);if(e){var r=nI(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nM(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.call(this,function(t){return t})}return n=[{key:"insert",value:function(t,e){var n=this;this.indexedValues=nD(this.indexedValues,t,e,function(t,e){return n.getNextValue(e)}),nA(nI(i.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){this.indexedValues=nN(this.indexedValues,t),nA(nI(i.prototype),"remove",this).call(this,t)}},{key:"getNextValue",value:function(t){var e;return Math.max.apply(Math,function(t){if(Array.isArray(t))return n_(t)}(e=this.getValues())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return n_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n_(t,e)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())+1+t}}],nj(i.prototype,n),r&&nj(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(nm.n);function nB(t){return(nB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nL(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==nB(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nB(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nB(e)?e:String(e)}(r.key),r)}}function nU(){return(nU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nF(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function nV(t,e){return(nV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nF(t){return(nF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nW="bindRowsWithHeaders",nz=new Map([["loose",nE],["strict",nH]]),nY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nV(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nF(i);if(e){var r=nF(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nB(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).headerIndexes=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[nW]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[nW];"string"!=typeof e&&(e="loose");var n=nz.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new n),this.addHook("modifyRowHeader",function(e){return t.onModifyRowHeader(e)}),nU(nF(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),nU(nF(i.prototype),"disablePlugin",this).call(this)}},{key:"onModifyRowHeader",value:function(t){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(t))}},{key:"destroy",value:function(){nU(nF(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return nW}},{key:"PLUGIN_PRIORITY",get:function(){return 210}}],n&&nL(i.prototype,n),r&&nL(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI),nG=n(3895);function nK(t){return(nK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nq(t){return function(t){if(Array.isArray(t))return nZ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return nZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nZ(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function n$(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n2(r.key),r)}}function nX(){return(nX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n0(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function nJ(t,e){return(nJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nQ(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n0(t){return(n0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n1(t,e,n){return(e=n2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n2(t){var e=function(t,e){if("object"!==nK(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==nK(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===nK(e)?e:String(e)}function n3(t,e){var n=n8(t,e,"get");return n.get?n.get.call(t):n.value}function n4(t,e,n){var r=n8(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function n8(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var n9="collapsibleColumns",n6=["nestedHeaders"],n7="collapsibleIndicator",n5=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]),rt=new WeakMap,re=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nJ(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=n0(i);if(e){var r=n0(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nK(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nQ(t)}(this,t)});function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var t,e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return n1(nQ(t=o.call.apply(o,[this].concat(r))),"nestedHeadersPlugin",null),n1(nQ(t),"eventManager",new tc.Z(nQ(t))),n1(nQ(t),"headerStateManager",null),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(e=nQ(t),rt),rt.set(e,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[n9]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.hot.getSettings().nestedHeaders||(0,nG.ZK)("You need to configure the Nested Headers plugin in order to use collapsible headers."),n4(this,rt,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",function(){return t.onInit()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("afterGetColHeader",function(){return t.onAfterGetColHeader.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(e,n,r){return t.onBeforeOnCellMouseDown(e,n,r)}),nX(n0(i.prototype),"enablePlugin",this).call(this),this.updatePlugin())}},{key:"updatePlugin",value:function(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){var t=this.hot.getSettings().collapsibleColumns;"boolean"==typeof t?this.headerStateManager.mapState(function(t){return{collapsible:t.origColspan>1}}):Array.isArray(t)&&(this.headerStateManager.mapState(function(){return{collapsible:!1}}),this.headerStateManager.mergeStateWith(t))}nX(n0(i.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),n4(this,rt,null),this.nestedHeadersPlugin=null,this.clearButtons(),nX(n0(i.prototype),"disablePlugin",this).call(this)}},{key:"clearButtons",value:function(){if(this.hot.view){var t=this.hot.view._wt.getSetting("columnHeaders").length,e=this.hot.view._wt.wtTable.THEAD,n=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,r=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,o=function(t){t&&t.parentNode.removeChild(t)};(0,t5.q4)(0,t-1,function(t){var i=e.childNodes[t],a=n.childNodes[t],l=r?r.childNodes[t]:null;(0,t5.q4)(0,i.childNodes.length-1,function(t){var e=i.childNodes[t].querySelector(".".concat(n7));o(e),a&&a.childNodes[t]&&o(e=a.childNodes[t].querySelector(".".concat(n7))),r&&l&&l.childNodes[t]&&o(e=l.childNodes[t].querySelector(".".concat(n7)))})},!0)}}},{key:"expandSection",value:function(t){this.toggleCollapsibleSection([t],"expand")}},{key:"collapseSection",value:function(t){this.toggleCollapsibleSection([t],"collapse")}},{key:"toggleAllCollapsibleSections",value:function(t){var e=this,n=this.headerStateManager.mapNodes(function(n){var r=n.collapsible,o=n.origColspan,i=n.headerLevel,a=n.columnIndex,l=n.isCollapsed;if(!0===r&&o>1&&(l&&"expand"===t||!l&&"collapse"===t))return{row:e.headerStateManager.levelToRowCoords(i),col:a}});this.toggleCollapsibleSection(n,t)}},{key:"collapseAll",value:function(){this.toggleAllCollapsibleSections("collapse")}},{key:"expandAll",value:function(){this.toggleAllCollapsibleSections("expand")}},{key:"toggleCollapsibleSection",value:function(t,e){var n=this;if(!n5.has(e))throw Error("Unsupported action is passed (".concat(e,")."));if(Array.isArray(t)){var r=(0,F.w7)(t,function(t){return t.row<0}),o=r.length>0;(0,F.Bk)(r,function(t){var r,i=t.row,a=t.col,l=null!==(r=n.headerStateManager.getHeaderSettings(i,a))&&void 0!==r?r:{},u=l.collapsible,s=l.isCollapsed;if(!u||s&&"collapse"===e||!s&&"expand"===e)return o=!1,!1});var i=[],a=[];o&&(0,F.Bk)(r,function(t){var r=t.row,o=t.col,l=n.headerStateManager.triggerNodeModification(e,r,o),u=l.colspanCompensation,s=l.affectedColumns,c=l.rollbackModification;u>0&&(a.push.apply(a,nq(s)),i.push(c))});var l=this.getCollapsedColumns(),u=[];"collapse"===e?u=(0,F.uW)([].concat(nq(l),a)):"expand"===e&&(u=(0,F.w7)(l,function(t){return!a.includes(t)}));var s=n5.get(e);if(!1===this.hot.runHooks(s.beforeHook,l,u,o)){(0,F.Bk)(i,function(t){t()});return}this.hot.batchExecution(function(){(0,F.Bk)(a,function(t){n3(n,rt).setValueAtIndex(n.hot.toPhysicalColumn(t),s.hideColumn)})},!0);var c=this.getCollapsedColumns().length!==l.length;this.hot.runHooks(s.afterHook,l,u,o,c),this.hot.render(),this.hot.view.adjustElementsSize(!0)}}},{key:"getCollapsedColumns",value:function(){return n3(this,rt).getHiddenIndexes()}},{key:"onAfterGetColHeader",value:function(t,e,n){var r,o,i=null!==(r=this.headerStateManager.getHeaderSettings(n,t))&&void 0!==r?r:{},a=i.collapsible,l=i.origColspan,u=i.isCollapsed,s=a&&l>1&&t>=this.hot.getSettings().fixedColumnsStart,c=e.querySelector(".".concat(n7));s?(c||(c=this.hot.rootDocument.createElement("div"),(0,A.cn)(c,n7),e.querySelector("div:first-child").appendChild(c)),(0,A.IV)(c,["collapsed","expanded"]),u?((0,A.cn)(c,"collapsed"),(0,A.tT)(c,"+")):((0,A.cn)(c,"expanded"),(0,A.tT)(c,"-"))):null===(o=c)||void 0===o||o.remove()}},{key:"onBeforeOnCellMouseDown",value:function(t,e){(0,A.pv)(t.target,n7)&&((0,A.pv)(t.target,"expanded")?(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):(0,A.pv)(t.target,"collapsed")&&(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),(0,T.mM)(t))}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){n4(this,rt,null),nX(n0(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return n9}},{key:"PLUGIN_PRIORITY",get:function(){return 290}},{key:"PLUGIN_DEPS",get:function(){return["plugin:NestedHeaders"]}},{key:"SETTING_KEYS",get:function(){return[n9].concat(n6)}}],n&&n$(i.prototype,n),r&&n$(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);n(9337),n(3161),n(9601);var rn=n(7161),rr=n(1923);n(4553),n(1249);var ro=n(7099);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ra(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ru(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ru(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ru(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rc(r.key),r)}}function rc(t){var e=function(t,e){if("object"!==ri(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ri(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ri(e)?e:String(e)}var rf=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],rh=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.sortingStates=new ro.A,this.sortEmptyCells=!1,this.indicator=!0,this.headerAction=!0,this.compareFunctionFactory=void 0,this.mapName=e,this.hot.columnIndexMapper.registerMap(e,this.sortingStates)}return t=[{key:"updateAllColumnsProperties",value:function(t){var e=this;(0,I.Kn)(t)&&(0,I._l)(t,function(t,n){rf.includes(n)&&(e[n]=t)})}},{key:"getAllColumnsProperties",value:function(){var t={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"==typeof this.compareFunctionFactory&&(t.compareFunctionFactory=this.compareFunctionFactory),t}},{key:"getSortOrderOfColumn",value:function(t){var e;return null===(e=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))||void 0===e?void 0:e.sortOrder}},{key:"getIndexOfColumnInSortQueue",value:function(t){return t=this.hot.toPhysicalColumn(t),this.sortingStates.getEntries().findIndex(function(e){return rl(e,1)[0]===t})}},{key:"getNumberOfSortedColumns",value:function(){return this.sortingStates.getLength()}},{key:"isListOfSortedColumnsEmpty",value:function(){return 0===this.getNumberOfSortedColumns()}},{key:"isColumnSorted",value:function(t){return(0,I.Kn)(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))}},{key:"getSortStates",value:function(){var t=this;return null===this.sortingStates?[]:this.sortingStates.getEntries().map(function(e){var n=rl(e,2),r=n[0],o=n[1];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ra(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=rc(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ra(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({column:t.hot.toVisualColumn(r)},o)})}},{key:"getColumnSortState",value:function(t){var e=this.getSortOrderOfColumn(t);if((0,W.$K)(e))return{column:t,sortOrder:e}}},{key:"setSortStates",value:function(t){this.sortingStates.clear();for(var e=0;e<t.length;e+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(t[e].column),{sortOrder:t[e].sortOrder})}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}],rs(n.prototype,t),e&&rs(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),rd="desc";function rp(t){return t===rd?void 0:"asc"===t?rd:"asc"}function ry(t){return t.querySelector(".".concat("colHeader"))}function rg(t,e){if(t<0||!e.parentNode)return!1;var n=e.parentNode.parentNode.childNodes;return -1==Array.from(n).indexOf(e.parentNode)-n.length}function rv(t,e,n){return -1===t&&e>=0&&!1===(0,T.dO)(n)}var rm="indicatorDisabled",rb="columnSorting",rw="sortAction",rS=new Map([["asc","ascending"],[rd,"descending"]]);function rC(t,e,n,r){var o=[rb];if(r&&o.push(rw),!1===n)return o.push(rm),o;var i=t.getSortOrderOfColumn(e);return(0,W.$K)(i)&&o.push(rS.get(i)),o}function rk(t,e,n){var r=e.locale;return function(e,o){var i=n.sortEmptyCells;return("string"==typeof e&&(e=e.toLocaleLowerCase(r)),"string"==typeof o&&(o=o.toLocaleLowerCase(r)),e===o)?0:(0,W.xb)(e)?(0,W.xb)(o)?0:i&&"asc"===t?-1:1:(0,W.xb)(o)?i&&"asc"===t?1:-1:isNaN(e)&&!isNaN(o)?"asc"===t?1:-1:!isNaN(e)&&isNaN(o)?"asc"===t?-1:1:(isNaN(e)||isNaN(o)||(e=parseFloat(e),o=parseFloat(o)),e<o)?"asc"===t?-1:1:e>o?"asc"===t?1:-1:0}}var rO="default",rR=n(5872),rP=(0,rR.Z)("sorting.compareFunctionFactory"),rE=rP.register,rM=rP.getItem,r_=rP.hasItem,rj=(0,rR.Z)("sorting.mainSortComparator"),rA=rj.register,rT=rj.getItem;function rI(t){return r_(t)?rM(t):rM(rO)}function rx(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return rD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rD(t,e)}}(t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rN(t){return(rN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}rE("numeric",function(t,e,n){return function(e,r){var o=parseFloat(e),i=parseFloat(r),a=n.sortEmptyCells;if(o===i||isNaN(o)&&isNaN(i))return 0;if(a){if((0,W.xb)(e))return"asc"===t?-1:1;if((0,W.xb)(r))return"asc"===t?1:-1}return isNaN(o)?1:isNaN(i)?-1:o<i?"asc"===t?-1:1:o>i?"asc"===t?1:-1:0}}),rE("checkbox",function(t,e,n){var r=e.checkedTemplate,o=e.uncheckedTemplate,i=n.sortEmptyCells;return function(a,l){var u=(0,W.xb)(a),s=(0,W.xb)(l),c=u?o:a,f=s?o:l,h=c===o||c===r,d=f===o||f===r;if(!1===i){if(u&&!1===s)return 1;if(!1===u&&s)return -1}return!1===h&&d?"asc"===t?-1:1:h&&!1===d?"asc"===t?1:-1:!1===h&&!1===d?rk(t,e,n)(a,l):c===o&&f===r?"asc"===t?-1:1:c===r&&f===o?"asc"===t?1:-1:0}}),rE("date",function(t,e,n){return function(r,o){var i=n.sortEmptyCells;if(r===o)return 0;if((0,W.xb)(r))return(0,W.xb)(o)?0:i&&"asc"===t?-1:1;if((0,W.xb)(o))return i&&"asc"===t?1:-1;var a=e.dateFormat,l=tu(r,a),u=tu(o,a);return l.isValid()?u.isValid()?u.isAfter(l)?"asc"===t?-1:1:u.isBefore(l)?"asc"===t?1:-1:0:-1:1}}),rE(rO,rk);var rH=["column"],rB=["column"];function rL(t){return function(t){if(Array.isArray(t))return rU(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return rU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rU(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function rV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rV(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=rY(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rV(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rW(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function rz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rY(r.key),r)}}function rY(t){var e=function(t,e){if("object"!==rN(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==rN(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rN(e)?e:String(e)}function rG(){return(rG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rq(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function rK(t,e){return(rK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rq(t){return(rq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rZ="columnSorting",r$="append";rA(rZ,function(t,e){return function(n,r){var o,i,a,l,u,s=rx(n).slice(1),c=rx(r).slice(1);return o=t[0],i=e[0],a=s[0],l=c[0],((u=i.columnSorting).compareFunctionFactory?u.compareFunctionFactory:rI(i.type))(o,i,u)(a,l)}}),tb.Z.getSingleton().register("beforeColumnSort"),tb.Z.getSingleton().register("afterColumnSort");var rX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rK(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rq(i);if(e){var r=rq(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===rN(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).columnStatesManager=null,e.columnMetaCache=null,e.pluginKey=rZ,e.indexesSequenceCache=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[this.pluginKey]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnStatesManager=new rh(this.hot,"".concat(this.pluginKey,".sortingStates")),this.columnMetaCache=new eY.L(function(e){var n=t.hot.toVisualColumn(e);return null===n&&(n=e),t.getMergedPluginSettings(n)}),this.hot.columnIndexMapper.registerMap("".concat(this.pluginKey,".columnMeta"),this.columnMetaCache),this.addHook("afterGetColHeader",function(e,n){return t.onAfterGetColHeader(e,n)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("afterOnCellMouseDown",function(e,n){return t.onAfterOnCellMouseDown(e,n)}),this.addHook("afterInit",function(){return t.loadOrSortBySettings()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.hot.view&&this.loadOrSortBySettings(),rG(rq(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this,e=function(e,n){var r=ry(n);!1!==rg(e,n)&&null!==r&&t.updateHeaderClasses(r)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",function(){t.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(function(){null!==t.indexesSequenceCache&&(t.hot.rowIndexMapper.setIndexesSequence(t.indexesSequenceCache.getValues()),t.hot.rowIndexMapper.unregisterMap(t.pluginKey))},!0),this.hot.columnIndexMapper.unregisterMap("".concat(this.pluginKey,".columnMeta")),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,rG(rq(i.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){var e=this.getSortConfig(),n=this.getNormalizedSortConfigs(t),r=this.areValidSortConfigs(n);!1!==this.hot.runHooks("beforeColumnSort",e,n,r)&&(0===e.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new rr.b),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),r&&(this.columnStatesManager.setSortStates(n),this.sortByPresetSortStates(n),this.saveAllSortSettings(n)),this.hot.runHooks("afterColumnSort",e,r?n:e,r),r&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}},{key:"clearSort",value:function(){this.sort([])}},{key:"isSorted",value:function(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}},{key:"getSortConfig",value:function(t){return(0,W.$K)(t)?this.columnStatesManager.getColumnSortState(t):this.columnStatesManager.getSortStates()}},{key:"setSortConfig",value:function(t){var e=this.getNormalizedSortConfigs(t);this.areValidSortConfigs(e)&&this.columnStatesManager.setSortStates(e)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t.slice(0,1):[t]}},{key:"areValidSortConfigs",value:function(t){var e=this.hot.countCols();return function(t){if(t.some(function(t){return!1===function(t){if(!1===(0,I.Kn)(t))return!1;var e=t.column,n=t.sortOrder;return Number.isInteger(e)&&["asc",rd].includes(n)}(t)}))return!1;var e=t.map(function(t){return t.column});return new Set(e).size===e.length}(t)&&t.every(function(t){var n=t.column;return n<=e&&n>=0})}},{key:"saveAllSortSettings",value:function(t){var e=this,n=this.columnStatesManager.getAllColumnsProperties(),r=function(t){var n=t.column,r=rW(t,rH);return rF({column:e.hot.toPhysicalColumn(n)},r)};n.initialConfig=(0,F.Sc)(t,r),this.hot.runHooks("persistentStateSave","columnSorting",n)}},{key:"getAllSavedSortSettings",value:function(){var t=this,e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);var n=e.value,r=function(e){var n=e.column,r=rW(e,rB);return rF({column:t.hot.toVisualColumn(n)},r)};return(0,W.$K)(n)&&Array.isArray(n.initialConfig)&&(n.initialConfig=(0,F.Sc)(n.initialConfig,r)),n}},{key:"getColumnNextConfig",value:function(t){var e=this.columnStatesManager.getSortOrderOfColumn(t);if((0,W.$K)(e)){var n=rp(e);return(0,W.$K)(n)?{column:t,sortOrder:n}:void 0}var r=this.hot.countCols();if(Number.isInteger(t)&&t>=0&&t<r)return{column:t,sortOrder:rp()}}},{key:"getNextSortConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r$,n=this.columnStatesManager.getIndexOfColumnInSortQueue(t),r=this.getSortConfig(),o=this.getColumnNextConfig(t);if(-1!==n){if((0,W.o8)(o))return[].concat(rL(r.slice(0,n)),rL(r.slice(n+1)));if(e===r$)return[].concat(rL(r.slice(0,n)),rL(r.slice(n+1)),[o]);if("replace"===e)return[].concat(rL(r.slice(0,n)),[o],rL(r.slice(n+1)))}return(0,W.$K)(o)?r.concat(o):r}},{key:"getPluginColumnConfig",value:function(t){if((0,I.Kn)(t)){var e=t[this.pluginKey];if((0,I.Kn)(e))return e}return{}}},{key:"getMergedPluginSettings",value:function(t){var e=this.hot.getSettings()[this.pluginKey],n=this.columnStatesManager.getAllColumnsProperties(),r=Object.getPrototypeOf(this.hot.getCellMeta(0,t));return Array.isArray(r.columns)?Object.assign(n,e,this.getPluginColumnConfig(r.columns[t])):(0,rn.mf)(r.columns)?Object.assign(n,e,this.getPluginColumnConfig(r.columns(t))):Object.assign(n,e)}},{key:"getFirstCellSettings",value:function(t){var e=Object.create(this.hot.getCellMeta(0,t));return e[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(t)),e}},{key:"getNumberOfRowsToSort",value:function(t){var e=this.hot.getSettings();return e.maxRows<=t?e.maxRows:t-e.minSpareRows}},{key:"sortByPresetSortStates",value:function(t){var e=this;if(0===t.length){this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());return}for(var n=[],r=this.hot.countRows(),o=function(n){return(0,F.Sc)(t,function(t){return e.hot.getDataAtCell(n,t.column)})},i=0;i<this.getNumberOfRowsToSort(r);i+=1)n.push([this.hot.toPhysicalRow(i)].concat(o(i)));var a=(0,F.Sc)(n,function(t){return t[0]});!function(t,e){for(var n=rT(e),r=arguments.length,o=Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t.sort(n.apply(void 0,o))}(n,this.pluginKey,(0,F.Sc)(t,function(t){return t.sortOrder}),(0,F.Sc)(t,function(t){return e.getFirstCellSettings(t.column)}));for(var l=n.length;l<r;l+=1)n.push([l].concat(o(l)));var u=(0,F.Sc)(n,function(t){return t[0]}),s=new Map((0,F.Sc)(a,function(t,e){return[t,u[e]]})),c=(0,F.Sc)(this.hot.rowIndexMapper.getIndexesSequence(),function(t){return s.has(t)?s.get(t):t});this.hot.rowIndexMapper.setIndexesSequence(c)}},{key:"loadOrSortBySettings",value:function(){var t=this.getAllSavedSortSettings();if((0,I.Kn)(t))this.sortBySettings(t);else{var e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}},{key:"sortBySettings",value:function(t){if((0,I.Kn)(t)){this.columnStatesManager.updateAllColumnsProperties(t);var e=t.initialConfig;(Array.isArray(e)||(0,I.Kn)(e))&&this.sort(e)}else this.hot.render()}},{key:"onAfterGetColHeader",value:function(t,e){var n=ry(e);if(!1!==rg(t,e)&&null!==n){var r=this.getFirstCellSettings(t)[this.pluginKey],o=r.indicator,i=r.headerAction;this.updateHeaderClasses(n,this.columnStatesManager,t,o,i)}}},{key:"updateHeaderClasses",value:function(t){if((0,A.IV)(t,Array.from(rS.values()).concat(rw,rm,rb)),!1!==this.enabled){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(0,A.cn)(t,rC.apply(void 0,n))}}},{key:"onUpdateSettings",value:function(t){rG(rq(i.prototype),"onUpdateSettings",this).call(this),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),(0,W.$K)(t[this.pluginKey])&&this.sortBySettings(t[this.pluginKey])}},{key:"onAfterLoadData",value:function(t){!0===t&&this.hot.view&&this.loadOrSortBySettings()}},{key:"wasClickableHeaderClicked",value:function(t,e){return this.getFirstCellSettings(e)[this.pluginKey].headerAction&&"SPAN"===t.target.nodeName}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){!1!==rv(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(r.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==rv(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(e.col)),this.sort(this.getColumnNextConfig(e.col)))}},{key:"destroy",value:function(){var t;null===(t=this.columnStatesManager)||void 0===t||t.destroy(),rG(rq(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return rZ}},{key:"PLUGIN_PRIORITY",get:function(){return 50}}],n&&rz(i.prototype,n),r&&rz(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function rJ(t){return(rJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==rJ(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==rJ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===rJ(e)?e:String(e)}(r.key),r)}}n(3371),n(6977);var r0=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=this.plugin.hot,this.endpoints=[],this.settings=e,this.settingsType="array",this.currentEndpoint=null,this.cellsToSetCache=[]}return t=[{key:"getEndpoint",value:function(t){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[t]:this.endpoints[t]}},{key:"getAllEndpoints",value:function(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}},{key:"fillMissingEndpointData",value:function(t){return this.parseSettings(t.call(this))}},{key:"parseSettings",value:function(t){var e=this,n=[],r=t;if(!r&&"function"==typeof this.settings){this.settingsType="function";return}return r||(r=this.settings),(0,F.Bk)(r,function(t){var r={};e.assignSetting(t,r,"ranges",[[0,e.hot.countRows()-1]]),e.assignSetting(t,r,"reversedRowCoords",!1),e.assignSetting(t,r,"destinationRow",Error("\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,r,"destinationColumn",Error("\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,r,"sourceColumn",t.destinationColumn),e.assignSetting(t,r,"type","sum"),e.assignSetting(t,r,"forceNumeric",!1),e.assignSetting(t,r,"suppressDataTypeErrors",!0),e.assignSetting(t,r,"suppressDataTypeErrors",!0),e.assignSetting(t,r,"customFunction",null),e.assignSetting(t,r,"readOnly",!0),e.assignSetting(t,r,"roundFloat",!1),n.push(r)}),n}},{key:"assignSetting",value:function(t,e,n,r){if("ranges"===n&&void 0===t[n]){e[n]=r;return}if("ranges"!==n||0!==t[n].length){if(void 0===t[n]){if(r instanceof Error)throw r;e[n]=r}else"destinationRow"===n&&e.reversedRowCoords?e[n]=this.hot.countRows()-t[n]-1:e[n]=t[n]}}},{key:"resetSetupBeforeStructureAlteration",value:function(t,e,n){if("function"===this.settingsType){var r=t.indexOf("row")>-1?"row":"col",o=this.getAllEndpoints();(0,F.Bk)(o,function(o){"row"===r&&o.destinationRow>=e&&("insert_row"===t?o.alterRowOffset=n:"remove_row"===t&&(o.alterRowOffset=-1*n)),"col"===r&&o.destinationColumn>=e&&("insert_col"===t?o.alterColumnOffset=n:"remove_col"===t&&(o.alterColumnOffset=-1*n))}),this.resetAllEndpoints(o,!1)}}},{key:"resetSetupAfterStructureAlteration",value:function(t,e,n,r,o){var i=this,a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if("function"===this.settingsType){var l=function t(){return i.hot.removeHook("beforeViewRender",t),i.refreshAllEndpoints()};this.hot.addHookOnce("beforeViewRender",l);return}var u=t.indexOf("row")>-1?"row":"col",s=t.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),f=0===t.indexOf("move_row");(0,F.Bk)(c,function(t){"row"===u&&t.destinationRow>=e&&(t.alterRowOffset=s*n),"col"===u&&t.destinationColumn>=e&&(t.alterColumnOffset=s*n)}),this.resetAllEndpoints(c,!f),f?(0,F.Bk)(c,function(t){i.extendEndpointRanges(t,e,r[0],r.length),i.recreatePhysicalRanges(t),i.clearOffsetInformation(t)}):(0,F.Bk)(c,function(t){i.shiftEndpointCoordinates(t,e)}),a&&this.refreshAllEndpoints()}},{key:"clearOffsetInformation",value:function(t){t.alterRowOffset=void 0,t.alterColumnOffset=void 0}},{key:"extendEndpointRanges",value:function(t,e,n,r){(0,F.Bk)(t.ranges,function(t){t[1]&&(e>=t[0]&&e<=t[1]?n>t[1]?t[1]+=r:n<t[0]&&(t[0]-=r):n>=t[0]&&n<=t[1]&&(t[1]-=r,e<=t[0]&&(t[0]+=1,t[1]+=1)))})}},{key:"recreatePhysicalRanges",value:function(t){var e=this,n=t.ranges,r=[],o=[];(0,F.Bk)(n,function(t){var n=[];if(t[1])for(var r=t[0];r<=t[1];r++)n.push(e.hot.toPhysicalRow(r));else n.push(e.hot.toPhysicalRow(t[0]));o.push(n)}),(0,F.Bk)(o,function(t){var e=[];(0,F.Bk)(t,function(n,o){0===o?e.push(n):t[o]!==t[o-1]+1&&(e.push(t[o-1]),r.push(e),(e=[]).push(n)),o===t.length-1&&(e.push(n),r.push(e))})}),t.ranges=r}},{key:"shiftEndpointCoordinates",value:function(t,e){t.alterRowOffset&&0!==t.alterRowOffset?(t.destinationRow+=t.alterRowOffset||0,(0,F.Bk)(t.ranges,function(n){(0,F.Bk)(n,function(r,o){r>=e&&(n[o]+=t.alterRowOffset||0)})})):t.alterColumnOffset&&0!==t.alterColumnOffset&&(t.destinationColumn+=t.alterColumnOffset||0,t.sourceColumn+=t.alterColumnOffset||0)}},{key:"resetAllEndpoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e.some(function(e){var n=e.alterRowOffset||0,r=e.alterColumnOffset||0;return!!(e.destinationRow+n>=t.hot.countRows()||e.destinationColumn+r>=t.hot.countCols())})||(this.cellsToSetCache=[],(0,F.Bk)(e,function(e){t.resetEndpointValue(e,n)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}},{key:"refreshAllEndpoints",value:function(){var t=this;this.cellsToSetCache=[],(0,F.Bk)(this.getAllEndpoints(),function(e){t.currentEndpoint=e,t.plugin.calculate(e),t.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshChangedEndpoints",value:function(t){var e=this,n=[];this.cellsToSetCache=[],(0,F.Bk)(t,function(t,r,o){"".concat(t[2]||"")!=="".concat(t[3])&&(0,F.Bk)(e.getAllEndpoints(),function(t,i){e.hot.propToCol(o[r][1])===t.sourceColumn&&-1===n.indexOf(i)&&n.push(i)})}),(0,F.Bk)(n,function(t){e.refreshEndpoint(e.getEndpoint(t))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshEndpoint",value:function(t){this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t),this.currentEndpoint=null}},{key:"resetEndpointValue",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=t.alterRowOffset||0,r=t.alterColumnOffset||0;this.cellsToSetCache.push([this.hot.toVisualRow(t.destinationRow+(e?n:0)),this.hot.toVisualColumn(t.destinationColumn+(e?r:0)),""])}},{key:"setEndpointValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.hot.toVisualRow(t.destinationRow);if(t.destinationRow>=this.hot.countRows()||t.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}var o=this.hot.toVisualRow(t.destinationRow);if(null!==o){var i=this.hot.getCellMeta(o,t.destinationColumn);("init"===e||i.readOnly!==t.readOnly)&&(i.readOnly=t.readOnly,i.className="columnSummaryResult")}t.roundFloat&&!isNaN(t.result)&&(t.result=t.result.toFixed(t.roundFloat)),n?this.hot.setDataAtCell(r,t.destinationColumn,t.result,"ColumnSummary.set"):this.cellsToSetCache.push([r,t.destinationColumn,t.result]),t.alterRowOffset=void 0,t.alterColumnOffset=void 0}},{key:"throwOutOfBoundsWarning",value:function(){(0,nG.ZK)("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}],rQ(n.prototype,t),e&&rQ(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),r1=n(8336);function r2(t){return null==t||isNaN(t)}function r3(t){return(r3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r3(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==r3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r3(e)?e:String(e)}(r.key),r)}}function r8(){return(r8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r6(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function r9(t,e){return(r9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r6(t){return(r6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r7="columnSummary",r5=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r9(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=r6(i);if(e){var r=r6(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===r3(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).endpoints=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[r7]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.settings=this.hot.getSettings()[r7],this.endpoints=new r0(this,this.settings),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("afterChange",function(){return t.onAfterChange.apply(t,arguments)}),this.addHook("beforeCreateRow",function(e,n,r){return t.endpoints.resetSetupBeforeStructureAlteration("insert_row",e,n,null,r)}),this.addHook("beforeCreateCol",function(e,n,r){return t.endpoints.resetSetupBeforeStructureAlteration("insert_col",e,n,null,r)}),this.addHook("beforeRemoveRow",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_row"].concat(r))}),this.addHook("beforeRemoveCol",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_col"].concat(r))}),this.addHook("afterCreateRow",function(e,n,r){return t.endpoints.resetSetupAfterStructureAlteration("insert_row",e,n,null,r)}),this.addHook("afterCreateCol",function(e,n,r){return t.endpoints.resetSetupAfterStructureAlteration("insert_col",e,n,null,r)}),this.addHook("afterRemoveRow",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_row"].concat(r))}),this.addHook("afterRemoveCol",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_col"].concat(r))}),this.addHook("afterRowMove",function(){return t.onAfterRowMove.apply(t,arguments)}),r8(r6(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.endpoints=null,this.settings=null,this.currentEndpoint=null}},{key:"calculate",value:function(t){switch(t.type.toLowerCase()){case"sum":t.result=this.calculateSum(t);break;case"min":case"max":t.result=this.calculateMinMax(t,t.type);break;case"count":t.result=this.countEntries(t);break;case"average":t.result=this.calculateAverage(t);break;case"custom":t.result=t.customFunction.call(this,t)}}},{key:"calculateSum",value:function(t){var e=this,n=0;return(0,I._l)(t.ranges,function(r){n+=e.getPartialSum(r,t.sourceColumn)}),n}},{key:"getPartialSum",value:function(t,e){var n=0,r=t[1]||t[0],o=null,i=0;do{if(null!==(o=r2(o=this.getCellValue(r,e))?null:o)){var a=("".concat(o).split(".")[1]||[]).length||1;a>i&&(i=a)}n+=o||0,r-=1}while(r>=t[0]);return Math.round(n*Math.pow(10,i))/Math.pow(10,i)}},{key:"calculateMinMax",value:function(t,e){var n=this,r=null;return(0,I._l)(t.ranges,function(o){var i=n.getPartialMinMax(o,t.sourceColumn,e);if(null===r&&null!==i&&(r=i),null!==i)switch(e){case"min":r=Math.min(r,i);break;case"max":r=Math.max(r,i)}}),null===r?"Not enough data":r}},{key:"getPartialMinMax",value:function(t,e,n){var r,o=null,i=t[1]||t[0];do{if(r=r2(r=this.getCellValue(i,e))?null:r,null===o)o=r;else if(null!==r)switch(n){case"min":o=Math.min(o,r);break;case"max":o=Math.max(o,r)}i-=1}while(i>=t[0]);return o}},{key:"countEmpty",value:function(t,e){var n,r=0,o=t[1]||t[0];do null===(n=r2(n=this.getCellValue(o,e))?null:n)&&(r+=1),o-=1;while(o>=t[0]);return r}},{key:"countEntries",value:function(t){var e=this,n=0,r=t.ranges;return(0,I._l)(r,function(r){var o=void 0===r[1]?1:r[1]-r[0]+1,i=e.countEmpty(r,t.sourceColumn);n+=o,n-=i}),n}},{key:"calculateAverage",value:function(t){return this.calculateSum(t)/this.countEntries(t)}},{key:"getCellValue",value:function(t,e){var n=this.hot.toVisualRow(t),r=this.hot.toVisualColumn(e),o=this.hot.getSourceDataAtCell(t,e),i="";if(null!==n&&null!==r&&(i=this.hot.getCellMeta(n,r).className||""),i.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"==typeof o&&(o=o.replace(/,/,".")),o=parseFloat(o)),isNaN(o)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw Error((0,r1.e)(h||(h=Object.freeze(Object.defineProperties(["ColumnSummary plugin: cell at (",", ",") is not in a \n          numeric format. Cannot do the calculation."],{raw:{value:Object.freeze(["ColumnSummary plugin: cell at (",", ",") is not in a\\x20\n          numeric format. Cannot do the calculation."])}}))),t,e));return o}},{key:"onAfterInit",value:function(){this.endpoints.endpoints=this.endpoints.parseSettings(),this.endpoints.refreshAllEndpoints(!0)}},{key:"onAfterChange",value:function(t,e){t&&"ColumnSummary.reset"!==e&&"ColumnSummary.set"!==e&&"loadData"!==e&&this.endpoints.refreshChangedEndpoints(t)}},{key:"onAfterRowMove",value:function(t,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",t[0],t.length,t,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,t.length,t,this.pluginName)}}],r=[{key:"PLUGIN_KEY",get:function(){return r7}},{key:"PLUGIN_PRIORITY",get:function(){return 220}}],n&&r4(i.prototype,n),r&&r4(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ot(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ot(e)?e:String(e)}(r.key),r)}}var on=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.rootDocument=t,this.isRtl=e,this.container=null,this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}return e=[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}],t=[{key:"setPosition",value:function(t,e){this.editorStyle.left="".concat(t,"px"),this.editorStyle.top="".concat(e,"px")}},{key:"setSize",value:function(t,e){if(t&&e){var n=this.getInputElement();n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px")}}},{key:"getSize",value:function(){return{width:(0,A.iO)(this.getInputElement()),height:(0,A.Pb)(this.getInputElement())}}},{key:"resetSize",value:function(){var t=this.getInputElement();t.style.width="",t.style.height=""}},{key:"setReadOnlyState",value:function(t){this.getInputElement().readOnly=t}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.hidden||(this.editorStyle.display="none"),this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.getInputElement().value=t||""}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return this.rootDocument.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var t=this.rootDocument.createElement("div"),e=this.rootDocument.createElement("textarea");return t.style.display="none",this.container=this.rootDocument.createElement("div"),this.container.setAttribute("dir",this.isRtl?"rtl":"ltr"),(0,A.cn)(this.container,n.CLASS_EDITOR_CONTAINER),this.rootDocument.body.appendChild(this.container),(0,A.cn)(t,n.CLASS_EDITOR),(0,A.cn)(e,n.CLASS_INPUT),t.appendChild(e),this.container.appendChild(t),t}},{key:"getInputElement",value:function(){return this.editor.querySelector(".".concat(n.CLASS_INPUT))}},{key:"destroy",value:function(){var t=this.container?this.container.parentNode:null;this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null,t&&t.removeChild(this.container)}}],oe(n.prototype,t),e&&oe(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();n(5069);var or="---------";function oo(t){return(0,A.pv)(t,"htSeparator")}function oi(t){return(0,A.pv)(t,"htDisabled")}function oa(t){return(0,A.pv)(t,"htSelectionDisabled")}function ol(t){var e=t.getSelected();return!e||e[0]<0?null:e}function ou(t,e){var n={};return(0,F.Bk)(t,function(t){t.forAll(function(t,r){t>=0&&r>=0&&(n[t]||(n[t]=[]),n[t][r]=e(t,r))})}),n}function os(t,e,n,r,o){(0,F.Bk)(t,function(t){t.forAll(function(t,i){var a,l;t>=0&&i>=0&&(a=r(t,i),l=n,a.className&&(l="vertical"===e?function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","");return"".concat(n," ").concat(e)}(a.className,n):function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","");return"".concat(n," ").concat(e)}(a.className,n)),o(t,i,"className",l))})})}function oc(t,e){var n=!1;return Array.isArray(t)&&(0,F.Bk)(t,function(t){return t.forAll(function(t,r){if(t>=0&&r>=0&&e(t,r))return n=!0,!1}),n}),n}function of(t){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(t)}function oh(t,e){for(var n=t.slice(0);0<n.length;)if(n[0].name===e)n.shift();else break;return n}var od=n(5981);function op(t){return(op="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==op(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==op(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===op(e)?e:String(e)}(r.key),r)}}var og=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(t)}return oy(e.prototype,[{key:"hide",value:function(){var t=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout(function(){!1===t.wasLastActionShow&&t.runLocalHooks("hide")},250)}},{key:"show",value:function(t){this.wasLastActionShow=!0,this.showDebounced(t)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=(0,rn.Ds)(function(e){t.wasLastActionShow&&t.runLocalHooks("show",e.from.row,e.from.col)},e)}},{key:"destroy",value:function(){this.clearLocalHooks()}}]),t&&oy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();(0,I.jB)(og,od.Z);var ov=n(1196);function om(t){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ob(t,e,n){return(e=oS(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ow(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oS(r.key),r)}}function oS(t){var e=function(t,e){if("object"!==om(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==om(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===om(e)?e:String(e)}function oC(){return(oC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oR(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ok(t,e){return(ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oO(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oR(t){return(oR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oP="comments",oE=new WeakMap,oM="comment",o_="value",oj="style",oA="readOnly",oT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ok(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=oR(i);if(e){var r=oR(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===om(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return oO(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).editor=null,e.displaySwitch=null,e.eventManager=null,e.range={},e.preventEditorAutoSwitch=!1,oE.set(oO(e),{tempEditorDimensions:{},cellBelowCursor:null}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[oP]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.editor||(this.editor=new on(this.hot.rootDocument,this.hot.isRtl())),this.eventManager||(this.eventManager=new tc.Z(this)),this.displaySwitch||(this.displaySwitch=new og(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",function(e){return t.addToContextMenu(e)}),this.addHook("afterRenderer",function(e,n,r,o,i,a){return t.onAfterRenderer(e,a)}),this.addHook("afterScrollHorizontally",function(){return t.hide()}),this.addHook("afterScrollVertically",function(){return t.hide()}),this.addHook("afterBeginEditing",function(){return t.hide()}),this.displaySwitch.addLocalHook("hide",function(){return t.hide()}),this.displaySwitch.addLocalHook("show",function(e,n){return t.showAtCell(e,n)}),this.registerListeners(),oC(oR(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),oC(oR(i.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){oC(oR(i.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var t=this,e=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(e,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(){return t.onEditorBlur()}),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",function(e){return t.onEditorMouseDown(e)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",function(e){return t.onEditorMouseUp(e)})}},{key:"setRange",value:function(t){this.range=t}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(t){var e=(0,A.oq)(t.target,"TD","TBODY");return!!(e&&(0,A.pv)(e,"htCommentCell")&&(0,A.oq)(e,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(t){return this.editor.getInputElement()===t.target}},{key:"setComment",value:function(t){if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.editor.getValue(),n="";null!=t?n=t:null!=e&&(n=e);var r=this.range.from.row,o=this.range.from.col;this.updateCommentMeta(r,o,ob({},o_,n)),this.hot.render()}},{key:"setCommentAtCell",value:function(t,e,n){this.setRange({from:this.hot._createCellCoords(t,e)}),this.setComment(n)}},{key:"removeComment",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,oM),t&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(t,e){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.setRange({from:this.hot._createCellCoords(t,e)}),this.removeComment(n)}},{key:"getComment",value:function(){var t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,o_)}},{key:"getCommentAtCell",value:function(t,e){return this.getCommentMeta(t,e,o_)}},{key:"show",value:function(){if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.range.from,e=t.row,n=t.col;if(e<0||e>this.hot.countSourceRows()-1||n<0||n>this.hot.countSourceCols()-1)return!1;var r=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.editor.setValue(r[oM]?r[oM][o_]:""),this.editor.show(),this.refreshEditor(!0),!0}},{key:"showAtCell",value:function(t,e){return this.setRange({from:this.hot._createCellCoords(t,e)}),this.show()}},{key:"hide",value:function(){this.editor.hide()}},{key:"refreshEditor",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n||this.range.from&&this.editor.isVisible()){var r=this.hot,o=r.rowIndexMapper,i=r.columnIndexMapper,a=this.range.from,l=a.row,u=a.col,s=o.getRenderableFromVisualIndex(l),c=i.getRenderableFromVisualIndex(u),f=null===s;this.editor.setPosition(0,0),null===s&&(s=o.getRenderableFromVisualIndex(o.getNearestNotHiddenIndex(l,-1))),null===c&&(c=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(u,-1)));var h=null===s,d=null===c;s=null!==(t=s)&&void 0!==t?t:0,c=null!==(e=c)&&void 0!==e?e:0;var p=this.hot,y=p.rootWindow,g=p.view._wt,v=g.wtTable,m=g.getCell({row:s,col:c},!0),b=this.getCommentMeta(l,u,oj);b?this.editor.setSize(b.width,b.height):this.editor.resetSize();var w=d?0:v.getStretchedColumnWidth(c),S=f&&!h?(0,A.Pb)(m):0,C=m.getBoundingClientRect(),k=C.left,O=C.top,R=C.width,P=C.height,E=this.editor.getSize(),M=E.width,_=E.height,j=this.hot.rootWindow,T=j.innerWidth,I=j.innerHeight,x=this.hot.rootDocument.documentElement,D=k+y.scrollX+w,N=O+y.scrollY+S;this.hot.isRtl()&&(D-=M+w),this.hot.isLtr()&&k+R+M>T?D=k+y.scrollX-M-1:this.hot.isRtl()&&D<-(x.scrollWidth-x.clientWidth)&&(D=k+y.scrollX+w+1),O+_>I&&(N-=_-P+1),this.editor.setPosition(D,N),this.editor.setReadOnlyState(this.getCommentMeta(l,u,oA))}}},{key:"checkSelectionCommentsConsistency",value:function(){var t=this.hot.getSelectedRangeLast();if(!t)return!1;var e=!1,n=t.getTopStartCorner();return this.getCommentMeta(n.row,n.col,o_)&&(e=!0),e}},{key:"updateCommentMeta",value:function(t,e,n){var r,o=this.hot.getCellMeta(t,e)[oM];o?(r=(0,I.I8)(o),(0,I.ZB)(r,n)):r=n,this.hot.setCellMeta(t,e,oM,r)}},{key:"getCommentMeta",value:function(t,e,n){var r=this.hot.getCellMeta(t,e);if(r[oM])return r[oM][n]}},{key:"onMouseDown",value:function(t){if(this.hot.view&&this.hot.view._wt&&!this.preventEditorAutoSwitch&&!this.targetIsCommentTextArea(t)){var e=(0,A.oq)(t.target,"TD","TBODY"),n=null;e&&(n=this.hot.getCoords(e)),(!e||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}}},{key:"onMouseOver",value:function(t){var e=oE.get(this),n=this.hot.rootDocument;if(!(this.preventEditorAutoSwitch||this.editor.isFocused()||(0,A.pv)(t.target,"wtBorder"))&&e.cellBelowCursor!==t.target&&this.editor){if(e.cellBelowCursor=n.elementFromPoint(t.clientX,t.clientY),this.targetIsCellWithComment(t)){var r=this.hot._createCellRange(this.hot.getCoords(t.target));this.displaySwitch.show(r)}else(0,A.MO)(t.target,n)&&!this.targetIsCommentTextArea(t)&&this.displaySwitch.hide()}}},{key:"onMouseUp",value:function(){this.preventEditorAutoSwitch=!1}},{key:"onAfterRenderer",value:function(t,e){e[oM]&&e[oM][o_]&&(0,A.cn)(t,e.commentedCellClassName)}},{key:"onEditorBlur",value:function(){this.setComment()}},{key:"onEditorMouseDown",value:function(t){oE.get(this).tempEditorDimensions={width:(0,A.iO)(t.target),height:(0,A.Pb)(t.target)}}},{key:"onEditorMouseUp",value:function(t){var e=oE.get(this),n=(0,A.iO)(t.target),r=(0,A.Pb)(t.target);(n!==e.tempEditorDimensions.width+1||r!==e.tempEditorDimensions.height+2)&&this.updateCommentMeta(this.range.from.row,this.range.from.col,ob({},oj,{width:n,height:r}))}},{key:"onContextMenuAddComment",value:function(){var t=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,this.displaySwitch.cancelHiding(),this.setRange({from:t.highlight}),this.show(),this.hot.deselectCell(),this.editor.focus()}},{key:"onContextMenuRemoveComment",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll(function(e,n){e>=0&&n>=0&&t.removeCommentAtCell(e,n,!1)}),this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll(function(e,n){if(e>=0&&n>=0){var r=!!t.getCommentMeta(e,n,oA);t.updateCommentMeta(e,n,ob({},oA,!r))}})}},{key:"addToContextMenu",value:function(t){var e=this,n=function(){return e.hot.rowIndexMapper.getRenderableIndexesLength()>0&&e.hot.columnIndexMapper.getRenderableIndexesLength()>0};t.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return e.checkSelectionCommentsConsistency()?e.hot.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_EDIT_COMMENT):e.hot.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ADD_COMMENT)},callback:function(){return e.onContextMenuAddComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsRemove",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_REMOVE_COMMENT)},callback:function(){return e.onContextMenuRemoveComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsReadOnly",name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT);return oc(this.getSelectedRangeLast(),function(e,n){var r=t.getCellMeta(e,n)[oM];if(r&&(r=r[oA]),r)return!0})&&(e=of(e)),e},callback:function(){return e.onContextMenuMakeReadOnly()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())||!e.checkSelectionCommentsConsistency()}})}},{key:"getDisplayDelaySetting",value:function(){var t=this.hot.getSettings()[oP];if((0,I.Kn)(t))return t.displayDelay}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),oC(oR(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return oP}},{key:"PLUGIN_PRIORITY",get:function(){return 60}}],n&&ow(i.prototype,n),r&&ow(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function oI(t){return(oI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ox(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==oI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==oI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===oI(e)?e:String(e)}(r.key),r)}}var oD=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.commands={},this.commonCallback=null}return t=[{key:"registerCommand",value:function(t,e){this.commands[t]=e}},{key:"setCommonCallback",value:function(t){this.commonCallback=t}},{key:"execute",value:function(t){for(var e,n,r=this,o=arguments.length,i=Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];var l=t.split(":"),u=l[0],s=2===l.length?l[1]:null,c=this.commands[u];if(!c)throw Error("Menu command '".concat(u,"' not exists."));if(s&&c.submenu&&(e=c.submenu.items,(0,F.Bk)(e,function(t){var e=t.key?t.key.split(":"):null;if(Array.isArray(e)&&e[1]===s)return n=t,!1}),c=n),!(!0===c.disabled||"function"==typeof c.disabled&&!0===c.disabled.call(this.hot)||(0,I.nr)(c,"submenu"))){var f=[];"function"==typeof c.callback&&f.push(c.callback),"function"==typeof this.commonCallback&&f.push(this.commonCallback),i.unshift(l.join(":")),(0,F.Bk)(f,function(t){return t.apply(r.hot,i)})}}}],ox(n.prototype,t),e&&ox(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),oN="alignment",oH="clear_column",oB="col_left",oL="col_right",oU="make_read_only",oV="redo",oF=n(1199);function oW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var oz="remove_col";function oY(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var oG="remove_row",oK="row_above",oq="row_below",oZ="no_items",o$="undo";function oX(t){return(oX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oJ(t,e,n){var r;return(r=function(t,e){if("object"!==oX(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==oX(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===oX(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oQ=[oK,oq,oB,oL,oH,oG,oz,o$,oV,oU,oN,or,oZ],o0=(oJ(d={},or,function(){return{name:or}}),oJ(d,oZ,function(){return{key:oZ,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_NO_ITEMS)},disabled:!0,isCommand:!1}}),oJ(d,oK,function(){return{key:oK,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ROW_ABOVE)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",t.row,1,"ContextMenu.rowAbove")},disabled:function(){return!ol(this)||(this.selection.isSelectedByCorner()?0===this.countRows():this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),oJ(d,oq,function(){return{key:oq,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ROW_BELOW)},callback:function(){var t=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",t.row,1,"ContextMenu.rowBelow")},disabled:function(){return!ol(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),oJ(d,oB,function(){return{key:oB,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_INSERT_LEFT)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,t.col,1,"ContextMenu.columnLeft")},disabled:function(){return!(this.isColumnModificationAllowed()&&ol(this))||(this.selection.isSelectedByCorner()?0===this.countCols():this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),oJ(d,oL,function(){return{key:oL,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_INSERT_RIGHT)},callback:function(){var t=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,t.col,1,"ContextMenu.columnRight")},disabled:function(){return!(this.isColumnModificationAllowed()&&ol(this))||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),oJ(d,oH,function(){return{key:oH,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_CLEAR_COLUMN)},callback:function(t,e){var n=e[0].start.col,r=e[0].end.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(e[0].start.row,e[0].end.row),r,"ContextMenu.clearColumn")},disabled:function(){return!ol(this)||!this.selection.isSelectedByColumnHeader()}}}),oJ(d,oG,function(){return{key:oG,name:function(){var t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{var n,r=function(t){if(Array.isArray(t))return t}(n=t[0])||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,3)||function(t,e){if(t){if("string"==typeof t)return oY(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oY(t,e)}}(n,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();r[0]-r[2]!=0&&(e=1)}}return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_REMOVE_ROW,e)},callback:function(){this.alter("remove_row",(0,oF.I8)(this.getSelected()),1,"ContextMenu.removeRow")},disabled:function(){if(!ol(this))return!0;var t=this.countRows();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByColumnHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveRow}}}),oJ(d,oz,function(){return{key:oz,name:function(){var t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{var n,r=function(t){if(Array.isArray(t))return t}(n=t[0])||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,4)||function(t,e){if(t){if("string"==typeof t)return oW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oW(t,e)}}(n,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();r[1]-r[3]!=0&&(e=1)}}return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_REMOVE_COLUMN,e)},callback:function(){this.alter("remove_col",(0,oF.X8)(this.getSelected()),null,"ContextMenu.removeColumn")},disabled:function(){if(!this.isColumnModificationAllowed()||!ol(this))return!0;var t=this.countCols();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByRowHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveColumn}}}),oJ(d,o$,function(){return{key:o$,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_UNDO)},callback:function(){this.undo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}),oJ(d,oV,function(){return{key:oV,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_REDO)},callback:function(){this.redo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}),oJ(d,oU,function(){return{key:oU,name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_READ_ONLY);return oc(this.getSelectedRange(),function(e,n){return t.getCellMeta(e,n).readOnly})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=oc(e,function(e,n){return t.getCellMeta(e,n).readOnly});(0,F.Bk)(e,function(e){e.forAll(function(e,r){e>=0&&r>=0&&t.setCellMeta(e,r,"readOnly",!n)})}),this.render()},disabled:function(){return!!this.selection.isSelectedByCorner()||0===this.countRows()||0===this.countCols()||!this.getSelectedRange()||0===this.getSelectedRange().length}}}),oJ(d,oN,function(){return{key:oN,name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT)},disabled:function(){return 0===this.countRows()||0===this.countCols()||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:"".concat(oN,":left"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htLeft"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="horizontal",o="htLeft";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{key:"".concat(oN,":center"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htCenter"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="horizontal",o="htCenter";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{key:"".concat(oN,":right"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htRight"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="horizontal",o="htRight";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{key:"".concat(oN,":justify"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htJustify"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="horizontal",o="htJustify";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{name:or},{key:"".concat(oN,":top"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_TOP);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htTop"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="vertical",o="htTop";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{key:"".concat(oN,":middle"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htMiddle"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="vertical",o="htMiddle";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1},{key:"".concat(oN,":bottom"),name:function(){var t=this,e=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM);return oc(this.getSelectedRange(),function(e,n){var r=t.getCellMeta(e,n).className;if(r&&-1!==r.indexOf("htBottom"))return!0})&&(e=of(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=ou(e,function(e,n){return t.getCellMeta(e,n).className}),r="vertical",o="htBottom";this.runHooks("beforeCellAlignment",n,e,r,o),os(e,r,o,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),this.render()},disabled:!1}]}}}),d);function o1(){var t={};return(0,I._l)(o0,function(e,n){t[n]=e()}),t}function o2(t){return(o2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o3(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==o2(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o2(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o2(e)?e:String(e)}(r.key),r)}}var o4=function(){var t,e;function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.predefinedItems=o1(),this.defaultOrderPattern=e}return t=[{key:"setPredefinedItems",value:function(t){var e=this,n={};this.defaultOrderPattern.length=0,(0,I._l)(t,function(t,r){var o="";t.name===or?(n[or]=t,o=or):isNaN(parseInt(r,10))?(t.key=void 0===t.key?r:t.key,n[r]=t,o=t.key):(n[t.key]=t,o=t.key),e.defaultOrderPattern.push(o)}),this.predefinedItems=n}},{key:"getItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=t;return o&&o.items?o=o.items:Array.isArray(o)||(o=e),(0,I.Kn)(o)?(0,I._l)(o,function(t,e){var o=n["string"==typeof t?t:e];o||(o=t),(0,I.Kn)(t)?(0,I.l7)(o,t):"string"==typeof o&&(o={name:o}),void 0===o.key&&(o.key=e),r.push(o)}):(0,F.Bk)(o,function(t,e){var o=n[t];!o&&oQ.indexOf(t)>=0||(o||(o={name:t,key:"".concat(e)}),(0,I.Kn)(t)&&(0,I.l7)(o,t),void 0===o.key&&(o.key=e),r.push(o))}),r}(t,this.defaultOrderPattern,this.predefinedItems)}}],o3(n.prototype,t),e&&o3(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function o8(t){return(o8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==o8(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==o8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===o8(e)?e:String(e)}(r.key),r)}}n(4603);var o6=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n);var r,o,i,a,l,u,s=(0,A.AQ)(e),c=(0,A.DZ)(e);this.rootWindow=e,this.type=this.getSourceType(t),"literal"===this.type?(r=parseInt(t.top,10),i=parseInt(t.left,10),l=t.height||0,u=t.width||0,o=r,a=i,r+=s,i+=c):"event"===this.type&&(r=parseInt(t.pageY,10),i=parseInt(t.pageX,10),l=t.target.clientHeight,u=t.target.clientWidth,o=r-s,a=i-c),this.top=r,this.topRelative=o,this.left=i,this.leftRelative=a,this.scrollTop=s,this.scrollLeft=c,this.cellHeight=l,this.cellWidth=u}return t=[{key:"getSourceType",value:function(t){var e="literal";return t instanceof Event&&(e="event"),e}},{key:"fitsAbove",value:function(t){return this.topRelative>=t.offsetHeight}},{key:"fitsBelow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+t.offsetHeight<=e}},{key:"fitsOnRight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+t.offsetWidth<=e}},{key:"fitsOnLeft",value:function(t){return this.leftRelative>=t.offsetWidth}}],o9(n.prototype,t),e&&o9(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),o7=n(8194),o5=n(9931);function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=ii(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ii(r.key),r)}}function ii(t){var e=function(t,e){if("object"!==it(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==it(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===it(e)?e:String(e)}var ia="menu",il=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.options=e||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:215,container:this.hot.rootDocument.documentElement},this.eventManager=new tc.Z(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}return t=[{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"mousedown",function(e){return t.onDocumentMouseDown(e)}),this.eventManager.addEventListener(e.document,"contextmenu",function(e){return t.onDocumentContextMenu(e)}),e=(0,A.f5)(e)}},{key:"setMenuItems",value:function(t){this.menuItems=t}},{key:"getSelectedItem",value:function(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}},{key:"hasSelectedItem",value:function(){return Array.isArray(this.hotMenu.getSelectedLast())}},{key:"setOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[t]=e}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var t=this;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";var e=(0,rn.Ds)(function(e){return t.openSubMenu(e)},300),n=this.options.minWidth||215,r=!1,o=(0,F.w7)(this.menuItems,function(e){var n;return e.key===oZ&&(r=!0),n=t.hot,!e.hidden||!("function"==typeof e.hidden&&e.hidden.call(n))});if(o.length<1&&!r)o.push(o1()[oZ]);else if(0===o.length)return;o=function(t){var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or,i=t.slice(0);return(e=(i=oh(i,o)).slice(0)).reverse(),(e=oh(e,o)).reverse(),n=i=e,r=[],(0,F.Bk)(n,function(t,e){e>0?r[r.length-1].name!==t.name&&r.push(t):r.push(t)}),i=r}(o,or);var i=!1,a={data:o,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:function(t){return(0,W.$K)(t)&&t<n?n:t},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,maxCols:1,columns:[{data:"name",renderer:function(e,n,r,o,i,a){return t.menuItemRenderer(e,n,r,o,i,a)}}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",afterOnCellMouseOver:function(n,r){t.isAllSubMenusClosed()?e(r.row):t.openSubMenu(r.row)},rowHeights:function(t){return o[t].name===or?1:23},afterOnCellContextMenu:function(e){e.preventDefault(),(0,o5.uM)()&&i&&t.hasSelectedItem()&&t.close(!0)},beforeOnCellMouseUp:function(e){t.hasSelectedItem()&&(i=!t.isCommandPassive(t.getSelectedItem()),t.executeCommand(e))},afterOnCellMouseUp:function(e){(!(0,o5.uM)()||!(0,T.dO)(e))&&i&&t.hasSelectedItem()&&((0,o5.K1)()||(0,o5.L)()?setTimeout(function(){return t.close(!0)},325):t.close(!0))},afterUnlisten:function(){!t.hasSelectedItem()&&t.isOpened()&&t.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new o7.Z(this.container,a),this.hotMenu.addHook("afterInit",function(){return t.onAfterInit()}),this.hotMenu.addHook("afterSelection",function(){return t.onAfterSelection.apply(t,arguments)}),this.hotMenu.init(),this.hotMenu.listen();var l=this.hotMenu.getShortcutManager(),u=l.addContext(ia),s=ir(ir({},{group:ia}),{},{runOnlyIf:function(e){return!1===(0,A.u7)(e.target)||!1===t.container.contains(e.target)}});l.setActiveContextName("menu"),u.addShortcuts([{keys:[["Escape"]],callback:function(){t.keyEvent=!0,t.close(),t.keyEvent=!1}},{keys:[["ArrowDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectNextCell(e[0],e[1]):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["ArrowUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectPrevCell(e[0],e[1]):t.selectLastCell(),t.keyEvent=!1}},{keys:[["ArrowRight"]],callback:function(){var e=t.hotMenu.getSelectedLast();if(t.keyEvent=!0,e){var n=t.openSubMenu(e[0]);n&&n.selectFirstCell()}t.keyEvent=!1}},{keys:[["ArrowLeft"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e&&t.isSubMenu()&&(t.close(),t.parentMenu&&t.parentMenu.hotMenu.listen()),t.keyEvent=!1}},{keys:[["Enter"]],callback:function(e){var n=t.hotMenu.getSelectedLast();t.keyEvent=!0,t.hotMenu.getSourceDataAtRow(n[0]).submenu||(t.executeCommand(e),t.close(!0)),t.keyEvent=!1}},{keys:[["PageUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(-t.hotMenu.countVisibleRows(),0):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["PageDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(t.hotMenu.countVisibleRows(),0):t.selectLastCell(),t.keyEvent=!1}}],s),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(t&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(t){if(!this.hotMenu)return!1;var e=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!e||!(0,A.pv)(e,"htSubmenu"))return!1;var r=this.hotMenu.getSourceDataAtRow(t),o=new n(this.hot,{parent:this,name:r.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return o.setMenuItems(r.submenu.items),o.open(),o.setPosition(e.getBoundingClientRect()),this.hotSubMenus[r.key]=o,o}},{key:"closeSubMenu",value:function(t){var e=this.hotMenu.getSourceDataAtRow(t),n=this.hotSubMenus[e.key];n&&(n.destroy(),delete this.hotSubMenus[e.key])}},{key:"closeAllSubMenus",value:function(){var t=this;(0,F.Bk)(this.hotMenu.getData(),function(e,n){return t.closeSubMenu(n)})}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){var t=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),t&&t.removeChild(this.container)}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(t){if(this.isOpened()&&this.hasSelectedItem()){var e=this.getSelectedItem();if(this.runLocalHooks("select",e,t),!this.isCommandPassive(e)){var n=this.hot.getSelectedRange(),r=n?(0,F.Sc)(n,function(t){return{start:t.getTopStartCorner(),end:t.getBottomEndCorner()}}):[];this.runLocalHooks("executeCommand",e.key,r,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,r,t)}}}},{key:"isCommandPassive",value:function(t){var e=t.isCommand,n=t.name,r=t.disabled,o=t.submenu,i=!0===r||"function"==typeof r&&!0===r.call(this.hot);return!1===e||n===or||!0===i||o}},{key:"setPosition",value:function(t){var e=new o6(t,this.container.ownerDocument.defaultView);this.options.keepInViewport?(e.fitsBelow(this.container)?this.setPositionBelowCursor(e):e.fitsAbove(this.container)?this.setPositionAboveCursor(e):this.setPositionBelowCursor(e),this.hot.isLtr()?this.setHorizontalPositionForLtr(e):this.setHorizontalPositionForRtl(e)):(this.setPositionBelowCursor(e),this.setPositionOnRightOfCursor(e))}},{key:"setHorizontalPositionForRtl",value:function(t){t.fitsOnLeft(this.container)?this.setPositionOnLeftOfCursor(t):this.setPositionOnRightOfCursor(t)}},{key:"setHorizontalPositionForLtr",value:function(t){t.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(t):this.setPositionOnLeftOfCursor(t)}},{key:"setPositionAboveCursor",value:function(t){var e=this.offset.above+t.top-this.container.offsetHeight;this.isSubMenu()&&(e=t.top+t.cellHeight-this.container.offsetHeight+3),this.container.style.top="".concat(e,"px")}},{key:"setPositionBelowCursor",value:function(t){var e=this.offset.below+t.top+1;this.isSubMenu()&&(e=t.top-1),this.container.style.top="".concat(e,"px")}},{key:"setPositionOnRightOfCursor",value:function(t){var e=t.left;if(this.isSubMenu()){var n=this.parentMenu.container.getBoundingClientRect().right;e+=t.cellWidth+n-(t.left+t.cellWidth)}else e+=this.offset.right;this.container.style.left="".concat(e,"px")}},{key:"setPositionOnLeftOfCursor",value:function(t){var e=this.offset.left+t.left-this.container.offsetWidth;if(this.isSubMenu()){var n=this.parentMenu.container.getBoundingClientRect().left;e-=t.left-n}this.container.style.left="".concat(e,"px")}},{key:"selectFirstCell",value:function(){var t=this.hotMenu.getCell(0,0);oo(t)||oi(t)||oa(t)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var t=this.hotMenu.countRows()-1,e=this.hotMenu.getCell(t,0);oo(e)||oi(e)||oa(e)?this.selectPrevCell(t,0):(this.hotMenu.selectCell(t,0,void 0,void 0,!1),this.hotMenu.scrollViewportTo(t,0,!0,!1))}},{key:"selectNextCell",value:function(t,e){var n=t+1,r=n<this.hotMenu.countRows()?this.hotMenu.getCell(n,e):null;r&&(oo(r)||oi(r)||oa(r)?this.selectNextCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"selectPrevCell",value:function(t,e){var n=t-1,r=n>=0?this.hotMenu.getCell(n,e):null;r&&(oo(r)||oi(r)||oa(r)?this.selectPrevCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"menuItemRenderer",value:function(t,e,n,r,o,i){var a=t.getSourceDataAtRow(n),l=this.hot.rootDocument.createElement("div"),u=function(t){return t.disableSelection},s=i;("function"==typeof s&&(s=s.call(this.hot)),(0,A.cS)(e),(0,A.cn)(l,"htItemWrapper"),e.appendChild(l),RegExp(or,"i").test(a.name))?(0,A.cn)(e,"htSeparator"):"function"==typeof a.renderer?((0,A.cn)(e,"htCustomMenuRenderer"),e.appendChild(a.renderer(t,l,n,r,o,s))):(0,A.uS)(l,s),!0===a.disabled||"function"==typeof a.disabled&&!0===a.disabled.call(this.hot)?((0,A.cn)(e,"htDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):u(a)?((0,A.cn)(e,"htSelectionDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):(0,I.nr)(a,"submenu")?((0,A.cn)(e,"htSubmenu"),u(a)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,r,void 0,void 0,!1,!1)})):((0,A.IV)(e,["htSubmenu","htDisabled"]),u(a)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,r,void 0,void 0,!1,!1)}))}},{key:"createContainer",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.options.container.ownerDocument,r=e;return r&&((0,rn.mf)(r)&&(r=null===(r=r.call(this.hot))||(0,W.o8)(r)?"":r.toString()),r=r.replace(/[^A-z0-9]/g,"_"),r="".concat(this.options.className,"Sub_").concat(r),t=n.querySelector(".".concat(this.options.className,".").concat(r))),t||(t=n.createElement("div"),(0,A.cn)(t,"htMenu ".concat(this.options.className)),r&&(0,A.cn)(t,r),this.options.container.appendChild(t)),t}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onAfterInit",value:function(){var t=this.hotMenu.view._wt.wtTable,e=this.hotMenu.getSettings().data,n=t.hider.style,r=t.holder.style,o=parseInt(n.width,10),i=(0,F.k$)(e,function(t,e){return t+(e.name===or?1:26)},0);r.width="".concat(o+3,"px"),r.height="".concat(i+3,"px"),n.height=r.height}},{key:"onAfterSelection",value:function(t,e,n,r,o){!1===this.keyEvent&&(o.value=!0)}},{key:"onDocumentMouseDown",value:function(t){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!(0,A.MO)(t.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!(0,A.MO)(t.target,".htMenu")&&this.close(!0))}},{key:"onDocumentContextMenu",value:function(t){this.isOpened()&&(0,A.pv)(t.target,"htCore")&&(0,A.MO)(t.target,this.hotMenu.rootElement)&&t.preventDefault()}}],io(n.prototype,t),e&&io(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==iu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iu(e)?e:String(e)}(r.key),r)}}function ic(){return(ic="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ip(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ih(t,e){return(ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function id(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ip(t){return(ip=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(0,I.jB)(il,od.Z);var iy="contextMenu";tb.Z.getSingleton().register("afterContextMenuDefaultOptions"),tb.Z.getSingleton().register("beforeContextMenuShow"),tb.Z.getSingleton().register("afterContextMenuShow"),tb.Z.getSingleton().register("afterContextMenuHide"),tb.Z.getSingleton().register("afterContextMenuExecute");var ig=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ih(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ip(i);if(e){var r=ip(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===iu(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return id(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).eventManager=new tc.Z(id(e)),e.commandExecutor=new oD(e.hot),e.itemsFactory=null,e.menu=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[iy]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[iy];"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.menu=new il(this.hot,{className:"htContextMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",function(){return t.onMenuBeforeOpen()}),this.menu.addLocalHook("afterOpen",function(){return t.onMenuAfterOpen()}),this.menu.addLocalHook("afterClose",function(){return t.onMenuAfterClose()}),this.menu.addLocalHook("executeCommand",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.executeCommand).call.apply(e,[t].concat(r))}),this.addHook("afterOnCellContextMenu",function(e){return t.onAfterOnCellContextMenu(e)}),ic(ip(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),ic(ip(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),ic(ip(i.prototype),"disablePlugin",this).call(this)}},{key:"open",value:function(t){if(this.menu&&(this.prepareMenuItems(),this.menu.open(),this.menu.isOpened())){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var r=this.hot.rootWindow.frameElement.getBoundingClientRect(),o=r.top,i=r.left;e=o-(0,A.AQ)(t.view),n=i-(0,A.DZ)(t.view)}else e=-1*(0,A.AQ)(this.menu.hotMenu.rootWindow),n=-1*(0,A.DZ)(this.menu.hotMenu.rootWindow);this.menu.setPosition({top:parseInt(t.pageY,10)+e,left:parseInt(t.pageX,10)+n})}}},{key:"close",value:function(){this.menu&&(this.menu.close(),this.itemsFactory=null)}},{key:"executeCommand",value:function(t){var e;null===this.itemsFactory&&this.prepareMenuItems();for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.commandExecutor).execute.apply(e,[t].concat(r))}},{key:"prepareMenuItems",value:function(){var t=this;this.itemsFactory=new o4(this.hot,i.DEFAULT_ITEMS);var e=this.hot.getSettings()[iy],n={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",n),this.itemsFactory.setPredefinedItems(n.items);var r=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",r),this.menu.setMenuItems(r),(0,F.Bk)(r,function(e){return t.commandExecutor.registerCommand(e.key,e)})}},{key:"onAfterOnCellContextMenu",value:function(t){var e=this.hot.getSettings(),n=e.rowHeaders,r=e.colHeaders,o=t.target;if(this.close(),!(0,A.pv)(o,"handsontableInput")){if(t.preventDefault(),t.stopPropagation(),!(n||r)&&!("TD"===o.nodeName||"TD"===o.parentNode.nodeName)&&!((0,A.pv)(o,"current")&&(0,A.pv)(o,"wtBorder")))return;this.open(t)}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeContextMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),ic(ip(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return iy}},{key:"PLUGIN_PRIORITY",get:function(){return 70}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[oK,oq,or,oB,oL,or,oG,oz,or,o$,oV,or,oU,or,oN]}}],n&&is(i.prototype,n),r&&is(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);ig.SEPARATOR={name:or};var iv=n(1655);function im(t){return(im="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ib(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==im(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==im(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===im(e)?e:String(e)}(r.key),r)}}var iw=function(){var t;function e(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.data={}}return ib(e.prototype,[{key:"setData",value:function(t,e){this.data[t]=e}},{key:"getData",value:function(t){return this.data[t]||void 0}}]),t&&ib(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function iS(t){return(iS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iS(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==iS(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iS(e)?e:String(e)}(r.key),r)}}var ik=(o=function t(){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,t),this.clipboardData=new iw},i&&iC(o.prototype,i),a&&iC(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o);function iO(t){return(iO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iO(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==iO(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iO(e)?e:String(e)}(r.key),r)}}var iP=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.rootDocument=t.defaultView?t:t.ownerDocument,this.mainElement=null,this.eventManager=new tc.Z(this),this.listenersCount=new WeakSet,this.container=t}return t=[{key:"useSecondaryElement",value:function(){var t=function(t){var e=ij.get(t);if(e)return e.parentElement||t.appendChild(e),e;var n=(t.defaultView?t:t.ownerDocument).createElement("textarea");return ij.set(t,n),n.setAttribute("data-hot-input",""),n.className="HandsontableCopyPaste",n.tabIndex=-1,n.autocomplete="off",n.wrap="hard",n.value=" ",t.appendChild(n),n}(this.container);this.listenersCount.has(t)||(this.listenersCount.add(t),i_(this.eventManager,t,this)),this.mainElement=t}},{key:"setFocusableElement",value:function(t){this.listenersCount.has(t)||(this.listenersCount.add(t),i_(this.eventManager,t,this)),this.mainElement=t}},{key:"getFocusableElement",value:function(){return this.mainElement}},{key:"focus",value:function(){this.mainElement.value=" ",(0,o5.K1)()||(0,A.hd)(this.mainElement)}}],iR(n.prototype,t),e&&iR(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();(0,I.jB)(iP,od.Z);var iE=new WeakMap,iM=function(t,e){return function(n){return e.runLocalHooks(t,n)}};function i_(t,e,n){t.addEventListener(e,"copy",iM("copy",n)),t.addEventListener(e,"cut",iM("cut",n)),t.addEventListener(e,"paste",iM("paste",n))}var ij=new WeakMap;function iA(t){if(t instanceof iP){var e=iE.get(t.container);if((e=isNaN(e)?0:e)>0&&(e-=1),!function(t){t.eventManager.clear()}(t),e<=0){e=0;var n=ij.get(t.container);n&&n.parentNode&&(n.parentNode.removeChild(n),ij.delete(t.container)),t.mainElement=null}iE.set(t.container,e)}}function iT(t){return(iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==iT(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==iT(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===iT(e)?e:String(e)}(r.key),r)}}function ix(t,e){iN(t,e),e.add(t)}function iD(t,e,n){iN(t,e),e.set(t,n)}function iN(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function iH(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n}function iB(t,e){var n=iU(t,e,"get");return n.get?n.get.call(t):n.value}function iL(t,e,n){var r=iU(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function iU(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var iV=new WeakMap,iF=new WeakMap,iW=new WeakMap,iz=new WeakMap,iY=new WeakMap,iG=new WeakMap,iK=new WeakSet,iq=new WeakSet,iZ=function(){var t;function e(t){var n=t.countRows,r=t.countColumns,o=t.rowsLimit,i=t.columnsLimit,a=t.countColumnHeaders;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),ix(this,iq),ix(this,iK),iD(this,iV,{writable:!0,value:void 0}),iD(this,iF,{writable:!0,value:void 0}),iD(this,iW,{writable:!0,value:void 0}),iD(this,iz,{writable:!0,value:void 0}),iD(this,iY,{writable:!0,value:void 0}),iD(this,iG,{writable:!0,value:void 0}),iL(this,iF,n),iL(this,iW,r),iL(this,iz,o),iL(this,iY,i),iL(this,iG,a)}return iI(e.prototype,[{key:"setSelectedRange",value:function(t){iL(this,iV,t)}},{key:"getCellsRange",value:function(){if(0===iB(this,iF).call(this)||0===iB(this,iW).call(this))return null;var t=iB(this,iV).getTopStartCorner(),e=t.row,n=t.col,r=iB(this,iV).getBottomEndCorner(),o=r.row,i=r.col,a=iH(this,iq,iX).call(this,e,o),l=iH(this,iK,i$).call(this,n,i);return{isRangeTrimmed:o!==a||i!==l,startRow:e,startCol:n,endRow:a,endCol:l}}},{key:"getMostBottomColumnHeadersRange",value:function(){if(0===iB(this,iW).call(this)||0===iB(this,iG).call(this))return null;var t=iB(this,iV).getTopStartCorner().col,e=iB(this,iV).getBottomEndCorner().col,n=iH(this,iK,i$).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-1,startCol:t,endRow:-1,endCol:n}}},{key:"getAllColumnHeadersRange",value:function(){if(0===iB(this,iW).call(this)||0===iB(this,iG).call(this))return null;var t=iB(this,iV).getTopStartCorner().col,e=iB(this,iV).getBottomEndCorner().col,n=iH(this,iK,i$).call(this,t,e);return{isRangeTrimmed:e!==n,startRow:-iB(this,iG).call(this),startCol:t,endRow:-1,endCol:n}}}]),t&&iI(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function i$(t,e){return Math.min(e,Math.max(t+iB(this,iY).call(this)-1,t))}function iX(t,e){return Math.min(e,Math.max(t+iB(this,iz).call(this)-1,t))}function iJ(t){var e=[],n=[];return(0,F.Bk)(t,function(t){var r=Math.min(t.startRow,t.endRow),o=Math.max(t.startRow,t.endRow);(0,t5.q4)(r,o,function(t){-1===e.indexOf(t)&&e.push(t)});var i=Math.min(t.startCol,t.endCol),a=Math.max(t.startCol,t.endCol);(0,t5.q4)(i,a,function(t){-1===n.indexOf(t)&&n.push(t)})}),{rows:e,columns:n}}var iQ=n(9906);function i0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i1(t){return(i1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function i3(){return(i3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i9(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function i4(t,e){return(i4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i8(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i9(t){return(i9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i6(t,e,n){i7(t,e),e.set(t,n)}function i7(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}function i5(t,e,n){return(e=at(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t){var e=function(t,e){if("object"!==i1(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i1(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i1(e)?e:String(e)}function ae(t,e){var n=ar(t,e,"get");return n.get?n.get.call(t):n.value}function an(t,e,n){var r=ar(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function ar(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}tb.Z.getSingleton().register("afterCopyLimit"),tb.Z.getSingleton().register("modifyCopyableRange"),tb.Z.getSingleton().register("beforeCut"),tb.Z.getSingleton().register("afterCut"),tb.Z.getSingleton().register("beforePaste"),tb.Z.getSingleton().register("afterPaste"),tb.Z.getSingleton().register("beforeCopy"),tb.Z.getSingleton().register("afterCopy");var ao="copyPaste",ai=["fragmentSelection"],aa='<meta name="generator" content="Handsontable"/><style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>',al=new WeakMap,au=new WeakMap,as=new WeakMap,ac=new WeakMap,af=new WeakMap,ah=new WeakMap,ad=new WeakMap,ap=new WeakSet,ay=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i4(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=i9(i);if(e){var r=i9(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===i1(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return i8(t)}(this,t)});function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var t,e,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return i7(e=i8(t=o.call.apply(o,[this].concat(r))),ap),ap.add(e),i5(i8(t),"columnsLimit",1/0),i5(i8(t),"rowsLimit",1/0),i5(i8(t),"pasteMode","overwrite"),i5(i8(t),"uiContainer",t.hot.rootDocument.body),i6(i8(t),al,{writable:!0,value:!1}),i6(i8(t),au,{writable:!0,value:!1}),i6(i8(t),as,{writable:!0,value:!1}),i6(i8(t),ac,{writable:!0,value:"cells-only"}),i6(i8(t),af,{writable:!0,value:!1}),i6(i8(t),ah,{writable:!0,value:!1}),i6(i8(t),ad,{writable:!0,value:new iZ({countRows:function(){return t.hot.countRows()},countColumns:function(){return t.hot.countCols()},rowsLimit:function(){return t.rowsLimit},columnsLimit:function(){return t.columnsLimit},countColumnHeaders:function(){return t.hot.view.getColumnHeadersCount()}})}),i5(i8(t),"copyableRanges",[]),i5(i8(t),"focusableElement",void 0),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[ao]}},{key:"enablePlugin",value:function(){var t,e,n,r,o,a=this;if(!this.enabled){var l=this.hot.getSettings()[ao];"object"===i1(l)&&(this.pasteMode=null!==(r=l.pasteMode)&&void 0!==r?r:this.pasteMode,this.rowsLimit=isNaN(l.rowsLimit)?this.rowsLimit:l.rowsLimit,this.columnsLimit=isNaN(l.columnsLimit)?this.columnsLimit:l.columnsLimit,an(this,al,!!l.copyColumnHeaders),an(this,au,!!l.copyColumnGroupHeaders),an(this,as,!!l.copyColumnHeadersOnly),this.uiContainer=null!==(o=l.uiContainer)&&void 0!==o?o:this.uiContainer),this.addHook("afterContextMenuDefaultOptions",function(t){return a.onAfterContextMenuDefaultOptions(t)}),this.addHook("afterOnCellMouseUp",function(){return a.onAfterOnCellMouseUp()}),this.addHook("afterSelectionEnd",function(){return a.onAfterSelectionEnd()}),this.addHook("beforeKeyDown",function(){return a.onBeforeKeyDown()}),this.focusableElement=(t=this.uiContainer,e=new iP(t),n=isNaN(n=iE.get(t))?0:n,iE.set(t,n+1),e),this.focusableElement.addLocalHook("copy",function(t){return a.onCopy(t)}).addLocalHook("cut",function(t){return a.onCut(t)}).addLocalHook("paste",function(t){return a.onPaste(t)}),i3(i9(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.getOrCreateFocusableElement(),i3(i9(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.focusableElement&&iA(this.focusableElement),i3(i9(i.prototype),"disablePlugin",this).call(this)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cells-only";an(this,ac,t),an(this,af,!0),this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("copy")}},{key:"copyCellsOnly",value:function(){this.copy("cells-only")}},{key:"copyColumnHeadersOnly",value:function(){this.copy("column-headers-only")}},{key:"copyWithAllColumnHeaders",value:function(){this.copy("with-column-group-headers")}},{key:"copyWithColumnHeaders",value:function(){this.copy("with-column-headers")}},{key:"cut",value:function(){an(this,ah,!0),this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("cut")}},{key:"getRangedCopyableData",value:function(t){return(0,iv.P)(this.getRangedData(t))}},{key:"getRangedData",value:function(t){var e=this,n=[],r=iJ(t),o=r.rows,i=r.columns;return(0,F.Bk)(o,function(t){var r=[];(0,F.Bk)(i,function(n){t<0?r.push(e.hot.getColHeader(n,t)):r.push(e.hot.getCopyableData(t,n))}),n.push(r)}),n}},{key:"paste",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t||e){var n=new ik;t&&n.clipboardData.setData("text/plain",t),e&&n.clipboardData.setData("text/html",e),this.getOrCreateFocusableElement(),this.onPaste(n)}}},{key:"setCopyableText",value:function(){var t=this.hot.getSelectedRangeLast();if(t){ae(this,ad).setSelectedRange(t);var e=new Map([["headers",null],["cells",null]]);"column-headers-only"===ae(this,ac)?e.set("headers",ae(this,ad).getMostBottomColumnHeadersRange()):("with-column-headers"===ae(this,ac)?e.set("headers",ae(this,ad).getMostBottomColumnHeadersRange()):"with-column-group-headers"===ae(this,ac)&&e.set("headers",ae(this,ad).getAllColumnHeadersRange()),e.set("cells",ae(this,ad).getCellsRange())),this.copyableRanges=Array.from(e.values()).filter(function(t){return null!==t}).map(function(t){return{startRow:t.startRow,startCol:t.startCol,endRow:t.endRow,endCol:t.endCol}}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges);var n=e.get("cells");if(null!==n&&n.isRangeTrimmed){var r=n.startRow,o=n.startCol,i=n.endRow,a=n.endCol;this.hot.runHooks("afterCopyLimit",i-r+1,a-o+1,this.rowsLimit,this.columnsLimit)}}}},{key:"getOrCreateFocusableElement",value:function(){var t,e=null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.TEXTAREA;e?this.focusableElement.setFocusableElement(e):this.focusableElement.useSecondaryElement()}},{key:"isEditorOpened",value:function(){var t;return null===(t=this.hot.getActiveEditor())||void 0===t?void 0:t.isOpened()}},{key:"populateValues",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(t.length){for(var n=t.length,r=t[0].length,o=[],i=e.getTopStartCorner(),a=i.row,l=i.col,u=e.getBottomEndCorner(),s=u.row,c=u.col,f=a,h=l,d=a,p=l;o.length<n||f<=s;){var y=this.hot.getCellMeta(f,l),g=y.skipRowOnPaste,v=y.visualRow;if(f=v+1,!0!==g){d=v,h=l;for(var m=[],b=o.length%n;m.length<r||h<=c;){var w=this.hot.getCellMeta(a,h),S=w.skipColumnOnPaste,C=w.visualCol;if(h=C+1,!0!==S){p=C;var k=m.length%r;m.push(t[b][k])}}o.push(m)}}return this.hot.populateFromArray(a,l,o,void 0,void 0,"CopyPaste.paste",this.pasteMode),[a,l,d,p]}}},{key:"onCopy",value:function(t){if(!(!this.hot.isListening()&&!ae(this,af)||this.isEditorOpened())){this.setCopyableText(),an(this,af,!1);var e=this.getRangedData(this.copyableRanges),n=(function(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n})(this,ap,ag).call(this,this.copyableRanges);if(this.hot.runHooks("beforeCopy",e,this.copyableRanges,n)){var r=(0,iv.P)(e);if(t&&t.clipboardData){var o=(0,iQ.bt)(e,this.hot.rootDocument);t.clipboardData.setData("text/plain",r),t.clipboardData.setData("text/html",[aa,o].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",r);this.hot.runHooks("afterCopy",e,this.copyableRanges,n)}an(this,ac,"cells-only"),t.preventDefault()}}},{key:"onCut",value:function(t){if(!(!this.hot.isListening()&&!ae(this,ah)||this.isEditorOpened())){this.setCopyableText(),an(this,ah,!1);var e=this.getRangedData(this.copyableRanges);if(this.hot.runHooks("beforeCut",e,this.copyableRanges)){var n=(0,iv.P)(e);if(t&&t.clipboardData){var r=(0,iQ.bt)(e,this.hot.rootDocument);t.clipboardData.setData("text/plain",n),t.clipboardData.setData("text/html",[aa,r].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",n);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",e,this.copyableRanges)}t.preventDefault()}}},{key:"onPaste",value:function(t){if(!(!this.hot.isListening()||this.isEditorOpened())){if(t&&t.preventDefault&&t.preventDefault(),t&&void 0!==t.clipboardData){var e,n,r=(0,z.Nw)(t.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});n=r&&/(<table)|(<TABLE)/g.test(r)?(0,iQ.BU)(r,this.hot.rootDocument).data:t.clipboardData.getData("text/plain")}else"undefined"==typeof ClipboardEvent&&void 0!==this.hot.rootWindow.clipboardData&&(n=this.hot.rootWindow.clipboardData.getData("Text"));if("string"==typeof n&&(n=(0,iv.Q)(n)),(!n||0!==n.length)&&!1!==this.hot.runHooks("beforePaste",n,this.copyableRanges)){var o=function(t){if(Array.isArray(t))return t}(e=this.populateValues(n))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,4)||function(t,e){if(t){if("string"==typeof t)return i0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i0(t,e)}}(e,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],a=o[1],l=o[2],u=o[3];this.hot.selectCell(i,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,u)),this.hot.runHooks("afterPaste",n,this.copyableRanges)}}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,r,o,i;t.items.push({name:"---------"},(e=this,{key:"copy",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_COPY)},callback:function(){e.copyCellsOnly()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1})),ae(this,al)&&t.items.push((n=this,{key:"copy_with_column_headers",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_HEADERS,e)},callback:function(){n.copyWithColumnHeaders()},disabled:function(){if(!this.hasColHeaders())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1})),ae(this,au)&&t.items.push((r=this,{key:"copy_with_column_group_headers",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_COPY_WITH_COLUMN_GROUP_HEADERS,e)},callback:function(){r.copyWithAllColumnHeaders()},disabled:function(){if(!this.hasColHeaders()||!this.getSettings().nestedHeaders)return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1})),ae(this,as)&&t.items.push((o=this,{key:"copy_column_headers_only",name:function(){var t=this.getSelectedRangeLast(),e=t?Math.min(t.getWidth()-1,1):0;return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_COPY_COLUMN_HEADERS_ONLY,e)},callback:function(){o.copyColumnHeadersOnly()},disabled:function(){if(!this.hasColHeaders())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1})),t.items.push((i=this,{key:"cut",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_CUT)},callback:function(){i.cut()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}))}},{key:"onAfterOnCellMouseUp",value:function(){!this.hot.isListening()||this.isEditorOpened()||this.hot.getSettings().fragmentSelection||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}},{key:"onAfterSelectionEnd",value:function(){!this.isEditorOpened()&&(this.getOrCreateFocusableElement(),this.hot.getSettings().fragmentSelection&&this.focusableElement.getFocusableElement()!==this.hot.rootDocument.activeElement&&(0,A.mR)()||(this.setCopyableText(),this.focusableElement.focus()))}},{key:"onBeforeKeyDown",value:function(){if(!(!this.hot.isListening()||this.isEditorOpened())){var t=this.hot.rootDocument.activeElement,e=this.hot.getActiveEditor();e&&(t===this.focusableElement.getFocusableElement()||t===e.select)&&(this.getOrCreateFocusableElement(),this.focusableElement.focus())}}},{key:"destroy",value:function(){this.focusableElement&&(iA(this.focusableElement),this.focusableElement=null),i3(i9(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return ao}},{key:"SETTING_KEYS",get:function(){return[ao].concat(ai)}},{key:"PLUGIN_PRIORITY",get:function(){return 80}}],n&&i2(i.prototype,n),r&&i2(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function ag(t){for(var e=iJ(t).rows,n=0,r=0;r<e.length&&!(e[r]>=0);r++)n+=1;return{columnHeadersCount:n}}function av(t,e){return"border_row".concat(t,"col").concat(e)}function am(){return{width:1,color:"#000"}}function ab(){return{hide:!0}}function aw(t){var e,n;return((0,W.$K)(t.start)||(0,W.$K)(t.left))&&(t.start=null!==(e=t.start)&&void 0!==e?e:t.left),((0,W.$K)(t.end)||(0,W.$K)(t.right))&&(t.end=null!==(n=t.end)&&void 0!==n?n:t.right),delete t.left,delete t.right,t}function aS(t){return(0,W.$K)(t.start)&&(t.left=t.start),(0,W.$K)(t.end)&&(t.right=t.end),t}function aC(t,e){return{id:av(t,e),border:{width:1,color:"#000",cornerVisible:!1},row:t,col:e,top:ab(),bottom:ab(),start:ab(),end:ab()}}function ak(t,e){var n=!1;return(0,F.Bk)(t.getSelectedRange(),function(r){r.forAll(function(r,o){if(!(r<0)&&!(o<0)){var i=t.getCellMeta(r,o).borders;if(i&&(!e||!(0,I.nr)(i[e],"hide")||!1===i[e].hide))return n=!0,!1}})}),n}function aO(t){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(t)}var aR=new Map([["left","start"],["right","end"]]);function aP(t){return(aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aE(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return aM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aM(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ax(r.key),r)}}function aj(){return(aj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aI(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function aA(t,e){return(aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aT(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aI(t){return(aI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ax(t){var e=function(t,e){if("object"!==aP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==aP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===aP(e)?e:String(e)}var aD="customBorders",aN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aA(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=aI(i);if(e){var r=aI(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===aP(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return aT(t)}(this,t)});function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var t,e,n,r,a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return e=aT(t=o.call.apply(o,[this].concat(l))),r=[],(n=ax(n="savedBorders"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[aD]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(e){return t.onAfterContextMenuDefaultOptions(e)}),this.addHook("init",function(){return t.onAfterInit()}),aj(aI(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hideBorders(),aj(aI(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),aj(aI(i.prototype),"updatePlugin",this).call(this)}},{key:"setBorders",value:function(t,e){var n=this,r=["top","bottom","start","end"],o=null;e&&(this.checkSettingsCohesion([e]),r=Object.keys(e),o=aw(e));var i=(0,oF.AV)(t),a=(0,oF.S5)(i);(0,F.Bk)(t,function(t){for(var e=aE(a(t),4),i=e[0],l=e[1],u=e[2],s=e[3],c=function(t){for(var e=function(e){(0,F.Bk)(r,function(r){var i;n.prepareBorderFromCustomAdded(t,e,o,null!==(i=aR.get(r))&&void 0!==i?i:r)})},i=l;i<=s;i+=1)e(i)},f=i;f<=u;f+=1)c(f)}),this.hot.view.render()}},{key:"getBorders",value:function(t){var e=this;if(!Array.isArray(t))return this.savedBorders;var n=(0,oF.AV)(t),r=(0,oF.S5)(n),o=[];return(0,F.Bk)(t,function(t){for(var n=aE(r(t),4),i=n[0],a=n[1],l=n[2],u=n[3],s=function(t){for(var n=function(n){(0,F.Bk)(e.savedBorders,function(e){e.row===t&&e.col===n&&o.push(aS(e))})},r=a;r<=u;r+=1)n(r)},c=i;c<=l;c+=1)s(c)}),o}},{key:"clearBorders",value:function(t){var e=this;t?this.setBorders(t):((0,F.Bk)(this.savedBorders,function(t){e.clearBordersFromSelectionSettings(t.id),e.clearNullCellRange(),e.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}},{key:"insertBorderIntoSettings",value:function(t,e){this.checkSavedBorders(t)||this.savedBorders.push(t);var n=this.hot._createCellRange(this.hot._createCellCoords(t.row,t.col));this.checkCustomSelections(t,n,e)||this.hot.selection.highlight.addCustomSelection({border:t,visualCellRange:n})}},{key:"prepareBorderFromCustomAdded",value:function(t,e,n,r){var o,i,a=this.hot.countRows(),l=this.hot.countCols();if(!(t>=a)&&!(e>=l)){var u=aC(t,e);n&&(o=u,i=n,(0,I.nr)(i,"border")&&i.border&&(o.border=i.border),(0,I.nr)(i,"top")&&(0,W.$K)(i.top)&&(i.top?((0,I.Kn)(i.top)||(i.top=am()),o.top=i.top):(i.top=ab(),o.top=i.top)),(0,I.nr)(i,"bottom")&&(0,W.$K)(i.bottom)&&(i.bottom?((0,I.Kn)(i.bottom)||(i.bottom=am()),o.bottom=i.bottom):(i.bottom=ab(),o.bottom=i.bottom)),(0,I.nr)(i,"start")&&(0,W.$K)(i.start)&&(i.start?((0,I.Kn)(i.start)||(i.start=am()),o.start=i.start):(i.start=ab(),o.start=i.start)),(0,I.nr)(i,"end")&&(0,W.$K)(i.end)&&(i.end?((0,I.Kn)(i.end)||(i.end=am()),o.end=i.end):(i.end=ab(),o.end=i.end)),u=o,(0,F.Bk)(this.hot.selection.highlight.customSelections,function(t){if(u.id===t.settings.id)return Object.assign(t.settings,n),u.id=t.settings.id,u.top=t.settings.top,u.bottom=t.settings.bottom,u.start=t.settings.start,u.end=t.settings.end,!1})),this.hot.setCellMeta(t,e,"borders",aS(u)),this.insertBorderIntoSettings(u,r)}}},{key:"prepareBorderFromCustomAddedRange",value:function(t,e){var n=this,r=Math.min(t.to.row,this.hot.countRows()-1),o=Math.min(t.to.col,this.hot.countCols()-1);(0,t5.q4)(t.from.row,r,function(r){(0,t5.q4)(t.from.col,o,function(o){var i=aC(r,o),a=0;r===t.from.row&&(0,I.nr)(e,"top")&&(a+=1,i.top=e.top),r===t.to.row&&(0,I.nr)(e,"bottom")&&(a+=1,i.bottom=e.bottom),o===t.from.col&&(0,I.nr)(e,"start")&&(a+=1,i.start=e.start),o===t.to.col&&(0,I.nr)(e,"end")&&(a+=1,i.end=e.end),a>0&&(n.hot.setCellMeta(r,o,"borders",aS(i)),n.insertBorderIntoSettings(i))})})}},{key:"removeAllBorders",value:function(t,e){var n=av(t,e);this.spliceBorder(n),this.clearBordersFromSelectionSettings(n),this.clearNullCellRange(),this.hot.removeCellMeta(t,e,"borders")}},{key:"setBorder",value:function(t,e,n,r){var o=this.hot.getCellMeta(t,e).borders;o=o&&void 0!==o.border?aw(o):aC(t,e),r?(o[n]=ab(),4===this.countHide(o)?this.removeAllBorders(t,e):(this.checkCustomSelectionsFromContextMenu(o,n,r)||this.insertBorderIntoSettings(o),this.hot.setCellMeta(t,e,"borders",aS(o)))):(o[n]=am(),this.checkCustomSelectionsFromContextMenu(o,n,r)||this.insertBorderIntoSettings(o),this.hot.setCellMeta(t,e,"borders",aS(o)))}},{key:"prepareBorder",value:function(t,e,n){var r=this;(0,F.Bk)(t,function(t){var o=t.start,i=t.end;if(o.row===i.row&&o.col===i.col)"noBorders"===e?r.removeAllBorders(o.row,o.col):r.setBorder(o.row,o.col,e,n);else switch(e){case"noBorders":(0,t5.q4)(o.col,i.col,function(t){(0,t5.q4)(o.row,i.row,function(e){r.removeAllBorders(e,t)})});break;case"top":(0,t5.q4)(o.col,i.col,function(t){r.setBorder(o.row,t,e,n)});break;case"bottom":(0,t5.q4)(o.col,i.col,function(t){r.setBorder(i.row,t,e,n)});break;case"start":(0,t5.q4)(o.row,i.row,function(t){r.setBorder(t,o.col,e,n)});break;case"end":(0,t5.q4)(o.row,i.row,function(t){r.setBorder(t,i.col,e,n)})}})}},{key:"createCustomBorders",value:function(t){var e=this;(0,F.Bk)(t,function(t){var n=aw(t);t.range?e.prepareBorderFromCustomAddedRange(t.range,n):e.prepareBorderFromCustomAdded(t.row,t.col,n)})}},{key:"countHide",value:function(t){var e=t.top,n=t.bottom,r=t.start,o=t.end;return(0,F.k$)([e,n,r,o],function(t,e){var n=t;return e&&e.hide&&(n+=1),n},0)}},{key:"clearBordersFromSelectionSettings",value:function(t){var e=(0,F.Sc)(this.hot.selection.highlight.customSelections,function(t){return t.settings.id}).indexOf(t);e>-1&&this.hot.selection.highlight.customSelections[e].clear()}},{key:"clearNullCellRange",value:function(){var t=this;(0,F.Bk)(this.hot.selection.highlight.customSelections,function(e,n){if(null===e.cellRange)return t.hot.selection.highlight.customSelections[n].destroy(),t.hot.selection.highlight.customSelections.splice(n,1),!1})}},{key:"hideBorders",value:function(){var t=this;(0,F.Bk)(this.savedBorders,function(e){t.clearBordersFromSelectionSettings(e.id),t.clearNullCellRange()})}},{key:"spliceBorder",value:function(t){var e=(0,F.Sc)(this.savedBorders,function(t){return t.id}).indexOf(t);e>-1&&this.savedBorders.splice(e,1)}},{key:"checkSavedBorders",value:function(t){var e=this,n=!1;return 4===this.countHide(t)?(this.spliceBorder(t.id),n=!0):(0,F.Bk)(this.savedBorders,function(r,o){if(t.id===r.id)return e.savedBorders[o]=t,n=!0,!1}),n}},{key:"checkCustomSelectionsFromContextMenu",value:function(t,e,n){var r=!1;return(0,F.Bk)(this.hot.selection.highlight.customSelections,function(o){if(t.id===o.settings.id)return(0,I._l)(o.instanceBorders,function(t){t.toggleHiddenClass(e,n)}),r=!0,!1}),r}},{key:"checkCustomSelections",value:function(t,e,n){var r=this.countHide(t),o=!1;return 4===r?(this.removeAllBorders(t.row,t.col),o=!0):(0,F.Bk)(this.hot.selection.highlight.customSelections,function(r){if(t.id===r.settings.id)return r.visualCellRange=e,r.commit(),n&&(0,I._l)(r.instanceBorders,function(e){e.changeBorderStyle(n,t)}),o=!0,!1}),o}},{key:"changeBorderSettings",value:function(){var t=this.hot.getSettings()[aD];if(Array.isArray(t)){var e=(0,I.I8)(t);this.checkSettingsCohesion(e),e.length||(this.savedBorders=e),this.createCustomBorders(e)}else void 0!==t&&this.createCustomBorders(this.savedBorders)}},{key:"checkSettingsCohesion",value:function(t){var e=t.some(function(t){return(0,W.$K)(t.left)||(0,W.$K)(t.right)}),n=t.some(function(t){return(0,W.$K)(t.start)||(0,W.$K)(t.end)});if(e&&n)throw Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&e)throw Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,r,o,i,a,l;this.hot.getSettings()[aD]&&t.items.push({name:"---------"},{key:"borders",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_BORDERS)},disabled:function(){return this.selection.isSelectedByCorner()},submenu:{items:[(e=this,{key:"borders:top",name:function(){var t=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_BORDERS_TOP);return ak(this,"top")&&(t=aO(t)),t},callback:function(t,n){var r=ak(this,"top");e.prepareBorder(n,"top",r)}}),(n=this,r=n.hot.isRtl()?"start":"end",{key:"borders:right",name:function(){var t=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_BORDERS_RIGHT);return ak(this,r)&&(t=aO(t)),t},callback:function(t,e){var o=ak(this,r);n.prepareBorder(e,r,o)}}),(o=this,{key:"borders:bottom",name:function(){var t=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_BORDERS_BOTTOM);return ak(this,"bottom")&&(t=aO(t)),t},callback:function(t,e){var n=ak(this,"bottom");o.prepareBorder(e,"bottom",n)}}),(i=this,a=i.hot.isRtl()?"end":"start",{key:"borders:left",name:function(){var t=this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_BORDERS_LEFT);return ak(this,a)&&(t=aO(t)),t},callback:function(t,e){var n=ak(this,a);i.prepareBorder(e,a,n)}}),(l=this,{key:"borders:no_borders",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_REMOVE_BORDERS)},callback:function(t,e){l.prepareBorder(e,"noBorders")},disabled:function(){return!ak(this)}})]}})}},{key:"onAfterInit",value:function(){this.changeBorderSettings()}},{key:"destroy",value:function(){aj(aI(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return aD}},{key:"PLUGIN_PRIORITY",get:function(){return 90}}],n&&a_(i.prototype,n),r&&a_(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function aH(t){return(aH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aB(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==aH(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==aH(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===aH(e)?e:String(e)}(r.key),r)}}function aL(){return(aL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aF(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function aU(t,e){return(aU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aV(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aF(t){return(aF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aW="dragToScroll",az=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aU(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=aF(i);if(e){var r=aF(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===aH(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return aV(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).eventManager=new tc.Z(aV(e)),e.boundaries=null,e.callback=null,e.listening=!1,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[aW]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterOnCellMouseDown",function(e){return t.setupListening(e)}),this.addHook("afterOnCellCornerMouseDown",function(e){return t.setupListening(e)}),this.registerEvents(),aL(aF(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),aL(aF(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.unregisterEvents(),aL(aF(i.prototype),"disablePlugin",this).call(this)}},{key:"setBoundaries",value:function(t){this.boundaries=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"check",value:function(t,e){var n=0,r=0;e<this.boundaries.top?r=e-this.boundaries.top:e>this.boundaries.bottom&&(r=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,r)}},{key:"listen",value:function(){this.listening=!0}},{key:"unlisten",value:function(){this.listening=!1}},{key:"isListening",value:function(){return this.listening}},{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"contextmenu",function(){return t.unlisten()}),this.eventManager.addEventListener(e.document,"mouseup",function(){return t.unlisten()}),this.eventManager.addEventListener(e.document,"mousemove",function(e){return t.onMouseMove(e)}),e=(0,A.f5)(e)}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"setupListening",value:function(t){if(!(0,T.dO)(t)){var e=this.hot.view._wt.wtTable.holder;e!==this.hot.rootWindow&&(this.setBoundaries(e.getBoundingClientRect()),this.setCallback(function(t,n){t<0?e.scrollLeft-=50:t>0&&(e.scrollLeft+=50),n<0?e.scrollTop-=20:n>0&&(e.scrollTop+=20)}),this.listen())}}},{key:"onMouseMove",value:function(t){this.isListening()&&this.check(t.clientX,t.clientY)}},{key:"destroy",value:function(){aL(aF(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return aW}},{key:"PLUGIN_PRIORITY",get:function(){return 100}}],n&&aB(i.prototype,n),r&&aB(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function aY(t){return(aY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aG(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==aY(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==aY(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===aY(e)?e:String(e)}(r.key),r)}}function aK(){return(aK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a$(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function aq(t,e){return(aq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aZ(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a$(t){return(a$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("afterDropdownMenuDefaultOptions"),tb.Z.getSingleton().register("beforeDropdownMenuShow"),tb.Z.getSingleton().register("afterDropdownMenuShow"),tb.Z.getSingleton().register("afterDropdownMenuHide"),tb.Z.getSingleton().register("afterDropdownMenuExecute");var aX="dropdownMenu",aJ="changeType",aQ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aq(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=a$(i);if(e){var r=a$(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===aY(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return aZ(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).eventManager=new tc.Z(aZ(e)),e.commandExecutor=new oD(e.hot),e.itemsFactory=null,e.menu=null,e.hot.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[aX]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.itemsFactory=new o4(this.hot,i.DEFAULT_ITEMS);var e=this.hot.getSettings()[aX],n={items:this.itemsFactory.getItems(e)};this.registerEvents(),"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),aK(a$(i.prototype),"enablePlugin",this).call(this),this.callOnPluginsReady(function(){t.hot.runHooks("afterDropdownMenuDefaultOptions",n),t.itemsFactory.setPredefinedItems(n.items);var r=t.itemsFactory.getItems(e);t.menu&&t.menu.destroy(),t.menu=new il(t.hot,{className:"htDropdownMenu",keepInViewport:!0,container:e.uiContainer||t.hot.rootDocument.body}),t.hot.runHooks("beforeDropdownMenuSetItems",r),t.menu.setMenuItems(r),t.menu.addLocalHook("beforeOpen",function(){return t.onMenuBeforeOpen()}),t.menu.addLocalHook("afterOpen",function(){return t.onMenuAfterOpen()}),t.menu.addLocalHook("afterClose",function(){return t.onMenuAfterClose()}),t.menu.addLocalHook("executeCommand",function(){for(var e,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.executeCommand).call.apply(e,[t].concat(r))}),(0,F.Bk)(r,function(e){return t.commandExecutor.registerCommand(e.key,e)})})}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),aK(a$(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&this.menu.destroy(),aK(a$(i.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"click",function(e){return t.onTableClick(e)})}},{key:"open",value:function(t){this.menu&&(this.menu.open(),t.width&&this.menu.setOffset("left",t.width),this.menu.setPosition(t))}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=this.commandExecutor).execute.apply(e,[t].concat(r))}},{key:"setListening",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.menu.isOpened()&&(t?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}},{key:"onTableClick",value:function(t){if(t.stopPropagation(),(0,A.pv)(t.target,aJ)&&!this.menu.isOpened()){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var r=this.hot.rootWindow.frameElement.getBoundingClientRect(),o=r.top,i=r.left;e=o,n=i}var a=t.target.getBoundingClientRect();this.open({left:a.left+n,top:a.top+t.target.offsetHeight+3+e,width:a.width,height:a.height})}}},{key:"onAfterGetColHeader",value:function(t,e){var n=e.parentNode;if(n){var r=n.parentNode.childNodes,o=Array.prototype.indexOf.call(r,n);if(!(t<0)&&o===r.length-1){var i=e.querySelector(".".concat(aJ));if(!this.enabled||!i){if(!this.enabled){i&&i.parentNode.removeChild(i);return}var a=this.hot.rootDocument.createElement("button");a.className=aJ,a.type="button",a.onclick=function(){return!1},e.firstChild.insertBefore(a,e.firstChild.firstChild)}}}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeDropdownMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterDropdownMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),aK(a$(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return aX}},{key:"PLUGIN_PRIORITY",get:function(){return 230}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[oB,oL,or,oz,or,oH,or,oU,or,oN]}}],n&&aG(i.prototype,n),r&&aG(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function a0(t){return(a0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==a0(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a0(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a0(e)?e:String(e)}(r.key),r)}}aQ.SEPARATOR={name:or};var a3=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.options={}}return t=[{key:"setOptions",value:function(t){this.options=t}},{key:"getData",value:function(){var t=this,e=this._getDataRange(),n=e.startRow,r=e.startCol,o=e.endRow,i=e.endCol,a=this.options,l=[];return(0,t5.q4)(n,o,function(e){var n=[];!a.exportHiddenRows&&t._isHiddenRow(e)||((0,t5.q4)(r,i,function(r){!a.exportHiddenColumns&&t._isHiddenColumn(r)||n.push(t.hot.getDataAtCell(e,r))}),l.push(n))}),l}},{key:"getRowHeaders",value:function(){var t=this,e=[];if(this.options.rowHeaders){var n=this._getDataRange(),r=n.startRow,o=n.endRow,i=this.hot.getRowHeader();(0,t5.q4)(r,o,function(n){!t.options.exportHiddenRows&&t._isHiddenRow(n)||e.push(i[n])})}return e}},{key:"getColumnHeaders",value:function(){var t=this,e=[];if(this.options.columnHeaders){var n=this._getDataRange(),r=n.startCol,o=n.endCol,i=this.hot.getColHeader();(0,t5.q4)(r,o,function(n){!t.options.exportHiddenColumns&&t._isHiddenColumn(n)||e.push(i[n])})}return e}},{key:"_getDataRange",value:function(){var t,e=this.hot.countCols()-1,n=this.hot.countRows()-1,r=function(t){if(Array.isArray(t))return t}(t=this.options.range)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,4)||function(t,e){if(t){if("string"==typeof t)return a1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(t,e)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=r[0],i=void 0===o?0:o,a=r[1],l=void 0===a?0:a,u=r[2],s=void 0===u?n:u,c=r[3],f=void 0===c?e:c;return{startRow:i=Math.max(i,0),startCol:l=Math.max(l,0),endRow:s=Math.min(s,n),endCol:f=Math.min(f,e)}}},{key:"_isHiddenRow",value:function(t){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(t))}},{key:"_isHiddenColumn",value:function(t){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(t))}}],a2(n.prototype,t),e&&a2(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function a4(t){return(a4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==a4(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a4(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a4(e)?e:String(e)}(r.key),r)}}function a9(t){return(a9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==a9(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a9(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a9(e)?e:String(e)}(r.key),r)}}function a7(t,e){return(a7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a5(t){return(a5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(3112);var lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a7(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=a5(i);if(e){var r=a5(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===a9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}}],n=[{key:"export",value:function(){var t=this,e=this.options,n=this.dataProvider.getData(),r=this.dataProvider.getColumnHeaders(),o=r.length>0,i=this.dataProvider.getRowHeaders(),a=i.length>0,l=e.bom?String.fromCharCode(65279):"";return o&&(r=(0,F.Sc)(r,function(e){return t._escapeCell(e,!0)}),a&&(l+=e.columnDelimiter),l+=r.join(e.columnDelimiter),l+=e.rowDelimiter),(0,F.Bk)(n,function(n,r){r>0&&(l+=e.rowDelimiter),a&&(l+=t._escapeCell(i[r])+e.columnDelimiter),l+=n.map(function(e){return t._escapeCell(e)}).join(e.columnDelimiter)}),l}},{key:"_escapeCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,W.Pz)(t);return""!==n&&(e||n.indexOf("\r")>=0||n.indexOf('"')>=0||n.indexOf("\n")>=0||n.indexOf(this.options.columnDelimiter)>=0)&&(n=n.replace(RegExp('"',"g"),'""'),n='"'.concat(n,'"')),n}}],a6(i.prototype,n),r&&a6(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.dataProvider=t,this.options=this._mergeOptions(e),this.dataProvider.setOptions(this.options)}return e=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}}],t=[{key:"_mergeOptions",value:function(t){var e=(0,I.d9)(this.constructor.DEFAULT_OPTIONS),r=new Date;return e=(0,I.l7)((0,I.d9)(n.DEFAULT_OPTIONS),e),(e=(0,I.l7)(e,t)).filename=(0,z.ng)(e.filename,{YYYY:r.getFullYear(),MM:"".concat(r.getMonth()+1).padStart(2,"0"),DD:"".concat(r.getDate()).padStart(2,"0")}),e}}],a8(n.prototype,t),e&&a8(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}());function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ln=(l={},(r=function(t,e){if("object"!==le(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==le(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(u="csv","string"),(u="symbol"===le(r)?r:String(r))in l)?Object.defineProperty(l,u,{value:lt,enumerable:!0,configurable:!0,writable:!0}):l[u]=lt,l);function lr(t){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==lr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lr(e)?e:String(e)}(r.key),r)}}function li(t,e){return(li=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function la(t){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ll=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&li(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=la(i);if(e){var r=la(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lr(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return r=[{key:"PLUGIN_KEY",get:function(){return"exportFile"}},{key:"PLUGIN_PRIORITY",get:function(){return 240}}],n=[{key:"isEnabled",value:function(){return!0}},{key:"exportAsString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(t,e).export()}},{key:"exportAsBlob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(t,e))}},{key:"downloadFile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.hot,r=n.rootDocument,o=n.rootWindow,i=this._createTypeFormatter(t,e),a=this._createBlob(i),l=o.URL||o.webkitURL,u=r.createElement("a"),s="".concat(i.options.filename,".").concat(i.options.fileExtension);if(void 0!==u.download){var c=l.createObjectURL(a);u.style.display="none",u.setAttribute("href",c),u.setAttribute("download",s),r.body.appendChild(u),u.dispatchEvent(new MouseEvent("click")),r.body.removeChild(u),setTimeout(function(){l.revokeObjectURL(c)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(a,s)}},{key:"_createTypeFormatter",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ln[t])throw Error('Export format type "'.concat(t,'" is not supported.'));return e=new a3(this.hot),"function"==typeof ln[t]?new ln[t](e,n):null}},{key:"_createBlob",value:function(t){var e=null;return"undefined"!=typeof Blob&&(e=new Blob([t.export()],{type:"".concat(t.options.mimeType,";charset=").concat(t.options.encoding)})),e}}],lo(i.prototype,n),r&&lo(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function lu(t){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ls(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==lu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lu(e)?e:String(e)}(r.key),r)}}n(6755);var lc=function(){var t;function e(t,n){var r=n.id,o=n.stateless;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.id=r,this.elements=[],this.hidden=!1,this.stateId="Filters.component.".concat(this.id),this.state=void 0===o||o?null:this.hot.columnIndexMapper.registerMap(this.stateId,new ro.A)}return ls(e.prototype,[{key:"reset",value:function(){(0,F.Bk)(this.elements,function(t){return t.reset()})}},{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"isHidden",value:function(){return null===this.hot||this.hidden}},{key:"restoreState",value:function(t){this.state&&this.setState(this.state.getValueAtIndex(t))}},{key:"setState",value:function(){throw Error("The state setting logic is not implemented")}},{key:"saveState",value:function(t){this.state&&this.state.setValueAtIndex(t,this.getState())}},{key:"getState",value:function(){throw Error("The state gathering logic is not implemented")}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),(0,F.Bk)(this.elements,function(t){return t.destroy()}),this.state=null,this.elements=null,this.hot=null}}]),t&&ls(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();(0,I.jB)(lc,od.Z);var lf={};function lh(t,e){if(!lf[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));var n=lf[t],r=n.condition,o=n.descriptor,i=e;return o.inputValuesDecorator&&(i=o.inputValuesDecorator(i)),function(t){return r.apply(t.meta.instance,[].concat([t],[i]))}}function ld(t){if(!lf[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));return lf[t].descriptor}function lp(t,e,n){n.key=t,lf[t]={condition:e,descriptor:n}}var ly="none";lp(ly,function(){return!0},{name:ov.FILTERS_CONDITIONS_NONE,inputsCount:0,showOperators:!1});var lg="empty";lp(lg,function(t){return(0,W.xb)(t.value)},{name:ov.FILTERS_CONDITIONS_EMPTY,inputsCount:0,showOperators:!0});var lv="not_empty";function lm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function lk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(lv,function(t,e){return!lh(lg,e)(t)},{name:ov.FILTERS_CONDITIONS_NOT_EMPTY,inputsCount:0,showOperators:!0}),lp("eq",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lm(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,W.Pz)(t.value).toLocaleLowerCase(t.meta.locale)===(0,W.Pz)(n)},{name:ov.FILTERS_CONDITIONS_EQUAL,inputsCount:1,showOperators:!0}),lp("neq",function(t,e){return!lh("eq",e)(t)},{name:ov.FILTERS_CONDITIONS_NOT_EQUAL,inputsCount:1,showOperators:!0}),lp("gt",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lb(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>n},{name:ov.FILTERS_CONDITIONS_GREATER_THAN,inputsCount:1,showOperators:!0}),lp("gte",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lw(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>=n},{name:ov.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL,inputsCount:1,showOperators:!0}),lp("lt",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lS(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<n},{name:ov.FILTERS_CONDITIONS_LESS_THAN,inputsCount:1,showOperators:!0}),lp("lte",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lC(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<=n},{name:ov.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});var lO="date_after";function lR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(lO,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lk(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=tu(t.value,t.meta.dateFormat),o=tu(n,t.meta.dateFormat);return!!(r.isValid()&&o.isValid())&&r.diff(o)>=0},{name:ov.FILTERS_CONDITIONS_AFTER,inputsCount:1,showOperators:!0});var lP="date_before";function lE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(lP,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lR(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=tu(t.value,t.meta.dateFormat),o=tu(n,t.meta.dateFormat);return!!(r.isValid()&&o.isValid())&&0>=r.diff(o)},{name:ov.FILTERS_CONDITIONS_BEFORE,inputsCount:1,showOperators:!0});var lM="between";lp(lM,function(t,e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,2)||function(t,e){if(t){if("string"==typeof t)return lE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lE(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],o=n[1],i=r,a=o;if("numeric"===t.meta.type){var l=parseFloat(i,10),u=parseFloat(a,10);i=Math.min(l,u),a=Math.max(l,u)}else if("date"===t.meta.type){var s=lh(lP,[a]),c=lh(lO,[i]);return s(t)&&c(t)}return t.value>=i&&t.value<=a},{name:ov.FILTERS_CONDITIONS_BETWEEN,inputsCount:2,showOperators:!0});var l_="not_between";function lj(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(l_,function(t,e){return!lh(lM,e)(t)},{name:ov.FILTERS_CONDITIONS_NOT_BETWEEN,inputsCount:2,showOperators:!0});var lA="begins_with";function lT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(lA,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lj(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,W.Pz)(t.value).toLocaleLowerCase(t.meta.locale).startsWith((0,W.Pz)(n))},{name:ov.FILTERS_CONDITIONS_BEGINS_WITH,inputsCount:1,showOperators:!0}),n(7852);var lI="ends_with";function lx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}lp(lI,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lT(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,W.Pz)(t.value).toLocaleLowerCase(t.meta.locale).endsWith((0,W.Pz)(n))},{name:ov.FILTERS_CONDITIONS_ENDS_WITH,inputsCount:1,showOperators:!0});var lD="contains";lp(lD,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return lx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lx(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,W.Pz)(t.value).toLocaleLowerCase(t.meta.locale).indexOf((0,W.Pz)(n))>=0},{name:ov.FILTERS_CONDITIONS_CONTAINS,inputsCount:1,showOperators:!0});var lN="not_contains";lp(lN,function(t,e){return!lh(lD,e)(t)},{name:ov.FILTERS_CONDITIONS_NOT_CONTAIN,inputsCount:1,showOperators:!0});var lH="date_tomorrow";lp(lH,function(t){var e=tu(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(tu().subtract(-1,"days").startOf("day"),"d")},{name:ov.FILTERS_CONDITIONS_TOMORROW,inputsCount:0});var lB="date_today";lp(lB,function(t){var e=tu(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(tu().startOf("day"),"d")},{name:ov.FILTERS_CONDITIONS_TODAY,inputsCount:0});var lL="date_yesterday";function lU(t){return(lU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lV(t,e,n){var r;return(r=function(t,e){if("object"!==lU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"===lU(r)?r:String(r))in t)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}lp(lL,function(t){var e=tu(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(tu().subtract(1,"days").startOf("day"),"d")},{name:ov.FILTERS_CONDITIONS_YESTERDAY,inputsCount:0});var lF="text",lW=(lV(p={},"numeric",[ly,or,lg,lv,or,"eq","neq",or,"gt","gte","lt","lte",lM,l_]),lV(p,lF,[ly,or,lg,lv,or,"eq","neq",or,lA,lI,or,lD,lN]),lV(p,"date",[ly,or,lg,lv,or,"eq","neq",or,lP,lO,lM,or,lH,lB,lL]),p);function lz(t){return(lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==lz(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==lz(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===lz(e)?e:String(e)}(r.key),r)}}var lG="built",lK="building",lq=["click","input","keydown","keypress","keyup","focus","blur","change"],lZ=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.eventManager=new tc.Z(this),this.options=(0,I.l7)(n.DEFAULTS,e),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName),this.buildState=null}return t=[{key:"setValue",value:function(t){this.options.value=t,this.update()}},{key:"getValue",value:function(){return this.options.value}},{key:"element",get:function(){return this.buildState===lK?this._element:this.buildState===lG?(this.update(),this._element):(this.buildState=lK,this.build(),this.buildState=lG,this._element)}},{key:"isBuilt",value:function(){return this.buildState===lG}},{key:"translateIfPossible",value:function(t){return"string"==typeof t&&t.startsWith(ov.FILTERS_NAMESPACE)?this.hot.getTranslatedPhrase(t):t}},{key:"build",value:function(){var t=this,e=function(e,n){t.eventManager.addEventListener(e,n,function(e){return t.runLocalHooks(n,e,t)})};if(this.buildState||(this.buildState=lK),this.options.className&&(0,A.cn)(this._element,this.options.className),this.options.children.length)(0,F.Bk)(this.options.children,function(e){return t._element.appendChild(e.element)});else if(this.options.wrapIt){var n=this.hot.rootDocument.createElement(this.options.tagName);(0,I._l)(this.options,function(e,r){void 0!==n[r]&&"className"!==r&&"tagName"!==r&&"children"!==r&&(n[r]=t.translateIfPossible(e))}),this._element.appendChild(n),(0,F.Bk)(lq,function(t){return e(n,t)})}else(0,F.Bk)(lq,function(n){return e(t._element,n)})}},{key:"update",value:function(){}},{key:"reset",value:function(){this.options.value="",this.update()}},{key:"show",value:function(){this.element.style.display=""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"focus",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}],e=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}}],t&&lY(n.prototype,t),e&&lY(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function l$(t){return(l$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==l$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==l$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l$(e)?e:String(e)}(r.key),r)}}function lJ(){return(lJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l1(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function lQ(t,e){return(lQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l0(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l1(t){return(l1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(0,I.jB)(lZ,od.Z);var l2=new WeakMap,l3=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lQ(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=l1(i);if(e){var r=l1(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===l$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return l0(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,(0,I.l7)(i.DEFAULTS,e)),l2.set(l0(n),{}),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",function(){return t.onClick()}),this.addLocalHook("keyup",function(e){return t.onKeyup(e)})}},{key:"build",value:function(){lJ(l1(i.prototype),"build",this).call(this);var t=l2.get(this),e=this.hot.rootDocument.createElement("div");t.input=this._element.firstChild,(0,A.cn)(this._element,"htUIInput"),(0,A.cn)(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var t=l2.get(this).input;t.type=this.options.type,t.placeholder=this.translateIfPossible(this.options.placeholder),t.value=this.translateIfPossible(this.options.value)}}},{key:"focus",value:function(){this.isBuilt()&&l2.get(this).input.focus()}},{key:"onClick",value:function(){}},{key:"onKeyup",value:function(t){this.options.value=t.target.value}}],r=[{key:"DEFAULTS",get:function(){return(0,I.d9)({placeholder:"",type:"text",tagName:"input"})}}],n&&lX(i.prototype,n),r&&lX(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lZ);function l4(t){return(l4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==l4(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==l4(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l4(e)?e:String(e)}(r.key),r)}}function l9(){return(l9="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l5(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function l6(t,e){return(l6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l7(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l5(t){return(l5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=new WeakMap,ue=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l6(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=l5(i);if(e){var r=l5(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===l4(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return l7(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,(0,I.l7)(i.DEFAULTS,e)),ut.set(l7(n),{}),n.menu=null,n.items=[],n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",function(){return t.onClick()})}},{key:"setItems",value:function(t){this.items=this.translateNames(t),this.menu&&this.menu.setMenuItems(this.items)}},{key:"translateNames",value:function(t){var e=this;return(0,F.Bk)(t,function(t){t.name=e.translateIfPossible(t.name)}),t}},{key:"build",value:function(){var t=this;l9(l5(i.prototype),"build",this).call(this),this.menu=new il(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer}),this.menu.setMenuItems(this.items);var e=new lZ(this.hot,{className:"htUISelectCaption"}),n=new lZ(this.hot,{className:"htUISelectDropdown"}),r=ut.get(this);r.caption=e,r.captionElement=e.element,r.dropdown=n,(0,F.Bk)([e,n],function(e){return t._element.appendChild(e.element)}),this.menu.addLocalHook("select",function(e){return t.onMenuSelect(e)}),this.menu.addLocalHook("afterClose",function(){return t.onMenuClosed()}),this.update()}},{key:"update",value:function(){var t;this.isBuilt()&&(t=this.options.value?this.options.value.name:this.menu.hot.getTranslatedPhrase(ov.FILTERS_CONDITIONS_NONE),ut.get(this).captionElement.textContent=t,l9(l5(i.prototype),"update",this).call(this))}},{key:"openOptions",value:function(){var t=this.element.getBoundingClientRect();this.menu&&(this.menu.open(),this.menu.setPosition({left:this.hot.isLtr()?t.left-5:t.left-31,top:t.top-1,width:t.width,height:t.height}))}},{key:"closeOptions",value:function(){this.menu&&this.menu.close()}},{key:"onMenuSelect",value:function(t){t.name!==or&&(this.options.value=t,this.update(),this.runLocalHooks("select",this.options.value))}},{key:"onMenuClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onClick",value:function(){this.openOptions()}},{key:"destroy",value:function(){this.menu&&(this.menu.destroy(),this.menu=null);var t=ut.get(this),e=t.caption,n=t.dropdown;e&&e.destroy(),n&&n.destroy(),l9(l5(i.prototype),"destroy",this).call(this)}}],r=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"htUISelect",wrapIt:!1})}}],n&&l8(i.prototype,n),r&&l8(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lZ);function un(t){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==un(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==un(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===un(e)?e:String(e)}(r.key),r)}}function uo(){return(uo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ui(t,e){return(ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ul=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ui(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ua(i);if(e){var r=ua(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===un(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.addSeparator=e.addSeparator,n.elements.push(new ue(n.hot,{menuContainer:e.menuContainer})),n.elements.push(new l3(n.hot,{placeholder:ov.FILTERS_BUTTONS_PLACEHOLDER_VALUE})),n.elements.push(new l3(n.hot,{placeholder:ov.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE})),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.getSelectElement().addLocalHook("select",function(e){return t.onConditionSelect(e)}),this.getSelectElement().addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),(0,F.Bk)(this.getInputElements(),function(e){e.addLocalHook("keydown",function(e){return t.onInputKeyDown(e)})})}},{key:"setState",value:function(t){var e=this;if(this.reset(),t){var n=(0,I.d9)(t.command);n.name.startsWith(ov.FILTERS_CONDITIONS_NAMESPACE)&&(n.name=this.hot.getTranslatedPhrase(n.name)),this.getSelectElement().setValue(n),(0,F.Bk)(t.args,function(t,r){if(r>n.inputsCount-1)return!1;var o=e.getInputElement(r);o.setValue(t),o[n.inputsCount>r?"show":"hide"](),r||setTimeout(function(){return o.focus()},10)})}}},{key:"getState",value:function(){var t=this.getSelectElement().getValue()||ld(ly),e=[];return(0,F.Bk)(this.getInputElements(),function(n,r){t.inputsCount>r&&e.push(n.getValue())}),{command:t,args:e}}},{key:"updateState",value:function(t,e){var n=t?ld(t.name):ld(ly);this.state.setValueAtIndex(e,{command:n,args:t?t.args:[]}),t||(0,F.Bk)(this.getInputElements(),function(t){return t.setValue(null)})}},{key:"getSelectElement",value:function(){return this.elements.filter(function(t){return t instanceof ue})[0]}},{key:"getInputElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[t]}},{key:"getInputElements",value:function(){return this.elements.filter(function(t){return t instanceof l3})}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,r,o,i,a){(0,A.cn)(n.parentNode,"htFiltersMenuCondition"),t.addSeparator&&(0,A.cn)(n.parentNode,"border");var l=t.hot.rootDocument.createElement("div");return(0,A.cn)(l,"htFiltersMenuLabel"),l.textContent=a,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||(0,F.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"reset",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn(),e=[ld(ly)];if(null!==t){var n,r,o,a=t.visualIndex;n=this.hot.getDataType(0,a,this.hot.countRows(),a),r=[],lW[o=n]||(o=lF),(0,F.Bk)(lW[o],function(t){var e;e=t===or?{name:or}:(0,I.d9)(ld(t)),r.push(e)}),e=r}(0,F.Bk)(this.getInputElements(),function(t){return t.hide()}),this.getSelectElement().setItems(e),uo(ua(i.prototype),"reset",this).call(this),this.getSelectElement().setValue(e[0])}},{key:"onConditionSelect",value:function(t){(0,F.Bk)(this.getInputElements(),function(e,n){e[t.inputsCount>n?"show":"hide"](),0===n&&setTimeout(function(){return e.focus()},10)}),this.runLocalHooks("change",t)}},{key:"onSelectUIClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onInputKeyDown",value:function(t){(0,Y.ot)(t.keyCode,"ENTER")?(this.runLocalHooks("accept"),(0,T.mM)(t)):(0,Y.ot)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,T.mM)(t))}}],ur(i.prototype,n),r&&ur(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lc),uu={};function us(t,e,n){uu[t]={name:e,func:n}}var uc="conjunction";us(uc,ov.FILTERS_LABELS_CONJUNCTION,function(t,e){return t.every(function(t){return t.func(e)})});var uf="disjunction";us(uf,ov.FILTERS_LABELS_DISJUNCTION,function(t,e){return t.some(function(t){return t.func(e)})});var uh="disjunctionWithExtraCondition";function ud(t){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ud(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ud(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ud(e)?e:String(e)}(r.key),r)}}function uy(){return(uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=um(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ug(t,e){return(ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uv(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function um(t){return(um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}us(uh,ov.FILTERS_LABELS_DISJUNCTION,function(t,e){if(t.length<3)throw Error("Operation doesn't work on less then three conditions.");return t.slice(0,t.length-1).some(function(t){return t.func(e)})&&t[t.length-1].func(e)});var ub=new WeakMap,uw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ug(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=um(i);if(e){var r=um(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ud(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uv(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,(0,I.l7)(i.DEFAULTS,e)),ub.set(uv(n),{}),n}return n=[{key:"build",value:function(){uy(um(i.prototype),"build",this).call(this);var t=ub.get(this);t.input=this._element.firstChild;var e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),t.label=e,this._element.appendChild(e),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var t=ub.get(this);t.input.checked=this.options.checked,t.label.textContent=this.translateIfPossible(this.options.label.textContent)}}},{key:"isChecked",value:function(){return this.options.checked}},{key:"setChecked",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.options.checked=t,this.update()}},{key:"focus",value:function(){this.isBuilt()&&ub.get(this).input.focus()}}],r=[{key:"DEFAULTS",get:function(){return(0,I.d9)({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}}],n&&up(i.prototype,n),r&&up(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lZ);function uS(t){return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==uS(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==uS(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===uS(e)?e:String(e)}(r.key),r)}}function uk(t,e){return(uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uO(t){return(uO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uk(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=uO(i);if(e){var r=uO(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uS(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.buildOperatorsElement(),n}return n=[{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return(0,A.cn)(n.parentNode,"htFiltersMenuOperators"),n.parentNode.hasAttribute("ghost-table")||(0,F.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"buildOperatorsElement",value:function(){var t=this,e=[uc,uf];(0,F.Bk)(e,function(n){var r=new uw(t.hot,{name:"operator",label:{htmlFor:n,textContent:uu[n].name},value:n,checked:n===e[0],id:n});r.addLocalHook("change",function(e){return t.onRadioInputChange(e)}),t.elements.push(r)})}},{key:"setChecked",value:function(t){if(this.elements.length<t){var e,n;throw Error((0,r1.e)(y||(e=["Radio button with index "," doesn't exist."],n||(n=e.slice(0)),y=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t))}(0,F.Bk)(this.elements,function(e,n){e.setChecked(n===t)})}},{key:"getActiveOperationId",value:function(){var t=this.elements.find(function(t){return t instanceof uw&&t.isChecked()});return t?t.getValue():uc}},{key:"getState",value:function(){return this.getActiveOperationId()}},{key:"setState",value:function(t){this.reset(),t&&this.getActiveOperationId()!==t&&(0,F.Bk)(this.elements,function(e){e.setChecked(e.getValue()===t)})}},{key:"updateState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uc,e=arguments.length>1?arguments[1]:void 0,n=t;n===uh&&(n=uf),this.state.setValueAtIndex(e,n)}},{key:"reset",value:function(){this.setChecked(0)}},{key:"onRadioInputChange",value:function(t){this.setState(t.target.value)}}],uC(i.prototype,n),r&&uC(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lc);(0,eD.sx)();var uP=new Set([1]).has(1),uE=uP&&"function"==typeof Array.from;function uM(t){var e=t;return uP&&(e=new Set(e)),function(t){return uP?e.has(t):!!~e.indexOf(t)}}function u_(t){return null==t?"":t}function uj(t){var e=t;return(e=uE?Array.from(new Set(e)):(0,F.uW)(e)).sort(function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t===e?0:t>e?1:-1})}function uA(t,e,n,r){var o,i=[],a=t===e;return a||(o=uM(e)),(0,F.Bk)(t,function(t){var e,l=!1;(a||o(t))&&(l=!0);var u={checked:l,value:t,visualValue:(""===(e=t)&&(e="(".concat(n,")")),e)};r&&r(u),i.push(u)}),i}var uT=n(3817);function uI(t){return(uI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ux(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==uI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==uI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===uI(e)?e:String(e)}(r.key),r)}}function uD(){return(uD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uB(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function uN(t,e){return(uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uH(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uB(t){return(uB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(9254);var uL=new WeakMap,uU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uN(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=uB(i);if(e){var r=uB(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uI(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uH(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,(0,I.l7)(i.DEFAULTS,e)),uL.set(uH(n),{}),n}return n=[{key:"build",value:function(){uD(uB(i.prototype),"build",this).call(this),uL.get(this).link=this._element.firstChild}},{key:"update",value:function(){this.isBuilt()&&(uL.get(this).link.textContent=this.translateIfPossible(this.options.textContent))}}],r=[{key:"DEFAULTS",get:function(){return(0,I.d9)({href:"#",tagName:"a"})}}],n&&ux(i.prototype,n),r&&ux(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lZ);function uV(t){return(uV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uF(t){return function(t){if(Array.isArray(t))return uW(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return uW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uW(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function uz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==uV(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==uV(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===uV(e)?e:String(e)}(r.key),r)}}function uY(){return(uY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uq(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function uG(t,e){return(uG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uK(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uq(t){return(uq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uZ=new WeakMap,u$=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uG(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=uq(i);if(e){var r=uq(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uK(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,(0,I.l7)(i.DEFAULTS,e)),uZ.set(uK(n),{}),n.searchInput=new l3(n.hot,{placeholder:ov.FILTERS_BUTTONS_PLACEHOLDER_SEARCH,className:"htUIMultipleSelectSearch"}),n.selectAllUI=new uU(n.hot,{textContent:ov.FILTERS_BUTTONS_SELECT_ALL,className:"htUISelectAll"}),n.clearAllUI=new uU(n.hot,{textContent:ov.FILTERS_BUTTONS_CLEAR,className:"htUIClearAll"}),n.items=[],n.itemsBox=null,n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.searchInput.addLocalHook("keydown",function(e){return t.onInputKeyDown(e)}),this.searchInput.addLocalHook("input",function(e){return t.onInput(e)}),this.selectAllUI.addLocalHook("click",function(e){return t.onSelectAllClick(e)}),this.clearAllUI.addLocalHook("click",function(e){return t.onClearAllClick(e)})}},{key:"setItems",value:function(t){this.items=t,this.itemsBox&&this.itemsBox.loadData(this.items)}},{key:"setLocale",value:function(t){this.locale=t}},{key:"getLocale",value:function(){return this.locale}},{key:"getItems",value:function(){return uF(this.items)}},{key:"getValue",value:function(){var t,e;return t=this.items,e=[],(0,F.Bk)(t,function(t){t.checked&&e.push(t.value)}),e}},{key:"isSelectedAllValues",value:function(){return this.items.length===this.getValue().length}},{key:"build",value:function(){var t=this;uY(uq(i.prototype),"build",this).call(this);var e=this.hot.rootDocument,n=e.createElement("div"),r=new lZ(this.hot,{className:"htUISelectionControls",children:[this.selectAllUI,this.clearAllUI]});this._element.appendChild(this.searchInput.element),this._element.appendChild(r.element),this._element.appendChild(n);var o=function(n){t._element&&(t.itemsBox&&t.itemsBox.destroy(),(0,A.cn)(n,"htUIMultipleSelectHot"),t.itemsBox=new t.hot.constructor(n,{data:t.items,columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:function(t,e,n,r,o,i){t.title=i.instance.getDataAtRowProp(e,i.label.property)},maxCols:1,autoWrapCol:!0,height:110,colWidths:function(){return t.itemsBox.container.scrollWidth-(0,A.np)(e)},copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:t.hot.isRtl()?"rtl":"ltr"}),t.itemsBox.init(),t.itemsBox.getShortcutManager().getContext("grid").addShortcut({keys:[["Escape"]],callback:function(e){t.runLocalHooks("keydown",e,t)},group:"multipleSelect.itemBox"}))};o(n),setTimeout(function(){return o(n)},100)}},{key:"reset",value:function(){this.searchInput.reset(),this.selectAllUI.reset(),this.clearAllUI.reset()}},{key:"update",value:function(){if(this.isBuilt()){var t,e;this.itemsBox.loadData((t=this.items,e=uM(this.options.value),(0,F.Sc)(t,function(t){return t.checked=e(t.value),t}))),uY(uq(i.prototype),"update",this).call(this)}}},{key:"destroy",value:function(){this.itemsBox&&this.itemsBox.destroy(),this.searchInput.destroy(),this.clearAllUI.destroy(),this.selectAllUI.destroy(),this.searchInput=null,this.clearAllUI=null,this.selectAllUI=null,this.itemsBox=null,this.items=null,uY(uq(i.prototype),"destroy",this).call(this)}},{key:"onInput",value:function(t){var e,n=this,r=t.target.value.toLocaleLowerCase(this.getLocale());e=""===r?uF(this.items):(0,F.w7)(this.items,function(t){return"".concat(t.value).toLocaleLowerCase(n.getLocale()).indexOf(r)>=0}),this.itemsBox.loadData(e)}},{key:"onInputKeyDown",value:function(t){this.runLocalHooks("keydown",t,this),(0,rn.r$)(Y.ot,t.keyCode)("ARROW_DOWN|TAB")&&!this.itemsBox.isListening()&&((0,T.mM)(t),this.itemsBox.listen(),this.itemsBox.selectCell(0,0))}},{key:"onSelectAllClick",value:function(t){var e=[];t.preventDefault(),(0,F.Bk)(this.itemsBox.getSourceData(),function(t,n){t.checked=!0,e.push((0,uT.ec)(t,n)[0])}),this.itemsBox.setSourceDataAtCell(e)}},{key:"onClearAllClick",value:function(t){var e=[];t.preventDefault(),(0,F.Bk)(this.itemsBox.getSourceData(),function(t,n){t.checked=!1,e.push((0,uT.ec)(t,n)[0])}),this.itemsBox.setSourceDataAtCell(e)}}],r=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"htUIMultipleSelect",value:[]})}}],n&&uz(i.prototype,n),r&&uz(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lZ);function uX(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return uJ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uJ(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var uQ="by_value";function u0(t){return(u0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u1(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function u2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==u0(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u0(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u0(e)?e:String(e)}(r.key),r)}}function u3(){return(u3="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u8(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function u4(t,e){return(u4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u8(t){return(u8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}lp(uQ,function(t,e){return(0,uX(e,1)[0])(t.value)},{name:"By value",inputsCount:0,inputValuesDecorator:function(t){return[uM(uX(t,1)[0])]},showOperators:!1});var u9=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u4(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=u8(i);if(e){var r=u8(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===u0(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.elements.push(new u$(n.hot)),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.getMultipleSelectElement().addLocalHook("keydown",function(e){return t.onInputKeyDown(e)})}},{key:"setState",value:function(t){if(this.reset(),t&&t.command.key===uQ){var e=this.getMultipleSelectElement();e.setItems(t.itemsSnapshot),e.setValue(t.args[0]),e.setLocale(t.locale)}}},{key:"getState",value:function(){var t=this.getMultipleSelectElement(),e=t.getItems();return{command:{key:t.isSelectedAllValues()||!e.length?ly:uQ},args:[t.getValue()],itemsSnapshot:e}}},{key:"updateState",value:function(t){var e=this,n=function(n,r,o,i,a){var l,u=(function(t){if(Array.isArray(t))return t}(l=(0,F.w7)(r,function(t){return t.name===uQ}))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(l,1)||function(t,e){if(t){if("string"==typeof t)return u1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u1(t,e)}}(l,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],s={},c=e.hot.getTranslatedPhrase(ov.FILTERS_VALUES_BLANK_CELLS);if(u){var f=uj((0,F.Sc)(i(n,a),function(t){return t.value}));o&&(u.args[0]=o);var h=[],d=uA(f,u.args[0],c,function(t){t.checked&&h.push(t.value)}),p=t.editedConditionStack.column;s.locale=e.hot.getCellMeta(0,p).locale,s.args=[h],s.command=ld(uQ),s.itemsSnapshot=d}else s.args=[],s.command=ld(ly);e.state.setValueAtIndex(n,s)};n(t.editedConditionStack.column,t.editedConditionStack.conditions,t.conditionArgsChange,t.filteredRowsFactory),t.dependentConditionStacks.length&&n(t.dependentConditionStacks[0].column,t.dependentConditionStacks[0].conditions,t.conditionArgsChange,t.filteredRowsFactory,t.editedConditionStack)}},{key:"getMultipleSelectElement",value:function(){return this.elements.filter(function(t){return t instanceof u$})[0]}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,r,o,i,a){(0,A.cn)(n.parentNode,"htFiltersMenuValue");var l=t.hot.rootDocument.createElement("div");return(0,A.cn)(l,"htFiltersMenuLabel"),l.textContent=a,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||(0,F.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"reset",value:function(){var t=this.hot.getTranslatedPhrase(ov.FILTERS_VALUES_BLANK_CELLS),e=uj(this._getColumnVisibleValues()),n=uA(e,e,t);this.getMultipleSelectElement().setItems(n),u3(u8(i.prototype),"reset",this).call(this),this.getMultipleSelectElement().setValue(e);var r=this.hot.getPlugin("filters").getSelectedColumn();null!==r&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,r.visualIndex).locale)}},{key:"onInputKeyDown",value:function(t){(0,Y.ot)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,T.mM)(t))}},{key:"_getColumnVisibleValues",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn();return null===t?[]:(0,F.Sc)(this.hot.getDataAtCol(t.visualIndex),function(t){return u_(t)})}}],u2(i.prototype,n),r&&u2(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(lc);function u6(t){return(u6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==u6(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u6(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===u6(e)?e:String(e)}(r.key),r)}}function u5(t,e){return(u5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u5(t,e)}(o,t);var e,n,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=st(o);if(e){var r=st(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===u6(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),(n=r.call(this,t,{id:e.id,stateless:!0})).name=e.name,n.elements.push(new l3(n.hot,{type:"button",value:ov.FILTERS_BUTTONS_OK,className:"htUIButton htUIButtonOK",identifier:o.BUTTON_OK})),n.elements.push(new l3(n.hot,{type:"button",value:ov.FILTERS_BUTTONS_CANCEL,className:"htUIButton htUIButtonCancel",identifier:o.BUTTON_CANCEL})),n.registerHooks(),n}return n=[{key:"BUTTON_OK",get:function(){return"ok"}},{key:"BUTTON_CANCEL",get:function(){return"cancel"}}],u7(o.prototype,[{key:"registerHooks",value:function(){var t=this;(0,F.Bk)(this.elements,function(e){e.addLocalHook("click",function(e,n){return t.onButtonClick(e,n)})})}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return(0,A.cn)(n.parentNode,"htFiltersMenuActionBar"),n.parentNode.hasAttribute("ghost-table")||(0,F.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"accept",value:function(){this.runLocalHooks("accept")}},{key:"cancel",value:function(){this.runLocalHooks("cancel")}},{key:"onButtonClick",value:function(t,e){e.options.identifier===o.BUTTON_OK?this.accept():this.cancel()}}]),n&&u7(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(lc);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return so(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return so(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function si(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function sa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==sn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sn(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sn(e)?e:String(e)}(r.key),r)}}var sl="ConditionCollection.filteringStates",su=function(){var t,e;function n(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.isMapRegistrable=e,this.filteringStates=new ro.A,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(sl,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}return t=[{key:"isEmpty",value:function(){return 0===this.getFilteredColumns().length}},{key:"isMatch",value:function(t,e){var n,r=this.filteringStates.getValueAtIndex(e),o=null!==(n=null==r?void 0:r.conditions)&&void 0!==n?n:[],i=null==r?void 0:r.operation;return this.isMatchInConditions(o,t,i)}},{key:"isMatchInConditions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uc;return!t.length||(function(t){if(!uu[t])throw Error('Operation with id "'.concat(t,'" does not exist.'));var e=uu[t].func;return function(t,n){return e(t,n)}})(n)(t,e)}},{key:"addCondition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uc,r=arguments.length>3?arguments[3]:void 0,o=this.hot.getCellMeta(0,t).locale,i=(0,F.Sc)(e.args,function(t){return"string"==typeof t?t.toLocaleLowerCase(o):t}),a=e.name||e.command.key;this.runLocalHooks("beforeAdd",t);var l=this.getOperation(t);if(l){if(l!==n)throw Error((0,r1.e)(g||(g=si(["The column of index "," has been already applied with a `","` \n        filter operation. Use `removeConditions` to clear the current conditions and then add new ones. \n        Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, \n        use it consequently for a particular column)."],["The column of index "," has been already applied with a \\`","\\`\\x20\n        filter operation. Use \\`removeConditions\\` to clear the current conditions and then add new ones.\\x20\n        Mind that you cannot mix different types of operations (for instance, if you use \\`conjunction\\`,\\x20\n        use it consequently for a particular column)."])),t,l))}else if((0,W.o8)(uu[n]))throw Error((0,r1.e)(v||(v=si(["Unexpected operation named `","`. Possible ones are \n        `disjunction` and `conjunction`."],["Unexpected operation named \\`","\\`. Possible ones are\\x20\n        \\`disjunction\\` and \\`conjunction\\`."])),n));var u=this.getConditions(t);0===u.length?this.filteringStates.setValueAtIndex(t,{operation:n,conditions:[{name:a,args:i,func:lh(a,i)}]},r):u.push({name:a,args:i,func:lh(a,i)}),this.runLocalHooks("afterAdd",t)}},{key:"getConditions",value:function(t){var e,n;return null!==(e=null===(n=this.filteringStates.getValueAtIndex(t))||void 0===n?void 0:n.conditions)&&void 0!==e?e:[]}},{key:"getOperation",value:function(t){var e;return null===(e=this.filteringStates.getValueAtIndex(t))||void 0===e?void 0:e.operation}},{key:"getFilteredColumns",value:function(){return this.filteringStates.getEntries().map(function(t){return sr(t,1)[0]})}},{key:"getColumnStackPosition",value:function(t){return this.getFilteredColumns().indexOf(t)}},{key:"exportAllConditions",value:function(){return(0,F.k$)(this.filteringStates.getEntries(),function(t,e){var n=sr(e,2),r=n[0],o=n[1],i=o.operation,a=o.conditions;return t.push({column:r,operation:i,conditions:(0,F.Sc)(a,function(t){return{name:t.name,args:t.args}})}),t},[])}},{key:"importAllConditions",value:function(t){var e=this;this.clean(),(0,F.Bk)(t,function(t){(0,F.Bk)(t.conditions,function(n){return e.addCondition(t.column,n)})})}},{key:"removeConditions",value:function(t){this.runLocalHooks("beforeRemove",t),this.filteringStates.clearValue(t),this.runLocalHooks("afterRemove",t)}},{key:"clean",value:function(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}},{key:"hasConditions",value:function(t,e){var n=this.getConditions(t);return e?n.some(function(t){return t.name===e}):n.length>0}},{key:"destroy",value:function(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(sl),this.filteringStates=null,this.clearLocalHooks()}}],sa(n.prototype,t),e&&sa(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function ss(t){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ss(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ss(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ss(e)?e:String(e)}(r.key),r)}}(0,I.jB)(su,od.Z);var sf=function(){var t,e;function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return[]};!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.conditionCollection=t,this.columnDataFactory=e}return t=[{key:"filter",value:function(){var t=this,e=[];return(0,F.Bk)(this.conditionCollection.getFilteredColumns(),function(n,r){var o=t.columnDataFactory(n);r&&(o=t._getIntersectData(o,e)),e=t.filterByColumn(n,o)}),e}},{key:"filterByColumn",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return(0,F.Bk)(n,function(n){void 0!==n&&e.conditionCollection.isMatch(n,t)&&r.push(n)}),r}},{key:"_getIntersectData",value:function(t,e){var n=[];return(0,F.Bk)(e,function(e){var r=e.meta.visualRow;void 0!==t[r]&&(n[r]=t[r])}),n}}],sc(n.prototype,t),e&&sc(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function sh(t){return(sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==sh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sh(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sh(e)?e:String(e)}(r.key),r)}}var sp=function(){var t,e;function n(t,e){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.conditionCollection=e,this.columnDataFactory=o,this.changes=[],this.grouping=!1,this.latestEditedColumnPosition=-1,this.latestOrderStack=[],this.conditionCollection.addLocalHook("beforeRemove",function(t){return r._onConditionBeforeModify(t)}),this.conditionCollection.addLocalHook("afterRemove",function(t){return r.updateStatesAtColumn(t)}),this.conditionCollection.addLocalHook("afterAdd",function(t){return r.updateStatesAtColumn(t)}),this.conditionCollection.addLocalHook("beforeClean",function(){return r._onConditionBeforeClean()}),this.conditionCollection.addLocalHook("afterClean",function(){return r._onConditionAfterClean()})}return t=[{key:"groupChanges",value:function(){this.grouping=!0}},{key:"flush",value:function(){var t=this;this.grouping=!1,(0,F.Bk)(this.changes,function(e){t.updateStatesAtColumn(e)}),this.changes.length=0}},{key:"_onConditionBeforeModify",value:function(t){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(t)}},{key:"updateStatesAtColumn",value:function(t,e){var n=this;if(this.grouping){-1===this.changes.indexOf(t)&&this.changes.push(t);return}var r=this.conditionCollection.exportAllConditions(),o=this.conditionCollection.getColumnStackPosition(t);-1===o&&(o=this.latestEditedColumnPosition);var i=r.slice(0,o),a=r.slice(o);a.length&&a[0].column===t&&a.shift();var l=(0,rn.WA)(function(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new su(n.hot,!1),a=[].concat(t,o);i.importAllConditions(a);var l=n.columnDataFactory(e);r=i.isEmpty()?l:new sf(i,function(t){return n.columnDataFactory(t)}).filter();var u=uM(r=(0,F.Sc)(r,function(t){return t.meta.visualRow}));return i.destroy(),(0,F.w7)(l,function(t){return u(t.meta.visualRow)})})(i),u=[].concat(this.conditionCollection.getConditions(t));this.runLocalHooks("update",{editedConditionStack:{column:t,conditions:u},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:e})}},{key:"_onConditionBeforeClean",value:function(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}},{key:"_onConditionAfterClean",value:function(){var t=this;(0,F.Bk)(this.latestOrderStack,function(e){t.updateStatesAtColumn(e)})}},{key:"destroy",value:function(){var t=this;this.clearLocalHooks(),(0,I._l)(this,function(e,n){t[n]=null})}}],sd(n.prototype,t),e&&sd(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();(0,I.jB)(sp,od.Z);var sy=n(7469);function sg(t){return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==sg(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sg(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sg(e)?e:String(e)}(r.key),r)}}function sb(){return(sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sC(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function sw(t,e){return(sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sS(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sC(t){return(sC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sk="filters",sO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sw(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=sC(i);if(e){var r=sC(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===sg(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return sS(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).eventManager=new tc.Z(sS(e)),e.dropdownMenuPlugin=null,e.conditionCollection=null,e.conditionUpdateObserver=null,e.components=new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]]),e.lastSelectedColumn=null,e.filtersRowsMap=null,e.hot.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[sk]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new sy.n),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");var e=this.hot.getSettings().dropdownMenu,n=e&&e.uiContainer||this.hot.rootDocument.body,r=function(e){return e.addLocalHook("accept",function(){return t.onActionBarSubmit("accept")}),e.addLocalHook("cancel",function(){return t.onActionBarSubmit("cancel")}),e.addLocalHook("change",function(n){return t.onComponentChange(e,n)}),e},o=function(){return"".concat(t.hot.getTranslatedPhrase(ov.FILTERS_DIVS_FILTER_BY_CONDITION),":")},a=function(){return"".concat(t.hot.getTranslatedPhrase(ov.FILTERS_DIVS_FILTER_BY_VALUE),":")};if(!this.components.get("filter_by_condition")){var l=new ul(this.hot,{id:"filter_by_condition",name:o,addSeparator:!1,menuContainer:n});l.addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),this.components.set("filter_by_condition",r(l))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new uR(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){var u=new ul(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:n});u.addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),this.components.set("filter_by_condition2",r(u))}this.components.get("filter_by_value")||this.components.set("filter_by_value",r(new u9(this.hot,{id:"filter_by_value",name:a}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",r(new se(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new su(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new sp(this.hot,this.conditionCollection,function(e){return t.getDataMapAtColumn(e)}),this.conditionUpdateObserver.addLocalHook("update",function(e){return t.updateComponents(e)})),this.components.forEach(function(t){return t.show()}),this.addHook("beforeDropdownMenuSetItems",function(e){return t.onBeforeDropdownMenuSetItems(e)}),this.addHook("afterDropdownMenuDefaultOptions",function(e){return t.onAfterDropdownMenuDefaultOptions(e)}),this.addHook("afterDropdownMenuShow",function(){return t.onAfterDropdownMenuShow()}),this.addHook("afterDropdownMenuHide",function(){return t.onAfterDropdownMenuHide()}),this.addHook("afterChange",function(e){return t.onAfterChange(e)}),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),sb(sC(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t,e=this;this.enabled&&(null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach(function(t,n){t.destroy(),e.components.set(n,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)),sb(sC(i.prototype),"disablePlugin",this).call(this)}},{key:"addCondition",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uc,o=this.hot.toPhysicalColumn(t);this.conditionCollection.addCondition(o,{command:{key:e},args:n},r)}},{key:"removeConditions",value:function(t){var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}},{key:"clearConditions",value:function(t){if(void 0===t)this.conditionCollection.clean();else{var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}}},{key:"filter",value:function(){var t=this,e=this._createDataFilter(),n=!this.conditionCollection.isEmpty(),r=[],o=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",o)){if(n){var i=[];this.hot.batchExecution(function(){t.filtersRowsMap.clear();var n=uM(r=(0,F.Sc)(e.filter(),function(t){return t.meta.visualRow}));(0,t5.q4)(t.hot.countSourceRows()-1,function(t){n(t)||i.push(t)}),(0,F.Bk)(i,function(e){t.filtersRowsMap.setValueAtIndex(e,!0)})},!0),r.length||this.hot.deselectCell()}else this.filtersRowsMap.clear()}this.hot.runHooks("afterFilter",o),this.hot.view.adjustElementsSize(!0),this.hot.render(),this.clearColumnSelection()}},{key:"getSelectedColumn",value:function(){var t,e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e?{visualIndex:e.col,physicalIndex:this.hot.toPhysicalColumn(e.col)}:null}},{key:"clearColumnSelection",value:function(){var t=this.getSelectedColumn();null!==t&&this.hot.selectCell(0,t.visualIndex)}},{key:"getDataMapAtColumn",value:function(t){var e=this,n=this.hot.toVisualColumn(t),r=[];return(0,F.Bk)(this.hot.getSourceDataAtCol(n),function(t,o){var i,a=e.hot.getCellMeta(o,n),l=a.row,u=a.col,s=a.visualCol,c=a.visualRow,f=a.type,h=a.instance,d=a.dateFormat,p=a.locale,y=null!==(i=e.hot.getDataAtCell(e.hot.toVisualRow(o),n))&&void 0!==i?i:t;r.push({meta:{row:l,col:u,visualCol:s,visualRow:c,type:f,instance:h,dateFormat:d,locale:p},value:u_(y)})}),r}},{key:"onAfterChange",value:function(t){var e=this;t&&(0,F.Bk)(t,function(t){var n=(function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,2)||function(t,e){if(t){if("string"==typeof t)return sv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sv(t,e)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],r=e.hot.propToCol(n);e.conditionCollection.hasConditions(r)&&e.updateValueComponentCondition(r)})}},{key:"updateValueComponentCondition",value:function(t){var e=uj(this.hot.getDataAtCol(t));this.conditionUpdateObserver.updateStatesAtColumn(t,e)}},{key:"restoreComponents",value:function(t){var e,n=null===(e=this.getSelectedColumn())||void 0===e?void 0:e.physicalIndex;t.forEach(function(t){t.isHidden()||t.restoreState(n)}),this.updateDependentComponentsVisibility()}},{key:"onAfterDropdownMenuShow",value:function(){this.restoreComponents(Array.from(this.components.values()))}},{key:"onAfterDropdownMenuHide",value:function(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}},{key:"onBeforeDropdownMenuSetItems",value:function(){var t=this;this.dropdownMenuPlugin&&this.dropdownMenuPlugin.menu.addLocalHook("afterOpen",function(){t.dropdownMenuPlugin.menu.hotMenu.updateSettings({hiddenRows:!0})})}},{key:"onAfterDropdownMenuDefaultOptions",value:function(t){t.items.push({name:or}),this.components.forEach(function(e){t.items.push(e.getMenuItemDescriptor())})}},{key:"getOperationBasedOnArguments",value:function(t,e,n,r){var o=t;return o===uf&&e.command.key!==ly&&n.command.key!==ly&&r.command.key!==ly?o=uh:r.command.key!==ly&&(e.command.key===ly||n.command.key===ly)&&(o=uc),o}},{key:"onActionBarSubmit",value:function(t){var e;if("accept"===t){var n,r=this.getSelectedColumn();if(null===r){null===(n=this.dropdownMenuPlugin)||void 0===n||n.close();return}var o=r.physicalIndex,i=this.components.get("filter_by_condition").getState(),a=this.components.get("filter_by_condition2").getState(),l=this.components.get("filter_by_value").getState(),u=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),i,a,l);this.conditionUpdateObserver.groupChanges();var s=this.conditionCollection.getColumnStackPosition(o);-1===s&&(s=void 0),this.conditionCollection.removeConditions(o),i.command.key!==ly&&(this.conditionCollection.addCondition(o,i,u,s),a.command.key!==ly&&this.conditionCollection.addCondition(o,a,u,s)),l.command.key!==ly&&this.conditionCollection.addCondition(o,l,u,s),this.conditionUpdateObserver.flush(),this.components.forEach(function(t){return t.saveState(o)}),this.filtersRowsMap.clear(),this.filter()}null===(e=this.dropdownMenuPlugin)||void 0===e||e.close()}},{key:"onComponentChange",value:function(t,e){this.updateDependentComponentsVisibility(),t.constructor!==ul||e.inputsCount||this.setListeningDropdownMenu()}},{key:"onSelectUIClosed",value:function(){this.setListeningDropdownMenu()}},{key:"setListeningDropdownMenu",value:function(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}},{key:"updateDependentComponentsVisibility",value:function(){var t=this.components.get("filter_by_condition").getState().command,e=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents.apply(this,e):this.hideComponents.apply(this,e)}},{key:"onAfterGetColHeader",value:function(t,e){var n=this.hot.toPhysicalColumn(t);this.enabled&&this.conditionCollection.hasConditions(n)?(0,A.cn)(e,"htFiltersActive"):(0,A.IV)(e,"htFiltersActive")}},{key:"_createDataFilter",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new sf(e,function(e){return t.getDataMapAtColumn(e)})}},{key:"updateComponents",value:function(t){if(null!==(e=this.dropdownMenuPlugin)&&void 0!==e&&e.enabled){var e,n=t.editedConditionStack,r=n.conditions,o=n.column,i=r.filter(function(t){return t.name===uQ}),a=r.filter(function(t){return t.name!==uQ});if(i.length>=2||a.length>=3)(0,nG.ZK)((0,r1.e)(m||(m=Object.freeze(Object.defineProperties(["The filter conditions have been applied properly, but couldn’t be displayed visually. \n        The overall amount of conditions exceed the capability of the dropdown menu. \n        For more details see the documentation."],{raw:{value:Object.freeze(["The filter conditions have been applied properly, but couldn’t be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation."])}})))));else{var l=this.conditionCollection.getOperation(o);this.components.get("filter_by_condition").updateState(a[0],o),this.components.get("filter_by_condition2").updateState(a[1],o),this.components.get("filter_operators").updateState(l,o),this.components.get("filter_by_value").updateState(t)}}}},{key:"getIndexesOfComponents",value:function(){var t=[];if(!this.dropdownMenuPlugin)return t;for(var e=this.dropdownMenuPlugin.menu,n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return(0,F.Bk)(r,function(n){(0,F.Bk)(e.menuItems,function(e,r){e.key===n.getMenuItemDescriptor().key&&t.push(r)})}),t}},{key:"changeComponentsVisibility",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.dropdownMenuPlugin){for(var e=this.dropdownMenuPlugin.menu.hotMenu,n=e.getPlugin("hiddenRows"),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=this.getIndexesOfComponents.apply(this,o);t?n.showRows(a):n.hideRows(a),e.render()}}},{key:"hideComponents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!1].concat(e))}},{key:"showComponents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!0].concat(e))}},{key:"destroy",value:function(){var t=this;this.enabled&&(this.components.forEach(function(e,n){null!==e&&(e.destroy(),t.components.set(n,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),sb(sC(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return sk}},{key:"PLUGIN_PRIORITY",get:function(){return 250}},{key:"PLUGIN_DEPS",get:function(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}}],n&&sm(i.prototype,n),r&&sm(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function sR(t){return(sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function sE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sP(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=function(t){var e=function(t,e){if("object"!==sR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sR(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sR(e)?e:String(e)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sP(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n(5827);var sM="internal-use-in-handsontable",s_={licenseKey:sM,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!0,nullDate:{year:1899,month:12,day:31},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function sj(t){var e,n;return{maxColumns:t.maxColumns,maxRows:t.maxRows,language:null===(e=t[s1])||void 0===e?void 0:null===(n=e.language)||void 0===n?void 0:n.langCode}}function sA(t){return Object.keys(t).reduce(function(e,n){return"hyperformula"!==n&&(e[n]=t[n]),e},{})}function sT(t){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sI(){var t="engine_relationship",e=(0,rR.Z)(s1);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function sx(){var t="shared_engine_usage",e=(0,rR.Z)(s1);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function sD(t){var e,n=sI(),r=0===n.size?[]:Array.from(null!==(e=n.get(t))&&void 0!==e?e:[]);return new Map(r.map(function(t){return[t.getPlugin("formulas").sheetId,t]}))}function sN(t,e){if(t){var n=sI(),r=n.get(t),o=sx(),i=o.get(t);r&&r.includes(e)&&(r.splice(r.indexOf(e),1),0===r.length&&n.delete(t)),i&&i.includes(e.guid)&&(i.splice(i.indexOf(e.guid),1),0===i.length&&(o.delete(t),t.destroy()))}}function sH(t){return"string"==typeof t&&"'"===t.charAt(0)&&"="===t.charAt(1)}function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function sL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(e){sZ(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function sU(t){return(sU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||sF(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sF(t,e){if(t){if("string"==typeof t)return sW(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sW(t,e)}}function sW(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function sz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s$(r.key),r)}}function sY(){return(sY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sq(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function sG(t,e){return(sG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sK(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sq(t){return(sq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sZ(t,e,n){return(e=s$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s$(t){var e=function(t,e){if("object"!==sU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==sU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===sU(e)?e:String(e)}function sX(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function sJ(t,e,n){var r=s0(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function sQ(t,e){var n=s0(t,e,"get");return n.get?n.get.call(t):n.value}function s0(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var s1="formulas",s2="row_move";tb.Z.getSingleton().register("afterNamedExpressionAdded"),tb.Z.getSingleton().register("afterNamedExpressionRemoved"),tb.Z.getSingleton().register("afterSheetAdded"),tb.Z.getSingleton().register("afterSheetRemoved"),tb.Z.getSingleton().register("afterSheetRenamed"),tb.Z.getSingleton().register("afterFormulasValuesUpdate");var s3=function(t){return"UndoRedo.undo"===t||"UndoRedo.redo"===t||"auto"===t},s4=new WeakMap,s8=new WeakMap,s9=new WeakMap,s6=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sG(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=sq(i);if(e){var r=sq(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===sU(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return sK(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return sX(sK(t=o.call.apply(o,[this].concat(n))),s4,{writable:!0,value:!1}),sX(sK(t),s8,{writable:!0,value:!1}),sX(sK(t),s9,{writable:!0,value:[["valuesUpdated",function(){return t.onEngineValuesUpdated.apply(t,arguments)}],["namedExpressionAdded",function(){return t.onEngineNamedExpressionsAdded.apply(t,arguments)}],["namedExpressionRemoved",function(){return t.onEngineNamedExpressionsRemoved.apply(t,arguments)}],["sheetAdded",function(){return t.onEngineSheetAdded.apply(t,arguments)}],["sheetRenamed",function(){return t.onEngineSheetRenamed.apply(t,arguments)}],["sheetRemoved",function(){return t.onEngineSheetRemoved.apply(t,arguments)}]]}),sZ(sK(t),"staticRegister",(0,rR.Z)("formulas")),sZ(sK(t),"engine",null),sZ(sK(t),"sheetName",null),t}return n=[{key:"sheetId",get:function(){return null===this.sheetName?null:this.engine.getSheetId(this.sheetName)}},{key:"isEnabled",value:function(){return!!this.hot.getSettings()[s1]}},{key:"enablePlugin",value:function(){var t,e=this;if(!this.enabled){if(this.engine=null!==(t=function(t){var e,n=t.getSettings(),r=n[s1],o=null==r?void 0:r.engine;if(!0===r||(0,W.o8)(o))return null;if("function"==typeof o.hyperformula||"function"==typeof o)return function(t,e,n){var r,o,i,a,l,u,s=e[s1],c=(l=sA(null!=(a=e[s1])&&null!==(i=a.engine)&&void 0!==i&&i.hyperformula?a.engine:{}),u=sj(e),sE(sE(sE({},s_),l),u)),f=sI(),h=sx();(r=s.functions)&&r.forEach(function(e){var n=e.name,r=e.plugin,o=e.translations;try{t.registerFunction(n,r,o)}catch(i){(0,nG.ZK)(i.message)}}),function(t,e){if(e){var n=e.langCode;try{t.registerLanguage(n,e)}catch(r){(0,nG.ZK)(r.message)}}}(t,s.language);var d=t.buildEmpty(c);return f.set(d,[n]),h.set(d,[n.guid]),(o=s.namedExpressions)&&(d.suspendEvaluation(),o.forEach(function(t){var e=t.name,n=t.expression,r=t.scope,o=t.options;try{d.addNamedExpression(e,n,r,o)}catch(i){(0,nG.ZK)(i.message)}}),d.resumeEvaluation()),d.on("sheetAdded",function(){d.rebuildAndRecalculate()}),d.on("sheetRemoved",function(){d.rebuildAndRecalculate()}),d}(null!==(e=o.hyperformula)&&void 0!==e?e:o,n,t);if("object"===sT(o)&&(0,W.o8)(o.hyperformula)){var i=sI(),a=sx().get(o);return i.has(o)||i.set(o,[]),i.get(o).push(t),a&&a.push(t.guid),o.getConfig().licenseKey||o.updateConfig({licenseKey:sM}),o}return null}(this.hot))&&void 0!==t?t:this.engine,!this.engine){(0,nG.ZK)("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(null!==this.sheetName&&!this.engine.doesSheetExist(this.sheetName)){var n=this.addSheet(this.sheetName,this.hot.getSourceDataArray());!1!==n&&(this.sheetName=n)}this.addHook("beforeLoadData",function(){return e.onBeforeLoadData.apply(e,arguments)}),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("beforeUpdateData",function(){return e.onBeforeLoadData.apply(e,arguments)}),this.addHook("afterUpdateData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("modifyData",function(){return e.onModifyData.apply(e,arguments)}),this.addHook("modifySourceData",function(){return e.onModifySourceData.apply(e,arguments)}),this.addHook("beforeValidate",function(){return e.onBeforeValidate.apply(e,arguments)}),this.addHook("afterSetSourceDataAtCell",function(){return e.onAfterSetSourceDataAtCell.apply(e,arguments)}),this.addHook("afterSetDataAtCell",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("afterSetDataAtRowProp",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("beforeCreateRow",function(){return e.onBeforeCreateRow.apply(e,arguments)}),this.addHook("beforeCreateCol",function(){return e.onBeforeCreateCol.apply(e,arguments)}),this.addHook("afterCreateRow",function(){return e.onAfterCreateRow.apply(e,arguments)}),this.addHook("afterCreateCol",function(){return e.onAfterCreateCol.apply(e,arguments)}),this.addHook("beforeRemoveRow",function(){return e.onBeforeRemoveRow.apply(e,arguments)}),this.addHook("beforeRemoveCol",function(){return e.onBeforeRemoveCol.apply(e,arguments)}),this.addHook("afterRemoveRow",function(){return e.onAfterRemoveRow.apply(e,arguments)}),this.addHook("afterRemoveCol",function(){return e.onAfterRemoveCol.apply(e,arguments)}),this.addHook("beforeUndo",function(t){(null==t?void 0:t.actionType)!==s2&&e.engine.undo()}),this.addHook("beforeRedo",function(t){(null==t?void 0:t.actionType)!==s2&&e.engine.redo()}),this.addHook("afterDetachChild",function(){return e.onAfterDetachChild.apply(e,arguments)}),this.addHook("beforeAutofill",function(){return e.onBeforeAutofill.apply(e,arguments)}),sQ(this,s9).forEach(function(t){var n=sV(t,2),r=n[0],o=n[1];return e.engine.on(r,o)}),sY(sq(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t=this;sQ(this,s9).forEach(function(e){var n=sV(e,2),r=n[0],o=n[1];return t.engine.off(r,o)}),sN(this.engine,this.hot),this.engine=null,sY(sq(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(t){this.engine.updateConfig((o=sA(null!=(r=(e=this.hot.getSettings())[s1])&&null!==(n=r.engine)&&void 0!==n&&n.hyperformula?r.engine:{}),a=sj(e),sE(sE({},o),a)));var e,n,r,o,a,l=this.hot.getSettings()[s1];if((0,W.$K)(l)&&(0,W.$K)(l.sheetName)&&l.sheetName!==this.sheetName&&this.switchSheet(l.sheetName),!t.data&&null===this.sheetName){var u=this.hot.getSettings()[s1].sheetName;u&&this.engine.doesSheetExist(u)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(null!=u?u:void 0,this.hot.getSourceDataArray())}sY(sq(i.prototype),"updatePlugin",this).call(this,t)}},{key:"destroy",value:function(){var t=this;sQ(this,s9).forEach(function(e){var n,r=sV(e,2),o=r[0],i=r[1];return null===(n=t.engine)||void 0===n?void 0:n.off(o,i)}),sJ(this,s9,null),sN(this.engine,this.hot),this.engine=null,sY(sq(i.prototype),"destroy",this).call(this)}},{key:"getPhysicalIndexPosition",value:function(t,e,n,r,o){return!o&&t>=n?r+(t-n):e}},{key:"toPhysicalRowPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalRow(t),this.hot.countRows(),this.hot.countSourceRows(),e)}},{key:"toPhysicalColumnPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalColumn(t),this.hot.countCols(),this.hot.countSourceCols(),e)}},{key:"addSheet",value:function(t,e){if((0,W.$K)(e)&&!(0,uT.Jr)(e))return(0,nG.ZK)("The provided data should be an array of arrays."),!1;if(null!=t&&this.engine.doesSheetExist(t))return(0,nG.ZK)("Sheet with the provided name already exists."),!1;try{var n=this.engine.addSheet(null!=t?t:void 0);return e&&this.engine.setSheetContent(this.engine.getSheetId(n),e),n}catch(r){return(0,nG.ZK)(r.message),!1}}},{key:"switchSheet",value:function(t){if(!this.engine.doesSheetExist(t)){(0,nG.vU)("The sheet named `".concat(t,"` does not exist, switch aborted."));return}this.sheetName=t;var e=this.engine.getSheetSerialized(this.sheetId);e.length>0&&this.hot.loadData(e,"".concat((0,z.ct)(s1),".switchSheet"))}},{key:"getCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,r=this.hot.toPhysicalRow(t),o=this.hot.toPhysicalColumn(e);return null!==r&&null!==o?this.engine.getCellType({sheet:n,row:r,col:o}):"EMPTY"}},{key:"isFormulaCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,r=this.hot.toPhysicalRow(t),o=this.hot.toPhysicalColumn(e);return null!==r&&null!==o&&this.engine.doesCellHaveFormula({sheet:n,row:r,col:o})}},{key:"renderDependentSheets",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Set;t.forEach(function(t){var e,n=null==t?void 0:null===(e=t.address)||void 0===e?void 0:e.sheet;void 0===n||r.has(n)||r.add(n)}),sD(this.engine).forEach(function(t,o){if((n||o!==e.sheetId)&&r.has(o)){var i;t.render(),null===(i=t.view)||void 0===i||i.adjustElementsSize()}})}},{key:"validateDependentCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function(t){var e,n=null!==(e=null==t?void 0:t.address)&&void 0!==e?e:{},r=n.row,o=n.col,i=n.sheet;return(0,W.$K)(i)?"".concat(i,":").concat(r,"x").concat(o):""},o=new Set(n.map(function(t){return r(t)}));t.forEach(function(t){var n,i,a=null!==(n=t.address)&&void 0!==n?n:{},l=a.row,u=a.col,s=(0,W.$K)(l)?e.hot.toVisualRow(l):null,c=(0,W.$K)(u)?e.hot.toVisualColumn(u):null;if(null!==s&&null!==c){var f=null==t?void 0:null===(i=t.address)||void 0===i?void 0:i.sheet,h=r(t);if(void 0!==f&&!o.has(h)){var d=sD(e.engine).get(f);if(!d)return;d.validateCell(d.getDataAtCell(s,c),d.getCellMeta(s,c),function(){})}}})}},{key:"syncChangeWithEngine",value:function(t,e,n){var r={row:this.toPhysicalRowPosition(t),col:this.toPhysicalColumnPosition(e),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(r)){(0,nG.ZK)("Not possible to set cell data at ".concat(JSON.stringify(r)));return}return this.engine.setCellContents(r,n)}},{key:"onBeforeValidate",value:function(t,e,n){var r=this.hot.propToCol(n);if(this.isFormulaCellType(e,r)){var o={row:this.hot.toPhysicalRow(e),col:this.hot.toPhysicalColumn(r),sheet:this.sheetId},i=this.engine.getCellValue(o);return"object"===sU(i)&&null!==i?i.value:i}return t}},{key:"onBeforeAutofill",value:function(t,e,n){var r=this,o=function(t){return sL(sL({},t),{},{sheet:r.sheetId})},i={start:o(e.getTopStartCorner()),end:o(e.getBottomEndCorner())},a={start:o(n.getTopStartCorner()),end:o(n.getBottomEndCorner())};return!1!==this.engine.isItPossibleToSetCellContents(a)&&this.engine.getFillRangeData(i,a)}},{key:"onBeforeLoadData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.includes((0,z.ct)(s1))||sJ(this,s8,(0,W.o8)(this.hot.getSettings().data))}},{key:"onAfterLoadData",value:function(t,e){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!o.includes((0,z.ct)(s1))){if(this.sheetName=(n=this.engine,r=this.hot.getSettings()[s1].sheetName,((0,W.o8)(r)||!n.doesSheetExist(r))&&(r=n.addSheet(r)),r),sQ(this,s8))this.switchSheet(this.sheetName);else{var i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){sJ(this,s4,!0);var a=this.engine.setSheetContent(this.sheetId,this.hot.getSourceDataArray());this.renderDependentSheets(a),sJ(this,s4,!1)}}}}},{key:"onModifyData",value:function(t,e,n,r){if(!("get"!==r||sQ(this,s4))&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var o,i=this.hot.toVisualRow(t);if(!this.isFormulaCellType(i,e)&&"ARRAY"!==this.getCellType(i,e)){sH(n.value)&&(n.value=sH(o=n.value)?o.substr(1):o);return}var a={row:t,col:this.toPhysicalColumnPosition(e),sheet:this.sheetId},l=this.engine.getCellValue(a),u="object"===sU(l)&&null!==l?l.value:l;n.value=u}}},{key:"onModifySourceData",value:function(t,e,n,r){if(!("get"!==r||sQ(this,s4))&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var o=this.hot.toVisualRow(t),i=this.hot.propToCol(e);if(this.isFormulaCellType(o,i)||"ARRAY"===this.getCellType(o,i)){var a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(0!==a.width||0!==a.height){var l={row:t,col:this.toPhysicalColumnPosition(i),sheet:this.sheetId};n.value=this.engine.getCellSerialized(l)}}}}},{key:"onAfterSetDataAtCell",value:function(t,e){var n=this;if(!s3(e)){var r=[],o=[],i=this.engine.batch(function(){t.forEach(function(t){var e=sV(t,4),i=e[0],a=e[1],l=e[3],u=n.hot.propToCol(a),s=n.hot.toPhysicalRow(i),c=n.hot.toPhysicalColumn(u),f={row:s,col:c,sheet:n.sheetId};null!==s&&null!==c?n.syncChangeWithEngine(i,u,l):r.push([i,u,l]),o.push({address:f})})});r.length&&this.hot.addHookOnce("afterChange",function(){var t=n.engine.batch(function(){r.forEach(function(t){var e=sV(t,3),r=e[0],o=e[1],i=e[2];n.syncChangeWithEngine(r,o,i)})});n.renderDependentSheets(t,!0)}),this.renderDependentSheets(i),this.validateDependentCells(i,o)}}},{key:"onAfterSetSourceDataAtCell",value:function(t,e){var n=this;if(!s3(e)){var r=[],o=[];t.forEach(function(t){var e,i=sV(t,4),a=i[0],l=i[1],u=i[3],s=n.hot.propToCol(l);if((0,t5.kE)(s)){var c={row:a,col:n.toPhysicalColumnPosition(s),sheet:n.sheetId};if(!n.engine.isItPossibleToSetCellContents(c)){(0,nG.ZK)("Not possible to set source cell data at ".concat(JSON.stringify(c)));return}o.push({address:c}),r.push.apply(r,function(t){if(Array.isArray(t))return sW(t)}(e=n.engine.setCellContents(c,u))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||sF(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}),this.renderDependentSheets(r),this.validateDependentCells(r,o)}}},{key:"onBeforeCreateRow",value:function(t,e){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[this.toPhysicalRowPosition(t),e]))return!1}},{key:"onBeforeCreateCol",value:function(t,e){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[this.toPhysicalColumnPosition(t),e]))return!1}},{key:"onBeforeRemoveRow",value:function(t,e,n){var r=this;return!1!==n.every(function(t){return r.engine.isItPossibleToRemoveRows(r.sheetId,[t,1])})&&void 0}},{key:"onBeforeRemoveCol",value:function(t,e,n){var r=this;return!1!==n.every(function(t){return r.engine.isItPossibleToRemoveColumns(r.sheetId,[t,1])})&&void 0}},{key:"onAfterCreateRow",value:function(t,e,n){if(!s3(n)){var r=this.engine.addRows(this.sheetId,[this.toPhysicalRowPosition(t),e]);this.renderDependentSheets(r)}}},{key:"onAfterCreateCol",value:function(t,e,n){if(!s3(n)){var r=this.engine.addColumns(this.sheetId,[this.toPhysicalColumnPosition(t),e]);this.renderDependentSheets(r)}}},{key:"onAfterRemoveRow",value:function(t,e,n,r){var o=this;if(!s3(r)){var i=n.sort().reverse(),a=this.engine.batch(function(){i.forEach(function(t){o.engine.removeRows(o.sheetId,[t,1])})});this.renderDependentSheets(a)}}},{key:"onAfterRemoveCol",value:function(t,e,n,r){var o=this;if(!s3(r)){var i=n.sort().reverse(),a=this.engine.batch(function(){i.forEach(function(t){o.engine.removeColumns(o.sheetId,[t,1])})});this.renderDependentSheets(a)}}},{key:"onAfterDetachChild",value:function(t,e,n){var r,o=this;sJ(this,s4,!0);var i=this.hot.getSourceDataArray(n,0,n+((null===(r=e.__children)||void 0===r?void 0:r.length)||0),this.hot.countSourceCols());sJ(this,s4,!1),i.forEach(function(t,e){t.forEach(function(t,r){o.engine.setCellContents({col:r,row:n+e,sheet:o.sheetId},[[t]])})})}},{key:"onEngineValuesUpdated",value:function(t){this.hot.runHooks("afterFormulasValuesUpdate",t)}},{key:"onEngineNamedExpressionsAdded",value:function(t,e){this.hot.runHooks("afterNamedExpressionAdded",t,e)}},{key:"onEngineNamedExpressionsRemoved",value:function(t,e){this.hot.runHooks("afterNamedExpressionRemoved",t,e)}},{key:"onEngineSheetAdded",value:function(t){this.hot.runHooks("afterSheetAdded",t)}},{key:"onEngineSheetRenamed",value:function(t,e){this.hot.runHooks("afterSheetRenamed",t,e)}},{key:"onEngineSheetRemoved",value:function(t,e){this.hot.runHooks("afterSheetRemoved",t,e)}}],r=[{key:"PLUGIN_KEY",get:function(){return s1}},{key:"PLUGIN_PRIORITY",get:function(){return 260}}],n&&sz(i.prototype,n),r&&sz(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function s7(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function s5(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var ce=n(331);function cn(t){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cn(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cn(e)?e:String(e)}(r.key),r)}}function co(){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ci(t,e){return(ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ca(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cl(t){return(cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cu(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function cs(t,e){var n=cf(t,e,"get");return n.get?n.get.call(t):n.value}function cc(t,e,n){var r=cf(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function cf(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}tb.Z.getSingleton().register("beforeHideColumns"),tb.Z.getSingleton().register("afterHideColumns"),tb.Z.getSingleton().register("beforeUnhideColumns"),tb.Z.getSingleton().register("afterUnhideColumns");var ch="hiddenColumns",cd=new WeakMap,cp=new WeakMap,cy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ci(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cl(i);if(e){var r=cl(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cn(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ca(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return cu(ca(t=o.call.apply(o,[this].concat(n))),cd,{writable:!0,value:{}}),cu(ca(t),cp,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[ch]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[ch];(0,I.Kn)(e)&&(cc(this,cd,e),(0,W.o8)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),cc(this,cp,new ce.o),cs(this,cp).addLocalHook("init",function(){return t.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,cs(this,cp)),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(e,n,r){return t.onAfterGetCellMeta(e,n,r)}),this.addHook("modifyColWidth",function(e,n){return t.onModifyColWidth(e,n)}),this.addHook("afterGetColHeader",function(){return t.onAfterGetColHeader.apply(t,arguments)}),this.addHook("modifyCopyableRange",function(e){return t.onModifyCopyableRange(e)}),co(cl(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),co(cl(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),cc(this,cd,{}),co(cl(i.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showColumns",value:function(t){var e=this,n=this.getHiddenColumns(),r=this.isValidConfig(t),o=n,i=cs(this,cp).getValues().slice(),a=t.length>0;if(r&&a){var l=t.map(function(t){return e.hot.toPhysicalColumn(t)});(0,F.Bk)(l,function(t){i[t]=!1}),o=(0,F.k$)(i,function(t,n,r){return n&&t.push(e.hot.toVisualColumn(r)),t},[])}!1!==this.hot.runHooks("beforeUnhideColumns",n,o,r&&a)&&(r&&a&&cs(this,cp).setValues(i),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",n,o,r&&a,r&&o.length<n.length))}},{key:"showColumn",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showColumns(e)}},{key:"hideColumns",value:function(t){var e=this,n=this.getHiddenColumns(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideColumns",n,o,r)&&(r&&this.hot.batchExecution(function(){(0,F.Bk)(t,function(t){cs(e,cp).setValueAtIndex(e.hot.toPhysicalColumn(t),!0)})},!0),this.hot.runHooks("afterHideColumns",n,o,r,r&&o.length>n.length))}},{key:"hideColumn",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideColumns(e)}},{key:"getHiddenColumns",value:function(){var t=this;return(0,F.Sc)(cs(this,cp).getHiddenIndexes(),function(e){return t.hot.toVisualColumn(e)})}},{key:"isHidden",value:function(t){return cs(this,cp).getValueAtIndex(this.hot.toPhysicalColumn(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countCols();return!!Array.isArray(t)&&t.length>0&&t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"resetCellsMeta",value:function(){(0,F.Bk)(this.hot.getCellsMeta(),function(t){t&&(t.skipColumnOnPaste=!1)})}},{key:"onModifyColWidth",value:function(t,e){return this.isHidden(e)?0:cs(this,cd).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&"number"==typeof t&&this.hot.hasColHeaders()?t+15:void 0}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===cs(this,cd).copyPasteEnabled&&this.isHidden(e)&&(n.skipColumnOnPaste=!0),this.isHidden(e-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenColumn")&&(n.className+=" afterHiddenColumn");else if(n.className){var r=n.className.split(" ");if(r.length>0){var o=r.indexOf("afterHiddenColumn");o>-1&&r.splice(o,1),n.className=r.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(cs(this,cd).copyPasteEnabled)return t;var n=[],r=function(t,e,r,o){n.push({startRow:t,endRow:e,startCol:r,endCol:o})};return(0,F.Bk)(t,function(t){var n=!0,o=0;(0,t5.q4)(t.startCol,t.endCol,function(i){e.isHidden(i)?(n||r(t.startRow,t.endRow,o,i-1),n=!0):(n&&(o=i),i===t.endCol&&r(t.startRow,t.endRow,o,i),n=!1)})}),n}},{key:"onAfterGetColHeader",value:function(t,e){if(cs(this,cd).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenColumn"),t<this.hot.countCols()-1&&this.isHidden(t+1)&&n.push("beforeHiddenColumn"),(0,A.cn)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,r;t.items.push({name:or},(e=this,{key:"hidden_columns_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,4)||function(t,e){if(t){if("string"==typeof t)return s7(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s7(t,e)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[1]-n[3]!=0&&(e=1)}return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_HIDE_COLUMN,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,r=t.to,o=Math.max(Math.min(n.col,r.col),0),i=Math.max(n.col,r.col),a=[],l=o;l<=i;l+=1)a.push(l);e.hideColumns(a);var u=a[a.length-1],s=this.columnIndexMapper.getNearestNotHiddenIndex(u,1,!0);Number.isInteger(s)&&s>=0?this.selectColumns(s):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),(n=this,r=[],{key:"hidden_columns_show",name:function(){var t=r.length>1?1:0;return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_SHOW_COLUMN,t)},callback:function(){if(0!==r.length){var t,e,o=r[0],i=r[r.length-1];o=null!==(t=this.columnIndexMapper.getNearestNotHiddenIndex(o-1,-1))&&void 0!==t?t:0,i=null!==(e=this.columnIndexMapper.getNearestNotHiddenIndex(i+1,1))&&void 0!==e?e:this.countCols()-1,n.showColumns(r),this.render(),this.view.adjustElementsSize(!0),i-o+1!==this.countCols()&&this.selectColumns(o,i)}},disabled:!1,hidden:function(){var t=this,e=(0,F.Sc)(n.getHiddenColumns(),function(e){return t.toPhysicalColumn(e)});if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||e.length<1)return!0;r.length=0;var o=this.getSelectedRangeLast(),i=o.getTopStartCorner().col,a=o.getBottomEndCorner().col,l=this.columnIndexMapper,u=l.getRenderableFromVisualIndex(i),s=l.getRenderableFromVisualIndex(a),c=l.getNotTrimmedIndexes(),f=[];if(i!==a){if(a-i+1>s-u+1){var h=c.slice(i,a+1);f.push.apply(f,s5(h.filter(function(t){return e.includes(t)})))}}else if(0===u&&u<i)f.push.apply(f,s5(c.slice(0,i)));else if(null===u)f.push.apply(f,s5(c.slice(0,this.countCols())));else{var d=this.countCols()-1;s===l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(d,-1))&&d>a&&f.push.apply(f,s5(c.slice(a+1)))}return(0,F.Bk)(f,function(e){r.push(t.toVisualColumn(e))}),0===r.length}}))}},{key:"onMapInit",value:function(){Array.isArray(cs(this,cd).columns)&&this.hideColumns(cs(this,cd).columns)}},{key:"destroy",value:function(){cc(this,cd,null),cc(this,cp,null),co(cl(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return ch}},{key:"PLUGIN_PRIORITY",get:function(){return 310}}],n&&cr(i.prototype,n),r&&cr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function cg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cv(t){return function(t){if(Array.isArray(t))return cm(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return cm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cm(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cb(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cb(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cb(e)?e:String(e)}(r.key),r)}}function cS(){return(cS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cO(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function cC(t,e){return(cC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ck(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cO(t){return(cO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cR(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function cP(t,e){var n=cM(t,e,"get");return n.get?n.get.call(t):n.value}function cE(t,e,n){var r=cM(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function cM(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}tb.Z.getSingleton().register("beforeHideRows"),tb.Z.getSingleton().register("afterHideRows"),tb.Z.getSingleton().register("beforeUnhideRows"),tb.Z.getSingleton().register("afterUnhideRows");var c_="hiddenRows",cj=new WeakMap,cA=new WeakMap,cT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cC(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cO(i);if(e){var r=cO(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ck(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return cR(ck(t=o.call.apply(o,[this].concat(n))),cj,{writable:!0,value:{}}),cR(ck(t),cA,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[c_]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[c_];(0,I.Kn)(e)&&(cE(this,cj,e),(0,W.o8)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),cE(this,cA,new ce.o),cP(this,cA).addLocalHook("init",function(){return t.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,cP(this,cA)),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(e,n,r){return t.onAfterGetCellMeta(e,n,r)}),this.addHook("modifyRowHeight",function(e,n){return t.onModifyRowHeight(e,n)}),this.addHook("afterGetRowHeader",function(){return t.onAfterGetRowHeader.apply(t,arguments)}),this.addHook("modifyCopyableRange",function(e){return t.onModifyCopyableRange(e)}),cS(cO(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),cS(cO(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),cE(this,cj,{}),cS(cO(i.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showRows",value:function(t){var e=this,n=this.getHiddenRows(),r=this.isValidConfig(t),o=n,i=cP(this,cA).getValues().slice(),a=t.length>0;if(r&&a){var l=t.map(function(t){return e.hot.toPhysicalRow(t)});(0,F.Bk)(l,function(t){i[t]=!1}),o=(0,F.k$)(i,function(t,n,r){return n&&t.push(e.hot.toVisualRow(r)),t},[])}!1!==this.hot.runHooks("beforeUnhideRows",n,o,r&&a)&&(r&&a&&cP(this,cA).setValues(i),this.hot.runHooks("afterUnhideRows",n,o,r&&a,r&&o.length<n.length))}},{key:"showRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showRows(e)}},{key:"hideRows",value:function(t){var e=this,n=this.getHiddenRows(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideRows",n,o,r)&&(r&&this.hot.batchExecution(function(){(0,F.Bk)(t,function(t){cP(e,cA).setValueAtIndex(e.hot.toPhysicalRow(t),!0)})},!0),this.hot.runHooks("afterHideRows",n,o,r,r&&o.length>n.length))}},{key:"hideRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideRows(e)}},{key:"getHiddenRows",value:function(){var t=this;return(0,F.Sc)(cP(this,cA).getHiddenIndexes(),function(e){return t.hot.toVisualRow(e)})}},{key:"isHidden",value:function(t){return cP(this,cA).getValueAtIndex(this.hot.toPhysicalRow(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countRows();return!!Array.isArray(t)&&t.length>0&&t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"resetCellsMeta",value:function(){(0,F.Bk)(this.hot.getCellsMeta(),function(t){t&&(t.skipRowOnPaste=!1)})}},{key:"onModifyRowHeight",value:function(t,e){return this.isHidden(e)?0:t}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===cP(this,cj).copyPasteEnabled&&this.isHidden(t)&&(n.skipRowOnPaste=!0),this.isHidden(t-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenRow")&&(n.className+=" afterHiddenRow");else if(n.className){var r=n.className.split(" ");if(r.length>0){var o=r.indexOf("afterHiddenRow");o>-1&&r.splice(o,1),n.className=r.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(cP(this,cj).copyPasteEnabled)return t;var n=[],r=function(t,e,r,o){n.push({startRow:t,endRow:e,startCol:r,endCol:o})};return(0,F.Bk)(t,function(t){var n=!0,o=0;(0,t5.q4)(t.startRow,t.endRow,function(i){e.isHidden(i)?(n||r(o,i-1,t.startCol,t.endCol),n=!0):(n&&(o=i),i===t.endRow&&r(o,i,t.startCol,t.endCol),n=!1)})}),n}},{key:"onAfterGetRowHeader",value:function(t,e){if(cP(this,cj).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenRow"),t<this.hot.countRows()-1&&this.isHidden(t+1)&&n.push("beforeHiddenRow"),(0,A.cn)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,r;t.items.push({name:or},(e=this,{key:"hidden_rows_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,3)||function(t,e){if(t){if("string"==typeof t)return cg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cg(t,e)}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[0]-n[2]!=0&&(e=1)}return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_HIDE_ROW,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,r=t.to,o=Math.max(Math.min(n.row,r.row),0),i=Math.max(n.row,r.row),a=[],l=o;l<=i;l+=1)a.push(l);e.hideRows(a);var u=a[a.length-1],s=this.rowIndexMapper.getNearestNotHiddenIndex(u,1,!0);Number.isInteger(s)&&s>=0?this.selectRows(s):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),(n=this,r=[],{key:"hidden_rows_show",name:function(){var t=r.length>1?1:0;return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_SHOW_ROW,t)},callback:function(){if(0!==r.length){var t,e,o=r[0],i=r[r.length-1];o=null!==(t=this.rowIndexMapper.getNearestNotHiddenIndex(o-1,-1))&&void 0!==t?t:0,i=null!==(e=this.rowIndexMapper.getNearestNotHiddenIndex(i+1,1))&&void 0!==e?e:this.countRows()-1,n.showRows(r),this.render(),this.view.adjustElementsSize(!0),i-o+1!==this.countRows()&&this.selectRows(o,i)}},disabled:!1,hidden:function(){var t=this,e=(0,F.Sc)(n.getHiddenRows(),function(e){return t.toPhysicalRow(e)});if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||e.length<1)return!0;r.length=0;var o=this.getSelectedRangeLast(),i=o.getTopStartCorner().row,a=o.getBottomEndCorner().row,l=this.rowIndexMapper,u=l.getRenderableFromVisualIndex(i),s=l.getRenderableFromVisualIndex(a),c=l.getNotTrimmedIndexes(),f=[];if(i!==a){if(a-i+1>s-u+1){var h=c.slice(i,a+1);f.push.apply(f,cv(h.filter(function(t){return e.includes(t)})))}}else if(0===u&&u<i)f.push.apply(f,cv(c.slice(0,i)));else if(null===u)f.push.apply(f,cv(c.slice(0,this.countRows())));else{var d=this.countRows()-1;s===l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(d,-1))&&d>a&&f.push.apply(f,cv(c.slice(a+1)))}return(0,F.Bk)(f,function(e){r.push(t.toVisualRow(e))}),0===r.length}}))}},{key:"onMapInit",value:function(){Array.isArray(cP(this,cj).rows)&&this.hideRows(cP(this,cj).rows)}},{key:"destroy",value:function(){cE(this,cj,null),cE(this,cA,null),cS(cO(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return c_}},{key:"PLUGIN_PRIORITY",get:function(){return 320}}],n&&cw(i.prototype,n),r&&cw(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function cI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cD(t){return(cD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cN(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cD(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cD(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cD(e)?e:String(e)}(r.key),r)}}function cH(){return(cH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cU(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function cB(t,e){return(cB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cL(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cU(t){return(cU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("beforeColumnFreeze"),tb.Z.getSingleton().register("afterColumnFreeze"),tb.Z.getSingleton().register("beforeColumnUnfreeze"),tb.Z.getSingleton().register("afterColumnUnfreeze");var cV="manualColumnFreeze",cF=new WeakMap,cW=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cB(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cU(i);if(e){var r=cU(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cD(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return cL(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),cF.set(cL(e),{afterFirstUse:!1}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[cV]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(e){return t.addContextMenuEntry(e)}),this.addHook("beforeColumnMove",function(e,n){return t.onBeforeColumnMove(e,n)}),cH(cU(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){cF.get(this).afterFirstUse=!1,cH(cU(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),cH(cU(i.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(t){var e=cF.get(this),n=this.hot.getSettings(),r=n.fixedColumnsStart<this.hot.countCols()&&t>n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnFreeze",t,r)&&(r&&(this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart),n._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",t,r))}},{key:"unfreezeColumn",value:function(t){var e=cF.get(this),n=this.hot.getSettings(),r=n.fixedColumnsStart>0&&t<=n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnUnfreeze",t,r)&&(r&&(n._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",t,r))}},{key:"addContextMenuEntry",value:function(t){var e,n;t.items.push({name:"---------"},(e=this,{key:"freeze_column",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_FREEZE_COLUMN)},callback:function(t,n){var r=(function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,1)||function(t,e){if(t){if("string"==typeof t)return cI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cI(t,e)}}(n,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].start.col;e.freezeColumn(r),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(e=!0),e}}),(n=this,{key:"unfreeze_column",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN)},callback:function(t,e){var r=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,1)||function(t,e){if(t){if("string"==typeof t)return cx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cx(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].start.col;n.unfreezeColumn(r),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col>=this.getSettings().fixedColumnsStart)&&(e=!0),e}}))}},{key:"onBeforeColumnMove",value:function(t,e){if(cF.get(this).afterFirstUse){var n=this.hot.getSettings().fixedColumnsStart;if(e<n||t.some(function(t){return t<n}))return!1}}}],r=[{key:"PLUGIN_KEY",get:function(){return cV}},{key:"PLUGIN_PRIORITY",get:function(){return 110}}],n&&cN(i.prototype,n),r&&cN(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function cz(t){return(cz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cY(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cz(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cz(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cz(e)?e:String(e)}(r.key),r)}}var cG=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this._element=null,this.state=0,this.inlineProperty=t.isRtl()?"right":"left"}return t=[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){(0,t5.kE)(t)&&(this._element.style.top=t+"px"),(0,t5.kE)(e)&&(this._element.style[this.inlineProperty]=e+"px")}},{key:"getPosition",value:function(){var t=this._element.style;return{top:t.top?parseInt(t.top,10):0,start:t[this.inlineProperty]?parseInt(t[this.inlineProperty],10):0}}},{key:"setSize",value:function(t,e){(0,t5.kE)(t)&&(this._element.style.width=t+"px"),(0,t5.kE)(e)&&(this._element.style.height=e+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){(0,t5.kE)(t)&&(this._element.style.marginTop=t+"px"),(0,t5.kE)(e)&&(this._element.style["margin".concat((0,z.ct)(this.inlineProperty))]=e+"px")}},{key:"getOffset",value:function(){var t=this._element.style,e="margin".concat((0,z.ct)(this.inlineProperty));return{top:t.marginTop?parseInt(t.marginTop,10):0,start:t[e]?parseInt(t[e],10):0}}}],cY(n.prototype,t),e&&cY(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function cK(t){return(cK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cK(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cK(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cK(e)?e:String(e)}(r.key),r)}}function cZ(){return(cZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cX(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function c$(t,e){return(c$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cX(t){return(cX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cJ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c$(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cX(i);if(e){var r=cX(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cK(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"build",value:function(){cZ(cX(i.prototype),"build",this).call(this),(0,A.cn)(this._element,"ht__manualColumnMove--backlight")}}],cq(i.prototype,n),r&&cq(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(cG);function cQ(t){return(cQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c0(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==cQ(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==cQ(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cQ(e)?e:String(e)}(r.key),r)}}function c1(){return(c1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c3(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function c2(t,e){return(c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c3(t){return(c3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c4=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c2(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=c3(i);if(e){var r=c3(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cQ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"build",value:function(){c1(c3(i.prototype),"build",this).call(this),(0,A.cn)(this._element,"ht__manualColumnMove--guideline")}}],c0(i.prototype,n),r&&c0(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(cG);function c8(t){return(c8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c9(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==c8(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===c8(e)?e:String(e)}(r.key),r)}}function c6(){return(c6="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ft(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function c7(t,e){return(c7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c5(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("beforeColumnMove"),tb.Z.getSingleton().register("afterColumnMove");var fe="manualColumnMove",fn=new WeakMap,fr="ht__manualColumnMove",fo="show-ui",fi="on-moving--columns",fa="after-selection--columns",fl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c7(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ft(i);if(e){var r=ft(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===c8(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return c5(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),fn.set(c5(e),{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0},cachedDropIndex:void 0}),e.eventManager=new tc.Z(c5(e)),e.backlight=new cJ(t),e.guideline=new c4(t),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[fe]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterScrollVertically",function(){return t.onAfterScrollVertically()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.buildPluginUI(),this.registerEvents(),(0,A.cn)(this.hot.rootElement,fr),c6(ft(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),c6(ft(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){(0,A.IV)(this.hot.rootElement,fr),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),c6(ft(i.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(t,e){return this.moveColumns([t],e)}},{key:"moveColumns",value:function(t,e){var n=fn.get(this),r=n.cachedDropIndex,o=this.isMovePossible(t,e),i=this.hot.runHooks("beforeColumnMove",t,e,r,o);if(n.cachedDropIndex=void 0,!1!==i){o&&this.hot.columnIndexMapper.moveIndexes(t,e);var a=o&&this.isColumnOrderChanged(t,e);return this.hot.runHooks("afterColumnMove",t,e,r,o,a),a}}},{key:"dragColumn",value:function(t,e){return this.dragColumns([t],e)}},{key:"dragColumns",value:function(t,e){var n=this.countFinalIndex(t,e);return fn.get(this).cachedDropIndex=e,this.moveColumns(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),r=t.length+e>n,o=t.some(function(t){return t<0}),i=t.some(function(t){return t>=n});return!r&&!(e<0)&&!o&&!i}},{key:"isColumnOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}},{key:"countFinalIndex",value:function(t,e){var n=(0,F.k$)(t,function(t,n){return n<e&&(t+=1),t},0);return e-n}},{key:"getColumnsWidth",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=0,o=t;o<=e;o+=1){var i=n.getRenderableFromVisualIndex(o);o<0?r+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:null!==i&&(r+=this.hot.view._wt.wtTable.getStretchedColumnWidth(i)||0)}return r}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[fe];if(Array.isArray(t))this.moveColumns(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveColumns(e,0)}}},{key:"isFixedColumnsStart",value:function(t){return t<this.hot.getSettings().fixedColumnsStart}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value?t.value:[]}},{key:"prepareColumnsToMoving",value:function(t,e){var n=[];return(0,t5.q4)(t,e,function(t){n.push(t)}),n}},{key:"refreshPositions",value:function(){var t=fn.get(this),e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(t.hoveredColumn)&&e>0&&this.hot.scrollViewportTo(void 0,this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1));var n=this.hot.view._wt.wtTable,r=this.hot.view._wt.wtOverlays.scrollableElement,o="number"==typeof r.scrollX?r.scrollX:r.scrollLeft,i=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,t.hoveredColumn-1),a=n.hider.offsetWidth,l=n.TBODY.offsetLeft,u=this.backlight.getOffset().start,s=this.backlight.getSize().width,c=0,f=0;if(this.hot.isRtl()){var h=this.hot.rootWindow,d=(0,A.iO)(this.hot.rootElement),p=h.innerWidth-t.rootElementOffset-d;f=h.innerWidth-t.target.eventPageX-p-(void 0===r.scrollX?o:0)}else f=t.target.eventPageX-(t.rootElementOffset-(void 0===r.scrollX?o:0));if(t.hasRowHeaders&&(c=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(t.hoveredColumn)&&(i+=o),i+=c,t.hoveredColumn<0)t.fixedColumnsStart>0?t.target.col=0:t.target.col=e>0?e-1:e;else if(t.target.TD.offsetWidth/2+i<=f){var y=t.hoveredColumn>=t.countCols?t.countCols-1:t.hoveredColumn;t.target.col=y+1,i+=t.target.TD.offsetWidth}else t.target.col=t.hoveredColumn;var g=f,v=i;f+s+u>=a?g=a-s-u:f+u<l+c&&(g=l+c+Math.abs(u)),i>=a-1?v=a-1:0===v?v=1:void 0!==r.scrollX&&t.hoveredColumn<t.fixedColumnsStart&&(v-=t.rootElementOffset<=r.scrollX?t.rootElementOffset:0),this.backlight.setPosition(null,g),this.guideline.setPosition(null,v)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){var o=this.hot.view._wt.wtTable,i=this.hot.selection.isSelectedByColumnHeader(),a=this.hot.getSelectedRangeLast(),l=fn.get(this),u=(0,A.pv)(t.target,"sortAction");if(!a||!i||l.pressed||0!==t.button||u){l.pressed=!1,l.columnsToMove.length=0,(0,A.IV)(this.hot.rootElement,[fi,fo]);return}var s=this.guideline.isBuilt()&&!this.guideline.isAppended(),c=this.backlight.isBuilt()&&!this.backlight.isAppended();s&&c&&(this.guideline.appendTo(o.hider),this.backlight.appendTo(o.hider));var f=a.from,h=a.to,d=Math.min(f.col,h.col),p=Math.max(f.col,h.col);if(e.row<0&&e.col>=d&&e.col<=p){r.column=!0,l.pressed=!0,l.target.eventPageX=t.pageX,l.target.eventOffsetX=t.offsetX,l.hoveredColumn=e.col,l.target.TD=n,l.target.col=e.col,l.columnsToMove=this.prepareColumnsToMoving(d,p),l.hasRowHeaders=!!this.hot.getSettings().rowHeaders,l.countCols=this.hot.countCols(),l.fixedColumnsStart=this.hot.getSettings().fixedColumnsStart,l.rootElementOffset=(0,A.cv)(this.hot.rootElement).left;var y=l.hasRowHeaders?-1:0,g=o.holder.scrollTop+o.getColumnHeaderHeight(0)+1,v=e.col<l.fixedColumnsStart,m=Math.abs(this.hot.view._wt.wtOverlays.inlineStartOverlay.getScrollPosition()),b=Math.abs(t.offsetX-(this.hot.isRtl()?t.target.offsetWidth:0)),w=this.getColumnsWidth(d,e.col-1)+b,S=this.getColumnsWidth(y,d-1)+(v?m:0)+w;this.backlight.setPosition(g,S),this.backlight.setSize(this.getColumnsWidth(d,p),o.hider.offsetHeight-g),this.backlight.setOffset(null,-w),(0,A.cn)(this.hot.rootElement,fi)}else(0,A.IV)(this.hot.rootElement,fa),l.pressed=!1,l.columnsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=fn.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(n)})}e.target.eventPageX=t.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){var o=this.hot.getSelectedRangeLast(),i=fn.get(this);o&&i.pressed&&(i.columnsToMove.indexOf(e.col)>-1?(0,A.IV)(this.hot.rootElement,fo):(0,A.cn)(this.hot.rootElement,fo),r.row=!0,r.column=!0,r.cell=!0,i.hoveredColumn=e.col,i.target.TD=n)}},{key:"onMouseUp",value:function(){var t=fn.get(this),e=t.target.col,n=t.columnsToMove.length;if(t.hoveredColumn=void 0,t.pressed=!1,t.backlightWidth=0,(0,A.IV)(this.hot.rootElement,[fi,fo,fa]),this.hot.selection.isSelectedByColumnHeader()&&(0,A.cn)(this.hot.rootElement,fa),!(n<1)&&void 0!==e){var r=t.columnsToMove[0],o=this.hot.toPhysicalColumn(r),i=this.dragColumns(t.columnsToMove,e);if(t.columnsToMove.length=0,!0===i){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var a=this.hot.toVisualColumn(o);this.hot.selectColumns(a,a+n-1)}}}},{key:"onAfterScrollVertically",value:function(){var t=this.hot.view._wt.wtTable,e=t.getColumnHeaderHeight(0)+1+t.holder.scrollTop;this.backlight.setPosition(e),this.backlight.setSize(null,t.hider.offsetHeight-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),c6(ft(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return fe}},{key:"PLUGIN_PRIORITY",get:function(){return 120}}],n&&c9(i.prototype,n),r&&c9(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function fu(t){return(fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fu(e)?e:String(e)}(r.key),r)}}function fc(){return(fc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fd(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function ff(t,e){return(ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fh(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fd(t){return(fd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fp="manualColumnResize",fy="manualColumnWidths",fg=new WeakMap,fv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ff(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fd(i);if(e){var r=fd(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fu(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return fh(t)}(this,t)});function i(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);var e,n=(e=o.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentCol=null,e.selectedCols=[],e.currentWidth=null,e.newSize=null,e.startY=null,e.startWidth=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new tc.Z(fh(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.columnWidthsMap=void 0,fg.set(fh(e),{config:void 0}),(0,A.cn)(e.handle,"manualColumnResizer"),(0,A.cn)(e.guide,"manualColumnResizerGuide"),e}return n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[fp]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnWidthsMap=new eY.L,this.columnWidthsMap.addLocalHook("init",function(){return t.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,this.columnWidthsMap),this.addHook("modifyColWidth",function(e,n){return t.onModifyColWidth(e,n)}),this.addHook("beforeStretchingColumnWidth",function(e,n){return t.onBeforeStretchingColumnWidth(e,n)}),this.addHook("beforeColumnResize",function(e,n,r){return t.onBeforeColumnResize(e,n,r)}),this.bindEvents(),fc(fd(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),fc(fd(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){fg.get(this).config=this.columnWidthsMap.getValues(),this.hot.columnIndexMapper.unregisterMap(this.pluginName),fc(fd(i.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave",fy,this.columnWidthsMap.getValues())}},{key:"loadManualColumnWidths",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",fy,t),t.value}},{key:"setManualSize",value:function(t,e){var n=Math.max(e,20),r=this.hot.toPhysicalColumn(t);return this.columnWidthsMap.setValueAtIndex(r,n),n}},{key:"clearManualSize",value:function(t){var e=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(e,null)}},{key:"onMapInit",value:function(){var t=this,e=fg.get(this),n=this.hot.getSettings()[fp],r=this.loadManualColumnWidths();void 0!==r?this.hot.batchExecution(function(){r.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0):Array.isArray(n)?(this.hot.batchExecution(function(){n.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0),e.config=n):!0===n&&Array.isArray(e.config)&&this.hot.batchExecution(function(){e.config.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0)}},{key:"setupHandlePosition",value:function(t){var e,n=this;if(t.parentNode){this.currentTH=t;var r=this.hot.view._wt,o=r.wtTable.getCoords(this.currentTH),i=o.col;if(!(i<0)){var a=(0,A.Pb)(this.currentTH),l=this.currentTH.getBoundingClientRect();i<r.getSetting("fixedColumnsStart")&&(e=r.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,o.row,o.col)),e||(e=r.wtOverlays.topOverlay.getRelativeCellPosition(this.currentTH,o.row,o.col)),this.currentCol=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),this.selectedCols=[];var u=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&u){var s=this.hot.getSelectedRange();(0,F.Bk)(s,function(t){var e=t.getTopStartCorner().col,r=t.getBottomEndCorner().col;(0,t5.q4)(e,r,function(t){n.selectedCols.includes(t)||n.selectedCols.push(t)})})}this.selectedCols.includes(this.currentCol)||(this.selectedCols=[this.currentCol]),this.startOffset=e.start-6,this.startWidth=parseInt(l.width,10),this.handle.style.top="".concat(e.top,"px"),this.handle.style[this.inlineDir]="".concat(this.startOffset+this.startWidth,"px"),this.handle.style.height="".concat(a,"px"),this.hot.rootElement.appendChild(this.handle)}}}},{key:"refreshHandlePosition",value:function(){this.handle.style[this.inlineDir]="".concat(this.startOffset+this.currentWidth,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,A.Pb)(this.handle),10),e=parseInt(this.handle.style.top,10)+t,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);(0,A.cn)(this.handle,"active"),(0,A.cn)(this.guide,"active"),this.guide.style.top="".concat(e,"px"),this.refreshGuidePosition(),this.guide.style.height="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style[this.inlineDir]=this.handle.style[this.inlineDir]}},{key:"hideHandleAndGuide",value:function(){(0,A.IV)(this.handle,"active"),(0,A.IV)(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(t){return!!(0,A.oq)(t,["THEAD"],this.hot.rootElement)}},{key:"getClosestTHParent",value:function(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}},{key:"onMouseOver",value:function(t){if(!(0,A.z4)(t.target)&&this.checkIfColumnHeader(t.target)){var e=this.getClosestTHParent(t.target);if(e){var n=e.getAttribute("colspan");e&&(null===n||"1"===n)&&!this.pressed&&this.setupHandlePosition(e)}}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){var o=t.hot.runHooks("beforeColumnResize",t.newSize,n,!0);void 0!==o&&(t.newSize=o),"all"===t.hot.getSettings().stretchH?t.clearManualSize(n):t.setManualSize(n,t.newSize),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!0),r&&e()};this.dblclick>=2&&(this.selectedCols.length>1?((0,F.Bk)(this.selectedCols,function(t){n(t)}),e()):(0,F.Bk)(this.selectedCols,function(t){n(t,!0)})),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,A.pv)(t.target,"manualColumnResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startX=t.pageX,this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(t){var e=this;if(this.pressed){var n=(t.pageX-this.startX)*this.hot.getDirectionFactor();this.currentWidth=this.startWidth+n,(0,F.Bk)(this.selectedCols,function(t){e.newSize=e.setManualSize(t,e.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition()}}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){t.hot.runHooks("beforeColumnResize",t.newSize,n,!1),r&&e(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startWidth&&(this.selectedCols.length>1?((0,F.Bk)(this.selectedCols,function(t){n(t)}),e()):(0,F.Bk)(this.selectedCols,function(t){n(t,!0)})),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootWindow,r=e.rootElement;this.eventManager.addEventListener(r,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(r,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(n,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(n,"mouseup",function(){return t.onMouseUp()})}},{key:"onModifyColWidth",value:function(t,e){var n=t;if(this.enabled){var r=this.hot.toPhysicalColumn(e),o=this.columnWidthsMap.getValueAtIndex(r);this.hot.getSettings()[fp]&&o&&(n=o)}return n}},{key:"onBeforeStretchingColumnWidth",value:function(t,e){var n=this.columnWidthsMap.getValueAtIndex(e);return null===n&&(n=t),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}},{key:"destroy",value:function(){fc(fd(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return fp}},{key:"PLUGIN_PRIORITY",get:function(){return 130}}],n&&fs(i.prototype,n),r&&fs(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function fm(t){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fm(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fm(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fm(e)?e:String(e)}(r.key),r)}}var fw=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=0}return fb(e.prototype,[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){void 0!==t&&(this._element.style.top=t+"px"),void 0!==e&&(this._element.style.left=e+"px")}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(t,e){t&&(this._element.style.width=t+"px"),e&&(this._element.style.height=e+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){t&&(this._element.style.marginTop=t+"px"),e&&(this._element.style.marginLeft=e+"px")}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),t&&fb(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function fS(t){return(fS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fS(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fS(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fS(e)?e:String(e)}(r.key),r)}}function fk(){return(fk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fR(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function fO(t,e){return(fO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fR(t){return(fR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fO(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fR(i);if(e){var r=fR(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fS(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"build",value:function(){fk(fR(i.prototype),"build",this).call(this),(0,A.cn)(this._element,"ht__manualRowMove--backlight")}}],fC(i.prototype,n),r&&fC(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(fw);function fE(t){return(fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fE(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fE(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fE(e)?e:String(e)}(r.key),r)}}function f_(){return(f_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fA(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function fj(t,e){return(fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fA(t){return(fA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fj(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fA(i);if(e){var r=fA(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fE(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return n=[{key:"build",value:function(){f_(fA(i.prototype),"build",this).call(this),(0,A.cn)(this._element,"ht__manualRowMove--guideline")}}],fM(i.prototype,n),r&&fM(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(fw);function fI(t){return(fI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fI(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fI(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fI(e)?e:String(e)}(r.key),r)}}function fD(){return(fD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fB(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function fN(t,e){return(fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fH(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fB(t){return(fB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("beforeRowMove"),tb.Z.getSingleton().register("afterRowMove");var fL="manualRowMove",fU=new WeakMap,fV="ht__manualRowMove",fF="show-ui",fW="on-moving--rows",fz="after-selection--rows",fY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fB(i);if(e){var r=fB(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fI(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return fH(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),fU.set(fH(e),{rowsToMove:[],pressed:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0},cachedDropIndex:void 0}),e.eventManager=new tc.Z(fH(e)),e.backlight=new fP(t),e.guideline=new fT(t),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[fL]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterScrollHorizontally",function(){return t.onAfterScrollHorizontally()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.buildPluginUI(),this.registerEvents(),(0,A.cn)(this.hot.rootElement,fV),fD(fB(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),fD(fB(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){(0,A.IV)(this.hot.rootElement,fV),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),fD(fB(i.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(t,e){return this.moveRows([t],e)}},{key:"moveRows",value:function(t,e){var n=fU.get(this),r=n.cachedDropIndex,o=this.isMovePossible(t,e),i=this.hot.runHooks("beforeRowMove",t,e,r,o);if(n.cachedDropIndex=void 0,!1!==i){o&&this.hot.rowIndexMapper.moveIndexes(t,e);var a=o&&this.isRowOrderChanged(t,e);return this.hot.runHooks("afterRowMove",t,e,r,o,a),a}}},{key:"dragRow",value:function(t,e){return this.dragRows([t],e)}},{key:"dragRows",value:function(t,e){var n=this.countFinalIndex(t,e);return fU.get(this).cachedDropIndex=e,this.moveRows(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),r=t.length+e>n,o=t.some(function(t){return t<0}),i=t.some(function(t){return t>=n});return!r&&!(e<0)&&!o&&!i}},{key:"isRowOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}},{key:"countFinalIndex",value:function(t,e){var n=(0,F.k$)(t,function(t,n){return n<e&&(t+=1),t},0);return e-n}},{key:"getRowsHeight",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=0,o=t;o<=e;o++){var i=n.getRenderableFromVisualIndex(o);null!==i&&(r+=this.hot.view._wt.wtTable.getRowHeight(i)||23)}return r}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[fL];if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveRows(e,0)}}},{key:"isFixedRowTop",value:function(t){return t<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(t){return t>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}},{key:"prepareRowsToMoving",value:function(){var t=this.hot.getSelectedRangeLast(),e=[];if(!t)return e;var n=t.from,r=t.to,o=Math.min(n.row,r.row),i=Math.max(n.row,r.row);return(0,t5.q4)(o,i,function(t){e.push(t)}),e}},{key:"refreshPositions",value:function(){var t=fU.get(this),e=t.target.coords,n=this.hot.view.getFirstFullyVisibleRow(),r=this.hot.view.getLastFullyVisibleRow(),o=this.hot.countRows();this.isFixedRowTop(e.row)&&n>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(n-1,-1)),this.isFixedRowBottom(e.row)&&r<o&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(r+1,1),void 0,!0);var i=this.hot.view._wt.wtTable,a=t.target.TD,l=(0,A.cv)(this.hot.rootElement),u=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1),s=t.target.eventPageY-l.top+i.holder.scrollTop,c=i.hider.offsetHeight,f=i.TBODY.offsetTop,h=this.backlight.getOffset().top,d=this.backlight.getSize().height;this.isFixedRowTop(e.row)&&(u+=i.holder.scrollTop),e.row<0?t.target.row=n>0?n-1:n:a.offsetHeight/2+u<=s?(t.target.row=e.row+1,u+=0===e.row?a.offsetHeight-1:a.offsetHeight):t.target.row=e.row;var p=s,y=u;s+d+h>=c?p=c-d-h:s+h<f&&(p=f+Math.abs(h)),u>=c-1&&(y=c-1),this.backlight.setPosition(p),this.guideline.setPosition(y)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){var o=this.hot.view._wt,i=o.wtTable,a=o.wtViewport,l=this.hot.selection.isSelectedByRowHeader(),u=this.hot.getSelectedRangeLast(),s=fU.get(this);if(!u||!l||s.pressed||0!==t.button){s.pressed=!1,s.rowsToMove.length=0,(0,A.IV)(this.hot.rootElement,[fW,fF]);return}var c=this.guideline.isBuilt()&&!this.guideline.isAppended(),f=this.backlight.isBuilt()&&!this.backlight.isAppended();c&&f&&(this.guideline.appendTo(i.hider),this.backlight.appendTo(i.hider));var h=u.from,d=u.to,p=Math.min(h.row,d.row),y=Math.max(h.row,d.row);if(e.col<0&&e.row>=p&&e.row<=y){r.row=!0,s.pressed=!0,s.target.eventPageY=t.pageY,s.target.coords=e,s.target.TD=n,s.rowsToMove=this.prepareRowsToMoving();var g=i.holder.scrollLeft+a.getRowHeaderWidth();this.backlight.setPosition(null,g),this.backlight.setSize(i.hider.offsetWidth-g,this.getRowsHeight(p,y)),this.backlight.setOffset(-((this.getRowsHeight(p,e.row-1)+t.offsetY)*1),null),(0,A.cn)(this.hot.rootElement,fW),this.refreshPositions()}else(0,A.IV)(this.hot.rootElement,fz),s.pressed=!1,s.rowsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=fU.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,n)})}e.target.eventPageY=t.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){var o=this.hot.getSelectedRangeLast(),i=fU.get(this);o&&i.pressed&&(i.rowsToMove.indexOf(e.row)>-1?(0,A.IV)(this.hot.rootElement,fF):(0,A.cn)(this.hot.rootElement,fF),r.row=!0,r.column=!0,r.cell=!0,i.target.coords=e,i.target.TD=n)}},{key:"onMouseUp",value:function(){var t=fU.get(this),e=t.target.row,n=t.rowsToMove.length;if(t.pressed=!1,t.backlightHeight=0,(0,A.IV)(this.hot.rootElement,[fW,fF,fz]),this.hot.selection.isSelectedByRowHeader()&&(0,A.cn)(this.hot.rootElement,fz),!(n<1)&&void 0!==e){var r=t.rowsToMove[0],o=this.hot.toPhysicalRow(r),i=this.dragRows(t.rowsToMove,e);if(t.rowsToMove.length=0,!0===i){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var a=this.hot.toVisualRow(o);this.hot.selectRows(a,a+n-1)}}}},{key:"onAfterScrollHorizontally",value:function(){var t=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth()+t.holder.scrollLeft;this.backlight.setPosition(null,e),this.backlight.setSize(t.hider.offsetWidth-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),fD(fB(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return fL}},{key:"PLUGIN_PRIORITY",get:function(){return 140}}],n&&fx(i.prototype,n),r&&fx(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI),fG=n(1343);function fK(t){return(fK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==fK(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fK(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fK(e)?e:String(e)}(r.key),r)}}function fZ(){return(fZ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fJ(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function f$(t,e){return(f$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fX(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fJ(t){return(fJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fQ="manualRowResize",f0="manualRowHeights",f1=new WeakMap,f2=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f$(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fJ(i);if(e){var r=fJ(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fK(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return fX(t)}(this,t)});function i(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);var e,n=(e=o.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentRow=null,e.selectedRows=[],e.currentHeight=null,e.newSize=null,e.startY=null,e.startHeight=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new tc.Z(fX(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.rowHeightsMap=void 0,f1.set(fX(e),{config:void 0}),(0,A.cn)(e.handle,"manualRowResizer"),(0,A.cn)(e.guide,"manualRowResizerGuide"),e}return n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[fQ]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.rowHeightsMap=new eY.L,this.rowHeightsMap.addLocalHook("init",function(){return t.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,this.rowHeightsMap),this.addHook("modifyRowHeight",function(e,n){return t.onModifyRowHeight(e,n)}),this.bindEvents(),fZ(fJ(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),fZ(fJ(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){f1.get(this).config=this.rowHeightsMap.getValues(),this.hot.rowIndexMapper.unregisterMap(this.pluginName),fZ(fJ(i.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave",f0,this.rowHeightsMap.getValues())}},{key:"loadManualRowHeights",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",f0,t),t.value}},{key:"setManualSize",value:function(t,e){var n=this.hot.toPhysicalRow(t),r=Math.max(e,fG.Z.DEFAULT_HEIGHT);return this.rowHeightsMap.setValueAtIndex(n,r),r}},{key:"setupHandlePosition",value:function(t){var e,n=this;this.currentTH=t;var r=this.hot.view,o=r._wt,i=o.wtTable.getCoords(this.currentTH),a=i.row;if(!(a<0)){var l=(0,A.iO)(this.currentTH),u=this.currentTH.getBoundingClientRect(),s=a<o.getSetting("fixedRowsTop"),c=a>=r.countNotHiddenRowIndexes(0,1)-o.getSetting("fixedRowsBottom");s?e=o.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col):c&&(e=o.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),e||(e=o.wtOverlays.inlineStartOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),this.currentRow=this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.selectedRows=[];var f=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&f){var h=this.hot.getSelectedRange();(0,F.Bk)(h,function(t){var e=t.getTopStartCorner().row,r=t.getBottomStartCorner().row;(0,t5.q4)(e,r,function(t){n.selectedRows.includes(t)||n.selectedRows.push(t)})})}this.selectedRows.includes(this.currentRow)||(this.selectedRows=[this.currentRow]),this.startOffset=e.top-6,this.startHeight=parseInt(u.height,10),this.handle.style.top="".concat(this.startOffset+this.startHeight,"px"),this.handle.style[this.inlineDir]="".concat(e.start,"px"),this.handle.style.width="".concat(l,"px"),this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top="".concat(this.startOffset+this.currentHeight,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,A.iO)(this.handle),10),e=parseInt(this.handle.style[this.inlineDir],10)+t,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);(0,A.cn)(this.handle,"active"),(0,A.cn)(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style[this.inlineDir]="".concat(e,"px"),this.guide.style.width="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){(0,A.IV)(this.handle,"active"),(0,A.IV)(this.guide,"active")}},{key:"checkIfRowHeader",value:function(t){var e,n;return(0,A.oq)(t,["TH"],this.hot.rootElement)&&(null===(e=t.parentNode)||void 0===e?void 0:null===(n=e.parentNode)||void 0===n?void 0:n.tagName)==="TBODY"}},{key:"getClosestTHParent",value:function(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}},{key:"getActualRowHeight",value:function(t){var e=this.hot.view._wt.wtTable.getRowHeight(t);return void 0!==e&&this.newSize<e?e:this.newSize}},{key:"onMouseOver",value:function(t){if(!(0,A.z4)(t.target)&&this.checkIfRowHeader(t.target)){var e=this.getClosestTHParent(t.target);e&&!this.pressed&&this.setupHandlePosition(e)}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){var o=t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!0);void 0!==o&&(t.newSize=o),t.setManualSize(n,t.newSize),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!0),r&&e()};this.dblclick>=2&&(this.selectedRows.length>1?((0,F.Bk)(this.selectedRows,function(t){n(t)}),e()):(0,F.Bk)(this.selectedRows,function(t){n(t,!0)})),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,A.pv)(t.target,"manualRowResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startY=t.pageY,this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.pressed&&(this.currentHeight=this.startHeight+(t.pageY-this.startY),(0,F.Bk)(this.selectedRows,function(t){e.newSize=e.setManualSize(t,e.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,r){t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!1),r&&e(),t.saveManualRowHeights(),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startHeight&&(this.selectedRows.length>1?((0,F.Bk)(this.selectedRows,function(t){n(t)}),e()):(0,F.Bk)(this.selectedRows,function(t){n(t,!0)})),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootElement,r=e.rootWindow;this.eventManager.addEventListener(n,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(n,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(r,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(r,"mouseup",function(){return t.onMouseUp()})}},{key:"onModifyRowHeight",value:function(t,e){var n=t;if(this.enabled){var r=this.hot.toPhysicalRow(e),o=this.rowHeightsMap.getValueAtIndex(r);this.hot.getSettings()[fQ]&&o&&(n=o)}return n}},{key:"onMapInit",value:function(){var t=this,e=f1.get(this),n=this.hot.getSettings()[fQ],r=this.loadManualRowHeights();this.hot.batchExecution(function(){void 0!==r?r.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)}):Array.isArray(n)?(n.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)}),e.config=n):!0===n&&Array.isArray(e.config)&&e.config.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)})},!0)}},{key:"destroy",value:function(){fZ(fJ(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return fQ}},{key:"PLUGIN_PRIORITY",get:function(){return 30}}],n&&fq(i.prototype,n),r&&fq(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function f3(t){return(f3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f4(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function f8(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==f3(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f3(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f3(e)?e:String(e)}(r.key),r)}}var f9=function(){var t,e;function n(t,e,r,o,i,a){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.row=t,this.col=e,this.rowspan=r,this.colspan=o,this.removed=!1,this.cellCoordsFactory=i,this.cellRangeFactory=a}return t=[{key:"normalize",value:function(t){var e=t.countRows(),n=t.countCols();this.row<0?this.row=0:this.row>e-1&&(this.row=e-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>e-1&&(this.rowspan=e-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col)}},{key:"includes",value:function(t,e){return this.row<=t&&this.col<=e&&this.row+this.rowspan-1>=t&&this.col+this.colspan-1>=e}},{key:"includesHorizontally",value:function(t){return this.col<=t&&this.col+this.colspan-1>=t}},{key:"includesVertically",value:function(t){return this.row<=t&&this.row+this.rowspan-1>=t}},{key:"shift",value:function(t,e){var n=t[0]||t[1],r=e+Math.abs(t[0]||t[1])-1,o=t[0]?"colspan":"rowspan",i=t[0]?"col":"row",a=Math.min(e,r),l=Math.max(e,r),u=this[i],s=this[i]+this[o]-1;if(u>=e&&(this[i]+=n),n>0)e<=s&&e>u&&(this[o]+=n);else if(n<0){if(a<=u&&l>=s)return this.removed=!0,!1;if(u>=a&&u<=l){var c=l-u+1;this[i]-=Math.abs(n)-c+n,this[o]-=c}else u<=a&&s>=l?this[o]+=n:u<=a&&s>=a&&s<l&&(this[o]-=s-a+1)}return!0}},{key:"isFarther",value:function(t,e){return!t||("down"===e?t.row+t.rowspan-1<this.row+this.rowspan-1:"up"===e?t.row>this.row:"right"===e?t.col+t.colspan-1<this.col+this.colspan-1:"left"===e?t.col>this.col:null)}},{key:"getLastRow",value:function(){return this.row+this.rowspan-1}},{key:"getLastColumn",value:function(){return this.col+this.colspan-1}},{key:"getRange",value:function(){return this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))}}],e=[{key:"NEGATIVE_VALUES_WARNING",value:function(t){return(0,r1.e)(b||(b=f4(["The merged cell declared with {row: ",", col: ",", \n      rowspan: ",", colspan: ","} contains negative values, which is \n      not supported. It will not be added to the collection."],["The merged cell declared with {row: ",", col: ",",\\x20\n      rowspan: ",", colspan: ","} contains negative values, which is\\x20\n      not supported. It will not be added to the collection."])),t.row,t.col,t.rowspan,t.colspan)}},{key:"IS_OUT_OF_BOUNDS_WARNING",value:function(t){return(0,r1.e)(w||(w=f4(["The merged cell declared at [",", ","] is positioned \n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."],["The merged cell declared at [",", ","] is positioned\\x20\n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."])),t.row,t.col)}},{key:"IS_SINGLE_CELL",value:function(t){return(0,r1.e)(S||(S=f4(["The merged cell declared at [",", ",'] has both "rowspan" \n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has both "rowspan"\\x20\n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'])),t.row,t.col)}},{key:"ZERO_SPAN_WARNING",value:function(t){return(0,r1.e)(C||(C=f4(["The merged cell declared at [",", ",'] has "rowspan" \n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has "rowspan"\\x20\n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'])),t.row,t.col)}},{key:"containsNegativeValues",value:function(t){return t.row<0||t.col<0||t.rowspan<0||t.colspan<0}},{key:"isSingleCell",value:function(t){return 1===t.colspan&&1===t.rowspan}},{key:"containsZeroSpan",value:function(t){return 0===t.colspan||0===t.rowspan}},{key:"isOutOfBounds",value:function(t,e,n){return t.row<0||t.col<0||t.row>=e||t.row+t.rowspan-1>=e||t.col>=n||t.col+t.colspan-1>=n}}],t&&f8(n.prototype,t),e&&f8(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function f6(t,e,n,r){e?e.row===n&&e.col===r?(t.setAttribute("rowspan",e.rowspan.toString()),t.setAttribute("colspan",e.colspan.toString())):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="none"):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="")}function f7(t){return(f7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f5(t){return function(t){if(Array.isArray(t))return ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ht(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==f7(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f7(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===f7(e)?e:String(e)}(r.key),r)}}var hn=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.mergedCells=[],this.hot=t.hot}return t=[{key:"get",value:function(t,e){var n=this.mergedCells,r=!1;return(0,F.Bk)(n,function(n){return!(n.row<=t)||!(n.row+n.rowspan-1>=t)||!(n.col<=e)||!(n.col+n.colspan-1>=e)||(r=n,!1)}),r}},{key:"getByRange",value:function(t){var e=this.mergedCells,n=!1;return(0,F.Bk)(e,function(e){return!(e.row<=t.from.row)||!(e.row+e.rowspan-1>=t.to.row)||!(e.col<=t.from.col)||!(e.col+e.colspan-1>=t.to.col)||(n=e)}),n}},{key:"getWithinRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.mergedCells,o=[],i=t;if(!i.includesRange){var a=this.hot._createCellCoords(i.from.row,i.from.col),l=this.hot._createCellCoords(i.to.row,i.to.col);i=this.hot._createCellRange(a,a,l)}return(0,F.Bk)(r,function(t){var r=e.hot._createCellCoords(t.row,t.col),a=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),l=e.hot._createCellRange(r,r,a);n?i.overlaps(l)&&o.push(t):i.includesRange(l)&&o.push(t)}),!!o.length&&o}},{key:"add",value:function(t){var e=this.mergedCells,r=t.row,o=t.col,i=t.rowspan,a=t.colspan,l=new f9(r,o,i,a,this.hot._createCellCoords,this.hot._createCellRange),u=this.get(r,o),s=this.isOverlapping(l);return u||s?((0,nG.ZK)(n.IS_OVERLAPPING_WARNING(l)),!1):(this.hot&&l.normalize(this.hot),e.push(l),l)}},{key:"remove",value:function(t,e){var n=this.mergedCells,r=this.get(t,e),o=r?this.mergedCells.indexOf(r):-1;return!!r&&-1!==o&&(n.splice(o,1),r)}},{key:"clear",value:function(){var t=this,e=this.mergedCells,n=[],r=[];(0,F.Bk)(e,function(e){var r=t.hot.getCell(e.row,e.col);r&&n.push([r,t.get(e.row,e.col),e.row,e.col])}),this.mergedCells.length=0,(0,F.Bk)(n,function(e,o){(0,t5.q4)(0,e.rowspan-1,function(n){(0,t5.q4)(0,e.colspan-1,function(o){if(0!==o||0!==n){var i=t.hot.getCell(e.row+n,e.col+o);i&&r.push([i,null,null,null])}})}),n[o][1]=null}),(0,F.Bk)(n,function(t){f6.apply(void 0,f5(t))}),(0,F.Bk)(r,function(t){f6.apply(void 0,f5(t))})}},{key:"isOverlapping",value:function(t){var e=this,n=this.hot._createCellRange(this.hot._createCellCoords(0,0),this.hot._createCellCoords(t.row,t.col),this.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1)),r=!1;return(0,F.Bk)(this.mergedCells,function(t){return!e.hot._createCellRange(e.hot._createCellCoords(0,0),e.hot._createCellCoords(t.row,t.col),e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1)).overlaps(n)||(r=!0,!1)}),r}},{key:"isFirstRenderableMergedCell",value:function(t,e){var n=this.get(t,e);return n&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1)===t&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1)===e}},{key:"getFirstRenderableCoords",value:function(t,e){var n=this.get(t,e);if(!n||this.isFirstRenderableMergedCell(t,e))return this.hot._createCellCoords(t,e);var r=this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1),o=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1);return this.hot._createCellCoords(r,o)}},{key:"shiftCollections",value:function(t,e,n){var r=this,o=[0,0];switch(t){case"right":o[0]+=n;break;case"left":o[0]-=n;break;case"down":o[1]+=n;break;case"up":o[1]-=n}(0,F.Bk)(this.mergedCells,function(t){t.shift(o,e)}),(0,t5.yh)(this.mergedCells.length-1,0,function(t){var e=r.mergedCells[t];e&&e.removed&&r.mergedCells.splice(r.mergedCells.indexOf(e),1)})}}],e=[{key:"IS_OVERLAPPING_WARNING",value:function(t){return(0,r1.e)(k||(k=Object.freeze(Object.defineProperties(["The merged cell declared at [",", ","], overlaps \n      with the other declared merged cell. The overlapping merged cell was not added to the table, please \n      fix your setup."],{raw:{value:Object.freeze(["The merged cell declared at [",", ","], overlaps\\x20\n      with the other declared merged cell. The overlapping merged cell was not added to the table, please\\x20\n      fix your setup."])}}))),t.row,t.col)}}],t&&he(n.prototype,t),e&&he(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ho(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return hi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ha(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==hr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hr(e)?e:String(e)}(r.key),r)}}var hl=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection,this.currentFillData=null}return t=[{key:"correctSelectionAreaSize",value:function(t){if(t[0]===t[2]&&t[1]===t[3]){var e=this.mergedCellsCollection.get(t[0],t[1]);e&&(t[2]=t[0]+e.rowspan-1,t[3]=t[1]+e.colspan-1)}}},{key:"getDirection",value:function(t,e){return e[0]===t[0]&&e[1]===t[1]&&e[3]===t[3]?"down":e[2]===t[2]&&e[1]===t[1]&&e[3]===t[3]?"up":e[1]===t[1]&&e[2]===t[2]?"right":"left"}},{key:"snapDragArea",value:function(t,e,n,r){var o=e.slice(0),i=this.getAutofillSize(t,e,n),a=ho(t,4),l=a[0],u=a[1],s=a[2],c=a[3],f=["up","down"].indexOf(n)>-1?s-l+1:c-u+1,h=i-Math.floor(i/f)*f,d=this.getFarthestCollection(t,e,n,r);if(d){if("down"===n){var p=d.row+d.rowspan-l-h;o[2]+p>=this.plugin.hot.countRows()?o[2]-=h:o[2]+=h?p:0}else if("right"===n){var y=d.col+d.colspan-u-h;o[3]+y>=this.plugin.hot.countCols()?o[3]-=h:o[3]+=h?y:0}else if("up"===n){var g=s-h-d.row+1;o[0]+g<0?o[0]+=h:o[0]-=h?g:0}else if("left"===n){var v=c-h-d.col+1;o[1]+v<0?o[1]+=h:o[1]-=h?v:0}}return this.updateCurrentFillCache({baseArea:t,dragDirection:n,foundMergedCells:r,fillSize:i,dragArea:o,cycleLength:f}),o}},{key:"updateCurrentFillCache",value:function(t){this.currentFillData||(this.currentFillData={}),(0,I.l7)(this.currentFillData,t)}},{key:"getAutofillSize",value:function(t,e,n){var r=ho(t,4),o=r[0],i=r[1],a=r[2],l=r[3],u=ho(e,4),s=u[0],c=u[1],f=u[2],h=u[3];switch(n){case"up":return o-s;case"down":return f-a;case"left":return i-c;case"right":return h-l;default:return null}}},{key:"getDragArea",value:function(t,e,n){var r=ho(t,4),o=r[0],i=r[1],a=r[2],l=r[3],u=ho(e,4),s=u[0],c=u[1],f=u[2],h=u[3];switch(n){case"up":return[s,c,o-1,l];case"down":return[a+1,i,f,l];case"left":return[s,c,a,i-1];case"right":return[o,l+1,f,h];default:return null}}},{key:"getFarthestCollection",value:function(t,e,n,r){var o=ho(t,4),i=o[0],a=o[1],l=o[2],u=o[3],s=["up","down"].indexOf(n)>-1,c=s?l:u,f=s?i:a,h=this.getAutofillSize(t,e,n),d=s?l-i+1:u-a+1,p=h-Math.floor(h/d)*d,y=null,g=null,v=null;switch(n){case"up":y="includesVertically",v=c-p+1;break;case"left":y="includesHorizontally",v=c-p+1;break;case"down":y="includesVertically",v=f+p-1;break;case"right":y="includesHorizontally",v=f+p-1}return(0,F.Bk)(r,function(t){t[y](v)&&t.isFarther(g,n)&&(g=t)}),g}},{key:"recreateAfterDataPopulation",value:function(t){if(this.currentFillData){var e=this.getRangeFromChanges(t),n=this.currentFillData.foundMergedCells,r=this.currentFillData.dragDirection,o=function(t,n){switch(r){case"up":return t.row-n>=e.from.row;case"down":return t.row+t.rowspan-1+n<=e.to.row;case"left":return t.col-n>=e.from.column;case"right":return t.col+t.colspan-1+n<=e.to.column;default:return null}},i=0,a=null,l=1;do for(var u=0;u<n.length;u+=1){if(o(a=n[u],i=l*this.currentFillData.cycleLength))switch(r){case"up":this.plugin.mergedCellsCollection.add({row:a.row-i,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+i,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-i,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+i,colspan:a.colspan})}u===n.length-1&&(l+=1)}while(o(a,i));this.currentFillData=null,this.plugin.hot.render()}}},{key:"getRangeFromChanges",value:function(t){var e=this,n={min:null,max:null},r={min:null,max:null};return(0,F.Bk)(t,function(t){var o=t[0],i=e.plugin.hot.propToCol(t[1]);(null===n.min||o<n.min)&&(n.min=o),(null===n.max||o>n.max)&&(n.max=o),(null===r.min||i<r.min)&&(r.min=i),(null===r.max||i>r.max)&&(r.max=i)}),{from:{row:n.min,column:r.min},to:{row:n.max,column:r.max}}}},{key:"dragAreaOverlapsCollections",value:function(t,e,n){var r=ho(this.getDragArea(t,e,n),4),o=r[0],i=r[1],a=r[2],l=r[3],u=this.plugin.hot._createCellCoords(o,i),s=this.plugin.hot._createCellCoords(a,l),c=this.plugin.hot._createCellRange(u,u,s);return!!this.mergedCellsCollection.getWithinRange(c,!0)}}],ha(n.prototype,t),e&&ha(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hu(t){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==hu(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hu(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hu(e)?e:String(e)}(r.key),r)}}var hc=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=t.hot,this.fullySelectedMergedCellClassName="fullySelectedMergedCell"}return t=[{key:"snapDelta",value:function(t,e,n){var r=e.to,o=r.row+t.row,i=r.col+t.col;t.row?this.jumpOverMergedCell(t,n,o):t.col&&this.jumpOverMergedCell(t,n,i)}},{key:"jumpOverMergedCell",value:function(t,e,n){var r=t.row||t.col,o=null,i=null,a=null;t.row?(o=e.includesVertically(n),i=e.row,a=e.getLastRow()):t.col&&(o=e.includesHorizontally(n),i=e.col,a=e.getLastColumn()),0!==r&&(r>0?o&&n!==i&&(r+=a-n+1):o&&n!==a&&(r-=n-i+1),t.row?t.row=r:t.col&&(t.col=r))}},{key:"getUpdatedSelectionRange",value:function(t,e){return this.hot._createCellRange(t.highlight,t.from,this.hot._createCellCoords(t.to.row+e.row,t.to.col+e.col))}},{key:"getSelectedMergedCellClassName",value:function(t,e,n,r){var o=Math.min(n[0],n[2]),i=Math.min(n[1],n[3]),a=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]);if(void 0!==r&&this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(t,e)){var u=this.plugin.mergedCellsCollection.get(t,e);if(u){var s=u.getLastRow(),c=u.getLastColumn();return o<=u.row&&i<=u.col&&a>=s&&l>=c?"".concat(this.fullySelectedMergedCellClassName,"-").concat(r):this.plugin.selectionCalculations.isMergeCellFullySelected(u,this.plugin.hot.getSelectedRange())?"".concat(this.fullySelectedMergedCellClassName,"-multiple"):void 0}}}},{key:"isMergeCellFullySelected",value:function(t,e){var n=[];if(!e||!t)return!1;for(var r=0;r<t.rowspan;r+=1)for(var o=0;o<t.colspan;o+=1)n.push(this.hot._createCellCoords(t.row+r,t.col+o));for(var i=0;i<n.length;i+=1){for(var a=[],l=0;l<e.length;l+=1)a[l]=e[l].includes(n[i]);if(!a.includes(!0))return!1}return!0}},{key:"getSelectedMergedCellClassNameToRemove",value:function(){for(var t=[],e=0;e<=7;e+=1)t.push("".concat(this.fullySelectedMergedCellClassName,"-").concat(e));return t.push("".concat(this.fullySelectedMergedCellClassName,"-multiple")),t}}],hs(n.prototype,t),e&&hs(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hf(t){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==hf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hf(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hf(e)?e:String(e)}(r.key),r)}}function hp(){return(hp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hv(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function hy(t,e){return(hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hg(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hv(t){return(hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("beforeMergeCells"),tb.Z.getSingleton().register("afterMergeCells"),tb.Z.getSingleton().register("beforeUnmergeCells"),tb.Z.getSingleton().register("afterUnmergeCells");var hm="mergeCells",hb=new WeakMap,hw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hy(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=hv(i);if(e){var r=hv(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===hf(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return hg(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),hb.set(hg(e),{lastDesiredCoords:null}),e.mergedCellsCollection=null,e.autofillCalculations=null,e.selectionCalculations=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[hm]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mergedCellsCollection=new hn(this),this.autofillCalculations=new hl(this),this.selectionCalculations=new hc(this),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("modifyTransformStart",function(){return t.onModifyTransformStart.apply(t,arguments)}),this.addHook("afterModifyTransformStart",function(){return t.onAfterModifyTransformStart.apply(t,arguments)}),this.addHook("modifyTransformEnd",function(){return t.onModifyTransformEnd.apply(t,arguments)}),this.addHook("modifyGetCellCoords",function(){return t.onModifyGetCellCoords.apply(t,arguments)}),this.addHook("beforeSetRangeStart",function(){return t.onBeforeSetRangeStart.apply(t,arguments)}),this.addHook("beforeSetRangeStartOnly",function(){return t.onBeforeSetRangeStart.apply(t,arguments)}),this.addHook("beforeSetRangeEnd",function(){return t.onBeforeSetRangeEnd.apply(t,arguments)}),this.addHook("afterIsMultipleSelection",function(){return t.onAfterIsMultipleSelection.apply(t,arguments)}),this.addHook("afterRenderer",function(){return t.onAfterRenderer.apply(t,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return t.addMergeActionsToContextMenu.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(){return t.onAfterGetCellMeta.apply(t,arguments)}),this.addHook("afterViewportRowCalculatorOverride",function(){return t.onAfterViewportRowCalculatorOverride.apply(t,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)}),this.addHook("modifyAutofillRange",function(){return t.onModifyAutofillRange.apply(t,arguments)}),this.addHook("afterCreateCol",function(){return t.onAfterCreateCol.apply(t,arguments)}),this.addHook("afterRemoveCol",function(){return t.onAfterRemoveCol.apply(t,arguments)}),this.addHook("afterCreateRow",function(){return t.onAfterCreateRow.apply(t,arguments)}),this.addHook("afterRemoveRow",function(){return t.onAfterRemoveRow.apply(t,arguments)}),this.addHook("afterChange",function(){return t.onAfterChange.apply(t,arguments)}),this.addHook("beforeDrawBorders",function(){return t.onBeforeDrawAreaBorders.apply(t,arguments)}),this.addHook("afterDrawSelection",function(){return t.onAfterDrawSelection.apply(t,arguments)}),this.addHook("beforeRemoveCellClassNames",function(){return t.onBeforeRemoveCellClassNames.apply(t,arguments)}),this.addHook("beforeUndoStackChange",function(t,e){if("MergeCells"===e)return!1}),this.registerShortcuts(),hp(hv(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),hp(hv(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){var t=this.hot.getSettings()[hm];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(t),hp(hv(i.prototype),"updatePlugin",this).call(this)}},{key:"validateSetting",value:function(t){var e=!0;return!!t&&(f9.containsNegativeValues(t)?((0,nG.ZK)(f9.NEGATIVE_VALUES_WARNING(t)),e=!1):f9.isOutOfBounds(t,this.hot.countRows(),this.hot.countCols())?((0,nG.ZK)(f9.IS_OUT_OF_BOUNDS_WARNING(t)),e=!1):f9.isSingleCell(t)?((0,nG.ZK)(f9.IS_SINGLE_CELL(t)),e=!1):f9.containsZeroSpan(t)&&((0,nG.ZK)(f9.ZERO_SPAN_WARNING(t)),e=!1),e)}},{key:"generateFromSettings",value:function(t){var e=this;if(Array.isArray(t)){var n=[];if((0,F.Bk)(t,function(t){if(e.validateSetting(t)){var r=e.hot._createCellCoords(t.row,t.col),o=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),i=e.hot._createCellRange(r,r,o);e.mergeRange(i,!0,!0),(0,t5.q4)(t.row,t.row+t.rowspan-1,function(e){(0,t5.q4)(t.col,t.col+t.colspan-1,function(r){!1==(e===t.row&&r===t.col)&&n.push([e,r,null])})})}}),0===n.length)return;this.hot.setDataAtCell(n)}}},{key:"clearCollections",value:function(){this.mergedCellsCollection.clear()}},{key:"canMergeRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e||this.validateSetting(t)}},{key:"toggleMergeOnSelection",value:function(){var t=this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.toggleMerge(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.unmergeRange(t,!0),this.mergeRange(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"unmergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){var e=t.from,n=t.to;this.unmergeRange(t,!0),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.getTopStartCorner(),i=t.getBottomEndCorner(),a={row:o.row,col:o.col,rowspan:i.row-o.row+1,colspan:i.col-o.col+1},l=[],u=null;return!!this.canMergeRange(a,n)&&(this.hot.runHooks("beforeMergeCells",t,n),(0,t5.q4)(0,a.rowspan-1,function(t){(0,t5.q4)(0,a.colspan-1,function(n){var r=null;l[t]||(l[t]=[]),0===t&&0===n?r=e.hot.getSourceDataAtCell(e.hot.toPhysicalRow(a.row),e.hot.toPhysicalColumn(a.col)):e.hot.setCellMeta(a.row+t,a.col+n,"hidden",!0),l[t][n]=r})}),this.hot.setCellMeta(a.row,a.col,"spanned",!0),!this.mergedCellsCollection.add(a)||(r?u=[a.row,a.col,l]:this.hot.populateFromArray(a.row,a.col,l,void 0,void 0,this.pluginName),this.hot.runHooks("afterMergeCells",t,a,n),u))}},{key:"unmergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.mergedCellsCollection.getWithinRange(t);r&&(this.hot.runHooks("beforeUnmergeCells",t,n),(0,F.Bk)(r,function(t){e.mergedCellsCollection.remove(t.row,t.col),(0,t5.q4)(0,t.rowspan-1,function(n){(0,t5.q4)(0,t.colspan-1,function(r){e.hot.removeCellMeta(t.row+n,t.col+r,"hidden")})}),e.hot.removeCellMeta(t.row,t.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",t,n),this.hot.render())}},{key:"toggleMerge",value:function(t){var e=this.mergedCellsCollection.get(t.from.row,t.from.col);e.row===t.from.row&&e.col===t.from.col&&e.row+e.rowspan-1===t.to.row&&e.col+e.colspan-1===t.to.col?this.unmergeRange(t):this.mergeSelection(t)}},{key:"merge",value:function(t,e,n,r){var o=this.hot._createCellCoords(t,e),i=this.hot._createCellCoords(n,r);this.mergeRange(this.hot._createCellRange(o,o,i))}},{key:"unmerge",value:function(t,e,n,r){var o=this.hot._createCellCoords(t,e),i=this.hot._createCellCoords(n,r);this.unmergeRange(this.hot._createCellRange(o,o,i))}},{key:"onAfterInit",value:function(){this.generateFromSettings(this.hot.getSettings()[hm]),this.hot.render()}},{key:"registerShortcuts",value:function(){var t=this;this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:function(){t.toggleMerge(t.hot.getSelectedRangeLast()),t.hot.render()},runOnlyIf:function(t){return!t.altKey},group:hm})}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(hm)}},{key:"onAfterIsMultipleSelection",value:function(t){if(t){for(var e=this.mergedCellsCollection.mergedCells,n=this.hot.getSelectedRangeLast(),r=0;r<e.length;r+=1)if(n.from.row===e[r].row&&n.from.col===e[r].col&&n.to.row===e[r].row+e[r].rowspan-1&&n.to.col===e[r].col+e[r].colspan-1)return!1}return t}},{key:"onModifyTransformStart",value:function(t){var e=hb.get(this),n=this.hot.getSelectedRangeLast(),r={row:t.row,col:t.col},o=null,i=this.hot._createCellCoords(n.highlight.row,n.highlight.col),a=this.mergedCellsCollection.get(i.row,i.col);if(e.lastDesiredCoords||(e.lastDesiredCoords=this.hot._createCellCoords(null,null)),a){var l=this.hot._createCellCoords(a.row,a.col),u=this.hot._createCellCoords(a.row+a.rowspan-1,a.col+a.colspan-1);this.hot._createCellRange(l,l,u).includes(e.lastDesiredCoords)||(e.lastDesiredCoords=this.hot._createCellCoords(null,null)),r.row=e.lastDesiredCoords.row?e.lastDesiredCoords.row-i.row:r.row,r.col=e.lastDesiredCoords.col?e.lastDesiredCoords.col-i.col:r.col,t.row>0?r.row=a.row+a.rowspan-1-i.row+t.row:t.row<0&&(r.row=i.row-a.row+t.row),t.col>0?r.col=a.col+a.colspan-1-i.col+t.col:t.col<0&&(r.col=i.col-a.col+t.col)}o=this.hot._createCellCoords(n.highlight.row+r.row,n.highlight.col+r.col);var s=this.mergedCellsCollection.get(o.row,o.col);if(s){var c=this.mergedCellsCollection.getFirstRenderableCoords(s.row,s.col);e.lastDesiredCoords=o,r={row:c.row-i.row,col:c.col-i.col}}0!==r.row&&(t.row=r.row),0!==r.col&&(t.col=r.col)}},{key:"onModifyTransformEnd",value:function(t){var e=this,n=this.hot.getSelectedRangeLast(),r=(0,I.d9)(t),o=this.selectionCalculations.getUpdatedSelectionRange(n,t),i=(0,I.d9)(r),a=this.mergedCellsCollection.getWithinRange(o,!0);do i=(0,I.d9)(r),this.selectionCalculations.getUpdatedSelectionRange(n,r),(0,F.Bk)(a,function(t){e.selectionCalculations.snapDelta(r,n,t)});while(r.row!==i.row||r.col!==i.col);t.row=r.row,t.col=r.col}},{key:"onModifyGetCellCoords",value:function(t,e){if(!(t<0)&&!(e<0)){var n=this.mergedCellsCollection.get(t,e);if(n){var r=n.row,o=n.col,i=n.colspan;return[r,o,r+n.rowspan-1,o+i-1]}}}},{key:"addMergeActionsToContextMenu",value:function(t){var e;t.items.push({name:"---------"},(e=this,{key:"mergeCells",name:function(){var t=this.getSelectedLast();if(t){var n=e.mergedCellsCollection.get(t[0],t[1]);if(n.row===t[0]&&n.col===t[1]&&n.row+n.rowspan-1===t[2]&&n.col+n.colspan-1===t[3])return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_UNMERGE_CELLS)}return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_MERGE_CELLS)},callback:function(){e.toggleMergeOnSelection()},disabled:function(){var t=this.getSelectedLast();return!t||f9.isSingleCell({row:t[0],col:t[1],rowspan:t[2]-t[0]+1,colspan:t[3]-t[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}))}},{key:"onAfterRenderer",value:function(t,e,n){var r=this.mergedCellsCollection.get(e,n),o=(0,I.Kn)(r)?(0,I.d9)(r):void 0;if((0,I.Kn)(o)){var i,a=this.hot,l=a.rowIndexMapper,u=a.columnIndexMapper,s=o.row,c=o.col,f=o.colspan,h=o.rowspan,d=function(t){if(Array.isArray(t))return t}(i=this.translateMergedCellToRenderable(s,h,c,f))||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(i,2)||function(t,e){if(t){if("string"==typeof t)return hh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hh(t,e)}}(i,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],y=d[1],g=l.getRenderableFromVisualIndex(e),v=u.getRenderableFromVisualIndex(n);o.row=l.getNearestNotHiddenIndex(o.row,1),o.col=u.getNearestNotHiddenIndex(o.col,1),o.rowspan=Math.min(o.rowspan,p-g+1),o.colspan=Math.min(o.colspan,y-v+1)}f6(t,o,e,n)}},{key:"onBeforeSetRangeStart",value:function(t){if(this.mergedCellsCollection.isFirstRenderableMergedCell(t.row,t.col)){var e=this.mergedCellsCollection.get(t.row,t.col),n=[e.row,e.col];t.row=n[0],t.col=n[1]}}},{key:"onBeforeSetRangeEnd",value:function(t){var e=this.hot.getSelectedRangeLast();e.highlight=this.hot._createCellCoords(e.highlight.row,e.highlight.col),e.to=t;var n=!1;if(!(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()))do{n=!1;for(var r=0;r<this.mergedCellsCollection.mergedCells.length;r+=1){var o=this.mergedCellsCollection.mergedCells[r].getRange();e.expandByRange(o)&&(t.row=e.to.row,t.col=e.to.col,n=!0)}}while(n)}},{key:"onAfterGetCellMeta",value:function(t,e,n){var r=this.mergedCellsCollection.get(t,e);r&&(r.row!==t||r.col!==e?n.copyable=!1:(n.rowspan=r.rowspan,n.colspan=r.colspan))}},{key:"onAfterViewportRowCalculatorOverride",value:function(t){var e=this.hot.countCols();this.modifyViewportRowStart(t,e),this.modifyViewportRowEnd(t,e)}},{key:"modifyViewportRowStart",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=n.getVisualFromRenderableIndex(t.startRow),o=0;o<e;o+=1){var i=this.mergedCellsCollection.get(r,o);if((0,I.Kn)(i)){var a=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i.row,1));if(a<t.startRow){t.startRow=a,this.modifyViewportRowStart(t,e);return}}}}},{key:"modifyViewportRowEnd",value:function(t,e){for(var n=this.hot.rowIndexMapper,r=n.getVisualFromRenderableIndex(t.endRow),o=0;o<e;o+=1){var i=this.mergedCellsCollection.get(r,o);if((0,I.Kn)(i)){var a=i.row+i.rowspan-1,l=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,-1));if(l>t.endRow){t.endRow=l,this.modifyViewportRowEnd(t,e);return}}}}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){var e=this.hot.countRows();this.modifyViewportColumnStart(t,e),this.modifyViewportColumnEnd(t,e)}},{key:"modifyViewportColumnStart",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=n.getVisualFromRenderableIndex(t.startColumn),o=0;o<e;o+=1){var i=this.mergedCellsCollection.get(o,r);if((0,I.Kn)(i)){var a=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i.col,1));if(a<t.startColumn){t.startColumn=a,this.modifyViewportColumnStart(t,e);return}}}}},{key:"modifyViewportColumnEnd",value:function(t,e){for(var n=this.hot.columnIndexMapper,r=n.getVisualFromRenderableIndex(t.endColumn),o=0;o<e;o+=1){var i=this.mergedCellsCollection.get(o,r);if((0,I.Kn)(i)){var a=i.col+i.colspan-1,l=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,-1));if(l>t.endColumn){t.endColumn=l,this.modifyViewportColumnEnd(t,e);return}}}}},{key:"translateMergedCellToRenderable",value:function(t,e,n,r){var o,i,a=this.hot,l=a.rowIndexMapper,u=a.columnIndexMapper;return o=0===e?l.getNearestNotHiddenIndex(t,1):l.getNearestNotHiddenIndex(t+e-1,-1),i=0===r?u.getNearestNotHiddenIndex(n,1):u.getNearestNotHiddenIndex(n+r-1,-1),[t>=0?l.getRenderableFromVisualIndex(o):t,n>=0?u.getRenderableFromVisualIndex(i):n]}},{key:"onModifyAutofillRange",value:function(t,e){this.autofillCalculations.correctSelectionAreaSize(e);var n=this.autofillCalculations.getDirection(e,t),r=t;if(this.autofillCalculations.dragAreaOverlapsCollections(e,r,n))return e;var o=this.mergedCellsCollection.getWithinRange({from:{row:e[0],col:e[1]},to:{row:e[2],col:e[3]}});return o?r=this.autofillCalculations.snapDragArea(e,r,n,o):r}},{key:"onAfterCreateCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("right",t,e)}},{key:"onAfterRemoveCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("left",t,e)}},{key:"onAfterCreateRow",value:function(t,e,n){"auto"!==n&&this.mergedCellsCollection.shiftCollections("down",t,e)}},{key:"onAfterRemoveRow",value:function(t,e){this.mergedCellsCollection.shiftCollections("up",t,e)}},{key:"onAfterChange",value:function(t,e){"Autofill.fill"===e&&this.autofillCalculations.recreateAfterDataPopulation(t)}},{key:"onBeforeDrawAreaBorders",value:function(t,e){if(e&&"area"===e){var n=this.hot.getSelectedRangeLast(),r=this.mergedCellsCollection.getWithinRange(n);(0,F.Bk)(r,function(e){n.getBottomEndCorner().row===e.getLastRow()&&n.getBottomEndCorner().col===e.getLastColumn()&&(t[2]=e.row,t[3]=e.col)})}}},{key:"onAfterModifyTransformStart",value:function(t,e,n){if(this.enabled){var r=this.mergedCellsCollection.get(t.row,t.col);if(r){var o=r.row+r.rowspan-1==this.hot.countRows()-1,i=0===r.row,a=r.col+r.colspan-1==this.hot.countCols()-1,l=0===r.col;(e>0&&o||e<0&&i||n>0&&a||n<0&&l)&&(t.row=r.row,t.col=r.col)}}}},{key:"onAfterDrawSelection",value:function(t,e,n,r){if(n)return this.selectionCalculations.getSelectedMergedCellClassName(t,e,n,r)}},{key:"onBeforeRemoveCellClassNames",value:function(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}}],r=[{key:"PLUGIN_KEY",get:function(){return hm}},{key:"PLUGIN_PRIORITY",get:function(){return 150}}],n&&hd(i.prototype,n),r&&hd(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function hS(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hC(t,e)}}(t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hk(){(0,nG.ZK)((0,r1.e)(O||(O=Object.freeze(Object.defineProperties(["Plugins `columnSorting` and `multiColumnSorting` should not be enabled simultaneously. \n    Only `multiColumnSorting` will work."],{raw:{value:Object.freeze(["Plugins \\`columnSorting\\` and \\`multiColumnSorting\\` should not be enabled simultaneously. \n    Only \\`multiColumnSorting\\` will work."])}})))))}var hO="sort";function hR(t,e,n){var r=[];return!1===n||t.isColumnSorted(e)&&t.getNumberOfSortedColumns()>1&&r.push("".concat(hO,"-").concat(t.getIndexOfColumnInSortQueue(e)+1)),r}function hP(t){return(hP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==hP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hP(e)?e:String(e)}(r.key),r)}}function hM(){return(hM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hj(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function h_(t,e){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hj(t){return(hj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hA="multiColumnSorting",hT="columnSorting";rA(hA,function(t,e){return function(n,r){var o=hS(n).slice(1),i=hS(r).slice(1);return function n(r){var a=t[r],l=e[r],u=o[r],s=i[r],c=l.multiColumnSorting,f=(c.compareFunctionFactory?c.compareFunctionFactory:rI(l.type))(a,l,c)(u,s);if(0===f){var h=r+1;if(void 0!==e[h])return n(h)}return f}(0)}});var hI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=hj(i);if(e){var r=hj(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===hP(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).pluginKey=hA,e}return n=[{key:"isEnabled",value:function(){return hM(hj(i.prototype),"isEnabled",this).call(this)}},{key:"enablePlugin",value:function(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[hT]&&hk(),hM(hj(i.prototype),"enablePlugin",this).call(this)}},{key:"disablePlugin",value:function(){hM(hj(i.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){hM(hj(i.prototype),"sort",this).call(this,t)}},{key:"clearSort",value:function(){hM(hj(i.prototype),"clearSort",this).call(this)}},{key:"isSorted",value:function(){return hM(hj(i.prototype),"isSorted",this).call(this)}},{key:"getSortConfig",value:function(t){return hM(hj(i.prototype),"getSortConfig",this).call(this,t)}},{key:"setSortConfig",value:function(t){hM(hj(i.prototype),"setSortConfig",this).call(this,t)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t:[t]}},{key:"updateHeaderClasses",value:function(t){for(var e,n,r,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];(e=hM(hj(i.prototype),"updateHeaderClasses",this)).call.apply(e,[this,t].concat(a)),(0,A.IV)(t,(n=t.className.split(" "),r=RegExp("^".concat(hO,"-[0-9]{1,2}$")),n.filter(function(t){return r.test(t)}))),!1!==this.enabled&&(0,A.cn)(t,hR.apply(void 0,a))}},{key:"onUpdateSettings",value:function(t){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[hT]&&hk(),hM(hj(i.prototype),"onUpdateSettings",this).call(this,t)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==rv(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(e.col),this.sort(this.getNextSortConfig(e.col,"append"))):this.sort(this.getColumnNextConfig(e.col)))}}],r=[{key:"PLUGIN_KEY",get:function(){return hA}},{key:"PLUGIN_PRIORITY",get:function(){return 170}}],n&&hE(i.prototype,n),r&&hE(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(rX);function hx(t){return(hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==hx(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hx(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hx(e)?e:String(e)}(r.key),r)}}function hN(){return(hN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hB(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function hH(t,e){return(hH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hB(t){return(hB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hH(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=hB(i);if(e){var r=hB(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===hx(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dragged=[],e.eventManager=null,e.lastSetCell=null,e}return r=[{key:"PLUGIN_KEY",get:function(){return"multipleSelectionHandles"}},{key:"PLUGIN_PRIORITY",get:function(){return 160}}],n=[{key:"isEnabled",value:function(){return(0,o5.K1)()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new tc.Z(this)),this.registerListeners(),hN(hB(i.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){var t=this,e=this,n=this.hot.rootElement;function r(t){if(1===e.dragged.length)return e.dragged.splice(0,e.dragged.length),!0;var n=e.dragged.indexOf(t);if(-1===n)return!1;0===n?e.dragged=e.dragged.slice(0,1):1===n&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(n,"touchstart",function(t){var n;return(0,A.pv)(t.target,"topSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):(0,A.pv)(t.target,"bottomSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchend",function(t){return(0,A.pv)(t.target,"topSelectionHandle-HitArea")?(r.call(e,"top"),e.touchStartRange=void 0,t.preventDefault(),!1):(0,A.pv)(t.target,"bottomSelectionHandle-HitArea")?(r.call(e,"bottom"),e.touchStartRange=void 0,t.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchmove",function(n){var r,o,i,a,l,u,s=t.hot.rootDocument;if(0!==e.dragged.length){var c=s.elementFromPoint(n.touches[0].clientX,n.touches[0].clientY);c&&c!==e.lastSetCell&&(("TD"===c.nodeName||"TH"===c.nodeName)&&(-1===(r=e.hot.getCoords(c)).col&&(r.col=0),i=(o=e.hot.getSelectedRangeLast()).getWidth(),a=o.getHeight(),l=o.getDirection(),1===i&&1===a&&e.hot.selection.setRangeEnd(r),null!==(u=e.getCurrentRangeCoords(o,r,e.touchStartRange.direction,l,e.dragged[0])).start&&e.hot.selection.setRangeStart(u.start),e.hot.selection.setRangeEnd(u.end),e.lastSetCell=c),n.preventDefault())}})}},{key:"getCurrentRangeCoords",value:function(t,e,n,r,o){var i=t.getTopStartCorner(),a=t.getBottomEndCorner(),l=t.getBottomStartCorner(),u=t.getTopEndCorner(),s={start:null,end:null};switch(n){case"NE-SW":switch(r){case"NE-SW":case"NW-SE":s="top"===o?{start:this.hot._createCellCoords(e.row,t.highlight.col),end:this.hot._createCellCoords(l.row,e.col)}:{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,i.col)};break;case"SE-NW":"bottom"===o&&(s={start:this.hot._createCellCoords(a.row,e.col),end:this.hot._createCellCoords(e.row,i.col)})}break;case"NW-SE":switch(r){case"NE-SW":"top"===o?s={start:e,end:l}:s.end=e;break;case"NW-SE":"top"===o?s={start:e,end:a}:s.end=e;break;case"SE-NW":"top"===o?s={start:e,end:i}:s.end=e;break;case"SW-NE":"top"===o?s={start:e,end:u}:s.end=e}break;case"SW-NE":switch(r){case"NW-SE":s="bottom"===o?{start:this.hot._createCellCoords(e.row,i.col),end:this.hot._createCellCoords(l.row,e.col)}:{start:this.hot._createCellCoords(i.row,e.col),end:this.hot._createCellCoords(e.row,a.col)};break;case"SW-NE":s="top"===o?{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,a.col)}:{start:this.hot._createCellCoords(e.row,i.col),end:this.hot._createCellCoords(i.row,e.col)};break;case"SE-NW":"bottom"===o?s={start:this.hot._createCellCoords(e.row,u.col),end:this.hot._createCellCoords(i.row,e.col)}:"top"===o&&(s={start:l,end:e})}break;case"SE-NW":switch(r){case"NW-SE":case"NE-SW":case"SW-NE":"top"===o&&(s.end=e);break;case"SE-NW":"top"===o?s.end=e:s={start:e,end:i}}}return s}},{key:"isDragged",value:function(){return this.dragged.length>0}}],hD(i.prototype,n),r&&hD(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI),hU=n(2600);function hV(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=t.colspan,r=t.origColspan,o=t.collapsible,i=t.crossHiddenColumns,a=t.isCollapsed,l=t.isHidden,u=t.isRoot,s=t.isPlaceholder;return{label:void 0===e?"":e,colspan:void 0===n?1:n,origColspan:void 0===r?1:r,collapsible:void 0!==o&&o,isCollapsed:void 0!==a&&a,crossHiddenColumns:void 0===i?[]:i,isHidden:void 0!==l&&l,isRoot:void 0!==u&&u,isPlaceholder:void 0!==s&&s}}function hF(){return{label:"",isPlaceholder:!0}}function hW(t){return function(t){if(Array.isArray(t))return hz(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hz(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hz(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hY(t){return(hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var hG=["row","col"];function hK(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function hq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hZ(r.key),r)}}function hZ(t){var e=function(t,e){if("object"!==hY(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==hY(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===hY(e)?e:String(e)}function h$(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function hX(t,e){var n=hQ(t,e,"get");return n.get?n.get.call(t):n.value}function hJ(t,e,n){var r=hQ(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function hQ(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var h0=["label","collapsible"],h1=new WeakMap,h2=new WeakMap,h3=new WeakMap,h4=function(){var t,e;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),h$(this,h1,{writable:!0,value:[]}),h$(this,h2,{writable:!0,value:0}),h$(this,h3,{writable:!0,value:1/0})}return t=[{key:"setColumnsLimit",value:function(t){hJ(this,h3,t)}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];hJ(this,h1,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===e)return n;(0,F.Bk)(t,function(t){var r=[],o=0;n.push(r),(0,F.Bk)(t,function(t){var n=hV();if((0,I.Kn)(t)){var i=t.label,a=t.colspan;n.label=(0,W.Pz)(i),"number"==typeof a&&a>1&&(n.colspan=a,n.origColspan=a)}else n.label=(0,W.Pz)(t);o+=n.origColspan;var l=!1;if(o>=e&&(n.colspan=n.origColspan-(o-e),n.origColspan=n.colspan,l=!0),r.push(n),n.colspan>1)for(var u=0;u<n.colspan-1;u++)r.push(hF());return!l})});var r=Math.max.apply(Math,hW((0,F.Sc)(n,function(t){return t.length})));return(0,F.Bk)(n,function(t){if(t.length<r){var e=(0,F.Sc)(Array(r-t.length),function(){return hV()});t.splice.apply(t,[t.length,0].concat(hW(e)))}}),n}(t,hX(this,h3))),hJ(this,h2,hX(this,h1).length)}},{key:"getData",value:function(){return hX(this,h1)}},{key:"mergeWith",value:function(t){var e=this;(0,F.Bk)(t,function(t){var n=t.row,r=t.col,o=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,hG),i=e.getHeaderSettings(n,r);null!==i&&(0,I.l7)(i,o,h0)})}},{key:"map",value:function(t){(0,F.Bk)(hX(this,h1),function(e){(0,F.Bk)(e,function(e){var n=t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hK(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=hZ(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hK(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e));(0,I.Kn)(n)&&(0,I.l7)(e,n,h0)})})}},{key:"getHeaderSettings",value:function(t,e){if(t>=hX(this,h2)||t<0)return null;var n,r=hX(this,h1)[t];return e>=r.length?null:null!==(n=r[e])&&void 0!==n?n:null}},{key:"getHeadersSettings",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=[];if(t>=hX(this,h2)||t<0)return r;for(var o=hX(this,h1)[t],i=0,a=e;a<o.length;a++){var l=o[a];if(l.isPlaceholder)throw Error("The first column settings cannot overlap the other header layers");if(i+=l.colspan,r.push(l),l.colspan>1&&(a+=l.colspan-1),i===n)break;if(i>n)throw Error("The last column settings cannot overlap the other header layers")}return r}},{key:"getLayersCount",value:function(){return hX(this,h2)}},{key:"getColumnsCount",value:function(){return hX(this,h2)>0?hX(this,h1)[0].length:0}},{key:"clear",value:function(){hJ(this,h1,[]),hJ(this,h2,0)}}],hq(n.prototype,t),e&&hq(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function h8(t){return(h8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function h6(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h9(Object(n),!0).forEach(function(e){h5(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h9(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h7(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dt(r.key),r)}}function h5(t,e,n){return(e=dt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t){var e=function(t,e){if("object"!==h8(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==h8(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===h8(e)?e:String(e)}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var dn=new Map([["DF-pre-order",function t(e,n){for(var r=e.call(n,this),o=0;o<this.childs.length;o++){if(!1===r)return!1;r=t.call(this.childs[o],e,n)}return r}],["DF-post-order",function t(e,n){for(var r=0;r<this.childs.length;r++)if(!1===t.call(this.childs[r],e,n))return!1;return e.call(n,this)}],["BF",function(t,e){var n=[this];!function r(){if(0!==n.length){var o,i=n.shift();n.push.apply(n,function(t){if(Array.isArray(t))return de(t)}(o=i.childs)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(t,e)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),!1!==t.call(e,i)&&r()}}()}]]),dr=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),h5(this,"data",{}),h5(this,"parent",null),h5(this,"childs",[]),this.data=t}return t=[{key:"addChild",value:function(t){t.parent=this,this.childs.push(t)}},{key:"cloneTree",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=new n(h6({},t.data)),r=0;r<t.childs.length;r++)e.addChild(this.cloneTree(t.childs[r]));return e}},{key:"replaceTreeWith",value:function(t){this.data=h6({},t.data),this.childs=[];for(var e=0;e<t.childs.length;e++)this.addChild(t.childs[e])}},{key:"walkDown",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BF";if(!dn.has(e))throw Error('Traversal strategy "'.concat(e,'" does not exist'));dn.get(e).call(this,t,this)}},{key:"walkUp",value:function(t){var e=this;!function n(r){!1!==t.call(e,r)&&null!==r.parent&&n(r.parent)}(this)}}],h7(n.prototype,t),e&&h7(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function dl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?da(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=dc(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function du(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ds(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dc(r.key),r)}}function dc(t){var e=function(t,e){if("object"!==di(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==di(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===di(e)?e:String(e)}function df(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function dh(t,e){var n=dd(t,e,"get");return n.get?n.get.call(t):n.value}function dd(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var dp=new WeakMap,dy=new WeakMap,dg=new WeakMap,dv=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),df(this,dp,{writable:!0,value:new Map}),df(this,dy,{writable:!0,value:new Map}),df(this,dg,{writable:!0,value:null}),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(this,dd(this,dg,"set"),t)}return t=[{key:"getRoots",value:function(){return Array.from(dh(this,dp).values())}},{key:"getRootByColumn",value:function(t){var e;return dh(this,dy).has(t)&&(e=dh(this,dp).get(dh(this,dy).get(t))),e}},{key:"getNode",value:function(t,e){var n,r=this.getRootByColumn(e);if(r){var o=e-dh(this,dy).get(e),i=0;return r.walkDown(function(r){var a=r.data,l=a.origColspan;if(t===a.headerLevel){if(o>=i&&o<=i+l-1)return(n=r).data.isRoot=e===n.data.columnIndex,!1;i+=l}}),n}}},{key:"rebuildTreeIndex",value:function(){var t=this,e=0;dh(this,dy).clear(),(0,F.Bk)(dh(this,dp),function(n){for(var r=(function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(n,2)||function(t,e){if(t){if("string"==typeof t)return du(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return du(t,e)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].data.colspan,o=e;o<e+r;o++)dh(t,dy).set(o,e);e+=r})}},{key:"buildTree",value:function(){this.clear();for(var t=dh(this,dg).getColumnsCount(),e=0;e<t;){var n=dh(this,dg).getHeaderSettings(0,e),r=new dr;dh(this,dp).set(e,r),this.buildLeaves(r,e,0,n.origColspan),e+=n.origColspan}this.rebuildTreeIndex()}},{key:"buildLeaves",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=dh(this,dg).getHeadersSettings(n,e,o);n+=1,(0,F.Bk)(i,function(o){var i,a=dl(dl({},o),{},{headerLevel:n-1,columnIndex:e});1===n?(t.data=a,i=t):(i=new dr(a),t.addChild(i)),n<dh(r,dg).getLayersCount()&&r.buildLeaves(i,e,n,o.origColspan),e+=o.origColspan})}},{key:"clear",value:function(){dh(this,dp).clear(),dh(this,dy).clear()}}],ds(n.prototype,t),e&&ds(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function dm(t,e){t.walkDown(function(t){var n=t.data,r=t.childs;if(!n.isHidden&&(e(n.columnIndex),0===r.length))for(var o=1;o<n.colspan;o++)e(n.columnIndex+o)})}function db(t,e){var n=t.childs;if(0!==n.length)return n[0].data[e]}function dw(t){return db(t,"origColspan")===t.data.origColspan}function dS(t){var e=t.data,n=t.childs;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(dw(t))return dS(n[0]);e.isCollapsed=!1;var r=n.slice(1),o=new Set,i=0;if(r.length>0)(0,F.Bk)(r,function(t){t.replaceTreeWith(t.data.clonedTree),t.data.clonedTree=null,i+=t.data.colspan,dm(t,function(t){o.add(t)})});else{var a=e.colspan,l=e.origColspan,u=e.columnIndex;i=l-a;for(var s=1;s<l;s++)o.add(u+s)}return t.walkUp(function(t){var e=t.data;e.colspan+=i,e.colspan>=e.origColspan?(e.colspan=e.origColspan,e.isCollapsed=!1):dw(t)&&(e.isCollapsed=db(t,"isCollapsed"))}),{rollbackModification:function(){return dC(t)},affectedColumns:Array.from(o),colspanCompensation:i}}function dC(t){var e,n=t.data,r=t.childs;if(n.isCollapsed||n.isHidden||n.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(dw(t))return dC(r[0]);n.isCollapsed=!0;var o=r.slice(1),i=new Set;if(o.length>0)(0,F.Bk)(o,function(t){dm(t,function(t){i.add(t)}),t.data.clonedTree=t.cloneTree(),t.walkDown(function(t){t.data.isHidden=!0})});else for(var a=n.origColspan,l=n.columnIndex,u=1;u<a;u++){var s=l+u;i.add(s)}var c=n.colspan-(null!==(e=db(t,"colspan"))&&void 0!==e?e:1);return t.walkUp(function(t){var e=t.data;e.colspan-=c,e.colspan<=1?(e.colspan=1,e.isCollapsed=!0):dw(t)&&(e.isCollapsed=db(t,"isCollapsed"))}),{rollbackModification:function(){return dS(t)},affectedColumns:Array.from(i),colspanCompensation:c}}var dk=new Map([["collapse",dC],["expand",dS],["hide-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,r1.e)(R||(R=Object.freeze(Object.defineProperties(["The passed node is not the last node on the tree. Only for \nthe last node, the hide column modification can be applied."],{raw:{value:Object.freeze(["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the hide column modification can be applied."])}})))));if(!t.data.crossHiddenColumns.includes(e)){var n=!1;t.walkUp(function(t){if(t.data.collapsible)return n=!0,!1}),n||t.walkUp(function(t){var n=t.data;n.crossHiddenColumns.push(e),n.colspan>1?n.colspan-=1:n.isHidden=!0})}}],["show-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,r1.e)(P||(P=Object.freeze(Object.defineProperties(["The passed node is not the last node on the tree. Only for \nthe last node, the show column modification can be applied."],{raw:{value:Object.freeze(["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the show column modification can be applied."])}})))));if(t.data.crossHiddenColumns.includes(e)){var n=!1;t.walkUp(function(t){if(t.data.collapsible)return n=!0,!1}),n||t.walkUp(function(t){var n=t.data;n.crossHiddenColumns.splice(n.crossHiddenColumns.indexOf(e),1),!n.isHidden&&n.colspan<n.origColspan&&(n.colspan+=1),n.isHidden=!1})}}]]),dO=["crossHiddenColumns"];function dR(t){var e=[];return(0,F.Bk)(t,function(t){t.walkDown(function(t){for(var n,r,o=t.data,i=o.origColspan,a=o.columnIndex,l=o.headerLevel,u=o.crossHiddenColumns,s=(Array.isArray((n=e)[l])?r=n[l]:(r=[],n[l]=r),r),c=!1,f=a;f<a+i;f++)if(u.includes(f)||c)s.push(hF(o));else{var h=function(t){var e=hV(t);return e.crossHiddenColumns,function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(e,dO)}(o);h.isRoot=!0,s.push(h),c=!0}})}),e}function dP(t){return(dP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dE=["row"];function dM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dM(Object(n),!0).forEach(function(e){var r,o,i;r=t,o=e,i=n[e],(o=dA(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function dj(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dA(r.key),r)}}function dA(t){var e=function(t,e){if("object"!==dP(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==dP(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dP(e)?e:String(e)}function dT(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function dI(t,e,n){var r=dD(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function dx(t,e){var n=dD(t,e,"get");return n.get?n.get.call(t):n.value}function dD(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var dN=new WeakMap,dH=new WeakMap,dB=new WeakMap,dL=function(){var t,e;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),dT(this,dN,{writable:!0,value:new h4}),dT(this,dH,{writable:!0,value:new dv(dx(this,dN))}),dT(this,dB,{writable:!0,value:[[]]})}return t=[{key:"setState",value:function(t){dx(this,dN).setData(t);var e=!1;try{dx(this,dH).buildTree()}catch(n){dx(this,dH).clear(),dx(this,dN).clear(),e=!0}return dI(this,dB,dR(dx(this,dH).getRoots())),e}},{key:"setColumnsLimit",value:function(t){dx(this,dN).setColumnsLimit(t)}},{key:"mergeStateWith",value:function(t){var e=this,n=(0,F.Sc)(t,function(t){var n=t.row,r=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,dE);return d_({row:n<0?e.rowCoordsToLevel(n):n},r)});dx(this,dN).mergeWith(n),dx(this,dH).buildTree(),dI(this,dB,dR(dx(this,dH).getRoots()))}},{key:"mapState",value:function(t){dx(this,dN).map(t),dx(this,dH).buildTree(),dI(this,dB,dR(dx(this,dH).getRoots()))}},{key:"mapNodes",value:function(t){return(0,F.k$)(dx(this,dH).getRoots(),function(e,n){return n.walkDown(function(n){var r=t(n.data);void 0!==r&&e.push(r)}),e},[])}},{key:"triggerNodeModification",value:function(t,e,n){e<0&&(e=this.rowCoordsToLevel(e));var r,o=dx(this,dH).getNode(e,n);return o&&(r=function(t,e,n){if(!dk.has(t))throw Error('The node modifier action ("'.concat(t,'") does not exist.'));return dk.get(t)(e,n)}(t,o,n),dI(this,dB,dR(dx(this,dH).getRoots()))),r}},{key:"triggerColumnModification",value:function(t,e){return this.triggerNodeModification(t,-1,e)}},{key:"rowCoordsToLevel",value:function(t){if(t>=0)return null;var e=t+Math.max(this.getLayersCount(),1);return e<0?null:e}},{key:"levelToRowCoords",value:function(t){if(t<0)return null;var e=t-Math.max(this.getLayersCount(),1);return e>=0?null:e}},{key:"getHeaderSettings",value:function(t,e){var n,r;return(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())?null:null!==(n=null===(r=dx(this,dB)[t])||void 0===r?void 0:r[e])&&void 0!==n?n:null}},{key:"getHeaderTreeNodeData",value:function(t,e){if(t<0&&(t=this.rowCoordsToLevel(t)),null===t||t>=this.getLayersCount())return null;var n=dx(this,dH).getNode(t,e);return n?d_({},n.data):null}},{key:"findLeftMostColumnIndex",value:function(t,e){if((null!==(n=this.getHeaderSettings(t,e))&&void 0!==n?n:{isRoot:!0}).isRoot)return e;for(var n,r,o=e-1;o>=0&&!(null!==(r=this.getHeaderSettings(t,o))&&void 0!==r?r:{isRoot:!0}).isRoot;)o-=1;return o}},{key:"getLayersCount",value:function(){return dx(this,dN).getLayersCount()}},{key:"getColumnsCount",value:function(){return dx(this,dN).getColumnsCount()}},{key:"clear",value:function(){dI(this,dB,[]),dx(this,dN).clear(),dx(this,dH).clear()}}],dj(n.prototype,t),e&&dj(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function dU(t){return(dU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dW(r.key),r)}}function dF(t,e,n){return(e=dW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dW(t){var e=function(t,e){if("object"!==dU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==dU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dU(e)?e:String(e)}var dz=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),dF(this,"hot",void 0),dF(this,"nestedHeaderSettingsGetter",void 0),dF(this,"layersCount",0),dF(this,"container",void 0),dF(this,"widthsMap",void 0),this.hot=t,this.nestedHeaderSettingsGetter=e,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}return t=[{key:"setLayersCount",value:function(t){return this.layersCount=t,this}},{key:"getWidth",value:function(t){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t))}},{key:"buildWidthsMap",value:function(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);var t=this.container.querySelectorAll("tr:last-of-type th"),e=t.length;this.widthsMap.clear();for(var n=0;n<e;n++){var r=this.hot.columnIndexMapper.getVisualFromRenderableIndex(n),o=this.hot.toPhysicalColumn(r);this.widthsMap.setValueAtIndex(o,t[n].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}},{key:"_buildGhostTable",value:function(t){for(var e=this.hot,n=e.rootDocument,r=e.columnIndexMapper,o=n.createDocumentFragment(),i=n.createElement("table"),a=!!this.hot.getSettings().dropdownMenu,l=r.getRenderableIndexesLength(),u=0;u<this.layersCount;u++){for(var s=n.createElement("tr"),c=0;c<l;c++){var f=r.getVisualFromRenderableIndex(c);null===f&&(f=c);var h=n.createElement("th"),d=this.nestedHeaderSettingsGetter(u,f);if(d&&(!d.isPlaceholder||d.isHidden)){var p=d.label;a&&(p+='<button class="changeType"></button>'),(0,A.uS)(h,p),h.colSpan=d.colspan,s.appendChild(h)}}i.appendChild(s)}o.appendChild(i),t.appendChild(o)}},{key:"clear",value:function(){this.widthsMap.clear(),this.container=null}}],dV(n.prototype,t),e&&dV(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function dY(t){return(dY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dG(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function dK(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dQ(r.key),r)}}function dq(){return(dq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dX(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function dZ(t,e){return(dZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d$(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dX(t){return(dX=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dJ(t,e,n){return(e=dQ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dQ(t){var e=function(t,e){if("object"!==dY(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==dY(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===dY(e)?e:String(e)}function d0(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function d1(t,e,n){var r=d3(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,r,n),n}function d2(t,e){var n=d3(t,e,"get");return n.get?n.get.call(t):n.value}function d3(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var d4="nestedHeaders",d8=new WeakMap,d9=new WeakMap,d6=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dZ(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=dX(i);if(e){var r=dX(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===dY(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return d$(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return d0(d$(t=o.call.apply(o,[this].concat(n))),d8,{writable:!0,value:new dL}),d0(d$(t),d9,{writable:!0,value:null}),dJ(d$(t),"ghostTable",new dz(t.hot,function(e,n){return t.getHeaderSettings(e,n)})),dJ(d$(t),"detectedOverlappedHeaders",!1),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[d4]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings().nestedHeaders;Array.isArray(e)&&Array.isArray(e[0])||(0,nG.ZK)((0,r1.e)(E||(E=dG(["Your Nested Headers plugin configuration is invalid. The settings has to be \n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"],["Your Nested Headers plugin configuration is invalid. The settings has to be\\x20\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"])))),this.addHook("init",function(){return t.onInit()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("afterOnCellMouseDown",function(){return t.onAfterOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterGetColumnHeaderRenderers",function(e){return t.onAfterGetColumnHeaderRenderers(e)}),this.addHook("modifyColWidth",function(){return t.onModifyColWidth.apply(t,arguments)}),this.addHook("modifyColumnHeaderValue",function(){return t.onModifyColumnHeaderValue.apply(t,arguments)}),this.addHook("beforeHighlightingColumnHeader",function(){return t.onBeforeHighlightingColumnHeader.apply(t,arguments)}),this.addHook("beforeCopy",function(){return t.onBeforeCopy.apply(t,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)}),dq(dX(i.prototype),"enablePlugin",this).call(this),this.updatePlugin()}}},{key:"updatePlugin",value:function(){var t=this;if(this.hot.view){var e=this.hot.getSettings().nestedHeaders;d2(this,d8).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=d2(this,d8).setState(e)),this.detectedOverlappedHeaders&&(0,nG.ZK)((0,r1.e)(M||(M=dG(["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \n                        is currently not supported."],["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\x20\n                        is currently not supported."])))),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach(function(e,n){d2(t,d8).triggerColumnModification(!0===e?"hide-column":"show-column",n)}),!d2(this,d9)&&this.enabled&&d1(this,d9,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(function(e){e.forEach(function(e){var n=e.op,r=e.index,o=e.newValue;"replace"===n&&d2(t,d8).triggerColumnModification(!0===o?"hide-column":"show-column",r)}),t.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),dq(dX(i.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.clearColspans(),d2(this,d8).clear(),d2(this,d9).unsubscribe(),d1(this,d9,null),this.ghostTable.clear(),dq(dX(i.prototype),"disablePlugin",this).call(this)}},{key:"getStateManager",value:function(){return d2(this,d8)}},{key:"getLayersCount",value:function(){return d2(this,d8).getLayersCount()}},{key:"getHeaderSettings",value:function(t,e){return d2(this,d8).getHeaderSettings(t,e)}},{key:"clearColspans",value:function(){if(this.hot.view)for(var t=this.hot.view._wt,e=t.getSetting("columnHeaders").length,n=t.wtTable.THEAD,r=t.wtOverlays.topOverlay.clone.wtTable.THEAD,o=t.wtOverlays.topInlineStartCornerOverlay?t.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,i=0;i<e;i++){var a=n.childNodes[i];if(!a)break;for(var l=r.childNodes[i],u=o?o.childNodes[i]:null,s=0,c=a.childNodes.length;s<c;s++)a.childNodes[s].removeAttribute("colspan"),(0,A.IV)(a.childNodes[s],"hiddenHeader"),l&&l.childNodes[s]&&(l.childNodes[s].removeAttribute("colspan"),(0,A.IV)(l.childNodes[s],"hiddenHeader")),o&&u&&u.childNodes[s]&&(u.childNodes[s].removeAttribute("colspan"),(0,A.IV)(u.childNodes[s],"hiddenHeader"))}}},{key:"headerRendererFactory",value:function(t){var e=this,n=this.hot.view._wt.getSetting("fixedColumnsStart");return function(r,o){var i=e.hot,a=i.columnIndexMapper,l=i.view,u=a.getVisualFromRenderableIndex(r);null===u&&(u=r),o.removeAttribute("colspan"),(0,A.IV)(o,"hiddenHeader");var s=null!==(h=d2(e,d8).getHeaderSettings(t,u))&&void 0!==h?h:{label:""},c=s.colspan,f=s.isHidden;if(s.isPlaceholder||f)(0,A.cn)(o,"hiddenHeader");else if(c>1){var h,d,p,y=l._wt.wtOverlays,g=null===(d=y.topInlineStartCornerOverlay)||void 0===d?void 0:d.clone.wtTable.THEAD.contains(o),v=null===(p=y.inlineStartOverlay)||void 0===p?void 0:p.clone.wtTable.THEAD.contains(o),m=g||v?Math.min(c,n-r):c;m>1&&o.setAttribute("colspan",m)}e.hot.view.appendColHeader(u,o,function(){return e.getColumnHeaderValue.apply(e,arguments)},t)}}},{key:"getColumnHeaderValue",value:function(t,e){var n,r=null!==(n=d2(this,d8).getHeaderSettings(e,t))&&void 0!==n?n:{},o=r.isHidden;return r.isPlaceholder||o?"":this.hot.getColHeader(t,e)}},{key:"onBeforeHighlightingColumnHeader",value:function(t,e,n){var r=d2(this,d8).getHeaderTreeNodeData(e,t);if(!r)return t;var o=n.classNames,i=n.columnCursor,a=n.selectionType,l=n.selectionWidth,u=d2(this,d8).getHeaderSettings(e,t),s=u.isRoot,c=u.colspan;if(a===hU.Nc){if(!s)return r.columnIndex}else a===hU.CD&&(c>l-i||!s)&&(o.length=0);return t}},{key:"onBeforeCopy",value:function(t,e,n){if(0!==n.columnHeadersCount)for(var r=0;r<e.length;r++){var o=e[r],i=o.startRow,a=o.startCol,l=o.endRow,u=o.endCol,s=l-i+1,c=a-u+1;if(i>=0||1===c)break;for(var f=a;f<=u;f++)for(var h=i;h<=l;h++){var d,p=s+h,y=f-a;0!==y&&!1===(null===(d=d2(this,d8).getHeaderTreeNodeData(h,f))||void 0===d?void 0:d.isRoot)&&(t[p][y]="")}}}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,r){this._getHeaderTreeNodeDataByCoords(e)&&(r.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){var n=this._getHeaderTreeNodeDataByCoords(e);if(n){var r=this.hot.selection,o=r.isSelected()?r.getSelectedRange().current():null,i=[],a=n.columnIndex,l=n.origColspan,u=!r.inInSelection(e);t.shiftKey&&o?e.col<o.from.col?i.push(o.getTopEndCorner().col,a,e.row):e.col>o.from.col?i.push(o.getTopStartCorner().col,a+l-1,e.row):i.push(a,a+l-1,e.row):((0,T.pW)(t)||(0,T.dO)(t)&&u)&&i.push(a,a+l-1,e.row),r.selectColumns.apply(r,i)}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,r){if(this.hot.view.isMouseDown()){var o,i=this._getHeaderTreeNodeDataByCoords(e);if(i){var a=i.columnIndex,l=i.origColspan,u=this.hot.getSelectedRangeLast(),s=u.getTopStartCorner(),c=u.getBottomEndCorner(),f=u.from;r.column=!0,r.cell=!0;var h=[];e.col<f.col?h.push(c.col,a):e.col>f.col?h.push(s.col,a+l-1):h.push(a,a+l-1),(o=this.hot).selectColumns.apply(o,h)}}}},{key:"onAfterGetColumnHeaderRenderers",value:function(t){t.length=0;for(var e=0;e<d2(this,d8).getLayersCount();e++)t.push(this.headerRendererFactory(e))}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){for(var e=d2(this,d8).getLayersCount(),n=t.startColumn,r=!!e,o=0;o<e;o++){var i=d2(this,d8).findLeftMostColumnIndex(o,t.startColumn),a=this.hot.columnIndexMapper.getRenderableFromVisualIndex(i);if(i>=0&&(r=!1),(0,t5.kE)(a)&&a<t.startColumn){n=a;break}}t.startColumn=r?d2(this,d8).getHeaderTreeNodeData(0,n).columnIndex:n}},{key:"onModifyColWidth",value:function(t,e){var n=this.ghostTable.getWidth(e);return t>n?t:n}},{key:"onModifyColumnHeaderValue",value:function(t,e,n){var r;return(null!==(r=d2(this,d8).getHeaderTreeNodeData(n,e))&&void 0!==r?r:{label:""}).label}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){d1(this,d8,null),null!==d2(this,d9)&&(d2(this,d9).unsubscribe(),d1(this,d9,null)),dq(dX(i.prototype),"destroy",this).call(this)}},{key:"_getHeaderTreeNodeDataByCoords",value:function(t){if(!(t.row>=0)&&!(t.col<0))return d2(this,d8).getHeaderTreeNodeData(t.row,t.col)}}],r=[{key:"PLUGIN_KEY",get:function(){return d4}},{key:"PLUGIN_PRIORITY",get:function(){return 280}}],n&&dK(i.prototype,n),r&&dK(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function d7(t){return function(t){if(Array.isArray(t))return d5(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return d5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d5(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pt(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pt(e)?e:String(e)}(r.key),r)}}var pn=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=e,this.data=null,this.plugin=t,this.parentReference=new WeakMap,this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}}return t=[{key:"setData",value:function(t){this.data=t}},{key:"getData",value:function(){return this.data}},{key:"getRawSourceData",value:function(){var t=null;return this.plugin.disableCoreAPIModifiers(),t=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),t}},{key:"updateWithData",value:function(t){this.setData(t),this.rewriteCache()}},{key:"rewriteCache",value:function(){var t=this;this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},(0,t5.q4)(0,this.data.length-1,function(e){t.cacheNode(t.data[e],0,null)})}},{key:"cacheNode",value:function(t,e,n){var r=this;this.cache.levels[e]||(this.cache.levels[e]=[],this.cache.levelCount+=1),this.cache.levels[e].push(t),this.cache.rows.push(t),this.cache.nodeInfo.set(t,{parent:n,row:this.cache.rows.length-1,level:e}),this.hasChildren(t)&&(0,F.Bk)(t.__children,function(n){r.cacheNode(n,e+1,t)})}},{key:"getDataObject",value:function(t){return null==t?null:this.cache.rows[t]}},{key:"readTreeNodes",value:function(t,e,n,r){var o=this,i=!1,a=e;if(isNaN(a)&&a.end)return a;var l=t;return(l||(l={__children:this.data},i=!0,a-=1),null!=n&&a===n)?{result:l,end:!0}:null!=r&&l===r?{result:a,end:!0}:(a+=1,l.__children&&(0,F.Bk)(l.__children,function(t){if(o.parentReference.set(t,i?null:l),isNaN(a=o.readTreeNodes(t,a,n,r))&&a.end)return!1}),a)}},{key:"mockParent",value:function(){var t=this.mockNode();return t.__children=this.data,t}},{key:"mockNode",value:function(){var t={};return(0,I._l)(this.data[0],function(e,n){t[n]=null}),t}},{key:"getRowIndex",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).row}},{key:"getRowIndexWithinParent",value:function(t){var e=null;e=isNaN(t)?t:this.getDataObject(t);var n=this.getRowParent(t);return null==n?this.data.indexOf(e):n.__children.indexOf(e)}},{key:"countAllRows",value:function(){var t={__children:this.data};return this.countChildren(t)}},{key:"countChildren",value:function(t){var e=this,n=0,r=t;return(isNaN(r)||(r=this.getDataObject(r)),r&&r.__children)?((0,F.Bk)(r.__children,function(t){n+=1,t.__children&&(n+=e.countChildren(t))}),n):0}},{key:"getRowParent",value:function(t){var e;return e=isNaN(t)?t:this.getDataObject(t),this.getRowObjectParent(e)}},{key:"getRowObjectParent",value:function(t){return t&&"object"===pt(t)?this.cache.nodeInfo.get(t).parent:null}},{key:"getRowLevel",value:function(t){var e=null;return(e=isNaN(t)?t:this.getDataObject(t))?this.getRowObjectLevel(e):null}},{key:"getRowObjectLevel",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).level}},{key:"hasChildren",value:function(t){var e=t;return isNaN(e)||(e=this.getDataObject(e)),!!(e.__children&&e.__children.length)}},{key:"isChild",value:function(t){return null!==this.getRowParent(t)}},{key:"getChild",value:function(t,e){var n;return(null===(n=t.__children)||void 0===n?void 0:n[e])||null}},{key:"isRowHighestLevel",value:function(t){return!this.isChild(t)}},{key:"isParent",value:function(t){var e,n=t;return isNaN(n)||(n=this.getDataObject(n)),n&&!!n.__children&&(null===(e=n.__children)||void 0===e?void 0:e.length)!==0}},{key:"addChild",value:function(t,e){var n=e;this.hot.runHooks("beforeAddChild",t,n);var r=null;t&&(r=this.getRowIndex(t)),this.hot.runHooks("beforeCreateRow",r+this.countChildren(t)+1,1);var o=t;t||(o=this.mockParent()),o.__children||(o.__children=[]),n||(n=this.mockNode()),o.__children.push(n),this.rewriteCache();var i=this.getRowIndex(n);this.hot.rowIndexMapper.insertIndexes(i,1),this.hot.runHooks("afterCreateRow",i,1),this.hot.runHooks("afterAddChild",t,n)}},{key:"addChildAtIndex",value:function(t,e,n){var r,o=n;if(o||(o=this.mockNode()),this.hot.runHooks("beforeAddChild",t,o,e),t){var i=this.getRowIndex(t)+e+1;this.hot.runHooks("beforeCreateRow",i,1),t.__children.splice(e,null,o),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(t),"__children",t.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(i,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",i,1),r=i}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",e,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),r=this.getRowIndex(this.data[e]);o=this.getDataObject(r),this.hot.runHooks("afterAddChild",t,o,e)}},{key:"addSibling",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",n=this.translateTrimmedRow(t),r=this.getRowParent(n),o=this.getRowIndexWithinParent(n);switch(e){case"below":this.addChildAtIndex(r,o+1,null);break;case"above":this.addChildAtIndex(r,o,null)}}},{key:"detachFromParent",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=null,o=[];Array.isArray(t)?((0,t5.q4)(t[0],t[2],function(t){var n=e.translateTrimmedRow(t);o.push(e.getDataObject(n))}),(0,t5.q4)(0,o.length-2,function(t){e.detachFromParent(o[t],!1)}),r=o[o.length-1]):r=t;var i=this.getRowIndex(r),a=this.countChildren(r),l=this.getRowIndexWithinParent(r),u=this.getRowParent(r),s=this.getRowParent(u),c=this.getRowIndex(s),f=null;if(this.hot.runHooks("beforeDetachChild",u,r),null!=l){var h=Array.from(Array(i+a+1).keys()).splice(-1*(a+1));if(this.hot.runHooks("beforeRemoveRow",i,a+1,h,this.plugin.pluginName),u.__children.splice(l,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",i,a+1,h,this.plugin.pluginName),s){f=c+this.countChildren(s);var d=this.getChild(s,this.countChildren(s)-1),p=this.getRowIndex(d);this.hot.runHooks("beforeCreateRow",p+1,a+1,this.plugin.pluginName),s.__children.push(r)}else f=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",f-2,a+1,this.plugin.pluginName),this.data.push(r)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",f-2,a+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",u,r,this.getRowIndex(r)),n&&this.hot.render()}},{key:"filterData",value:function(t,e,n){var r=this,o=[];(0,F.Bk)(n,function(t){o.push(r.getDataObject(t))}),(0,F.Bk)(o,function(t){var e=r.getRowIndexWithinParent(t),n=r.getRowParent(t);null===n?r.data.splice(e,1):n.__children.splice(e,1)}),this.rewriteCache()}},{key:"spliceData",value:function(t,e,n){var r,o,i=this.getDataObject(t-1),a=null,l=t;i&&i.__children&&0===i.__children.length?(a=i,l=0):t<this.countAllRows()&&(a=this.getRowParent(t),l=this.getRowIndexWithinParent(t)),a?n?(r=a.__children).splice.apply(r,[l,e].concat(d7(n))):a.__children.splice(l,e):n?(o=this.data).splice.apply(o,[l,e].concat(d7(n))):this.data.splice(l,e),this.rewriteCache()}},{key:"syncRowWithRawSource",value:function(t){var e=t,n=null;do null!==(n=this.getRowParent(n))&&(e=n);while(null!==n);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(e),"__children",e.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}},{key:"moveRow",value:function(t,e,n,r){var o=e===this.hot.countRows(),i=this.getRowParent(t),a=this.getRowIndexWithinParent(t),l=i.__children.slice(a,a+1),u=o?this.getRowParent(e-1):this.getRowParent(e);null==u&&(u=this.getRowParent(e-1)),null==u&&(u=this.getDataObject(e-1)),u?u.__children||(u.__children=[]):(u=this.getDataObject(e)).__children=[];var s=o||n||r?u.__children.length:this.getRowIndexWithinParent(e),c=i===u;u.__children.splice(s,0,l[0]),i.__children.splice(a+(t>e&&c?1:0),1),this.syncRowWithRawSource(i),c||this.syncRowWithRawSource(u)}},{key:"translateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(t):t}},{key:"untranslateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(t):t}}],pe(n.prototype,t),e&&pe(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pr(e)?e:String(e)}(r.key),r)}}var pi=(s=function t(e,n){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,t),this.hot=n,this.plugin=e},c&&po(s.prototype,c),f&&po(s,f),Object.defineProperty(s,"prototype",{writable:!1}),s);function pa(t){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pa(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pa(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pa(e)?e:String(e)}(r.key),r)}}function pu(t,e){return(pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ps(t){return(ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pu(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ps(i);if(e){var r=ps(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===pa(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsingUI=n.plugin.collapsingUI,n.rowHeaderWidthCache=null,n}return r=[{key:"CSS_CLASSES",get:function(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}}],n=[{key:"appendLevelIndicators",value:function(t,e){var n=this.hot.toPhysicalRow(t),r=this.dataManager.getRowLevel(n),o=this.dataManager.getDataObject(n),a=e.getElementsByTagName("DIV")[0],l=a.querySelector("span.rowHeader"),u=a.querySelectorAll('[class^="ht_nesting"]');if((0,F.Bk)(u,function(t){t&&a.removeChild(t)}),(0,A.cn)(e,i.CSS_CLASSES.indicatorContainer),r){var s=this.hot.rootDocument,c=l.cloneNode(!0);a.innerHTML="",(0,t5.q4)(0,r-1,function(){var t=s.createElement("SPAN");(0,A.cn)(t,i.CSS_CLASSES.emptyIndicator),a.appendChild(t)}),a.appendChild(c)}if(this.dataManager.hasChildren(o)){var f=this.hot.rootDocument.createElement("DIV");(0,A.cn)(e,i.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(n)?(0,A.cn)(f,"".concat(i.CSS_CLASSES.button," ").concat(i.CSS_CLASSES.expandButton)):(0,A.cn)(f,"".concat(i.CSS_CLASSES.button," ").concat(i.CSS_CLASSES.collapseButton)),a.appendChild(f)}}},{key:"updateRowHeaderWidth",value:function(t){var e=t;e||(e=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*e+25),this.hot.render()}}],pl(i.prototype,n),r&&pl(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(pi);function pf(t){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ph(t){return function(t){if(Array.isArray(t))return pd(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pd(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pf(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pf(e)?e:String(e)}(r.key),r)}}function py(t,e){return(py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pg(t){return(pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&py(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=pg(i);if(e){var r=pg(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===pf(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsedRows=[],n.collapsedRowsStash={stash:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.lastCollapsedRows=n.collapsedRows.slice(0),n.expandMultipleChildren(n.lastCollapsedRows,t)},shiftStash:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null==e&&(e=1/0),(0,F.Bk)(n.lastCollapsedRows,function(o,i){o>=t&&o<e&&(n.lastCollapsedRows[i]=o+r)})},applyStash:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.collapseMultipleChildren(n.lastCollapsedRows,t),n.lastCollapsedRows=void 0},trimStash:function(t,e){(0,t5.q4)(t,t+e-1,function(t){var e=n.lastCollapsedRows.indexOf(t);e>-1&&n.lastCollapsedRows.splice(e,1)})}},n}return n=[{key:"collapseChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=[],i=null,a=null,l=null;return isNaN(t)?(i=t,a=this.dataManager.getRowIndex(i)):(i=this.dataManager.getDataObject(t),a=t),this.dataManager.hasChildren(i)&&(0,F.Bk)(i.__children,function(t){o.push(e.dataManager.getRowIndex(t))}),l=this.collapseRows(o,!0,!1),r&&this.trimRows(l),n&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(a)&&this.collapsedRows.push(a),l}},{key:"collapseMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=[];(0,F.Bk)(t,function(t){o.push.apply(o,ph(e.collapseChildren(t,!1,!1)))}),r&&this.trimRows(o),n&&this.renderAndAdjust()}},{key:"collapseRow",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.collapseRows([t],e)}},{key:"collapseRows",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return(0,F.Bk)(t,function(t){o.push(t),n&&e.collapseChildRows(t,o)}),r&&this.trimRows(o),o}},{key:"collapseChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var o=this.dataManager.getDataObject(t);(0,F.Bk)(o.__children,function(t){var r=e.dataManager.getRowIndex(t);n.push(r),e.collapseChildRows(r,n)})}r&&this.trimRows(n)}},{key:"expandRow",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.expandRows([t],e)}},{key:"expandRows",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];return(0,F.Bk)(t,function(t){o.push(t),n&&e.expandChildRows(t,o)}),r&&this.untrimRows(o),o}},{key:"expandChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var o=this.dataManager.getDataObject(t);(0,F.Bk)(o.__children,function(t){if(!e.isAnyParentCollapsed(t)){var r=e.dataManager.getRowIndex(t);n.push(r),e.expandChildRows(r,n)}})}r&&this.untrimRows(n)}},{key:"expandChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=[],i=null,a=null,l=null;return isNaN(t)?(i=t,a=this.dataManager.getRowIndex(t)):(i=this.dataManager.getDataObject(t),a=t),this.collapsedRows.splice(this.collapsedRows.indexOf(a),1),this.dataManager.hasChildren(i)&&(0,F.Bk)(i.__children,function(t){var n=e.dataManager.getRowIndex(t);o.push(n)}),l=this.expandRows(o,!0,!1),r&&this.untrimRows(l),n&&this.renderAndAdjust(),l}},{key:"expandMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=[];(0,F.Bk)(t,function(t){o.push.apply(o,ph(e.expandChildren(t,!1,!1)))}),r&&this.untrimRows(o),n&&this.renderAndAdjust()}},{key:"collapseAll",value:function(){var t=this,e=this.dataManager.getData(),n=[];(0,F.Bk)(e,function(e){t.dataManager.hasChildren(e)&&n.push(e)}),this.collapseMultipleChildren(n),this.renderAndAdjust()}},{key:"expandAll",value:function(){var t=this,e=this.dataManager.getData(),n=[];(0,F.Bk)(e,function(e){t.dataManager.hasChildren(e)&&n.push(e)}),this.expandMultipleChildren(n),this.renderAndAdjust()}},{key:"trimRows",value:function(t){var e=this;this.hot.batchExecution(function(){(0,F.Bk)(t,function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}},{key:"untrimRows",value:function(t){var e=this;this.hot.batchExecution(function(){(0,F.Bk)(t,function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}},{key:"areChildrenCollapsed",value:function(t){var e=this,n=isNaN(t)?t:this.dataManager.getDataObject(t),r=!0;return null===n&&(n={__children:this.dataManager.data}),this.dataManager.hasChildren(n)&&(0,F.Bk)(n.__children,function(t){var n=e.dataManager.getRowIndex(t);if(!e.plugin.collapsedRowsMap.getValueAtIndex(n))return r=!1,!1}),r}},{key:"isAnyParentCollapsed",value:function(t){for(var e=t;null!==e;){e=this.dataManager.getRowParent(e);var n=this.dataManager.getRowIndex(e);if(this.collapsedRows.indexOf(n)>-1)return!0}return!1}},{key:"toggleState",value:function(t,e){if(!(e.col>=0)){var n=this.translateTrimmedRow(e.row);(0,A.pv)(t.target,pc.CSS_CLASSES.button)&&(this.areChildrenCollapsed(n)?this.expandChildren(n):this.collapseChildren(n),(0,T.mM)(t))}}},{key:"translateTrimmedRow",value:function(t){return this.hot.toPhysicalRow(t)}},{key:"untranslateTrimmedRow",value:function(t){return this.hot.toVisualRow(t)}},{key:"renderAndAdjust",value:function(){this.hot.render(),this.hot.view.adjustElementsSize()}}],pp(i.prototype,n),r&&pp(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(pi);function pm(t){return(pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pm(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pm(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pm(e)?e:String(e)}(r.key),r)}}function pw(t,e){return(pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pS(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pC(t){return(pC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pk=new WeakMap,pO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pw(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=pC(i);if(e){var r=pC(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===pm(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return pS(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,t,e),pk.set(pS(n),{row_above:function(t,e){var r=e[e.length-1];n.dataManager.addSibling(r.start.row,"above")},row_below:function(t,e){var r=e[e.length-1];n.dataManager.addSibling(r.start.row,"below")}}),n.dataManager=n.plugin.dataManager,n}return n=[{key:"appendOptions",value:function(t){var e=this,n=[{key:"add_child",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD)},callback:function(){var t=e.dataManager.translateTrimmedRow(e.hot.getSelectedLast()[0]),n=e.dataManager.getDataObject(t);e.dataManager.addChild(n)},disabled:function(){var t=e.hot.getSelectedLast();return!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{key:"detach_from_parent",name:function(){return this.getTranslatedPhrase(ov.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD)},callback:function(){e.dataManager.detachFromParent(e.hot.getSelectedLast())},disabled:function(){var t=e.hot.getSelectedLast(),n=e.dataManager.translateTrimmedRow(t[0]);return!e.dataManager.getRowParent(n)||!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{name:"---------"}];return(0,t5.q4)(0,t.items.length-1,function(e){if(0===e)return(0,F.Bk)(n,function(n,r){t.items.splice(e+r,0,n)}),!1}),this.modifyRowInsertingOptions(t)}},{key:"modifyRowInsertingOptions",value:function(t){var e=pk.get(this);return(0,t5.q4)(0,t.items.length-1,function(n){var r=e[t.items[n].key];null!=r&&(t.items[n].callback=r)}),t}}],pb(i.prototype,n),r&&pb(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(pi);function pR(t){return(pR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pP(t){return function(t){if(Array.isArray(t))return pE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pE(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pR(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pR(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pR(e)?e:String(e)}(r.key),r)}}var p_=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=t.hot,this.dataManager=t.dataManager,this.collapsingUI=t.collapsingUI}return t=[{key:"onBeforeRowMove",value:function(t,e,n,r){var o=this;if(this.displayAPICompatibilityWarning({rows:t,finalIndex:e,dropIndex:n,movePossible:r}))return!1;this.movedToCollapsed=!1;var i=n===this.hot.countRows(),a=i?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(n),l=!0,u=t.map(function(t){if(!l)return!1;var e=o.dataManager.translateTrimmedRow(t);return l=o.shouldAllowMoving(e,a),e}),s=-1===u.indexOf(a);if(!l||!s)return!1;var c=this.getBaseParent(u),f=this.getTargetParent(i,a);return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(f),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(u,a,c===f),this.moveRows(u,a,f),this.dataManager.rewriteCache(),this.moveCellsMeta(u,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",t,e,n,r,r&&this.isRowOrderChanged(t,e)),this.hot.render(),this.selectCells(t,n),!1}},{key:"displayAPICompatibilityWarning",value:function(t){var e=t.rows,n=t.finalIndex,r=t.dropIndex,o=t.movePossible,i=!1;return(0,W.o8)(r)&&((0,nG.ZK)((0,r1.e)(_||(_=Object.freeze(Object.defineProperties(["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows \n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."],{raw:{value:Object.freeze(["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\\x20\n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."])}}))))),this.hot.runHooks("afterRowMove",e,n,r,o,!1),i=!0),i}},{key:"shouldAllowMoving",value:function(t,e){return!(this.dataManager.isParent(t)||this.dataManager.isRowHighestLevel(t)||t===e||0===e)}},{key:"getBaseParent",value:function(t){return this.dataManager.getRowParent(t[0])}},{key:"getTargetParent",value:function(t,e){var n=this.dataManager.getRowParent(t?e-1:e);return null==n&&(n=this.dataManager.getRowParent(e-1)),n}},{key:"shiftCollapsibleParentsLocations",value:function(t,e,n){n||(Math.max.apply(Math,pP(t))<=e?this.collapsingUI.collapsedRowsStash.shiftStash(t[0],e,-1*t.length):this.collapsingUI.collapsedRowsStash.shiftStash(e,t[0],t.length))}},{key:"moveRows",value:function(t,e,n){var r=this,o=e===this.dataManager.getRowIndex(n)+this.dataManager.countChildren(n)+1;this.hot.batchRender(function(){t.forEach(function(t){r.dataManager.moveRow(t,e,r.movedToCollapsed,o)})})}},{key:"moveCellsMeta",value:function(t,e){var n,r=this,o=[],i=Math.max.apply(Math,pP(t))<e;t.forEach(function(t){o.push(r.hot.getCellMetaAtRow(t))}),this.hot.spliceCellsMeta(t[0],t.length),(n=this.hot).spliceCellsMeta.apply(n,[e-(i?o.length:0),0].concat(o))}},{key:"selectCells",value:function(t,e){var n=t.length,r=0,o=0,i=null,a=null;if(this.movedToCollapsed){var l=null;l=t[n-1]<e?this.dataManager.translateTrimmedRow(e-n):this.dataManager.translateTrimmedRow(e);var u=this.dataManager.getRowParent(null===l?this.hot.countSourceRows()-1:l-1),s=this.dataManager.getRowIndex(u);o=r=this.dataManager.untranslateTrimmedRow(s)}else t[n-1]<e?r=(o=e-1)-n+1:o=(r=e)+n-1;i=this.hot.selection,a=this.hot.countCols()-1,i.setRangeStart(this.hot._createCellCoords(r,0)),i.setRangeEnd(this.hot._createCellCoords(o,a),!0)}},{key:"isRowOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}}],pM(n.prototype,t),e&&pM(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function pj(t){return(pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pj(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pj(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pj(e)?e:String(e)}(r.key),r)}}function pI(){return(pI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pN(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function px(t,e){return(px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pD(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pN(t){return(pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pH="nestedRows",pB=new WeakMap,pL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&px(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=pN(i);if(e){var r=pN(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===pj(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return pD(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataManager=null,e.headersUI=null,e.collapsedRowsMap=null,pB.set(pD(e),{movedToCollapsed:!1,skipRender:null,skipCoreAPIModifiers:!1}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[pH]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new sy.n),this.dataManager=new pn(this,this.hot),this.collapsingUI=new pv(this,this.hot),this.headersUI=new pc(this,this.hot),this.contextMenuUI=new pO(this,this.hot),this.rowMoveController=new p_(this),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("beforeViewRender",function(){return t.onBeforeViewRender.apply(t,arguments)}),this.addHook("modifyRowData",function(){return t.onModifyRowData.apply(t,arguments)}),this.addHook("modifySourceLength",function(){return t.onModifySourceLength.apply(t,arguments)}),this.addHook("beforeDataSplice",function(){return t.onBeforeDataSplice.apply(t,arguments)}),this.addHook("filterData",function(){return t.onFilterData.apply(t,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetRowHeader",function(){return t.onAfterGetRowHeader.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeRemoveRow",function(){return t.onBeforeRemoveRow.apply(t,arguments)}),this.addHook("afterRemoveRow",function(){return t.onAfterRemoveRow.apply(t,arguments)}),this.addHook("beforeAddChild",function(){return t.onBeforeAddChild.apply(t,arguments)}),this.addHook("afterAddChild",function(){return t.onAfterAddChild.apply(t,arguments)}),this.addHook("beforeDetachChild",function(){return t.onBeforeDetachChild.apply(t,arguments)}),this.addHook("afterDetachChild",function(){return t.onAfterDetachChild.apply(t,arguments)}),this.addHook("modifyRowHeaderWidth",function(){return t.onModifyRowHeaderWidth.apply(t,arguments)}),this.addHook("afterCreateRow",function(){return t.onAfterCreateRow.apply(t,arguments)}),this.addHook("beforeRowMove",function(){return t.onBeforeRowMove.apply(t,arguments)}),this.addHook("beforeLoadData",function(e){return t.onBeforeLoadData(e)}),pI(pN(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),pI(pN(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin();var t=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(t),pI(pN(i.prototype),"updatePlugin",this).call(this)}},{key:"onBeforeRowMove",value:function(t,e,n,r){return this.rowMoveController.onBeforeRowMove(t,e,n,r)}},{key:"disableCoreAPIModifiers",value:function(){pB.get(this).skipCoreAPIModifiers=!0}},{key:"enableCoreAPIModifiers",value:function(){pB.get(this).skipCoreAPIModifiers=!1}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n){this.collapsingUI.toggleState(t,e,n)}},{key:"onModifyRowData",value:function(t){if(!pB.get(this).skipCoreAPIModifiers)return this.dataManager.getDataObject(t)}},{key:"onModifySourceLength",value:function(){if(!pB.get(this).skipCoreAPIModifiers)return this.dataManager.countAllRows()}},{key:"onBeforeDataSplice",value:function(t,e,n){return!!(pB.get(this).skipCoreAPIModifiers||this.dataManager.isRowHighestLevel(t))||(this.dataManager.spliceData(t,e,n),!1)}},{key:"onFilterData",value:function(t,e,n){var r=pB.get(this);return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(n[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(n[0],null,-1*e),this.dataManager.filterData(t,e,n),r.skipRender=!0,this.dataManager.getData().slice()}},{key:"onAfterContextMenuDefaultOptions",value:function(t){return this.contextMenuUI.appendOptions(t)}},{key:"onAfterGetRowHeader",value:function(t,e){this.headersUI.appendLevelIndicators(t,e)}},{key:"onModifyRowHeaderWidth",value:function(t){return this.headersUI.rowHeaderWidthCache||t}},{key:"onAfterRemoveRow",value:function(t,e,n,r){var o=this;if(r!==this.pluginName){var i=pB.get(this);setTimeout(function(){i.skipRender=null,o.headersUI.updateRowHeaderWidth(),o.collapsingUI.collapsedRowsStash.applyStash()},0)}}},{key:"onBeforeRemoveRow",value:function(t,e,n){var r=this,o=Array.from(n.reduce(function(t,e){if(r.dataManager.isParent(e)){var n=r.dataManager.getDataObject(e).__children;return t.add(e),Array.isArray(n)&&n.forEach(function(e){return t.add(r.dataManager.getRowIndex(e))}),t}return t.add(e)},new Set));n.length=0,n.push.apply(n,o)}},{key:"onBeforeAddChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterAddChild",value:function(t,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onBeforeDetachChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterDetachChild",value:function(t,e,n){this.collapsingUI.collapsedRowsStash.shiftStash(n,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onAfterCreateRow",value:function(){this.dataManager.rewriteCache()}},{key:"onAfterInit",value:function(){var t,e=Math.max.apply(Math,function(t){if(Array.isArray(t))return pA(t)}(t=this.dataManager.cache.levels)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pA(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());e>0&&this.headersUI.updateRowHeaderWidth(e)}},{key:"onBeforeViewRender",value:function(t,e){pB.get(this).skipRender&&(e.skipRender=!0)}},{key:"destroy",value:function(){pI(pN(i.prototype),"destroy",this).call(this)}},{key:"onBeforeLoadData",value:function(t){if(!(0,uT.Pj)(t)){(0,nG.vU)("The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled."),this.hot.getSettings()[pH]=!1,this.disablePlugin();return}this.dataManager.setData(t),this.dataManager.rewriteCache()}}],r=[{key:"PLUGIN_KEY",get:function(){return pH}},{key:"PLUGIN_PRIORITY",get:function(){return 300}}],n&&pT(i.prototype,n),r&&pT(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function pU(t){return(pU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pU(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pU(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pU(e)?e:String(e)}(r.key),r)}}var pF=function(){var t;function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.rootWindow=n,this.prefix=t,this.savedKeys=[],this.loadSavedKeys()}return pV(e.prototype,[{key:"saveValue",value:function(t,e){this.rootWindow.localStorage.setItem("".concat(this.prefix,"_").concat(t),JSON.stringify(e)),-1===this.savedKeys.indexOf(t)&&(this.savedKeys.push(t),this.saveSavedKeys())}},{key:"loadValue",value:function(t,e){var n=this.rootWindow.localStorage.getItem("".concat(this.prefix,"_").concat(void 0===t?e:t));return null===n?void 0:JSON.parse(n)}},{key:"reset",value:function(t){this.rootWindow.localStorage.removeItem("".concat(this.prefix,"_").concat(t))}},{key:"resetAll",value:function(){var t=this;(0,F.Bk)(this.savedKeys,function(e,n){t.rootWindow.localStorage.removeItem("".concat(t.prefix,"_").concat(t.savedKeys[n]))}),this.clearSavedKeys()}},{key:"loadSavedKeys",value:function(){var t=this.rootWindow.localStorage.getItem("".concat(this.prefix,"__persistentStateKeys")),e="string"==typeof t?JSON.parse(t):void 0;this.savedKeys=e||[]}},{key:"saveSavedKeys",value:function(){this.rootWindow.localStorage.setItem("".concat(this.prefix,"__persistentStateKeys"),JSON.stringify(this.savedKeys))}},{key:"clearSavedKeys",value:function(){this.savedKeys.length=0,this.saveSavedKeys()}}]),t&&pV(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function pW(t){return(pW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pz(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==pW(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pW(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pW(e)?e:String(e)}(r.key),r)}}function pY(){return(pY="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pK(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function pG(t,e){return(pG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pK(t){return(pK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tb.Z.getSingleton().register("persistentStateSave"),tb.Z.getSingleton().register("persistentStateLoad"),tb.Z.getSingleton().register("persistentStateReset");var pq="persistentState",pZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pG(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=pK(i);if(e){var r=pK(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===pW(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).storage=void 0,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[pq]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.storage||(this.storage=new pF(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",function(e,n){return t.saveValue(e,n)}),this.addHook("persistentStateLoad",function(e,n){return t.loadValue(e,n)}),this.addHook("persistentStateReset",function(){return t.resetValue()}),pY(pK(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.storage=void 0,pY(pK(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),pY(pK(i.prototype),"updatePlugin",this).call(this)}},{key:"loadValue",value:function(t,e){e.value=this.storage.loadValue(t)}},{key:"saveValue",value:function(t,e){this.storage.saveValue(t,e)}},{key:"resetValue",value:function(t){void 0===t?this.storage.resetAll():this.storage.reset(t)}},{key:"destroy",value:function(){pY(pK(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return pq}},{key:"PLUGIN_PRIORITY",get:function(){return 0}}],n&&pz(i.prototype,n),r&&pz(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function p$(t){return(p$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function pJ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==p$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p$(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p$(e)?e:String(e)}(r.key),r)}}function pQ(){return(pQ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p1(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function p0(t,e){return(p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p1(t){return(p1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p2="search",p3=function(t,e,n,r,o){t.getCellMeta(e,n).isSearchResult=o},p4=function(t,e,n){return!((0,W.o8)(t)||null===t||!t.toLocaleLowerCase||0===t.length||(0,W.o8)(e)||null===e)&&-1!==e.toString().toLocaleLowerCase(n.locale).indexOf(t.toLocaleLowerCase(n.locale))},p8=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p0(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=p1(i);if(e){var r=p1(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===p$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).callback=p3,e.queryMethod=p4,e.searchResultClass="htSearchResult",e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[p2]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[p2];this.updatePluginSettings(e),this.addHook("beforeRenderer",function(){return t.onBeforeRenderer.apply(t,arguments)}),pQ(p1(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t=this,e=function(){return t.onBeforeRenderer.apply(t,arguments)};this.hot.addHook("beforeRenderer",e),this.hot.addHookOnce("afterViewRender",function(){t.hot.removeHook("beforeRenderer",e)}),pQ(p1(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),pQ(p1(i.prototype),"updatePlugin",this).call(this)}},{key:"query",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),o=this.hot.countRows(),i=this.hot.countCols(),a=[],l=this.hot;return(0,t5.q4)(0,o-1,function(o){(0,t5.q4)(0,i-1,function(i){var u=e.hot.getDataAtCell(o,i),s=e.hot.getCellMeta(o,i),c=s.search.callback||n,f=(s.search.queryMethod||r)(t,u,s);f&&a.push({row:o,col:i,data:u}),c&&c(l,o,i,u,f)})}),a}},{key:"getCallback",value:function(){return this.callback}},{key:"setCallback",value:function(t){this.callback=t}},{key:"getQueryMethod",value:function(){return this.queryMethod}},{key:"setQueryMethod",value:function(t){this.queryMethod=t}},{key:"getSearchResultClass",value:function(){return this.searchResultClass}},{key:"setSearchResultClass",value:function(t){this.searchResultClass=t}},{key:"updatePluginSettings",value:function(t){(0,I.Kn)(t)&&(t.searchResultClass&&this.setSearchResultClass(t.searchResultClass),t.queryMethod&&this.setQueryMethod(t.queryMethod),t.callback&&this.setCallback(t.callback))}},{key:"onBeforeRenderer",value:function(t,e,n,r,o,i){var a,l=i.className||[],u=[];"string"==typeof l?u=l.split(" "):(a=u).push.apply(a,function(t){if(Array.isArray(t))return pX(t)}(l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(l)||function(t,e){if(t){if("string"==typeof t)return pX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pX(t,e)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.isEnabled()&&i.isSearchResult?u.includes(this.searchResultClass)||u.push("".concat(this.searchResultClass)):u.includes(this.searchResultClass)&&u.splice(u.indexOf(this.searchResultClass),1),i.className=u.join(" ")}},{key:"destroy",value:function(){pQ(p1(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return p2}},{key:"PLUGIN_PRIORITY",get:function(){return 190}}],n&&pJ(i.prototype,n),r&&pJ(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function p9(t){return(p9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==p9(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==p9(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===p9(e)?e:String(e)}(r.key),r)}}function p7(){return(p7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function p5(t,e){return(p5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p5(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=yt(i);if(e){var r=yt(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===p9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).scrollbars=[],e.clones=[],e.lockedCollection=!1,e.freezeOverlays=!1,e}return r=[{key:"PLUGIN_KEY",get:function(){return"touchScroll"}},{key:"PLUGIN_PRIORITY",get:function(){return 200}},{key:"SETTING_KEYS",get:function(){return!0}}],n=[{key:"isEnabled",value:function(){return(0,eD.JS)()}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterViewRender",function(){return t.onAfterViewRender()}),this.registerEvents(),p7(yt(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,p7(yt(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){p7(yt(i.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.addHook("beforeTouchScroll",function(){return t.onBeforeTouchScroll()}),this.addHook("afterMomentumScroll",function(){return t.onAfterMomentumScroll()})}},{key:"onAfterViewRender",value:function(){if(!this.lockedCollection){var t=this.hot.view._wt.wtOverlays,e=t.topOverlay,n=t.bottomOverlay,r=t.inlineStartOverlay,o=t.topInlineStartCornerOverlay,i=t.bottomInlineStartCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(e),n.clone&&this.scrollbars.push(n),this.scrollbars.push(r),o&&this.scrollbars.push(o),i&&i.clone&&this.scrollbars.push(i),this.clones=[],e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),r.needFullRender&&this.clones.push(r.clone.wtTable.holder.parentNode),o&&this.clones.push(o.clone.wtTable.holder.parentNode),i&&i.clone&&this.clones.push(i.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,(0,F.Bk)(this.clones,function(t){(0,A.cn)(t,"hide-tween")})}},{key:"onAfterMomentumScroll",value:function(){var t=this;this.freezeOverlays=!1,(0,F.Bk)(this.clones,function(t){(0,A.IV)(t,"hide-tween"),(0,A.cn)(t,"show-tween")}),this.hot._registerTimeout(function(){(0,F.Bk)(t.clones,function(t){(0,A.IV)(t,"show-tween")})},400),(0,F.Bk)(this.scrollbars,function(t){t.refresh(),t.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}}],p6(i.prototype,n),r&&p6(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==yn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==yn(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===yn(e)?e:String(e)}(r.key),r)}}function yo(){return(yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ya(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}}).apply(this,arguments)}function yi(t,e){return(yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ya(t){return(ya=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yl="trimRows",yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yi(t,e)}(i,t);var e,n,r,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ya(i);if(e){var r=ya(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===yn(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).trimmedRowsMap=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[yl]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new sy.n),this.trimmedRowsMap.addLocalHook("init",function(){return t.onMapInit()}),yo(ya(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){var t=this,e=this.hot.getSettings()[yl];Array.isArray(e)&&this.hot.batchExecution(function(){t.trimmedRowsMap.clear(),(0,F.Bk)(e,function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)})},!0),yo(ya(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("trimRows"),yo(ya(i.prototype),"disablePlugin",this).call(this)}},{key:"getTrimmedRows",value:function(){return this.trimmedRowsMap.getTrimmedIndexes()}},{key:"trimRows",value:function(t){var e=this,n=this.getTrimmedRows(),r=this.isValidConfig(t),o=n;r&&(o=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeTrimRow",n,o,r)&&(r&&this.hot.batchExecution(function(){(0,F.Bk)(t,function(t){e.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),this.hot.runHooks("afterTrimRow",n,o,r,r&&o.length>n.length))}},{key:"trimRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.trimRows(e)}},{key:"untrimRows",value:function(t){var e=this.getTrimmedRows(),n=this.isValidConfig(t),r=e,o=this.trimmedRowsMap.getValues().slice(),i=t.length>0;n&&i&&((0,F.Bk)(t,function(t){o[t]=!1}),r=(0,F.k$)(o,function(t,e,n){return e&&t.push(n),t},[])),!1!==this.hot.runHooks("beforeUntrimRow",e,r,n&&i)&&(n&&i&&this.trimmedRowsMap.setValues(o),this.hot.runHooks("afterUntrimRow",e,r,n&&i,n&&r.length<e.length))}},{key:"untrimRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.untrimRows(e)}},{key:"isTrimmed",value:function(t){return this.trimmedRowsMap.getValueAtIndex(t)||!1}},{key:"untrimAll",value:function(){this.untrimRows(this.getTrimmedRows())}},{key:"isValidConfig",value:function(t){var e=this.hot.countSourceRows();return t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"onMapInit",value:function(){var t=this,e=this.hot.getSettings()[yl];Array.isArray(e)&&this.hot.batchExecution(function(){(0,F.Bk)(e,function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}},{key:"destroy",value:function(){yo(ya(i.prototype),"destroy",this).call(this)}}],r=[{key:"PLUGIN_KEY",get:function(){return yl}},{key:"PLUGIN_PRIORITY",get:function(){return 330}}],n&&yr(i.prototype,n),r&&yr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(eI);function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yc(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function yf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==ys(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ys(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ys(e)?e:String(e)}(r.key),r)}}function yh(t,e,n){return e&&yf(t.prototype,e),n&&yf(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function yd(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yp(t,e)}function yp(t,e){return(yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=yg(t);if(e){var o=yg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===ys(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function yg(t){return(yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,s=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==e);u=!0);}catch(c){s=!0,o=c}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(t,e)||ym(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ym(t,e){if(t){if("string"==typeof t)return yb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yb(t,e)}}function yb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var yw="undoRedo";function yS(t){var e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,t.addHook("afterChange",function(n,r){var o=this,i=n&&n.length;if(i&&n.find(function(t){var e=yv(t,4);return e[2]!==e[3]})){var a=function(){var e=n.reduce(function(t,e){return t.push(function(t){if(Array.isArray(t))return yb(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||ym(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t},[]);(0,F.Bk)(e,function(e){e[1]=t.propToCol(e[1])});var r=i>1?o.getSelected():[[e[0][0],e[0][1]]];return new yS.ChangeAction(e,r)};e.done(a,r)}}),t.addHook("afterCreateRow",function(t,n,r){e.done(function(){return new yS.CreateRowAction(t,n)},r)}),t.addHook("beforeRemoveRow",function(n,r,o,i){var a=function(){var o=t.toPhysicalRow(n),i=(0,I.I8)(e.instance.getSourceData(o,0,o+r-1,e.instance.countSourceCols()-1));return new yS.RemoveRowAction(o,i,t.getSettings().fixedRowsBottom,t.getSettings().fixedRowsTop,t.rowIndexMapper.getIndexesSequence())};e.done(a,i)}),t.addHook("afterCreateCol",function(t,n,r){e.done(function(){return new yS.CreateColumnAction(t,n)},r)}),t.addHook("beforeRemoveCol",function(n,r,o,i){var a=function(){var o=e.instance.getSourceDataArray(),i=(e.instance.countCols()+n)%e.instance.countCols(),a=[],l=[],u=[];(0,t5.q4)(o.length-1,function(e){var n=[],l=o[e];(0,t5.q4)(i,i+(r-1),function(e){n.push(l[t.toPhysicalColumn(e)])}),a.push(n)}),(0,t5.q4)(r-1,function(e){u.push(t.toPhysicalColumn(i+e))}),Array.isArray(t.getSettings().colHeaders)&&(0,t5.q4)(r-1,function(e){l.push(t.getSettings().colHeaders[t.toPhysicalColumn(i+e)]||null)});var s=t.columnIndexMapper.getIndexesSequence(),c=t.rowIndexMapper.getIndexesSequence();return new yS.RemoveColumnAction(i,u,a,l,s,c,t.getSettings().fixedColumnsStart)};e.done(a,i)}),t.addHook("beforeCellAlignment",function(t,n,r,o){e.done(function(){return new yS.CellAlignmentAction(t,n,r,o)})}),t.addHook("beforeFilter",function(t){e.done(function(){return new yS.FiltersAction(t)})}),t.addHook("beforeRowMove",function(t,n){!1!==t&&e.done(function(){return new yS.RowMoveAction(t,n)})}),t.addHook("beforeMergeCells",function(n,r){r||e.done(function(){return new yS.MergeCellsAction(t,n)})}),t.addHook("afterUnmergeCells",function(n,r){r||e.done(function(){return new yS.UnmergeCellsAction(t,n)})}),t.addHook("afterInit",function(){e.init()})}yS.prototype.done=function(t,e){if(!this.ignoreNewActions&&"UndoRedo.undo"!==e&&"UndoRedo.redo"!==e&&"auto"!==e){var n=this.doneActions.slice();if(!1!==this.instance.runHooks("beforeUndoStackChange",n,e)){var r=t(),o=this.undoneActions.slice();this.doneActions.push(r),this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",o),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice())}}},yS.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",t);var e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",t,this.doneActions.slice());var n=(0,I.I8)(e);if(!1!==this.instance.runHooks("beforeUndo",n)){this.ignoreNewActions=!0;var r=this,o=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",o),e.undo(this.instance,function(){r.ignoreNewActions=!1,r.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",o,this.undoneActions.slice()),this.instance.runHooks("afterUndo",n)}}},yS.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",t);var e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",t,this.undoneActions.slice());var n=(0,I.I8)(e);if(!1!==this.instance.runHooks("beforeRedo",n)){this.ignoreNewActions=!0;var r=this,o=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",o),e.redo(this.instance,function(){r.ignoreNewActions=!1,r.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",o,this.doneActions.slice()),this.instance.runHooks("afterRedo",n)}}},yS.prototype.isUndoAvailable=function(){return this.doneActions.length>0},yS.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},yS.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},yS.prototype.isEnabled=function(){return this.enabled},yS.prototype.enable=function(){if(!this.isEnabled()){var t,e=this.instance;this.enabled=!0,(t=e).undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()},this.registerShortcuts(),e.addHook("afterChange",yO)}},yS.prototype.disable=function(){if(this.isEnabled()){var t,e=this.instance;this.enabled=!1,delete(t=e).undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo,this.unregisterShortcuts(),e.removeHook("afterChange",yO)}},yS.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},yS.Action=function(){},yS.Action.prototype.undo=function(){},yS.Action.prototype.redo=function(){},yS.ChangeAction=function(t,e){this.changes=t,this.selected=e,this.actionType="change"},(0,I.ED)(yS.ChangeAction,yS.Action),yS.ChangeAction.prototype.undo=function(t,e){for(var n=(0,I.I8)(this.changes),r=t.countEmptyRows(!0),o=t.countEmptyCols(!0),i=0,a=n.length;i<a;i++)n[i].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.undo");for(var l=0,u=n.length;l<u;l++){var s=yv(n[l],2),c=s[0],f=s[1];t.getSettings().minSpareRows&&c+1+t.getSettings().minSpareRows===t.countRows()&&r===t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(c+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&f+1+t.getSettings().minSpareCols===t.countCols()&&o===t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(f+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())}t.selectCells(this.selected,!1,!1)},yS.ChangeAction.prototype.redo=function(t,e){for(var n=(0,I.I8)(this.changes),r=0,o=n.length;r<o;r++)n[r].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.redo"),this.selected&&t.selectCells(this.selected,!1,!1)},yS.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},(0,I.ED)(yS.CreateRowAction,yS.Action),yS.CreateRowAction.prototype.undo=function(t,e){var n=t.countRows(),r=t.getSettings().minSpareRows;this.index>=n&&this.index-r<n&&(this.index-=r),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},yS.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},yS.RemoveRowAction=function(t,e,n,r,o){this.index=t,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=n,this.fixedRowsTop=r,this.rowIndexesSequence=o},(0,I.ED)(yS.RemoveRowAction,yS.Action),yS.RemoveRowAction.prototype.undo=function(t,e){var n=this,r=t.getSettings(),o=[];r.fixedRowsBottom=this.fixedRowsBottom,r.fixedRowsTop=this.fixedRowsTop,this.data.forEach(function(t,e){Object.keys(t).forEach(function(r){var i=parseInt(r,10);o.push([n.index+e,isNaN(i)?r:i,t[r]])})}),t.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),t.addHookOnce("afterViewRender",e),t.setSourceDataAtCell(o,null,null,"UndoRedo.undo"),t.rowIndexMapper.setIndexesSequence(this.rowIndexesSequence)},yS.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},yS.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},(0,I.ED)(yS.CreateColumnAction,yS.Action),yS.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},yS.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},yS.RemoveColumnAction=function(t,e,n,r,o,i,a){this.index=t,this.indexes=e,this.data=n,this.amount=this.data[0].length,this.headers=r,this.columnPositions=o.slice(0),this.rowPositions=i.slice(0),this.actionType="remove_col",this.fixedColumnsStart=a},(0,I.ED)(yS.RemoveColumnAction,yS.Action),yS.RemoveColumnAction.prototype.undo=function(t,e){var n=this;t.getSettings().fixedColumnsStart=this.fixedColumnsStart;for(var r=this.indexes.slice(0).sort(),o=function(t,e,o){return o[n.indexes.indexOf(r[e])]},i=this.data.length,a=[],l=0;l<i;l++)a.push((0,F.Sc)(this.data[l],o));var u=(0,F.Sc)(this.headers,o),s=[];t.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),(0,F.Bk)(t.getSourceDataArray(),function(t,e){(0,F.Bk)(r,function(n,r){t[n]=a[e][r],s.push([e,n,t[n]])})}),t.setSourceDataAtCell(s,void 0,void 0,"UndoRedo.undo"),t.columnIndexMapper.insertIndexes(r[0],r.length),void 0!==this.headers&&(0,F.Bk)(u,function(e,n){t.getSettings().colHeaders[r[n]]=e}),t.batchExecution(function(){t.rowIndexMapper.setIndexesSequence(n.rowPositions),t.columnIndexMapper.setIndexesSequence(n.columnPositions)},!0),t.addHookOnce("afterViewRender",e),t.render()},yS.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},yS.CellAlignmentAction=function(t,e,n,r){this.stateBefore=t,this.range=e,this.type=n,this.alignment=r},yS.CellAlignmentAction.prototype.undo=function(t,e){var n=this;(0,F.Bk)(this.range,function(e){e.forAll(function(e,r){e>=0&&r>=0&&t.setCellMeta(e,r,"className",n.stateBefore[e][r]||" htLeft")})}),t.addHookOnce("afterViewRender",e),t.render()},yS.CellAlignmentAction.prototype.redo=function(t,e){os(this.range,this.type,this.alignment,function(e,n){return t.getCellMeta(e,n)},function(e,n,r,o){return t.setCellMeta(e,n,r,o)}),t.addHookOnce("afterViewRender",e),t.render()},yS.FiltersAction=function(t){this.conditionsStack=t,this.actionType="filter"},(0,I.ED)(yS.FiltersAction,yS.Action),yS.FiltersAction.prototype.undo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},yS.FiltersAction.prototype.redo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};var yC=function(t){yd(n,t);var e=yy(n);function n(t,r){yc(this,n),(o=e.call(this)).cellRange=r;var o,i=o.cellRange.getTopStartCorner(),a=o.cellRange.getBottomEndCorner();return o.rangeData=t.getData(i.row,i.col,a.row,a.col),o}return yh(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0);var r=this.cellRange.getTopStartCorner();t.populateFromArray(r.row,r.col,this.rangeData,void 0,void 0,"MergeCells")}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange)}}]),n}(yS.Action);yS.MergeCellsAction=yC;var yk=function(t){yd(n,t);var e=yy(n);function n(t,r){var o;return yc(this,n),(o=e.call(this)).cellRange=r,o}return yh(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange,!0)}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0),t.render()}}]),n}(yS.Action);function yO(t,e){if("loadData"===e)return this.undoRedo.clear()}yS.UnmergeCellsAction=yk,yS.RowMoveAction=function(t,e){this.rows=t.slice(),this.finalIndex=e,this.actionType="row_move"},(0,I.ED)(yS.RowMoveAction,yS.Action),yS.RowMoveAction.prototype.undo=function(t,e){var n=this,r=t.getPlugin("manualRowMove"),o=[].concat(this.rows),i=o.filter(function(t){return t>n.finalIndex}),a=o.filter(function(t){return t<=n.finalIndex}),l=i.sort(function(t,e){return e-t}).concat(a.sort(function(t,e){return t-e}));t.addHookOnce("afterViewRender",e);for(var u=0;u<l.length;u+=1){var s=t.toVisualRow(l[u]);r.moveRow(s,l[u])}t.render(),t.deselectCell(),t.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},yS.RowMoveAction.prototype.redo=function(t,e){var n=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),n.moveRows(this.rows.slice(),this.finalIndex),t.render(),t.deselectCell(),t.selectRows(this.finalIndex,this.finalIndex+this.rows.length-1)},yS.prototype.init=function(){var t=this.instance.getSettings().undo;this.instance.undoRedo||(this.instance.undoRedo=this),void 0===t||t?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},yS.prototype.registerShortcuts=function(){var t=this,e=this.instance.getShortcutManager().getContext("grid"),n=function(t){return!t.altKey};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:function(){t.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:function(){t.redo()}}],{runOnlyIf:n,group:yw})},yS.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(yw)};var yR=tb.Z.getSingleton();function yP(){(0,eO.fo)(e2),(0,eO.fo)(no),(0,eO.fo)(nh),(0,eO.fo)(nY),(0,eO.fo)(re),(0,eO.fo)(rX),(0,eO.fo)(r5),(0,eO.fo)(oT),(0,eO.fo)(ig),(0,eO.fo)(ay),(0,eO.fo)(aN),(0,eO.fo)(az),(0,eO.fo)(aQ),(0,eO.fo)(ll),(0,eO.fo)(sO),(0,eO.fo)(s6),(0,eO.fo)(cy),(0,eO.fo)(cT),(0,eO.fo)(cW),(0,eO.fo)(fl),(0,eO.fo)(fv),(0,eO.fo)(fY),(0,eO.fo)(f2),(0,eO.fo)(hw),(0,eO.fo)(hI),(0,eO.fo)(hL),(0,eO.fo)(d6),(0,eO.fo)(pL),(0,eO.fo)(pZ),(0,eO.fo)(p8),(0,eO.fo)(ye),(0,eO.fo)(yu),(0,eO.fo)(yS)}function yE(){tX(),eo(),eh(),ek(),yP()}yR.add("afterUpdateSettings",function(){var t;null===(t=this.getPlugin("undoRedo"))||void 0===t||t.init()}),yR.register("beforeUndo"),yR.register("afterUndo"),yR.register("beforeRedo"),yR.register("afterRedo"),yS.PLUGIN_KEY="undoRedo",yS.SETTING_KEYS=!0}}]);