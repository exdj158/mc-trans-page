(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[218],{5444:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/words",function(){return n(3919)}])},3842:function(e,t,n){"use strict";var l=n(5893),r=n(7294);let a=r.forwardRef((e,t)=>{let[a,s]=(0,r.useState)(!0),o=(0,r.useRef)();return((0,r.useEffect)(()=>{a&&Promise.all([Promise.all([n.e(885),n.e(66),n.e(72),n.e(183),n.e(950),n.e(613)]).then(n.bind(n,7613)),Promise.all([n.e(885),n.e(66),n.e(72),n.e(183),n.e(950),n.e(947)]).then(n.bind(n,6947)),Promise.all([n.e(885),n.e(183),n.e(661)]).then(n.bind(n,4661))]).then(e=>{let[t,{registerAllModules:n},{registerLanguageDictionary:l,zhCN:r}]=e;o.current=t.HotTable,s(!1),n(),l(r)})},[a,s]),a||!o.current)?(0,l.jsx)("div",{}):(0,l.jsx)(o.current,{...e,ref:t})});t.Z=a},4263:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var l=n(9483),r=n.n(l),a=n(7294);let s=e=>null!==e&&"object"==typeof e;var o=n(8344);function i(){let[e,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)({});return(0,a.useEffect)(()=>{t(!0),r().getItem("vanilla_words").then(e=>{s(e)&&(l(e),t(!1)),(0,o.U2)("https://exdj158.github.io/mc-trans-page/vanilla_words.json").then(e=>{l(e.data),r().setItem("vanilla_words",e.data),t(!1)}).catch(()=>{t(!1)})})},[]),{vanillaWords:n,loading:e}}},3919:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var l=n(5893),r=n(7294),a=n(9334),s=n(4263),o=n(5611);n(2563);var i=n(3842),c=n(1384);function d(e){let{loading:t,vanillaWords:n,hotTableComponentRef:a}=e,s=(0,r.useMemo)(()=>Object.keys(n).map(e=>[e,n[e]]),[n]);return(0,l.jsx)(c.Z,{spinning:t,children:(0,l.jsx)("div",{className:"mt-8 w-full mb-4 min-h-[200px]",children:(0,l.jsx)(i.Z,{fragmentSelection:!0,disableVisualSelection:!0,className:"hot-table",language:o.Z.languageCode,ref:a,data:s,rowHeaders:!0,colHeaders:["英文(点击排序)","译名(点击排序)"],height:"auto",licenseKey:"non-commercial-and-evaluation",width:"100%",columns:[{readOnly:!0,width:"45%"},{readOnly:!0,width:"45%"}],columnSorting:!0,renderAllRows:!1,contextMenu:{items:{copy:{},deepl:{name:"deepl翻译",callback:function(e,t,n){let l=this.getSelected()||[],r=[];for(let a=0;a<l.length;a+=1){let s=l[a];r.push(this.getData(...s))}let o=r[0][0][0];window.open("https://www.deepl.com/zh/translator#en/zh/".concat(o))},disabled:function(){let e=this.getSelected()||[];if(e.length>1)return!0}},baidu:{name:"百度翻译",callback:function(e,t,n){let l=this.getSelected()||[],r=[];for(let a=0;a<l.length;a+=1){let s=l[a];r.push(this.getData(...s))}let o=r[0][0][0];window.open("https://fanyi.baidu.com/#en/zh/".concat(o))},disabled:function(){let e=this.getSelected()||[];if(e.length>1)return!0}}}},hiddenColumns:{indicators:!0},wordWrap:!0,allowEmpty:!0,stretchH:"all",cells:function(e,t){let n={};return n.className="",(0===this.instance.colToProp(t)||1===this.instance.colToProp(t))&&(n.className+="notranslate"),n},afterChange:function(e,t){if("loadData"!==t&&e&&(null==e?void 0:e.length)>0){let n=(null===this||void 0===this?void 0:this.getData())||[];null==e||e.forEach(e=>{let[t,l,r,a]=e,s=n[t];s[0]})}},afterColumnSort:function(e,t){var n;null===(n=this.getData())||void 0===n||n.forEach(e=>{let[t,n,l]=e})}})})})}var u=n(2362),h=n(1893),f=n.n(h),m=n(6201),p=n(7228);function g(e){let{vanillaWords:t}=e,n=function(e,t){var n,l,r,a;e.preventDefault();let s=(null===(n=e.target)||void 0===n?void 0:null===(l=n.files)||void 0===l?void 0:l[0])||(null==e?void 0:null===(r=e.dataTransfer)||void 0===r?void 0:null===(a=r.files)||void 0===a?void 0:a[0]);if(!s)return;let o=s.name,i=o.endsWith(".lang");if(!o.endsWith(".json")&&!i){u.Z.error("请上传json文件或lang文件!");return}let c=new FileReader;c.readAsText(s),c.onload=function(){let n=this.result;try{let l=i?(0,m.H)(n):f().parse(n,{keepWsc:!0});u.Z.success("文件".concat(o,"上传成功!")),t(o,l),e.target.type="text",e.target.type="file"}catch(r){u.Z.error("解析失败，文件必须为翻译文本所对应的json格式!")}}},r=function(e){n(e,(e,n)=>{let l=Object.keys(t);for(let r in n){let a=n[r],s=l.filter(e=>!!a.match(RegExp(e,"i")));s.length>0&&s.sort((e,t)=>e.length>t.length||e>t?-1:e<t?1:0).forEach(e=>{a=(0,p.O)(a,e,t[e],!0)}),n[r]=a}(0,m.y)(n,e,"text/json")})};return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsxs)("label",{onChange:r,onDrop:r,onDragOver:r,className:"flex justify-center w-full h-48 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 hover:bg-slate-100 focus:outline-none",children:[(0,l.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,l.jsxs)("span",{className:"font-medium text-gray-600",children:["上传",(0,l.jsx)("strong",{className:"text-red-500",children:"要替换单词"}),"的json/lang文件到此处"]})]}),(0,l.jsx)("input",{type:"file",name:"file_upload",accept:".json,.lang",className:"hidden"})]})})})}function w(){let e=(0,r.useRef)(null),{vanillaWords:t,loading:n}=(0,s.Z)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Z,{title:"标准词库表"}),(0,l.jsxs)("div",{className:"overflow-x-hidden mt-8",children:[(0,l.jsx)("div",{className:"py-4 px-2",children:(0,l.jsx)(g,{vanillaWords:t})}),(0,l.jsx)("div",{className:"p-2",children:(0,l.jsx)(d,{vanillaWords:t,loading:n,hotTableComponentRef:e})})]})]})}},6201:function(e,t,n){"use strict";async function l(e,t,n){if(!e)throw Error("保存失败，数据为空！");if(!t)throw Error("保存失败，未传文件名！");"object"==typeof e&&(e=JSON.stringify(e,void 0,4));let l=new Blob([e],{type:n}),r=document.createElement("a");r.download=t,r.href=window.URL.createObjectURL(l),r.dataset.downloadurl=[n,r.download,r.href].join(":");let a=new MouseEvent("click",{});return r.dispatchEvent(a),"保存成功"}n.d(t,{H:function(){return a},y:function(){return l}});let r={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([\w\.\-\_]+)\s*=\s*(.*?)\s*$/,comment:/^\s*;.*$/};function a(e){let t={},n=e.split(/\r\n|\r|\n/);return n.forEach(function(e){if(r.param.test(e)){let n=e.match(r.param);t[n[1]]=n[2]}}),t}},7228:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});let l=(e,t,n,l)=>e.replace(l?RegExp("\\s?\\b".concat(t,"\\b\\s?"),"gi"):RegExp("\\b".concat(t,"\\b"),"gi"),n)}},function(e){e.O(0,[874,161,817,432,774,888,179],function(){return e(e.s=5444)}),_N_E=e.O()}]);