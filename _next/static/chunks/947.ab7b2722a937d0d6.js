(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{4230:function(t,e,n){var o=n(1702),r=n(4488),i=n(1340),a=/"/g,l=o("".replace);t.exports=function(t,e,n,o){var s=i(r(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+l(i(o),a,"&quot;")+'"'),u+">"+s+"</"+e+">"}},1150:function(t){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},3429:function(t,e,n){var o=n(7293);t.exports=function(t){return o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})}},6977:function(t,e,n){"use strict";var o=n(2109),r=n(1702),i=n(9303),a=n(863),l=n(8415),s=n(7293),u=RangeError,c=String,f=Math.floor,h=r(l),d=r("".slice),p=r(1..toFixed),y=function(t,e,n){return 0===e?n:e%2==1?y(t,e-1,n*t):y(t*t,e/2,n)},g=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e},v=function(t,e,n){for(var o=-1,r=n;++o<6;)r+=e*t[o],t[o]=r%1e7,r=f(r/1e7)},m=function(t,e){for(var n=6,o=0;--n>=0;)o+=t[n],t[n]=f(o/e),o=o%e*1e7},b=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var o=c(t[e]);n=""===n?o:n+h("0",7-o.length)+o}return n};o({target:"Number",proto:!0,forced:s(function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)})||!s(function(){p({})})},{toFixed:function(t){var e,n,o,r,l=a(this),s=i(t),f=[0,0,0,0,0,0],p="",w="0";if(s<0||s>20)throw u("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return c(l);if(l<0&&(p="-",l=-l),l>1e-21){if(n=(e=g(l*y(2,69,1))-69)<0?l*y(2,-e,1):l/y(2,e,1),n*=4503599627370496,(e=52-e)>0){for(v(f,0,n),o=s;o>=7;)v(f,1e7,0),o-=7;for(v(f,y(10,o,1),0),o=e-1;o>=23;)m(f,8388608),o-=23;m(f,1<<o),v(f,1,1),m(f,2),w=b(f)}else v(f,0,n),v(f,1<<-e,0),w=b(f)+h("0",s)}return s>0?p+((r=w.length)<=s?"0."+h("0",s-r)+w:d(w,0,r-s)+"."+d(w,r-s)):p+w}})},7852:function(t,e,n){"use strict";var o,r=n(2109),i=n(1702),a=n(1236).f,l=n(7466),s=n(1340),u=n(3929),c=n(4488),f=n(4964),h=n(1913),d=i("".endsWith),p=i("".slice),y=Math.min,g=f("endsWith");r({target:"String",proto:!0,forced:!(!h&&!g&&(o=a(String.prototype,"endsWith"))&&!o.writable)&&!g},{endsWith:function(t){var e=s(c(this));u(t);var n=arguments.length>1?arguments[1]:void 0,o=e.length,r=void 0===n?o:y(l(n),o),i=s(t);return d?d(e,i,r):p(e,r-i.length,r)===i}})},9254:function(t,e,n){"use strict";var o=n(2109),r=n(4230);o({target:"String",proto:!0,forced:n(3429)("link")},{link:function(t){return r(this,"a","href",t)}})},4765:function(t,e,n){"use strict";var o=n(6916),r=n(7007),i=n(9670),a=n(8554),l=n(4488),s=n(1150),u=n(1340),c=n(8173),f=n(7651);r("search",function(t,e,n){return[function(e){var n=l(this),r=a(e)?void 0:c(e,t);return r?o(r,e,n):RegExp(e)[t](u(n))},function(t){var o=i(this),r=u(t),a=n(e,o,r);if(a.done)return a.value;var l=o.lastIndex;s(l,0)||(o.lastIndex=0);var c=f(o,r);return s(o.lastIndex,l)||(o.lastIndex=l),null===c?-1:c.index}]})},2098:function(t,e,n){"use strict";n(7710)("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},n(9320))},8478:function(t,e,n){n(2098)},4316:function(t){var e;e=function(){return(function t(e,n,o){function r(a,l){if(!n[a]){if(!e[a]){if(i)return i(a,!0);var s=Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){return r(e[a][1][t]||t)},u,u.exports,t,e,n,o)}return n[a].exports}for(var i=void 0,a=0;a<o.length;a++)r(o[a]);return r})({1:[function(t,e,n){!function(t){"use strict";var n,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,i=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function u(t){var e=0|t;return 0<t||t===e?e:e-1}function c(t){for(var e,n,o=1,r=t.length,i=t[0]+"";o<r;){for(n=14-(e=t[o++]+"").length;n--;e="0"+e);i+=e}for(r=i.length;48===i.charCodeAt(--r););return i.slice(0,r+1||1)}function f(t,e){var n,o,r=t.c,i=e.c,a=t.s,l=e.s,s=t.e,u=e.e;if(!a||!l)return null;if(n=r&&!r[0],o=i&&!i[0],n||o)return n?o?0:-l:a;if(a!=l)return a;if(n=a<0,o=s==u,!r||!i)return o?0:!r^n?1:-1;if(!o)return u<s^n?1:-1;for(l=(s=r.length)<(u=i.length)?s:u,a=0;a<l;a++)if(r[a]!=i[a])return r[a]>i[a]^n?1:-1;return s==u?0:u<s^n?1:-1}function h(t,e,n,o){if(t<e||n<t||t!==(t<0?r(t):i(t)))throw Error(a+(o||"Argument")+("number"==typeof t?t<e||n<t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function d(t){var e=t.c.length-1;return u(t.e/14)==e&&t.c[e]%2!=0}function p(t,e){return(1<t.length?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function y(t,e,n){var o,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(o=t.length)){for(r=n,e-=o;--e;r+=n);t+=r}else e<o&&(t=t.slice(0,e)+"."+t.slice(e));return t}(n=function t(e){var n,g,v,m,b,w,C,k,S,O=N.prototype={constructor:N,toString:null,valueOf:null},R=new N(1),P=20,E=4,M=-7,_=21,A=-1e7,I=1e7,T=!1,j=1,x=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function N(t,e){var n,r,a,s,u,c,f,d,p=this;if(!(p instanceof N))return new N(t,e);if(null==e){if(t instanceof N)return p.s=t.s,p.e=t.e,void(p.c=(t=t.c)?t.slice():t);if((c="number"==typeof t)&&0*t==0){if(p.s=1/t<0?(t=-t,-1):1,t===~~t){for(s=0,u=t;10<=u;u/=10,s++);return p.e=s,void(p.c=[t])}d=String(t)}else{if(d=String(t),!o.test(d))return v(p,d,c);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}-1<(s=d.indexOf("."))&&(d=d.replace(".","")),0<(u=d.search(/e/i))?(s<0&&(s=u),s+=+d.slice(u+1),d=d.substring(0,u)):s<0&&(s=d.length)}else{if(h(e,2,H.length,"Base"),d=String(t),10==e)return U(p=new N(t instanceof N?t:d),P+p.e+1,E);if(c="number"==typeof t){if(0*t!=0)return v(p,d,c,e);if(p.s=1/t<0?(d=d.slice(1),-1):1,N.DEBUG&&15<d.replace(/^0\.0*|\./,"").length)throw Error(l+t);c=!1}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=H.slice(0,e),s=u=0,f=d.length;u<f;u++)if(0>n.indexOf(r=d.charAt(u))){if("."==r){if(s<u){s=f;continue}}else if(!a&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){a=!0,u=-1,s=0;continue}return v(p,String(t),c,e)}-1<(s=(d=g(d,e,10,p.s)).indexOf("."))?d=d.replace(".",""):s=d.length}for(u=0;48===d.charCodeAt(u);u++);for(f=d.length;48===d.charCodeAt(--f););if(d=d.slice(u,++f)){if(f-=u,c&&N.DEBUG&&15<f&&(9007199254740991<t||t!==i(t)))throw Error(l+p.s*t);if(I<(s=s-u-1))p.c=p.e=null;else if(s<A)p.c=[p.e=0];else{if(p.e=s,p.c=[],u=(s+1)%14,s<0&&(u+=14),u<f){for(u&&p.c.push(+d.slice(0,u)),f-=14;u<f;)p.c.push(+d.slice(u,u+=14));u=14-(d=d.slice(u)).length}else u-=f;for(;u--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function B(t,e,n,o){var r,i,a,l,s;if(null==n?n=E:h(n,0,8),!t.c)return t.toString();if(r=t.c[0],a=t.e,null==e)s=c(t.c),s=1==o||2==o&&(a<=M||_<=a)?p(s,a):y(s,a,"0");else if(i=(t=U(new N(t),e,n)).e,l=(s=c(t.c)).length,1==o||2==o&&(e<=i||i<=M)){for(;l<e;s+="0",l++);s=p(s,i)}else if(e-=a,s=y(s,i,"0"),l<i+1){if(0<--e)for(s+=".";e--;s+="0");}else if(0<(e+=i-l))for(i+1==l&&(s+=".");e--;s+="0");return t.s<0&&r?"-"+s:s}function L(t,e){for(var n,o=1,r=new N(t[0]);o<t.length;o++){if(!(n=new N(t[o])).s){r=n;break}e.call(r,n)&&(r=n)}return r}function V(t,e,n){for(var o=1,r=e.length;!e[--r];e.pop());for(r=e[0];10<=r;r/=10,o++);return(n=o+14*n-1)>I?t.c=t.e=null:t.c=n<A?[t.e=0]:(t.e=n,e),t}function U(t,e,n,o){var a,l,u,c,f,h,d,p=t.c;if(p){t:{for(a=1,c=p[0];10<=c;c/=10,a++);if((l=e-a)<0)l+=14,u=e,d=(f=p[h=0])/s[a-u-1]%10|0;else if((h=r((l+1)/14))>=p.length){if(!o)break t;for(;p.length<=h;p.push(0));f=d=0,u=(l%=14)-14+(a=1)}else{for(f=c=p[h],a=1;10<=c;c/=10,a++);d=(u=(l%=14)-14+a)<0?0:f/s[a-u-1]%10|0}if(o=o||e<0||null!=p[h+1]||(u<0?f:f%s[a-u-1]),o=n<4?(d||o)&&(0==n||n==(t.s<0?3:2)):5<d||5==d&&(4==n||o||6==n&&(0<l?0<u?f/s[a-u]:0:p[h-1])%10&1||n==(t.s<0?8:7)),e<1||!p[0])return p.length=0,o?(e-=t.e+1,p[0]=s[(14-e%14)%14],t.e=-e||0):p[0]=t.e=0,t;if(0==l?(p.length=h,c=1,h--):(p.length=h+1,c=s[14-l],p[h]=0<u?i(f/s[a-u]%s[u])*c:0),o)for(;;){if(0==h){for(l=1,u=p[0];10<=u;u/=10,l++);for(u=p[0]+=c,c=1;10<=u;u/=10,c++);l!=c&&(t.e++,1e14==p[0]&&(p[0]=1));break}if(p[h]+=c,1e14!=p[h])break;p[h--]=0,c=1}for(l=p.length;0===p[--l];p.pop());}t.e>I?t.c=t.e=null:t.e<A&&(t.c=[t.e=0])}return t}function F(t){var e,n=t.e;return null===n?t.toString():(e=c(t.c),e=n<=M||_<=n?p(e,n):y(e,n,"0"),t.s<0?"-"+e:e)}return N.clone=t,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(h(n=t[e],0,1e9,e),P=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(h(n=t[e],0,8,e),E=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(h(n[0],-1e9,0,e),h(n[1],0,1e9,e),M=n[0],_=n[1]):(h(n,-1e9,1e9,e),M=-(_=n<0?-n:n))),t.hasOwnProperty(e="RANGE")){if((n=t[e])&&n.pop)h(n[0],-1e9,-1,e),h(n[1],1,1e9,e),A=n[0],I=n[1];else{if(h(n,-1e9,1e9,e),!n)throw Error(a+e+" cannot be zero: "+n);A=-(I=n<0?-n:n)}}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(a+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw T=!n,Error(a+"crypto unavailable");T=n}else T=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(h(n=t[e],0,9,e),j=n),t.hasOwnProperty(e="POW_PRECISION")&&(h(n=t[e],0,1e9,e),x=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(a+e+" not an object: "+n);D=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.$|[+-.\s]|(.).*\1/.test(n))throw Error(a+e+" invalid: "+n);H=n}}return{DECIMAL_PLACES:P,ROUNDING_MODE:E,EXPONENTIAL_AT:[M,_],RANGE:[A,I],CRYPTO:T,MODULO_MODE:j,POW_PRECISION:x,FORMAT:D,ALPHABET:H}},N.isBigNumber=function(t){return t instanceof N||t&&!0===t._isBigNumber||!1},N.maximum=N.max=function(){return L(arguments,O.lt)},N.minimum=N.min=function(){return L(arguments,O.gt)},N.random=(m=9007199254740992*Math.random()&2097151?function(){return i(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,o,l,u,c=0,f=[],d=new N(R);if(null==t?t=P:h(t,0,1e9),l=r(t/14),T){if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(l*=2));c<l;)9e15<=(u=131072*e[c]+(e[c+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),e[c]=n[0],e[c+1]=n[1]):(f.push(u%1e14),c+=2);c=l/2}else{if(!crypto.randomBytes)throw T=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(l*=7);c<l;)9e15<=(u=281474976710656*(31&e[c])+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])?crypto.randomBytes(7).copy(e,c):(f.push(u%1e14),c+=7);c=l/7}}if(!T)for(;c<l;)(u=m())<9e15&&(f[c++]=u%1e14);for(l=f[--c],t%=14,l&&t&&(u=s[14-t],f[c]=i(l/u)*u);0===f[c];f.pop(),c--);if(c<0)f=[o=0];else{for(o=-1;0===f[0];f.splice(0,1),o-=14);for(c=1,u=f[0];10<=u;u/=10,c++);c<14&&(o-=14-c)}return d.e=o,d.c=f,d}),N.sum=function(){for(var t=1,e=arguments,n=new N(e[0]);t<e.length;)n=n.plus(e[t++]);return n},g=function(){var t="0123456789";function e(t,e,n,o){for(var r,i,a=[0],l=0,s=t.length;l<s;){for(i=a.length;i--;a[i]*=e);for(a[0]+=o.indexOf(t.charAt(l++)),r=0;r<a.length;r++)a[r]>n-1&&(null==a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}return function(o,r,i,a,l){var s,u,f,h,d,p,g,v,m=o.indexOf("."),b=P,w=E;for(0<=m&&(h=x,x=0,o=o.replace(".",""),p=(v=new N(r)).pow(o.length-m),x=h,v.c=e(y(c(p.c),p.e,"0"),10,i,t),v.e=v.c.length),f=h=(g=e(o,r,i,l?(s=H,t):(s=t,H))).length;0==g[--h];g.pop());if(!g[0])return s.charAt(0);if(m<0?--f:(p.c=g,p.e=f,p.s=a,g=(p=n(p,v,b,w,i)).c,d=p.r,f=p.e),m=g[u=f+b+1],h=i/2,d=d||u<0||null!=g[u+1],d=w<4?(null!=m||d)&&(0==w||w==(p.s<0?3:2)):h<m||m==h&&(4==w||d||6==w&&1&g[u-1]||w==(p.s<0?8:7)),u<1||!g[0])o=d?y(s.charAt(1),-b,s.charAt(0)):s.charAt(0);else{if(g.length=u,d)for(--i;++g[--u]>i;)g[u]=0,u||(++f,g=[1].concat(g));for(h=g.length;!g[--h];);for(m=0,o="";m<=h;o+=s.charAt(g[m++]));o=y(o,f,s.charAt(0))}return o}}(),n=function(){function t(t,e,n){var o,r,i,a,l=0,s=t.length,u=e%1e7,c=e/1e7|0;for(t=t.slice();s--;)l=((r=u*(i=t[s]%1e7)+(o=c*i+(a=t[s]/1e7|0)*u)%1e7*1e7+l)/n|0)+(o/1e7|0)+c*a,t[s]=r%n;return l&&(t=[l].concat(t)),t}function e(t,e,n,o){var r,i;if(n!=o)i=o<n?1:-1;else for(r=i=0;r<n;r++)if(t[r]!=e[r]){i=t[r]>e[r]?1:-1;break}return i}function n(t,e,n,o){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*o+t[n]-e[n];for(;!t[0]&&1<t.length;t.splice(0,1));}return function(o,r,a,l,s){var c,f,h,d,p,y,g,v,m,b,w,C,k,S,O,R,P,E=o.s==r.s?1:-1,M=o.c,_=r.c;if(!(M&&M[0]&&_&&_[0]))return new N(o.s&&r.s&&(M?!_||M[0]!=_[0]:_)?M&&0==M[0]||!_?0*E:E/0:NaN);for(m=(v=new N(E)).c=[],E=a+(f=o.e-r.e)+1,s||(s=1e14,f=u(o.e/14)-u(r.e/14),E=E/14|0),h=0;_[h]==(M[h]||0);h++);if(_[h]>(M[h]||0)&&f--,E<0)m.push(1),d=!0;else{for(S=M.length,R=_.length,E+=2,1<(p=i(s/(_[h=0]+1)))&&(_=t(_,p,s),M=t(M,p,s),R=_.length,S=M.length),k=R,w=(b=M.slice(0,R)).length;w<R;b[w++]=0);P=[0].concat(P=_.slice()),O=_[0],_[1]>=s/2&&O++;do{if(p=0,(c=e(_,b,R,w))<0){if(C=b[0],R!=w&&(C=C*s+(b[1]||0)),1<(p=i(C/O)))for(s<=p&&(p=s-1),g=(y=t(_,p,s)).length,w=b.length;1==e(y,b,g,w);)p--,n(y,R<g?P:_,g,s),g=y.length,c=1;else 0==p&&(c=p=1),g=(y=_.slice()).length;if(g<w&&(y=[0].concat(y)),n(b,y,w,s),w=b.length,-1==c)for(;1>e(_,b,R,w);)p++,n(b,R<w?P:_,w,s),w=b.length}else 0===c&&(p++,b=[0]);m[h++]=p,b[0]?b[w++]=M[k]||0:(b=[M[k]],w=1)}while((k++<S||null!=b[0])&&E--);d=null!=b[0],m[0]||m.splice(0,1)}if(1e14==s){for(h=1,E=m[0];10<=E;E/=10,h++);U(v,a+(v.e=h+14*f-1)+1,l,d)}else v.e=f,v.r=+d;return v}}(),b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,w=/^([^.]+)\.$/,C=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g,v=function(t,e,n,o){var r,i=n?e:e.replace(S,"");if(k.test(i))t.s=isNaN(i)?null:i<0?-1:1,t.c=t.e=null;else{if(!n&&(i=i.replace(b,function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,o&&o!=r?t:e}),o&&(r=o,i=i.replace(w,"$1").replace(C,"0.$1")),e!=i))return new N(i,r);if(N.DEBUG)throw Error(a+"Not a"+(o?" base "+o:"")+" number: "+e);t.c=t.e=t.s=null}},O.absoluteValue=O.abs=function(){var t=new N(this);return t.s<0&&(t.s=1),t},O.comparedTo=function(t,e){return f(this,new N(t,e))},O.decimalPlaces=O.dp=function(t,e){var n,o,r;if(null!=t)return h(t,0,1e9),null==e?e=E:h(e,0,8),U(new N(this),t+this.e+1,e);if(!(n=this.c))return null;if(o=((r=n.length-1)-u(this.e/14))*14,r=n[r])for(;r%10==0;r/=10,o--);return o<0&&(o=0),o},O.dividedBy=O.div=function(t,e){return n(this,new N(t,e),P,E)},O.dividedToIntegerBy=O.idiv=function(t,e){return n(this,new N(t,e),0,1)},O.exponentiatedBy=O.pow=function(t,e){var n,o,l,s,u,c,f,h,p=this;if((t=new N(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+F(t));if(null!=e&&(e=new N(e)),u=14<t.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return h=new N(Math.pow(+F(p),u?2-d(t):+F(t))),e?h.mod(e):h;if(c=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new N(NaN);(o=!c&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(9<t.e&&(0<p.e||p.e<-1||(0==p.e?1<p.c[0]||u&&24e7<=p.c[1]:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return p.s<0&&d(t),s=-0,-1<p.e&&(s=1/s),new N(c?1/s:s);x&&(s=r(x/14+2))}for(f=u?(n=new N(.5),c&&(t.s=1),d(t)):(l=Math.abs(+F(t)))%2,h=new N(R);;){if(f){if(!(h=h.times(p)).c)break;s?h.c.length>s&&(h.c.length=s):o&&(h=h.mod(e))}if(l){if(0===(l=i(l/2)))break;f=l%2}else if(U(t=t.times(n),t.e+1,1),14<t.e)f=d(t);else{if(0==(l=+F(t)))break;f=l%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):o&&(p=p.mod(e))}return o?h:(c&&(h=R.div(h)),e?h.mod(e):s?U(h,x,E,void 0):h)},O.integerValue=function(t){var e=new N(this);return null==t?t=E:h(t,0,8),U(e,e.e+1,t)},O.isEqualTo=O.eq=function(t,e){return 0===f(this,new N(t,e))},O.isFinite=function(){return!!this.c},O.isGreaterThan=O.gt=function(t,e){return 0<f(this,new N(t,e))},O.isGreaterThanOrEqualTo=O.gte=function(t,e){return 1===(e=f(this,new N(t,e)))||0===e},O.isInteger=function(){return!!this.c&&u(this.e/14)>this.c.length-2},O.isLessThan=O.lt=function(t,e){return 0>f(this,new N(t,e))},O.isLessThanOrEqualTo=O.lte=function(t,e){return -1===(e=f(this,new N(t,e)))||0===e},O.isNaN=function(){return!this.s},O.isNegative=function(){return this.s<0},O.isPositive=function(){return 0<this.s},O.isZero=function(){return!!this.c&&0==this.c[0]},O.minus=function(t,e){var n,o,r,i,a=this.s;if(e=(t=new N(t,e)).s,!a||!e)return new N(NaN);if(a!=e)return t.s=-e,this.plus(t);var l=this.e/14,s=t.e/14,c=this.c,f=t.c;if(!l||!s){if(!c||!f)return c?(t.s=-e,t):new N(f?this:NaN);if(!c[0]||!f[0])return f[0]?(t.s=-e,t):new N(c[0]?this:-0)}if(l=u(l),s=u(s),c=c.slice(),a=l-s){for((r=(i=a<0)?(a=-a,c):(s=l,f)).reverse(),e=a;e--;r.push(0));r.reverse()}else for(o=(i=(a=c.length)<(e=f.length))?a:e,a=e=0;e<o;e++)if(c[e]!=f[e]){i=c[e]<f[e];break}if(i&&(r=c,c=f,f=r,t.s=-t.s),0<(e=(o=f.length)-(n=c.length)))for(;e--;c[n++]=0);for(e=1e14-1;a<o;){if(c[--o]<f[o]){for(n=o;n&&!c[--n];c[n]=e);--c[n],c[o]+=1e14}c[o]-=f[o]}for(;0==c[0];c.splice(0,1),--s);return c[0]?V(t,c,s):(t.s=3==E?-1:1,t.c=[t.e=0],t)},O.modulo=O.mod=function(t,e){var o,r;return t=new N(t,e),this.c&&t.s&&(!t.c||t.c[0])?t.c&&(!this.c||this.c[0])?(9==j?(r=t.s,t.s=1,o=n(this,t,0,3),t.s=r,o.s*=r):o=n(this,t,0,j),(t=this.minus(o.times(t))).c[0]||1!=j||(t.s=this.s),t):new N(this):new N(NaN)},O.multipliedBy=O.times=function(t,e){var n,o,r,i,a,l,s,c,f,h,d,p,y,g=this.c,v=(t=new N(t,e)).c;if(!(g&&v&&g[0]&&v[0]))return this.s&&t.s&&(!g||g[0]||v)&&(!v||v[0]||g)?(t.s*=this.s,g&&v?(t.c=[0],t.e=0):t.c=t.e=null):t.c=t.e=t.s=null,t;for(o=u(this.e/14)+u(t.e/14),t.s*=this.s,(s=g.length)<(h=v.length)&&(y=g,g=v,v=y,r=s,s=h,h=r),r=s+h,y=[];r--;y.push(0));for(r=h;0<=--r;){for(n=0,d=v[r]%1e7,p=v[r]/1e7|0,i=r+(a=s);r<i;)n=((c=d*(c=g[--a]%1e7)+(l=p*c+(f=g[a]/1e7|0)*d)%1e7*1e7+y[i]+n)/1e14|0)+(l/1e7|0)+p*f,y[i--]=c%1e14;y[i]=n}return n?++o:y.splice(0,1),V(t,y,o)},O.negated=function(){var t=new N(this);return t.s=-t.s||null,t},O.plus=function(t,e){var n,o=this.s;if(e=(t=new N(t,e)).s,!o||!e)return new N(NaN);if(o!=e)return t.s=-e,this.minus(t);var r=this.e/14,i=t.e/14,a=this.c,l=t.c;if(!r||!i){if(!a||!l)return new N(o/0);if(!a[0]||!l[0])return l[0]?t:new N(a[0]?this:0*o)}if(r=u(r),i=u(i),a=a.slice(),o=r-i){for((n=0<o?(i=r,l):(o=-o,a)).reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=o),o=0;e;)o=(a[--e]=a[e]+l[e]+o)/1e14|0,a[e]=1e14===a[e]?0:a[e]%1e14;return o&&(a=[o].concat(a),++i),V(t,a,i)},O.precision=O.sd=function(t,e){var n,o,r;if(null!=t&&!!t!==t)return h(t,1,1e9),null==e?e=E:h(e,0,8),U(new N(this),t,e);if(!(n=this.c))return null;if(o=14*(r=n.length-1)+1,r=n[r]){for(;r%10==0;r/=10,o--);for(r=n[0];10<=r;r/=10,o++);}return t&&this.e+1>o&&(o=this.e+1),o},O.shiftedBy=function(t){return h(t,-9007199254740991,9007199254740991),this.times("1e"+t)},O.squareRoot=O.sqrt=function(){var t,e,o,r,i,a=this.c,l=this.s,s=this.e,f=P+4,h=new N("0.5");if(1!==l||!a||!a[0])return new N(!l||l<0&&(!a||a[0])?NaN:a?this:1/0);if((o=0==(l=Math.sqrt(+F(this)))||l==1/0?(((e=c(a)).length+s)%2==0&&(e+="0"),l=Math.sqrt(+e),s=u((s+1)/2)-(s<0||s%2),new N(e=l==1/0?"1e"+s:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+s)):new N(l+"")).c[0]){for((l=(s=o.e)+f)<3&&(l=0);;)if(i=o,o=h.times(i.plus(n(this,i,f,1))),c(i.c).slice(0,l)===(e=c(o.c)).slice(0,l)){if(o.e<s&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(U(o,o.e+P+2,1),t=!o.times(o).eq(this));break}if(!r&&(U(i,i.e+P+2,0),i.times(i).eq(this))){o=i;break}f+=4,l+=4,r=1}}return U(o,o.e+P+1,E,t)},O.toExponential=function(t,e){return null!=t&&(h(t,0,1e9),t++),B(this,t,e,1)},O.toFixed=function(t,e){return null!=t&&(h(t,0,1e9),t=t+this.e+1),B(this,t,e)},O.toFormat=function(t,e,n){var o;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=D;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(o=this.toFixed(t,e),this.c){var r,i=o.split("."),l=+n.groupSize,s=+n.secondaryGroupSize,u=n.groupSeparator||"",c=i[0],f=i[1],h=this.s<0,d=h?c.slice(1):c,p=d.length;if(s&&(r=l,l=s,p-=s=r),0<l&&0<p){for(r=p%l||l,c=d.substr(0,r);r<p;r+=l)c+=u+d.substr(r,l);0<s&&(c+=u+d.slice(r)),h&&(c="-"+c)}o=f?c+(n.decimalSeparator||"")+((s=+n.fractionGroupSize)?f.replace(RegExp("\\d{"+s+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):c}return(n.prefix||"")+o+(n.suffix||"")},O.toFraction=function(t){var e,o,r,i,l,u,f,h,d,p,y,g,v=this.c;if(null!=t&&(!(f=new N(t)).isInteger()&&(f.c||1!==f.s)||f.lt(R)))throw Error(a+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+F(f));if(!v)return new N(this);for(e=new N(R),d=o=new N(R),r=h=new N(R),g=c(v),l=e.e=g.length-this.e-1,e.c[0]=s[(u=l%14)<0?14+u:u],t=!t||0<f.comparedTo(e)?0<l?e:d:f,u=I,I=1/0,f=new N(g),h.c[0]=0;p=n(f,e,0,1),1!=(i=o.plus(p.times(r))).comparedTo(t);)o=r,r=i,d=h.plus(p.times(i=d)),h=i,e=f.minus(p.times(i=e)),f=i;return i=n(t.minus(o),r,0,1),h=h.plus(i.times(d)),o=o.plus(i.times(r)),h.s=d.s=this.s,y=1>n(d,r,l*=2,E).minus(this).abs().comparedTo(n(h,o,l,E).minus(this).abs())?[d,r]:[h,o],I=u,y},O.toNumber=function(){return+F(this)},O.toPrecision=function(t,e){return null!=t&&h(t,1,1e9),B(this,t,e,2)},O.toString=function(t){var e,n=this,o=n.s,r=n.e;return null===r?o?(e="Infinity",o<0&&(e="-"+e)):e="NaN":(e=null==t?r<=M||_<=r?p(c(n.c),r):y(c(n.c),r,"0"):10===t?y(c((n=U(new N(n),P+r+1,E)).c),n.e,"0"):(h(t,2,H.length,"Base"),g(y(c(n.c),r,"0"),10,t,o,!0)),o<0&&n.c[0]&&(e="-"+e)),e},O.valueOf=O.toJSON=function(){return F(this)},O._isBigNumber=!0,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(O[Symbol.toStringTag]="BigNumber",O[Symbol.for("nodejs.util.inspect.custom")]=O.valueOf),null!=e&&N.set(e),N}()).default=n.BigNumber=n,void 0!==e&&e.exports?e.exports=n:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=n)}(this)},{}],2:[function(t,e,n){"use strict";e.exports={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){var e=t%10;return 1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th"},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}},{}],3:[function(t,e,n){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!e||n.length!==e);o=!0);}catch(s){r=!0,i=s}finally{try{o||null==l.return||l.return()}finally{if(r)throw i}}return n}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=t("./globalState"),i=t("./validating"),a=t("./parsing"),l=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s={general:{scale:1024,suffixes:l,marker:"bd"},binary:{scale:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],marker:"b"},decimal:{scale:1e3,suffixes:l,marker:"d"}},u={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1};function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if("string"==typeof e&&(e=a.parseFormat(e)),!i.validateFormat(e))return"ERROR: invalid format";var o=e.prefix||"",l=e.postfix||"",c=function(t,e,n){var o,i,a,l,c,h,y,g,v,m,b,w,C,k,S,O,R,P,E,M,_,A,I,T,j,x,D,H;switch(e.output){case"currency":return O=e=p(e,r.currentCurrencyDefaultFormat()),R=r.currentCurrency(),P=Object.assign({},u,O),E=void 0,M="",_=!!P.totalLength||!!P.forceAverage||P.average,A=O.currencyPosition||R.position,I=O.currencySymbol||R.symbol,P.spaceSeparated&&(M=" "),"infix"===A&&(E=M+I+M),T=d({instance:t,providedFormat:O,state:r,decimalSeparator:E}),"prefix"===A&&(T=t._value<0&&"sign"===P.negative?"-".concat(M).concat(I).concat(T.slice(1)):I+M+T),A&&"postfix"!==A||(T=T+(M=_?"":M)+I),T;case"percent":return x=(j=e=p(e,r.currentPercentageDefaultFormat())).prefixSymbol,D=d({instance:n(100*t._value),providedFormat:j,state:r}),H=Object.assign({},u,j),x?"%".concat(H.spaceSeparated?" ":"").concat(D):"".concat(D).concat(H.spaceSeparated?" ":"","%");case"byte":return m=s[(v=e=p(e,r.currentByteDefaultFormat())).base||"binary"],w=(b=f(t._value,m.suffixes,m.scale)).value,C=b.suffix,k=d({instance:n(w),providedFormat:v,state:r,defaults:r.currentByteDefaultFormat()}),S=r.currentAbbreviations(),"".concat(k).concat(S.spaced?" ":"").concat(C);case"time":return e=p(e,r.currentTimeDefaultFormat()),h=Math.floor(t._value/60/60),y=Math.floor((t._value-60*h*60)/60),g=Math.round(t._value-60*h*60-60*y),"".concat(h,":").concat(y<10?"0":"").concat(y,":").concat(g<10?"0":"").concat(g);case"ordinal":return o=e=p(e,r.currentOrdinalDefaultFormat()),i=r.currentOrdinal(),a=Object.assign({},u,o),l=d({instance:t,providedFormat:o,state:r}),c=i(t._value),"".concat(l).concat(a.spaceSeparated?" ":"").concat(c);default:return d({instance:t,providedFormat:e,numbro:n})}}(t,e,n);return(c=o+c)+l}function f(t,e,n){var o=e[0],r=Math.abs(t);if(n<=r){for(var i=1;i<e.length;++i){var a=Math.pow(n,i),l=Math.pow(n,i+1);if(a<=r&&r<l){o=e[i],t/=a;break}}o===e[0]&&(t/=Math.pow(n,e.length-1),o=e[e.length-1])}return{value:t,suffix:o}}function h(t){for(var e="",n=0;n<t;n++)e+="0";return e}function d(t){var e,n,i,a,l,s,c,f,d,p=t.instance,y=t.providedFormat,g=t.state,v=void 0===g?r:g,m=t.decimalSeparator,b=t.defaults,w=void 0===b?v.currentDefaults():b,C=p._value;if(0===C&&v.hasZeroFormat())return v.getZeroFormat();if(!isFinite(C))return C.toString();var k,S,O,R,P,E,M,_,A=Object.assign({},u,w,y),I=A.totalLength,T=I?0:A.characteristic,j=A.optionalCharacteristic,x=A.forceAverage,D=!!I||!!x||A.average,H=I?-1:D&&void 0===y.mantissa?0:A.mantissa,N=!I&&(void 0===y.optionalMantissa?-1===H:A.optionalMantissa),B=A.trimMantissa,L=A.thousandSeparated,V=A.spaceSeparated,U=A.negative,F=A.forceSign,W=A.exponential,z="";if(D){var Y,G,K,q,Z,$,X,J,Q,tt,te=(G=(Y={value:C,forceAverage:x,abbreviations:v.currentAbbreviations(),spaceSeparated:V,totalLength:I}).value,K=Y.forceAverage,q=Y.abbreviations,Z=Y.spaceSeparated,X=void 0===($=Y.totalLength)?0:$,J="",tt=-1,(Q=Math.abs(G))>=1e12&&!K||"trillion"===K?(J=q.trillion,G/=1e12):Q<1e12&&Q>=1e9&&!K||"billion"===K?(J=q.billion,G/=1e9):Q<1e9&&Q>=1e6&&!K||"million"===K?(J=q.million,G/=1e6):(Q<1e6&&Q>=1e3&&!K||"thousand"===K)&&(J=q.thousand,G/=1e3),J&&(J=(void 0!==Z&&Z?" ":"")+J),X&&(tt=Math.max(X-G.toString().split(".")[0].length,0)),{value:G,abbreviation:J,mantissaPrecision:tt});C=te.value,z+=te.abbreviation,I&&(H=te.mantissaPrecision)}if(W){var tn=(S=(k={value:C,characteristicPrecision:T}).value,R=void 0===(O=k.characteristicPrecision)?0:O,E=(P=o(S.toExponential().split("e"),2))[0],M=P[1],_=+E,R&&1<R&&(_*=Math.pow(10,R-1),M=0<=(M=+M-(R-1))?"+".concat(M):M),{value:_,abbreviation:"e".concat(M)});C=tn.value,z=tn.abbreviation+z}var to,tr,ti=function(t,e,n,r,i){if(-1===r)return t;var a=-1!==e.toString().indexOf("e")?function(t,e){var n=t.toString(),r=o(n.split("e"),2),i=r[0],a=r[1],l=o(i.split("."),2),s=l[0],u=l[1],c=void 0===u?"":u;if(0<+a)n=s+c+h(a-c.length);else{var f=".";f=0>+s?"-0".concat(f):"0".concat(f);var d=(h(-a-1)+Math.abs(s)+c).substr(0,e);d.length<e&&(d+=h(e-d.length)),n=f+d}return 0<+a&&0<e&&(n+=".".concat(h(e))),n}(e,r):(Math.round(+"".concat(e,"e+").concat(r))/Math.pow(10,r)).toFixed(r),l=o(a.toString().split("."),2),s=l[0],u=l[1],c=void 0===u?"":u;if(c.match(/^0+$/)&&(n||i))return s;var f=c.match(/0+$/);return i&&f?"".concat(s,".").concat(c.toString().slice(0,f.index)):a.toString()}(C.toString(),C,N,H,B);return e=ti=function(t,e,n,r){var i=t,a=o(i.toString().split("."),2),l=a[0],s=a[1];if(l.match(/^-?0$/)&&n)return s?"".concat(l.replace("0",""),".").concat(s):l.replace("0","");if(l.length<r)for(var u=r-l.length,c=0;c<u;c++)i="0".concat(i);return i.toString()}(ti,0,j,T),n=C,i=m,l=(a=v.currentDelimiters()).thousands,i=i||a.decimal,s=a.thousandsSize||3,f=(c=e.toString()).split(".")[0],d=c.split(".")[1],L&&(n<0&&(f=f.slice(1)),(function(t,e){for(var n=[],o=0,r=t;0<r;r--)o===e&&(n.unshift(r),o=0),o++;return n})(f.length,s).forEach(function(t,e){f=f.slice(0,t+e)+l+f.slice(t+e)}),n<0&&(f="-".concat(f))),ti=c=d?f+i+d:f,(D||W)&&(ti+=z),(F||C<0)&&(to=ti,ti=0===(tr=C)?to:0==+to?to.replace("-",""):0<tr?"+".concat(to):"sign"===U?to:"(".concat(to.replace("-",""),")")),ti}function p(t,e){if(!t)return e;var n=Object.keys(t);return 1===n.length&&"output"===n[0]?e:t}e.exports=function(t){return{format:function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return c.apply(void 0,n.concat([t]))},getByteUnit:function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return(function(t){var e=s.general;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getBinaryByteUnit:function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return(function(t){var e=s.binary;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},getDecimalByteUnit:function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return(function(t){var e=s.decimal;return f(t._value,e.suffixes,e.scale).suffix}).apply(void 0,n.concat([t]))},formatOrDefault:p}}},{"./globalState":4,"./parsing":8,"./validating":10}],4:[function(t,e,n){"use strict";var o=t("./en-US"),r=t("./validating"),i=t("./parsing"),a={},l=void 0,s={},u=null,c={};function f(){return s[l]}a.languages=function(){return Object.assign({},s)},a.currentLanguage=function(){return l},a.currentCurrency=function(){return f().currency},a.currentAbbreviations=function(){return f().abbreviations},a.currentDelimiters=function(){return f().delimiters},a.currentOrdinal=function(){return f().ordinal},a.currentDefaults=function(){return Object.assign({},f().defaults,c)},a.currentOrdinalDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().ordinalFormat)},a.currentByteDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().byteFormat)},a.currentPercentageDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().percentageFormat)},a.currentCurrencyDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().currencyFormat)},a.currentTimeDefaultFormat=function(){return Object.assign({},a.currentDefaults(),f().timeFormat)},a.setDefaults=function(t){t=i.parseFormat(t),r.validateFormat(t)&&(c=t)},a.getZeroFormat=function(){return u},a.setZeroFormat=function(t){return u="string"==typeof t?t:null},a.hasZeroFormat=function(){return null!==u},a.languageData=function(t){if(t){if(s[t])return s[t];throw Error('Unknown tag "'.concat(t,'"'))}return f()},a.registerLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!r.validateLanguage(t))throw Error("Invalid language data");s[t.languageTag]=t,e&&(l=t.languageTag)},a.setLanguage=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.languageTag;if(!s[t]){var n=t.split("-")[0],r=Object.keys(s).find(function(t){return t.split("-")[0]===n});return s[r]?void(l=r):void(l=e)}l=t},a.registerLanguage(o),l=o.languageTag,e.exports=a},{"./en-US":2,"./parsing":8,"./validating":10}],5:[function(t,e,n){"use strict";e.exports=function(e){return{loadLanguagesInNode:function(n){n.forEach(function(n){var o=void 0;try{o=t("../languages/".concat(n))}catch(r){console.error('Unable to load "'.concat(n,'". No matching language file found.'))}o&&e.registerLanguage(o)})}}}},{}],6:[function(t,e,n){"use strict";var o=t("bignumber.js");function r(t,e,n){var r=new o(t._value),i=e;return n.isNumbro(e)&&(i=e._value),i=new o(i),t._value=r.minus(i).toNumber(),t}e.exports=function(t){return{add:function(e,n){var r,i,a;return i=new o((r=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new o(a),r._value=i.plus(a).toNumber(),r},subtract:function(e,n){return r(e,n,t)},multiply:function(e,n){var r,i,a;return i=new o((r=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new o(a),r._value=i.times(a).toNumber(),r},divide:function(e,n){var r,i,a;return i=new o((r=e)._value),a=n,t.isNumbro(n)&&(a=n._value),a=new o(a),r._value=i.dividedBy(a).toNumber(),r},set:function(e,n){var o,r;return o=e,r=n,t.isNumbro(n)&&(r=n._value),o._value=r,o},difference:function(e,n){var o;return r(o=t(e._value),n,t),Math.abs(o._value)}}}},{"bignumber.js":1}],7:[function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=t("./globalState"),i=t("./validating"),a=t("./loading")(d),l=t("./unformatting"),s=t("./formatting")(d),u=t("./manipulating")(d),c=t("./parsing"),f=function(){var t,e;function n(t){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,n),this._value=t}return t=[{key:"clone",value:function(){return d(this._value)}},{key:"format",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return s.format(this,t)}},{key:"formatCurrency",value:function(t){return"string"==typeof t&&(t=c.parseFormat(t)),(t=s.formatOrDefault(t,r.currentCurrencyDefaultFormat())).output="currency",s.format(this,t)}},{key:"formatTime",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.output="time",s.format(this,t)}},{key:"binaryByteUnits",value:function(){return s.getBinaryByteUnit(this)}},{key:"decimalByteUnits",value:function(){return s.getDecimalByteUnit(this)}},{key:"byteUnits",value:function(){return s.getByteUnit(this)}},{key:"difference",value:function(t){return u.difference(this,t)}},{key:"add",value:function(t){return u.add(this,t)}},{key:"subtract",value:function(t){return u.subtract(this,t)}},{key:"multiply",value:function(t){return u.multiply(this,t)}},{key:"divide",value:function(t){return u.divide(this,t)}},{key:"set",value:function(t){return u.set(this,h(t))}},{key:"value",value:function(){return this._value}},{key:"valueOf",value:function(){return this._value}}],o(n.prototype,t),e&&o(n,e),n}();function h(t){var e=t;return d.isNumbro(t)?e=t._value:"string"==typeof t?e=d.unformat(t):isNaN(t)&&(e=NaN),e}function d(t){return new f(h(t))}d.version="2.1.2",d.isNumbro=function(t){return t instanceof f},d.language=r.currentLanguage,d.registerLanguage=r.registerLanguage,d.setLanguage=r.setLanguage,d.languages=r.languages,d.languageData=r.languageData,d.zeroFormat=r.setZeroFormat,d.defaultFormat=r.currentDefaults,d.setDefaults=r.setDefaults,d.defaultCurrencyFormat=r.currentCurrencyDefaultFormat,d.validate=i.validate,d.loadLanguagesInNode=a.loadLanguagesInNode,d.unformat=l.unformat,e.exports=d},{"./formatting":3,"./globalState":4,"./loading":5,"./manipulating":6,"./parsing":8,"./unformatting":9,"./validating":10}],8:[function(t,e,n){"use strict";e.exports={parseFormat:function(t){var e,n,o,r,i,a,l,s,u,c,f,h,d,p,y,g,v,m,b,w,C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"!=typeof t?t:(n=C,t=(o=(e=t).match(/^{([^}]*)}/))?(n.prefix=o[1],e.slice(o[0].length)):e,i=C,function(t,e){if(-1===t.indexOf("$")){if(-1===t.indexOf("%"))return -1!==t.indexOf("bd")?(e.output="byte",e.base="general"):-1!==t.indexOf("b")?(e.output="byte",e.base="binary"):-1!==t.indexOf("d")?(e.output="byte",e.base="decimal"):-1===t.indexOf(":")?-1!==t.indexOf("o")&&(e.output="ordinal"):e.output="time";e.output="percent"}else e.output="currency"}(t=(a=(r=t).match(/{([^}]*)}$/))?(i.postfix=a[1],r.slice(0,-a[0].length)):r,C),l=C,(s=t.match(/[1-9]+[0-9]*/))&&(l.totalLength=+s[0]),u=C,(c=t.split(".")[0].match(/0+/))&&(u.characteristic=c[0].length),function(t,e){if(-1!==t.indexOf(".")){var n=t.split(".")[0];e.optionalCharacteristic=-1===n.indexOf("0")}}(t,C),f=C,-1!==t.indexOf("a")&&(f.average=!0),d=C,-1!==(h=t).indexOf("K")?d.forceAverage="thousand":-1!==h.indexOf("M")?d.forceAverage="million":-1!==h.indexOf("B")?d.forceAverage="billion":-1!==h.indexOf("T")&&(d.forceAverage="trillion"),function(t,e){var n=t.split(".")[1];if(n){var o=n.match(/0+/);o&&(e.mantissa=o[0].length)}}(t,C),y=C,(p=t).match(/\[\.]/)?y.optionalMantissa=!0:p.match(/\./)&&(y.optionalMantissa=!1),g=C,-1!==t.indexOf(",")&&(g.thousandSeparated=!0),v=C,-1!==t.indexOf(" ")&&(v.spaceSeparated=!0),b=C,(m=t).match(/^\+?\([^)]*\)$/)&&(b.negative="parenthesis"),m.match(/^\+?-/)&&(b.negative="sign"),w=C,t.match(/^\+/)&&(w.forceSign=!0),C)}}},{}],9:[function(t,e,n){"use strict";var o=[{key:"ZiB",factor:11805916207174113e5},{key:"ZB",factor:1e21},{key:"YiB",factor:12089258196146292e8},{key:"YB",factor:1e24},{key:"TiB",factor:1099511627776},{key:"TB",factor:1e12},{key:"PiB",factor:0x4000000000000},{key:"PB",factor:1e15},{key:"MiB",factor:1048576},{key:"MB",factor:1e6},{key:"KiB",factor:1024},{key:"KB",factor:1e3},{key:"GiB",factor:1073741824},{key:"GB",factor:1e9},{key:"EiB",factor:0x1000000000000000},{key:"EB",factor:1e18},{key:"B",factor:1}];function r(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}e.exports={unformat:function(e,n){var i,a,l,s=t("./globalState"),u=s.currentDelimiters(),c=s.currentCurrency().symbol,f=s.currentOrdinal(),h=s.getZeroFormat(),d=s.currentAbbreviations(),p=void 0;if("string"==typeof e)p=!function(t,e){if(!t.indexOf(":")||":"===e.thousands)return!1;var n=t.split(":");if(3!==n.length)return!1;var o=+n[0],r=+n[1],i=+n[2];return!isNaN(o)&&!isNaN(r)&&!isNaN(i)}(e,u)?function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length?arguments[3]:void 0,a=4<arguments.length?arguments[4]:void 0,l=5<arguments.length?arguments[5]:void 0,s=6<arguments.length?arguments[6]:void 0;if(""!==t)return t===a?0:function t(e,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",a=3<arguments.length?arguments[3]:void 0,l=4<arguments.length?arguments[4]:void 0,s=5<arguments.length?arguments[5]:void 0,u=6<arguments.length?arguments[6]:void 0;if(!isNaN(+e))return+e;var c="",f=e.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(f!==e)return -1*t(f,n,i,a,l,s,u);for(var h=0;h<o.length;h++){var d=o[h];if((c=e.replace(d.key,""))!==e)return t(c,n,i,a,l,s,u)*d.factor}if((c=e.replace("%",""))!==e)return t(c,n,i,a,l,s,u)/100;var p=parseFloat(e);if(!isNaN(p)){var y=a(p);if(y&&"."!==y&&(c=e.replace(RegExp("".concat(r(y),"$")),""))!==e)return t(c,n,i,a,l,s,u);var g={};Object.keys(s).forEach(function(t){g[s[t]]=t});for(var v=Object.keys(g).sort().reverse(),m=v.length,b=0;b<m;b++){var w=v[b],C=g[w];if((c=e.replace(w,""))!==e){var k=void 0;switch(C){case"thousand":k=1e3;break;case"million":k=1e6;break;case"billion":k=1e9;break;case"trillion":k=1e12}return t(c,n,i,a,l,s,u)*k}}}}(function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=t.replace(n,"");return(o=o.replace(RegExp("([0-9])".concat(r(e.thousands),"([0-9])"),"g"),"$1$2")).replace(e.decimal,".")}(t,e,n),e,n,i,a,l,s)}(e,u,c,f,h,d,n):(a=+(i=e.split(":"))[0],l=+i[1],+i[2]+60*l+3600*a);else{if("number"!=typeof e)return;p=e}if(void 0!==p)return p}}},{"./globalState":4}],10:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r=t("./unformatting"),i=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,a={output:{type:"string",validValues:["currency","percent","byte","time","ordinal","number"]},base:{type:"string",validValues:["decimal","binary","general"],restriction:function(t,e){return"byte"===e.output},message:"`base` must be provided only when the output is `byte`",mandatory:function(t){return"byte"===t.output}},characteristic:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:["trillion","billion","million","thousand"]},average:"boolean",currencyPosition:{type:"string",validValues:["prefix","infix","postfix"]},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:function(t){return 0<=t},message:"value must be positive"},{restriction:function(t,e){return!e.exponential},message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:function(t){return 0<=t},message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:["sign","parenthesis"]},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:function(t,e){return"percent"===e.output},message:"`prefixSymbol` can be provided only when the output is `percent`"}},l={languageTag:{type:"string",mandatory:!0,restriction:function(t){return t.match(i)},message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:{type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},spaceSeparated:"boolean",ordinal:{type:"function",mandatory:!0},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function s(t){return!!r.unformat(t)}function u(t,e,n){var r,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],l=Object.keys(t).map(function(r){if(!e[r])return console.error("".concat(n," Invalid key: ").concat(r)),!1;var i=t[r],l=e[r];if("string"==typeof l&&(l={type:l}),"format"===l.type){if(!u(i,a,"[Validate ".concat(r,"]"),!0))return!1}else if(o(i)!==l.type)return console.error("".concat(n," ").concat(r,' type mismatched: "').concat(l.type,'" expected, "').concat(o(i),'" provided')),!1;if(l.restrictions&&l.restrictions.length)for(var s=l.restrictions.length,c=0;c<s;c++){var f=l.restrictions[c],h=f.restriction,d=f.message;if(!h(i,t))return console.error("".concat(n," ").concat(r," invalid value: ").concat(d)),!1}return l.restriction&&!l.restriction(i,t)?(console.error("".concat(n," ").concat(r," invalid value: ").concat(l.message)),!1):l.validValues&&-1===l.validValues.indexOf(i)?(console.error("".concat(n," ").concat(r," invalid value: must be among ").concat(JSON.stringify(l.validValues),', "').concat(i,'" provided')),!1):!l.children||!!u(i,l.children,"[Validate ".concat(r,"]"))});return i||l.push.apply(l,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(r=Object.keys(e).map(function(o){var r=e[o];if("string"==typeof r&&(r={type:r}),r.mandatory){var i=r.mandatory;if("function"==typeof i&&(i=i(t)),i&&void 0===t[o])return console.error("".concat(n,' Missing mandatory key "').concat(o,'"')),!1}return!0}))||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance")}()),l.reduce(function(t,e){return t&&e},!0)}function c(t){return u(t,a,"[Validate format]")}e.exports={validate:function(t,e){var n=s(t),o=c(e);return n&&o},validateFormat:c,validateInput:s,validateLanguage:function(t){return u(t,l,"[Validate language]")}}},{"./unformatting":9}]},{},[7])(7)},t.exports=e()},4319:function(t,e,n){!function(e,o){"use strict";var r;try{r=n(381)}catch(i){}t.exports=o(r)}(0,function(t){"use strict";var e="function"==typeof t,n=!!window.addEventListener,o=window.document,r=window.setTimeout,i=function(t,e,o,r){n?t.addEventListener(e,o,!!r):t.attachEvent("on"+e,o)},a=function(t,e,o,r){n?t.removeEventListener(e,o,!!r):t.detachEvent("on"+e,o)},l=function(t,e){return -1!==(" "+t.className+" ").indexOf(" "+e+" ")},s=function(t,e){l(t,e)||(t.className=""===t.className?e:t.className+" "+e)},u=function(t,e){var n;t.className=(n=(" "+t.className+" ").replace(" "+e+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,"")},c=function(t){return/Array/.test(Object.prototype.toString.call(t))},f=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},h=function(t){var e=t.getDay();return 0===e||6===e},d=function(t,e){return[31,t%4==0&&t%100!=0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e]},p=function(t){f(t)&&t.setHours(0,0,0,0)},y=function(t,e){return t.getTime()===e.getTime()},g=function(t,e,n){var o,r;for(o in e)(r=void 0!==t[o])&&"object"==typeof e[o]&&null!==e[o]&&void 0===e[o].nodeName?f(e[o])?n&&(t[o]=new Date(e[o].getTime())):c(e[o])?n&&(t[o]=e[o].slice(0)):t[o]=g({},e[o],n):(n||!r)&&(t[o]=e[o]);return t},v=function(t,e,n){var r;o.createEvent?((r=o.createEvent("HTMLEvents")).initEvent(e,!0,!1),r=g(r,n),t.dispatchEvent(r)):o.createEventObject&&(r=g(r=o.createEventObject(),n),t.fireEvent("on"+e,r))},m=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},b={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!1,firstDay:0,firstWeekOfYearMinDays:4,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,pickWholeWeek:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,enableSelectionDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},w=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},C=function(t){var e=[],n="false";if(t.isEmpty){if(!t.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';e.push("is-outside-current-month"),t.enableSelectionDaysInNextAndPreviousMonths||e.push("is-selection-disabled")}return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&(e.push("is-selected"),n="true"),t.hasEvent&&e.push("has-event"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},k=function(t,e){t.setHours(0,0,0,0);var n=t.getDate(),o=t.getDay(),r=e-1,i=function(t){return(t+7-1)%7};t.setDate(n+r-i(o));var a=new Date(t.getFullYear(),0,e);return 1+Math.round(((t.getTime()-a.getTime())/864e5-r+i(a.getDay()))/7)},S=function(n,o,r,i){var a=new Date(r,o,n);return'<td class="pika-week">'+(e?t(a).isoWeek():k(a,i))+"</td>"},O=function(t){var e,n=[];for(t.showWeekNumber&&n.push("<th></th>"),e=0;e<7;e++)n.push('<th scope="col"><abbr title="'+w(t,e)+'">'+w(t,e,!0)+"</abbr></th>");return"<thead><tr>"+(t.isRTL?n.reverse():n).join("")+"</tr></thead>"},R=function(t,e,n,o,r,i){var a,l,s,u,f,h=t._o,d=n===h.minYear,p=n===h.maxYear,y='<div id="'+i+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,v=!0;for(s=[],a=0;a<12;a++)s.push('<option value="'+(n===r?a-e:12+a-e)+'"'+(a===o?' selected="selected"':"")+(d&&a<h.minMonth||p&&a>h.maxMonth?' disabled="disabled"':"")+">"+h.i18n.months[a]+"</option>");for(u='<div class="pika-label">'+h.i18n.months[o]+'<select class="pika-select pika-select-month" tabindex="-1">'+s.join("")+"</select></div>",c(h.yearRange)?(a=h.yearRange[0],l=h.yearRange[1]+1):(a=n-h.yearRange,l=1+n+h.yearRange),s=[];a<l&&a<=h.maxYear;a++)a>=h.minYear&&s.push('<option value="'+a+'"'+(a===n?' selected="selected"':"")+">"+a+"</option>");return f='<div class="pika-label">'+n+h.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+s.join("")+"</select></div>",h.showMonthAfterYear?y+=f+u:y+=u+f,d&&(0===o||h.minMonth>=o)&&(g=!1),p&&(11===o||h.maxMonth<=o)&&(v=!1),0===e&&(y+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+h.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(y+='<button class="pika-next'+(v?"":" is-disabled")+'" type="button">'+h.i18n.nextMonth+"</button>"),y+"</div>"},P=function(a){var s=this,u=s.config(a);s._onMouseDown=function(t){if(s._v){var e=(t=t||window.event).target||t.srcElement;if(e){if(!l(e,"is-disabled")&&(!l(e,"pika-button")||l(e,"is-empty")||l(e.parentNode,"is-disabled")?l(e,"pika-prev")?s.prevMonth():l(e,"pika-next")&&s.nextMonth():(s.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),u.bound&&r(function(){s.hide(),u.blurFieldOnSelect&&u.field&&u.field.blur()},100))),l(e,"pika-select"))s._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}}},s._onChange=function(t){var e=(t=t||window.event).target||t.srcElement;e&&(l(e,"pika-select-month")?s.gotoMonth(e.value):l(e,"pika-select-year")&&s.gotoYear(e.value))},s._onKeyChange=function(t){if(t=t||window.event,s.isVisible())switch(t.keyCode){case 13:case 27:u.field&&u.field.blur();break;case 37:s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7);break;case 8:case 46:s.setDate(null)}},s._parseFieldValue=function(){if(u.parse)return u.parse(u.field.value,u.format);if(!e)return new Date(Date.parse(u.field.value));var n=t(u.field.value,u.format,u.formatStrict);return n&&n.isValid()?n.toDate():null},s._onInputChange=function(t){var e;t.firedBy!==s&&(e=s._parseFieldValue(),f(e)&&s.setDate(e),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var t=o.activeElement;do if(l(t,"pika-single"))return;while(t=t.parentNode);s._c||(s._b=r(function(){s.hide()},50)),s._c=!1},s._onClick=function(t){var e=(t=t||window.event).target||t.srcElement,o=e;if(e){!n&&l(e,"pika-select")&&!e.onchange&&(e.setAttribute("onchange","return;"),i(e,"change",s._onChange));do if(l(o,"pika-single")||o===u.trigger)return;while(o=o.parentNode);s._v&&e!==u.trigger&&o!==u.trigger&&s.hide()}},s.el=o.createElement("div"),s.el.className="pika-single"+(u.isRTL?" is-rtl":"")+(u.theme?" "+u.theme:""),i(s.el,"mousedown",s._onMouseDown,!0),i(s.el,"touchend",s._onMouseDown,!0),i(s.el,"change",s._onChange),u.keyboardInput&&i(o,"keydown",s._onKeyChange),u.field&&(u.container?u.container.appendChild(s.el):u.bound?o.body.appendChild(s.el):u.field.parentNode.insertBefore(s.el,u.field.nextSibling),i(u.field,"change",s._onInputChange),u.defaultDate||(u.defaultDate=s._parseFieldValue(),u.setDefaultDate=!0));var c=u.defaultDate;f(c)?u.setDefaultDate?s.setDate(c,!0):s.gotoDate(c):s.gotoDate(new Date),u.bound?(this.hide(),s.el.className+=" is-bound",i(u.trigger,"click",s._onInputClick),i(u.trigger,"focus",s._onInputFocus),i(u.trigger,"blur",s._onInputBlur)):this.show()};return P.prototype={config:function(t){this._o||(this._o=g({},b,!0));var e=g(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,f(e.minDate)||(e.minDate=!1),f(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),c(e.yearRange)){var o=new Date().getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||o,e.yearRange[1]=parseInt(e.yearRange[1],10)||o}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||b.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return(n=n||this._o.format,f(this._d))?this._o.toString?this._o.toString(this._d,n):e?t(this._d).format(n):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(n,o){e&&t.isMoment(n)&&this.setDate(n.toDate(),o)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",v(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),f(t)){var n=this._o.minDate,o=this._o.maxDate;f(n)&&t<n?t=n:f(o)&&t>o&&(t=o),this._d=new Date(t.getTime()),p(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),v(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},clear:function(){this.setDate(null)},gotoDate:function(t){var e=!0;if(f(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),o=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),r=t.getTime();o.setMonth(o.getMonth()+1),o.setDate(o.getDate()-1),e=r<n.getTime()||o.getTime()<r}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(t,e){var n,o=this.getDate()||new Date,r=864e5*parseInt(e);"add"===t?n=new Date(o.valueOf()+r):"subtract"===t&&(n=new Date(o.valueOf()-r)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=m(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=m({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){t instanceof Date?(p(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth()):(this._o.minDate=b.minDate,this._o.minYear=b.minYear,this._o.minMonth=b.minMonth,this._o.startRange=b.startRange),this.draw()},setMaxDate:function(t){t instanceof Date?(p(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth()):(this._o.maxDate=b.maxDate,this._o.maxYear=b.maxYear,this._o.maxMonth=b.maxMonth,this._o.endRange=b.endRange),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e,n=this._o,o=n.minYear,i=n.maxYear,a=n.minMonth,l=n.maxMonth,s="";this._y<=o&&(this._y=o,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=i&&(this._y=i,!isNaN(l)&&this._m>l&&(this._m=l));for(var u=0;u<n.numberOfMonths;u++)e="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2),s+='<div class="pika-lendar">'+R(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,e)+this.render(this.calendars[u].year,this.calendars[u].month,e)+"</div>";this.el.innerHTML=s,n.bound&&"hidden"!==n.field.type&&r(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var t,e,n,r,i,a,l,c,f,h,d,p;if(!this._o.container){if(this.el.style.position="absolute",e=t=this._o.trigger,n=this.el.offsetWidth,r=this.el.offsetHeight,i=window.innerWidth||o.documentElement.clientWidth,a=window.innerHeight||o.documentElement.clientHeight,l=window.pageYOffset||o.body.scrollTop||o.documentElement.scrollTop,d=!0,p=!0,"function"==typeof t.getBoundingClientRect)c=(h=t.getBoundingClientRect()).left+window.pageXOffset,f=h.bottom+window.pageYOffset;else for(c=e.offsetLeft,f=e.offsetTop+e.offsetHeight;e=e.offsetParent;)c+=e.offsetLeft,f+=e.offsetTop;(this._o.reposition&&c+n>i||this._o.position.indexOf("right")>-1&&c-n+t.offsetWidth>0)&&(c=c-n+t.offsetWidth,d=!1),(this._o.reposition&&f+r>a+l||this._o.position.indexOf("top")>-1&&f-r-t.offsetHeight>0)&&(f=f-r-t.offsetHeight,p=!1),this.el.style.left=c+"px",this.el.style.top=f+"px",s(this.el,d?"left-aligned":"right-aligned"),s(this.el,p?"bottom-aligned":"top-aligned"),u(this.el,d?"right-aligned":"left-aligned"),u(this.el,p?"top-aligned":"bottom-aligned")}},render:function(t,e,n){var o=this._o,r=new Date,i=d(t,e),a=new Date(t,e,1).getDay(),l=[],s=[];p(r),o.firstDay>0&&(a-=o.firstDay)<0&&(a+=7);for(var u=0===e?11:e-1,c=11===e?0:e+1,g=0===e?t-1:t,v=11===e?t+1:t,m=d(g,u),b=i+a,w=b;w>7;)w-=7;b+=7-w;for(var k=!1,R=0,P=0;R<b;R++){var E,M,_=new Date(t,e,1+(R-a)),A=!!f(this._d)&&y(_,this._d),I=y(_,r),T=-1!==o.events.indexOf(_.toDateString()),j=R<a||R>=i+a,x=1+(R-a),D=e,H=t,N=o.startRange&&y(o.startRange,_),B=o.endRange&&y(o.endRange,_),L=o.startRange&&o.endRange&&o.startRange<_&&_<o.endRange,V=o.minDate&&_<o.minDate||o.maxDate&&_>o.maxDate||o.disableWeekends&&h(_)||o.disableDayFn&&o.disableDayFn(_);j&&(R<a?(x=m+x,D=u,H=g):(x-=i,D=c,H=v));var U={day:x,month:D,year:H,hasEvent:T,isSelected:A,isToday:I,isDisabled:V,isEmpty:j,isStartRange:N,isEndRange:B,isInRange:L,showDaysInNextAndPreviousMonths:o.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:o.enableSelectionDaysInNextAndPreviousMonths};o.pickWholeWeek&&A&&(k=!0),s.push(C(U)),7==++P&&(o.showWeekNumber&&s.unshift(S(R-a,e,t,o.firstWeekOfYearMinDays)),l.push((E=s,M=o.isRTL,'<tr class="pika-row'+(o.pickWholeWeek?" pick-whole-week":"")+(k?" is-selected":"")+'">'+(M?E.reverse():E).join("")+"</tr>")),s=[],P=0,k=!1)}return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+O(o)+"<tbody>"+l.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),u(this.el,"is-hidden"),this._o.bound&&(i(o,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;!1!==t&&(this._o.bound&&a(o,"click",this._onClick),this._o.container||(this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto"),s(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var t=this._o;this.hide(),a(this.el,"mousedown",this._onMouseDown,!0),a(this.el,"touchend",this._onMouseDown,!0),a(this.el,"change",this._onChange),t.keyboardInput&&a(o,"keydown",this._onKeyChange),t.field&&(a(t.field,"change",this._onInputChange),t.bound&&(a(t.trigger,"click",this._onInputClick),a(t.trigger,"focus",this._onInputFocus),a(t.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},P})},6947:function(t,e,n){"use strict";n.r(e),n.d(e,{registerAllCellTypes:function(){return ew},registerAllEditors:function(){return tq},registerAllModules:function(){return pe},registerAllPlugins:function(){return pt},registerAllRenderers:function(){return ee},registerAllValidators:function(){return eu}}),n(6992),n(1539),n(8783),n(4129),n(3948),n(2772),n(2707),n(9826),n(4916),n(5306),n(7327),n(8304),n(489),n(2419),n(4819),n(5003),n(2526),n(1817),n(2165);var o,r,i,a,l,s,u,c,f,h,d,p,y,g,v,m,b,w,C,k,S,O,R,P,E,M=n(631),_=n(766),A=n(8539),I=n(7772),T=n(4020);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function D(){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function H(t,e){return(H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B="handsontableEditor",L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=N(i);if(e){var o=N(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"EDITOR_TYPE",get:function(){return"handsontable"}}],n=[{key:"open",value:function(){D(N(i.prototype),"open",this).call(this),this.htEditor&&this.htEditor.destroy(),"none"===this.htContainer.style.display&&(this.htContainer.style.display=""),this.htEditor=new this.hot.constructor(this.htContainer,this.htOptions),this.htEditor.init(),this.htEditor.rootElement.style.display="",this.cellProperties.strict?this.htEditor.selectCell(0,0):this.htEditor.deselectCell(),(0,_.Mq)(this.TEXTAREA,0,this.TEXTAREA.value.length),this.refreshDimensions()}},{key:"close",value:function(){this.htEditor&&(this.htEditor.rootElement.style.display="none"),this.removeHooksByKey("beforeKeyDown"),D(N(i.prototype),"close",this).call(this)}},{key:"prepare",value:function(t,e,n,o,r,a){D(N(i.prototype),"prepare",this).call(this,t,e,n,o,r,a);var l=this,s={startRows:0,startCols:0,minRows:0,minCols:0,className:"listbox",copyPaste:!1,autoColumnSize:!1,autoRowSize:!1,readOnly:!0,fillHandle:!1,autoWrapCol:!1,autoWrapRow:!1,afterOnCellMouseDown:function(t,e){var n=this.getSourceData(e.row,e.col);void 0!==n&&l.setValue(n),l.instance.destroyEditor()},preventWheel:!0,layoutDirection:this.hot.isRtl()?"rtl":"ltr"};this.cellProperties.handsontable&&(0,I.l7)(s,a.handsontable),this.htOptions=s}},{key:"beginEditing",value:function(t,e){var n=this.hot.getSettings().onBeginEditing;n&&!1===n()||D(N(i.prototype),"beginEditing",this).call(this,t,e)}},{key:"createElements",value:function(){D(N(i.prototype),"createElements",this).call(this);var t=this.hot.rootDocument.createElement("DIV");t.className="handsontableEditor",this.TEXTAREA_PARENT.appendChild(t),this.htContainer=t,this.assignHooks()}},{key:"finishEditing",value:function(t,e,n){if(this.htEditor&&this.htEditor.isListening()&&this.hot.listen(),this.htEditor&&this.htEditor.getSelectedLast()){var o=this.htEditor.getInstance().getValue();void 0!==o&&this.setValue(o)}D(N(i.prototype),"finishEditing",this).call(this,t,e,n)}},{key:"assignHooks",value:function(){var t=this;this.hot.addHook("afterDestroy",function(){t.htEditor&&t.htEditor.destroy()})}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor");D(N(i.prototype),"registerShortcuts",this).call(this);var n={group:B,relativeToGroup:T.HJ,position:"before"},o=function(e,n){var o=t.htEditor.getInstance();if(void 0!==e&&(e<0||o.flipped&&e>o.countRows()-1?o.deselectCell():o.selectCell(e,0),o.getData().length))return n.preventDefault(),(0,A.mM)(n),t.hot.listen(),t.TEXTAREA.focus(),!1};e.addShortcuts([{keys:[["ArrowUp"]],callback:function(e){var n,r=t.htEditor.getInstance();return!r.getSelectedLast()&&r.flipped?n=r.countRows()-1:r.getSelectedLast()&&(n=r.flipped?Math.max(0,r.getSelectedLast()[0]-1):r.getSelectedLast()[0]-1),o(n,e)},preventDefault:!1},{keys:[["ArrowDown"]],callback:function(e){var n,r=t.htEditor.getInstance();return r.getSelectedLast()||r.flipped?r.getSelectedLast()&&(r.flipped?n=r.getSelectedLast()[0]+1:r.flipped||(n=Math.min(r.countRows()-1,r.getSelectedLast()[0]+1))):n=0,o(n,e)},preventDefault:!1}],n)}},{key:"unregisterShortcuts",value:function(){D(N(i.prototype),"unregisterShortcuts",this).call(this),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(B)}}],x(i.prototype,n),o&&x(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(M.H),V=n(613),U=n(1799),F=n(9272),W=n(1975),z=n(337);function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function K(){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function q(t,e){return(q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=new WeakMap,J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=$(i);if(e){var o=$(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return Z(t)}(this,t)});function i(t){var e,n,o,a;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=Z(e=r.call(this,t)),o="sortByRelevance",a=function(t,e,n){var o,r,i,a,l=[],s=[],u=t.length,c=e.length;if(0===u){for(i=0;i<c;i++)s.push(i);return s}for(i=0;i<c;i++){if(r=(0,F.oN)((0,U.Pz)(e[i])),n)a=r.indexOf(t);else{var f=this.cellProperties.locale;a=r.toLocaleLowerCase(f).indexOf(t.toLocaleLowerCase(f))}-1!==a&&(o=r.length-a-u,l.push({baseIndex:i,index:a,charsLeft:o,value:r}))}for(l.sort(function(t,e){if(-1===e.index)return -1;if(-1===t.index)return 1;if(t.index<e.index)return -1;if(e.index<t.index)return 1;if(t.index===e.index){if(t.charsLeft<e.charsLeft)return -1;if(t.charsLeft>e.charsLeft)return 1}return 0}),i=0,c=l.length;i<c;i++)s.push(l[i].baseIndex);return s},o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,e.query=null,e.strippedChoices=[],e.rawChoices=[],X.set(Z(e),{skipOne:!1,isMacOS:e.hot.rootWindow.navigator.platform.indexOf("Mac")>-1}),e}return o=[{key:"EDITOR_TYPE",get:function(){return"autocomplete"}}],n=[{key:"getValue",value:function(){var t=this,e=this.rawChoices.find(function(e){return t.stripValueIfNeeded(e)===t.TEXTAREA.value});return(0,U.$K)(e)?e:this.TEXTAREA.value}},{key:"createElements",value:function(){K($(i.prototype),"createElements",this).call(this),(0,_.cn)(this.htContainer,"autocompleteEditor"),(0,_.cn)(this.htContainer,-1===this.hot.rootWindow.navigator.platform.indexOf("Mac")?"":"htMacScroll")}},{key:"open",value:function(){var t=this,e=X.get(this);K($(i.prototype),"open",this).call(this);var n=this.htEditor.getInstance(),o=void 0===this.cellProperties.trimDropdown||this.cellProperties.trimDropdown;this.showEditableElement(),this.focus();var r=(0,_.np)();0===r&&e.isMacOS&&(r+=15),this.addHook("beforeKeyDown",function(e){return t.onBeforeKeyDown(e)}),n.updateSettings({colWidths:o?[(0,_.iO)(this.TEXTAREA)-2]:void 0,width:o?(0,_.iO)(this.TEXTAREA)+r:void 0,renderer:function(e,n,o,r,i,a,l){(0,z.V)(e,n,o,r,i,a,l);var s,u,c=t.cellProperties,f=c.filteringCaseSensitive,h=c.allowHtml,d=c.locale,p=t.query,y=(0,U.Pz)(a);y&&!h&&-1!==(s=!0===f?y.indexOf(p):y.toLocaleLowerCase(d).indexOf(p.toLocaleLowerCase(d)))&&(u=y.substr(s,p.length),y=y.replace(u,"<strong>".concat(u,"</strong>"))),n.innerHTML=y},autoColumnSize:!0}),e.skipOne&&(e.skipOne=!1),this.hot._registerTimeout(function(){t.queryChoices(t.TEXTAREA.value)})}},{key:"close",value:function(){this.removeHooksByKey("beforeKeyDown"),K($(i.prototype),"close",this).call(this)}},{key:"discardEditor",value:function(t){K($(i.prototype),"discardEditor",this).call(this,t),this.hot.view.render()}},{key:"queryChoices",value:function(t){var e=this,n=this.cellProperties.source;this.query=t,"function"==typeof n?n.call(this.cellProperties,t,function(t){e.rawChoices=t,e.updateChoicesList(e.stripValuesIfNeeded(t))}):Array.isArray(n)?(this.rawChoices=n,this.updateChoicesList(this.stripValuesIfNeeded(n))):this.updateChoicesList([])}},{key:"updateChoicesList",value:function(t){var e=(0,_.qK)(this.TEXTAREA),n=(0,_.kg)(this.TEXTAREA),o=this.cellProperties.sortByRelevance,r=this.cellProperties.filter,i=null,a=null,l=t;o&&(i=this.sortByRelevance(this.stripValueIfNeeded(this.getValue()),l,this.cellProperties.filteringCaseSensitive));var s=Array.isArray(i)?i.length:0;if(!1===r)s&&(a=i[0]);else{for(var u=[],c=0,f=l.length;c<f&&(!o||!(s<=c));c++)s?u.push(l[i[c]]):u.push(l[c]);a=0,l=u}this.strippedChoices=l,this.htEditor.loadData((0,V.jz)([l])),this.updateDropdownHeight(),this.flipDropdownIfNeeded(),!0===this.cellProperties.strict&&this.highlightBestMatchingChoice(a),this.hot.listen(),(0,_.Mq)(this.TEXTAREA,e,e===n?void 0:n)}},{key:"flipDropdownIfNeeded",value:function(){var t=(0,_.$g)(this.hot.view._wt.wtTable.TABLE),e=t===this.hot.rootWindow,n=this.cellProperties.preventOverflow;if(e||!e&&(n||"horizontal"===n))return!1;var o=(0,_.cv)(this.TEXTAREA),r=(0,_.Pb)(this.TEXTAREA),i=this.getDropdownHeight(),a=t.scrollTop,l=(0,_.Pb)(this.hot.view._wt.wtTable.THEAD),s=(0,_.cv)(t),u=o.top-s.top-l+a,c=t.scrollHeight-u-l-r,f=i>c&&u>c;return f?this.flipDropdown(i):this.unflipDropdown(),this.limitDropdownIfNeeded(f?u:c,i),f}},{key:"limitDropdownIfNeeded",value:function(t,e){if(e>t){var n=0,o=0,r=0,i=null;do n+=r=this.htEditor.getRowHeight(o)||this.htEditor.view._wt.getSetting("defaultRowHeight"),o+=1;while(n<t);i=n-r,this.htEditor.flipped&&(this.htEditor.rootElement.style.top="".concat(parseInt(this.htEditor.rootElement.style.top,10)+e-i,"px")),this.setDropdownHeight(n-r)}}},{key:"flipDropdown",value:function(t){var e=this.htEditor.rootElement.style;e.position="absolute",e.top="".concat(-t,"px"),this.htEditor.flipped=!0}},{key:"unflipDropdown",value:function(){var t=this.htEditor.rootElement.style;t.position="absolute",t.top="",this.htEditor.flipped=void 0}},{key:"updateDropdownHeight",value:function(){var t=this.htEditor.getColWidth(0)+(0,_.np)(this.hot.rootDocument)+2,e=this.cellProperties.trimDropdown;this.htEditor.updateSettings({height:this.getDropdownHeight(),width:e?void 0:t}),this.htEditor.view._wt.wtTable.alignOverlaysWithTrimmingContainer()}},{key:"setDropdownHeight",value:function(t){this.htEditor.updateSettings({height:t})}},{key:"highlightBestMatchingChoice",value:function(t){"number"==typeof t?this.htEditor.selectCell(t,0,void 0,void 0,void 0,!1):this.htEditor.deselectCell()}},{key:"getDropdownHeight",value:function(){var t=this.htEditor.getInstance().getRowHeight(0)||23,e=this.cellProperties.visibleRows;return this.strippedChoices.length>=e?e*t:this.strippedChoices.length*t+8}},{key:"stripValueIfNeeded",value:function(t){return this.stripValuesIfNeeded([t])[0]}},{key:"stripValuesIfNeeded",value:function(t){var e=this.cellProperties.allowHtml,n=(0,V.Sc)(t,function(t){return(0,U.Pz)(t)});return(0,V.Sc)(n,function(t){return e?t:(0,F.oN)(t)})}},{key:"allowKeyEventPropagation",value:function(t){var e=this.htEditor.getSelectedRangeLast(),n={row:e?e.from.row:-1},o=!1;return t===W.nx.ARROW_DOWN&&n.row>0&&n.row<this.htEditor.countRows()-1&&(o=!0),t===W.nx.ARROW_UP&&n.row>-1&&(o=!0),o}},{key:"onBeforeKeyDown",value:function(t){var e=this,n=X.get(this);if(n.skipOne=!1,(0,W.EA)(t.keyCode)||t.keyCode===W.nx.BACKSPACE||t.keyCode===W.nx.DELETE||t.keyCode===W.nx.INSERT){var o=10;if(t.keyCode===W.nx.C&&(t.ctrlKey||t.metaKey))return;this.isOpened()||(o+=10),this.htEditor&&this.hot._registerTimeout(function(){e.queryChoices(e.TEXTAREA.value),n.skipOne=!0},o)}}}],G(i.prototype,n),o&&G(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(L),Q=n(7746);function tt(t){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tn(t,e){return(tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tn(t,e)}(r,t);var e,n,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=to(r);if(e){var o=to(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tt(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return n=[{key:"EDITOR_TYPE",get:function(){return"checkbox"}}],te(r.prototype,[{key:"beginEditing",value:function(t,e){if(e&&"mouseup"===e.type){var n=this.TD.querySelector('input[type="checkbox"]');(0,_.pv)(n,"htBadValue")||n.click()}}},{key:"finishEditing",value:function(){}},{key:"init",value:function(){}},{key:"open",value:function(){}},{key:"close",value:function(){}},{key:"getValue",value:function(){}},{key:"setValue",value:function(){}},{key:"focus",value:function(){}}]),n&&te(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(Q.Hf),ti=n(381),ta=n(4319),tl=n(6487);function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tu(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tc(){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=th(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tf(t,e){return(tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var td="date",tp="dateEditor",ty=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tf(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=th(i);if(e){var o=th(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ts(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).defaultDateFormat="DD/MM/YYYY",e.isCellEdited=!1,e.parentDestroyed=!1,e.$datePicker=null,e}return n=[{key:"init",value:function(){var t=this;if("function"!=typeof ti)throw Error("You need to include moment.js to your project.");if("function"!=typeof ta)throw Error("You need to include Pikaday to your project.");tc(th(i.prototype),"init",this).call(this),this.instance.addHook("afterDestroy",function(){t.parentDestroyed=!0,t.destroyElements()})}},{key:"createElements",value:function(){tc(th(i.prototype),"createElements",this).call(this),this.datePicker=this.hot.rootDocument.createElement("DIV"),this.datePickerStyle=this.datePicker.style,this.datePickerStyle.position="absolute",this.datePickerStyle.top=0,this.datePickerStyle.left=0,this.datePickerStyle.zIndex=9999,this.datePicker.setAttribute("dir",this.hot.isRtl()?"rtl":"ltr"),(0,_.cn)(this.datePicker,"htDatepickerHolder"),this.hot.rootDocument.body.appendChild(this.datePicker),new tl.Z(this).addEventListener(this.datePicker,"mousedown",function(t){return t.stopPropagation()})}},{key:"destroyElements",value:function(){var t=this.datePicker.parentNode;this.$datePicker&&this.$datePicker.destroy(),t&&t.removeChild(this.datePicker)}},{key:"prepare",value:function(t,e,n,o,r,a){tc(th(i.prototype),"prepare",this).call(this,t,e,n,o,r,a)}},{key:"open",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.hot.getShortcutManager().getContext("editor");tc(th(i.prototype),"open",this).call(this),this.showDatepicker(t),e.addShortcut({keys:[["Enter"]],callback:function(t){t.stopPropagation()},group:tp})}},{key:"close",value:function(){var t,e=this;this._opened=!1,null!==(t=this.$datePicker)&&void 0!==t&&t.destroy&&this.$datePicker.destroy(),this.instance._registerTimeout(function(){e.instance._refreshBorders()}),this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(tp),tc(th(i.prototype),"close",this).call(this)}},{key:"finishEditing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var n=this.originalValue;void 0!==n&&this.setValue(n)}tc(th(i.prototype),"finishEditing",this).call(this,t,e)}},{key:"showDatepicker",value:function(t){var e,n=this.TD.getBoundingClientRect(),o=this.cellProperties.dateFormat||this.defaultDateFormat,r=this.instance.view.isMouseDown(),i=!!t&&(0,W.DC)(t.keyCode);this.datePicker.style.display="block",this.$datePicker=new ta(this.getDatePickerConfig()),this.$datePicker._onInputFocus=function(){},this.datePickerStyle.top="".concat(this.hot.rootWindow.pageYOffset+n.top+(0,_.Pb)(this.TD),"px");var a=this.hot.rootWindow.pageXOffset;a=this.hot.isRtl()?n.right-(0,_.iO)(this.datePicker):n.left,this.datePickerStyle.left="".concat(a,"px"),this.originalValue?(ti(e=this.originalValue,o,!0).isValid()&&this.$datePicker.setMoment(ti(e,o),!0),this.getValue()!==this.originalValue&&this.setValue(this.originalValue),i||r||this.setValue("")):this.cellProperties.defaultDate?(ti(e=this.cellProperties.defaultDate,o,!0).isValid()&&this.$datePicker.setMoment(ti(e,o),!0),i||r||this.setValue("")):this.$datePicker.gotoToday()}},{key:"hideDatepicker",value:function(){this.datePickerStyle.display="none",this.$datePicker.hide()}},{key:"getDatePickerConfig",value:function(){var t=this,e=this.TEXTAREA,n={};this.cellProperties&&this.cellProperties.datePickerConfig&&(0,I.ZB)(n,this.cellProperties.datePickerConfig);var o=n.onSelect,r=n.onClose;return n.field=e,n.trigger=e,n.container=this.datePicker,n.bound=!1,n.format=n.format||this.defaultDateFormat,n.reposition=n.reposition||!1,n.isRTL=!1,n.onSelect=function(e){var n=e;isNaN(n.getTime())||(n=ti(n).format(t.cellProperties.dateFormat||t.defaultDateFormat)),t.setValue(n),t.hideDatepicker(),o&&o()},n.onClose=function(){t.parentDestroyed||t.finishEditing(!1),r&&r()},n}}],o=[{key:"EDITOR_TYPE",get:function(){return td}}],n&&tu(i.prototype,n),o&&tu(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(M.H),tg=n(3909);function tv(t){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tb(){return(tb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tC(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tw(t,e){return(tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tC(t){return(tC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tw(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tC(i);if(e){var o=tC(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tv(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"EDITOR_TYPE",get:function(){return"dropdown"}}],n=[{key:"prepare",value:function(t,e,n,o,r,a){tb(tC(i.prototype),"prepare",this).call(this,t,e,n,o,r,a),this.cellProperties.filter=!1,this.cellProperties.strict=!0}}],tm(i.prototype,n),o&&tm(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(J);function tS(t){return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tO(t,e){return(tO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tR(t){return(tR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().add("beforeValidate",function(t,e,n){var o=this.getCellMeta(e,this.propToCol(n));o.editor===tk&&void 0===o.strict&&(o.filter=!1,o.strict=!0)});var tP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tO(t,e)}(o,t);var e,n=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tR(o);if(e){var r=tR(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tS(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),n.apply(this,arguments)}return function(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(o,[{key:"EDITOR_TYPE",get:function(){return"numeric"}}]),Object.defineProperty(o,"prototype",{writable:!1}),o}(M.H);function tE(t){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tM(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function t_(){return(t_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tI(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tA(t,e){return(tA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tI(t){return(tI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tA(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tI(i);if(e){var o=tI(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tE(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"EDITOR_TYPE",get:function(){return"password"}}],n=[{key:"createElements",value:function(){t_(tI(i.prototype),"createElements",this).call(this),this.TEXTAREA=this.hot.rootDocument.createElement("input"),this.TEXTAREA.setAttribute("type","password"),this.TEXTAREA.setAttribute("data-hot-input",""),this.TEXTAREA.className="handsontableInput",this.textareaStyle=this.TEXTAREA.style,this.textareaStyle.width=0,this.textareaStyle.height=0,(0,_.cS)(this.TEXTAREA_PARENT),this.TEXTAREA_PARENT.appendChild(this.TEXTAREA)}}],tM(i.prototype,n),o&&tM(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(M.H);function tj(t){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tx(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tD(){return(tD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tN(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tH(t,e){return(tH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tN(t){return(tN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tB="ht_editor_visible",tL="selectEditor",tV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tH(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tN(i);if(e){var o=tN(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tj(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"EDITOR_TYPE",get:function(){return"select"}}],n=[{key:"init",value:function(){this.select=this.hot.rootDocument.createElement("SELECT"),(0,_.cn)(this.select,"htSelectEditor"),this.select.style.display="none",this.hot.rootElement.appendChild(this.select),this.registerHooks()}},{key:"getValue",value:function(){return this.select.value}},{key:"setValue",value:function(t){this.select.value=t}},{key:"open",value:function(){this._opened=!0,this.refreshDimensions(),this.select.style.display="",this.hot.getShortcutManager().setActiveContextName("editor"),this.registerShortcuts()}},{key:"close",value:function(){this._opened=!1,this.select.style.display="none",(0,_.pv)(this.select,tB)&&(0,_.IV)(this.select,tB),this.unregisterShortcuts(),this.clearHooks()}},{key:"focus",value:function(){this.select.focus()}},{key:"registerHooks",value:function(){var t=this;this.addHook("afterScrollHorizontally",function(){return t.refreshDimensions()}),this.addHook("afterScrollVertically",function(){return t.refreshDimensions()}),this.addHook("afterColumnResize",function(){return t.refreshDimensions()}),this.addHook("afterRowResize",function(){return t.refreshDimensions()})}},{key:"prepare",value:function(t,e,n,o,r,a){var l,s=this;tD(tN(i.prototype),"prepare",this).call(this,t,e,n,o,r,a);var u=this.cellProperties.selectOptions;l="function"==typeof u?this.prepareOptions(u(this.row,this.col,this.prop)):this.prepareOptions(u),(0,_.cS)(this.select),(0,I._l)(l,function(t,e){var n=s.hot.rootDocument.createElement("OPTION");n.value=e,(0,_.uS)(n,t),s.select.appendChild(n)})}},{key:"prepareOptions",value:function(t){var e={};if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e[t[n]]=t[n];else"object"===tj(t)&&(e=t);return e}},{key:"refreshValue",value:function(){var t=this.hot.getSourceDataAtCell(this.row,this.prop);this.originalValue=t,this.setValue(t),this.refreshDimensions()}},{key:"refreshDimensions",value:function(){if(this.state===Q.ed.EDITING){if(this.TD=this.getEditedCell(),!this.TD){this.close();return}var t=this.getEditedCellRect(),e=t.top,n=t.start,o=t.width,r=t.height,i=this.select.style;i.height="".concat(r,"px"),i.width="".concat(o,"px"),i.top="".concat(e,"px"),i[this.hot.isRtl()?"right":"left"]="".concat(n,"px"),i.margin="0px",(0,_.cn)(this.select,tB)}}},{key:"registerShortcuts",value:function(){var t=this,e=this.hot.getShortcutManager().getContext("editor");!1!==this.isInFullEditMode()&&e.addShortcuts([{keys:[["ArrowUp"]],callback:function(){var e=t.select.selectedIndex-1;e>=0&&(t.select[e].selected=!0)}},{keys:[["ArrowDown"]],callback:function(){var e=t.select.selectedIndex+1;e<=t.select.length-1&&(t.select[e].selected=!0)}}],{group:tL})}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("editor").removeShortcutsByGroup(tL)}}],tx(i.prototype,n),o&&tx(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(Q.Hf);function tU(t){return(tU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tF(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function tW(){return(tW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tY(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function tz(t,e){return(tz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tY(t){return(tY=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tz(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=tY(i);if(e){var o=tY(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===tU(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"EDITOR_TYPE",get:function(){return"time"}}],n=[{key:"prepare",value:function(t,e,n,o,r,a){tW(tY(i.prototype),"prepare",this).call(this,t,e,n,o,r,a),this.TEXTAREA.dir="ltr"}}],tF(i.prototype,n),o&&tF(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(M.H),tK=n(6187);function tq(){(0,tK.qm)(Q.Hf),(0,tK.qm)(J),(0,tK.qm)(tr),(0,tK.qm)(ty),(0,tK.qm)(tk),(0,tK.qm)(L),(0,tK.qm)(tP),(0,tK.qm)(tT),(0,tK.qm)(tV),(0,tK.qm)(M.H),(0,tK.qm)(tG)}var tZ=n(6285);function t$(t,e,n,o,r,i,a){tZ.Z.apply(this,[t,e,n,o,r,i,a]),(0,_.uS)(e,null==i?"":i,!1)}function tX(t,e,n,o,r,i,a){var l=t.rootDocument,s=a.allowHtml?t$:z.V,u=l.createElement("DIV");if(u.className="htAutocompleteArrow",u.appendChild(l.createTextNode(String.fromCharCode(9660))),s.apply(this,[t,e,n,o,r,i,a]),e.firstChild||e.appendChild(l.createTextNode(String.fromCharCode(160))),e.insertBefore(u,e.firstChild),(0,_.cn)(e,"htAutocomplete"),!t.acArrowListener){var c=new tl.Z(t);t.acArrowListener=function(r){(0,_.pv)(r.target,"htAutocompleteArrow")&&t.view._wt.getSetting("onCellDblClick",null,t._createCellCoords(n,o),e)},c.addEventListener(t.rootElement,"mousedown",t.acArrowListener),t.addHookOnce("afterDestroy",function(){c.destroy()})}}t$.RENDERER_TYPE="html",tX.RENDERER_TYPE="autocomplete",n(6699),n(2023),n(9714),n(2564);var tJ=new WeakMap,tQ=new WeakMap,t0="data-row",t1="data-col",t2="checkbox";function t3(t,e,n,o,r,i,a){var l=t.rootDocument;tZ.Z.apply(this,[t,e,n,o,r,i,a]),function(t){var e=tQ.get(t);if(!e){var n=t.rootElement;(e=new tl.Z(t)).addEventListener(n,"click",function(e){return function(t,e){var n=t.target;if(t4(n)&&n.hasAttribute(t0)&&n.hasAttribute(t1)){var o=parseInt(n.getAttribute(t0),10),r=parseInt(n.getAttribute(t1),10);e.getCellMeta(o,r).readOnly&&t.preventDefault()}}(e,t)}),e.addEventListener(n,"mouseup",function(e){var n;t4(n=e.target)&&n.hasAttribute(t0)&&n.hasAttribute(t1)&&setTimeout(t.listen,10)}),e.addEventListener(n,"change",function(e){return function(t,e){var n=t.target;if(t4(n)&&n.hasAttribute(t0)&&n.hasAttribute(t1)){var o=parseInt(n.getAttribute(t0),10),r=parseInt(n.getAttribute(t1),10),i=e.getCellMeta(o,r);if(!i.readOnly){var a=null;a=t.target.checked?void 0===i.uncheckedTemplate||i.checkedTemplate:void 0!==i.uncheckedTemplate&&i.uncheckedTemplate,e.setDataAtCell(o,r,a)}}}(e,t)}),tQ.set(t,e)}}(t);var s=((f=l.createElement("input")).className="htCheckboxRendererInput",f.type="checkbox",f.setAttribute("autocomplete","off"),f.setAttribute("tabindex","-1"),f.cloneNode(!1)),u=a.label,c=!1;if(void 0===a.checkedTemplate&&(a.checkedTemplate=!0),void 0===a.uncheckedTemplate&&(a.uncheckedTemplate=!1),(0,_.cS)(e),i===a.checkedTemplate||(0,U.Pz)(i).toLocaleLowerCase(a.locale)===(0,U.Pz)(a.checkedTemplate).toLocaleLowerCase(a.locale)?s.checked=!0:i===a.uncheckedTemplate||(0,U.Pz)(i).toLocaleLowerCase(a.locale)===(0,U.Pz)(a.uncheckedTemplate).toLocaleLowerCase(a.locale)?s.checked=!1:(0,U.xb)(i)?(0,_.cn)(s,"noValue"):(s.style.display="none",(0,_.cn)(s,"htBadValue"),c=!0),s.setAttribute(t0,n),s.setAttribute(t1,o),!c&&u){var f,h,d,p,y="";if(u.value)y="function"==typeof u.value?u.value.call(this,n,o,r,i):u.value;else if(u.property){var g=t.getDataAtRowProp(n,u.property);y=null!==g?g:""}var v=(h=y,d=!0!==u.separated,(p=l.createElement("label")).className="htCheckboxRendererLabel ".concat(d?"fullWidth":""),p.appendChild(l.createTextNode(h)),p.cloneNode(!0));"before"===u.position?u.separated?(e.appendChild(v),e.appendChild(s)):(v.appendChild(s),s=v):u.position&&"after"!==u.position||(u.separated?(e.appendChild(s),e.appendChild(v)):(v.insertBefore(s,v.firstChild),s=v))}function m(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.getSelectedRange();if(n)for(var o=0;o<n.length;o++){for(var r=n[o].getTopStartCorner(),i=r.row,a=r.col,l=n[o].getBottomEndCorner(),s=l.row,u=l.col,c=[],f=i;f<=s;f+=1)for(var h=a;h<=u;h+=1){var d=t.getCellMeta(f,h);if("checkbox"!==d.type)return;if(!0!==d.readOnly){void 0===d.checkedTemplate&&(d.checkedTemplate=!0),void 0===d.uncheckedTemplate&&(d.uncheckedTemplate=!1);var p=t.getDataAtCell(f,h);!1===e?[d.checkedTemplate,d.checkedTemplate.toString()].includes(p)?c.push([f,h,d.uncheckedTemplate]):[d.uncheckedTemplate,d.uncheckedTemplate.toString(),null,void 0].includes(p)&&c.push([f,h,d.checkedTemplate]):c.push([f,h,d.uncheckedTemplate])}}c.length>0&&t.setDataAtCell(c)}}function b(){var e=t.getSelectedRange();if(e){for(var n=0;n<e.length;n++)for(var o=e[n].getTopStartCorner(),r=e[n].getBottomEndCorner(),i=o.row;i<=r.row;i++)for(var a=o.col;a<=r.col;a++){var l=t.getCellMeta(i,a);if("checkbox"!==l.type)return!1;var s=t.getCell(i,a);if(null==s||s.querySelectorAll("input[type=checkbox]").length>0&&!l.readOnly)return!0}return!1}}u&&(!u||u.separated)||e.appendChild(s),c&&e.appendChild(l.createTextNode("#bad-value#")),tJ.has(t)||(tJ.set(t,!0),t.getShortcutManager().getContext("grid").addShortcuts([{keys:[["space"]],callback:function(){return m(),!b()}},{keys:[["enter"]],callback:function(){return m(),!b()},runOnlyIf:function(){return t.getSettings().enterBeginsEditing}},{keys:[["delete"],["backspace"]],callback:function(){return m(!0),!b()},relativeToGroup:T.PP,position:"before"}],{group:"checkboxRenderer"}))}function t4(t){return"INPUT"===t.tagName&&"checkbox"===t.getAttribute("type")}tg.Z.getSingleton().add("modifyAutoColumnSizeSeed",function(t,e,n){var o=e.label,r=e.type,i=e.row,a=e.column,l=e.prop;if(r===t2){if(o){var s=o.value,u=o.property,c=n;if(s)c="function"==typeof s?s(i,a,l,n):s;else if(u){var f=this.getDataAtRowProp(i,u);c=null!==f?f:n}t=c}return t}}),t3.RENDERER_TYPE=t2,n(9600);var t8=n(4316),t9=n(2226);function t6(t,e,n,o,r,i,a){var l=i;if((0,t9.kE)(l)){var s=a.numericFormat,u=s&&s.culture||"-",c=s&&s.pattern,f=a.className||"",h=f.length?f.split(" "):[];if(void 0!==u&&!t8.languages()[u]){var d=u.replace("-",""),p=t8.allLanguages?t8.allLanguages[u]:t8[d];p&&t8.registerLanguage(p)}t8.setLanguage(u),l=t8(l).format(c||"0"),0>h.indexOf("htLeft")&&0>h.indexOf("htCenter")&&0>h.indexOf("htRight")&&0>h.indexOf("htJustify")&&h.push("htRight"),0>h.indexOf("htNumeric")&&h.push("htNumeric"),a.className=h.join(" "),e.dir="ltr"}(0,z.V)(t,e,n,o,r,l,a)}function t7(t,e,n,o,r,i,a){z.V.apply(this,[t,e,n,o,r,i,a]);var l=a.hashLength||e.innerHTML.length,s=a.hashSymbol||"*",u="";(0,t9.q4)(l-1,function(){u+=s}),(0,_.uS)(e,u)}function t5(t,e,n,o,r,i,a){z.V.apply(this,[t,e,n,o,r,i,a]),e.dir="ltr"}t6.RENDERER_TYPE="numeric",t7.RENDERER_TYPE="password",t5.RENDERER_TYPE="time";var et=n(9847);function ee(){(0,et.zn)(tX),(0,et.zn)(tZ.Z),(0,et.zn)(t3),(0,et.zn)(t$),(0,et.zn)(t6),(0,et.zn)(t7),(0,et.zn)(z.V),(0,et.zn)(t5)}function en(t,e){var n=t;if(null==n&&(n=""),this.allowEmpty&&""===n){e(!0);return}this.strict&&this.source?"function"==typeof this.source?this.source(n,eo(n,e)):eo(n,e)(this.source):e(!0)}function eo(t,e){return function(n){for(var o=!1,r=0,i=n.length;r<i;r++)if(t===n[r]){o=!0;break}e(o)}}function er(t,e){var n=(0,tK.Jq)(td,this.instance),o=t,r=!0;null==o&&(o="");var i=ti(o,this.dateFormat||n.defaultDateFormat,!0).isValid(),a=ti(new Date(o)).isValid()||i;if(this.allowEmpty&&""===o&&(a=!0,i=!0),a||(r=!1),!a&&i&&(r=!0),a&&!i){if(!0===this.correctFormat){var l,s,u,c,f,h,d=(l=o,s=this.dateFormat,c=ti((u=new Date(l),isNaN(new Date("".concat(l,"T00:00")).getDate())?u:new Date(u.getTime()+6e4*u.getTimezoneOffset()))),f=ti(l,s),h=l.search(/[A-z]/g)>-1,(c.isValid()&&c.format("x")===f.format("x")||!f.isValid()||h?c:f).format(s)),p=this.instance.toVisualRow(this.row),y=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(p,y,d,"dateValidator"),r=!0}else r=!1}e(r)}function ei(t,e){var n=t;null==n&&(n=""),e(!!this.allowEmpty&&""===n||""!==n&&(0,t9.kE)(t))}en.VALIDATOR_TYPE="autocomplete",n(4765),er.VALIDATOR_TYPE="date",ei.VALIDATOR_TYPE="numeric";var ea=["YYYY-MM-DDTHH:mm:ss.SSSZ","X","x"];function el(t,e){var n=this.timeFormat||"h:mm:ss a",o=!0,r=t;null===r&&(r=""),r=/^\d{3,}$/.test(r)?parseInt(r,10):r;var i=/^\d{1,2}$/.test(r);i&&(r+=":00");var a=ti(r,ea,!0).isValid()?ti(r):ti(r,n),l=a.isValid(),s=ti(r,n,!0).isValid()&&!i;if(this.allowEmpty&&""===r&&(l=!0,s=!0),l||(o=!1),!l&&s&&(o=!0),l&&!s){if(!0===this.correctFormat){var u=a.format(n),c=this.instance.toVisualRow(this.row),f=this.instance.toVisualColumn(this.col);this.instance.setDataAtCell(c,f,u,"timeValidator"),o=!0}else o=!1}e(o)}el.VALIDATOR_TYPE="time";var es=n(8894);function eu(){(0,es.Ie)(en),(0,es.Ie)(er),(0,es.Ie)(ei),(0,es.Ie)(el)}var ec={CELL_TYPE:"autocomplete",editor:J,renderer:tX,validator:en},ef={CELL_TYPE:"checkbox",editor:tr,renderer:t3},eh={CELL_TYPE:"date",editor:ty,renderer:tX,validator:er},ed={CELL_TYPE:"dropdown",editor:tk,renderer:tX,validator:en},ep={CELL_TYPE:"handsontable",editor:L,renderer:tX},ey={CELL_TYPE:"numeric",editor:tP,renderer:t6,validator:ei,dataType:"number"},eg={CELL_TYPE:"password",editor:tT,renderer:t7,copyable:!1},ev=n(5864),em={CELL_TYPE:"time",editor:tG,renderer:t5,validator:el},eb=n(6475);function ew(){(0,eb.xN)(ec),(0,eb.xN)(ef),(0,eb.xN)(eh),(0,eb.xN)(ed),(0,eb.xN)(ep),(0,eb.xN)(ey),(0,eb.xN)(eg),(0,eb.xN)(ev.n),(0,eb.xN)(em)}n(7042),n(1038),n(189),n(8309),n(1532),n(4747),n(2222),n(561),n(8478);var eC=n(8298);function ek(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function eS(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var eO=new Map([["plugin",eC._j],["cell-type",eb.V1],["editor",tK.Wu],["renderer",et.Y3],["validator",es.oh]]),eR=new WeakMap,eP=[],eE=null,eM=new WeakSet,e_=function(){var t,e;function n(t){var e=this;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,eM),eM.add(this),(0,I.jW)(this,"hot",t,{writable:!1}),eR.set(this,{hooks:{}}),eE=null,this.pluginName=null,this.pluginsInitializedCallbacks=[],this.isPluginsReady=!1,this.enabled=!1,this.initialized=!1,this.hot.addHook("afterPluginsInitialized",function(){return e.onAfterPluginsInitialized()}),this.hot.addHook("afterUpdateSettings",function(t){return e.onUpdateSettings(t)}),this.hot.addHook("beforeInit",function(){return e.init()})}return e=[{key:"PLUGIN_KEY",get:function(){return"base"}},{key:"SETTING_KEYS",get:function(){return[this.PLUGIN_KEY]}}],t=[{key:"init",value:function(){var t=this;this.pluginName=this.hot.getPluginName(this);var e=this.constructor.PLUGIN_DEPS,n=Array.isArray(e)?e:[];if(n.length>0){var o=[];if(n.forEach(function(t){var e,n=function(t){if(Array.isArray(t))return t}(e=t.split(":"))||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,2)||function(t,e){if(t){if("string"==typeof t)return ek(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ek(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];if(!eO.has(r))throw Error('Unknown plugin dependency type "'.concat(r,'" was found.'));eO.get(r)(i)||o.push(" - ".concat(i," (").concat(r,")"))}),o.length>0){var r=["The ".concat(this.pluginName," plugin requires the following modules:\n"),"".concat(o.join("\n"),"\n")].join("");eP.push(r)}}if(eE||(eE=(0,eC.a9)()),eE.indexOf("UndoRedo")>=0&&eE.splice(eE.indexOf("UndoRedo"),1),eE.indexOf(this.pluginName)>=0&&eE.splice(eE.indexOf(this.pluginName),1),this.hot.addHookOnce("afterPluginsInitialized",function(){t.isEnabled&&t.isEnabled()&&t.enablePlugin()}),0===eE.length){if(eP.length>0)throw Error(["".concat(eP.join("\n"),"\n"),"You have to import and register them manually."].join(""));this.hot.runHooks("afterPluginsInitialized")}this.initialized=!0}},{key:"enablePlugin",value:function(){this.enabled=!0}},{key:"disablePlugin",value:function(){this.eventManager&&this.eventManager.clear(),this.clearHooks(),this.enabled=!1}},{key:"addHook",value:function(t,e){eR.get(this).hooks[t]=eR.get(this).hooks[t]||[];var n=eR.get(this).hooks[t];this.hot.addHook(t,e),n.push(e),eR.get(this).hooks[t]=n}},{key:"removeHooks",value:function(t){var e=this;(0,V.Bk)(eR.get(this).hooks[t]||[],function(n){e.hot.removeHook(t,n)})}},{key:"clearHooks",value:function(){var t=this,e=eR.get(this).hooks;(0,I._l)(e,function(e,n){return t.removeHooks(n)}),e.length=0}},{key:"callOnPluginsReady",value:function(t){this.isPluginsReady?t():this.pluginsInitializedCallbacks.push(t)}},{key:"onAfterPluginsInitialized",value:function(){(0,V.Bk)(this.pluginsInitializedCallbacks,function(t){return t()}),this.pluginsInitializedCallbacks.length=0,this.isPluginsReady=!0}},{key:"onUpdateSettings",value:function(t){var e=(function(t,e,n){if(!e.has(t))throw TypeError("attempted to get private field on non-instance");return n})(this,eM,eA).call(this,t);this.isEnabled&&(this.enabled&&!this.isEnabled()&&this.disablePlugin(),!this.enabled&&this.isEnabled()&&this.enablePlugin(),this.enabled&&this.isEnabled()&&e&&this.updatePlugin(t))}},{key:"updatePlugin",value:function(){}},{key:"destroy",value:function(){var t=this;this.eventManager&&this.eventManager.destroy(),this.clearHooks(),(0,I._l)(this,function(e,n){"hot"!==n&&(t[n]=null)}),delete this.t,delete this.hot}}],eS(n.prototype,t),e&&eS(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function eA(t){if(!t)return!1;var e=this.constructor.SETTING_KEYS;if("boolean"==typeof e)return e;for(var n=0;n<e.length;n++)if(void 0!==t[e[n]])return!0;return!1}var eI=n(5965);function eT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ej(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(4564);var ex=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.container=null,this.injected=!1,this.rows=[],this.columns=[],this.samples=null,this.settings={useHeaders:!0}}return t=[{key:"addRow",value:function(t,e){if(this.columns.length)throw Error("Doesn't support multi-dimensional table");this.rows.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={row:t};this.rows.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.table.tr.appendChild(this.createRow(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"addColumnHeadersRow",value:function(t){if(null!=this.hot.getColHeader(0)){var e={row:-1};this.rows.push(e),this.container=this.createContainer(this.hot.rootElement.className),this.samples=t,this.table=this.createTable(this.hot.table.className),this.table.colGroup.appendChild(this.createColGroupsCol()),this.appendColumnHeadersRow(),this.container.container.appendChild(this.table.fragment),e.table=this.table.table}}},{key:"addColumn",value:function(t,e){if(this.rows.length)throw Error("Doesn't support multi-dimensional table");this.columns.length||(this.container=this.createContainer(this.hot.rootElement.className));var n={col:t};this.columns.push(n),this.samples=e,this.table=this.createTable(this.hot.table.className),this.getSetting("useHeaders")&&null!==this.hot.getColHeader(t)&&this.hot.view.appendColHeader(t,this.table.th),this.table.tBody.appendChild(this.createCol(t)),this.container.container.appendChild(this.table.fragment),n.table=this.table.table}},{key:"getHeights",value:function(t){this.injected||this.injectTable(),(0,V.Bk)(this.rows,function(e){t(e.row,(0,_.Pb)(e.table)-1)})}},{key:"getWidths",value:function(t){this.injected||this.injectTable(),(0,V.Bk)(this.columns,function(e){var n=e.table.getBoundingClientRect().width;t(e.col,Math.ceil(n))})}},{key:"setSettings",value:function(t){this.settings=t}},{key:"setSetting",value:function(t,e){this.settings||(this.settings={}),this.settings[t]=e}},{key:"getSettings",value:function(){return this.settings}},{key:"getSetting",value:function(t){return this.settings?this.settings[t]:null}},{key:"createColGroupsCol",value:function(){var t=this,e=this.hot.rootDocument.createDocumentFragment();return this.hot.hasRowHeaders()&&e.appendChild(this.createColElement(-1)),this.samples.forEach(function(n){(0,V.Bk)(n.strings,function(n){e.appendChild(t.createColElement(n.col))})}),e}},{key:"createRow",value:function(t){var e=this,n=this.hot.rootDocument,o=n.createDocumentFragment(),r=n.createElement("th");return this.hot.hasRowHeaders()&&(this.hot.view.appendRowHeader(t,r),o.appendChild(r)),this.samples.forEach(function(r){(0,V.Bk)(r.strings,function(r){var i=r.col,a=e.hot.getCellMeta(t,i);a.col=i,a.row=t;var l=e.hot.getCellRenderer(a),s=n.createElement("td");s.setAttribute("ghost-table",1),l(e.hot,s,t,i,e.hot.colToProp(i),r.value,a),o.appendChild(s)})}),o}},{key:"appendColumnHeadersRow",value:function(){var t=this,e=this.hot.rootDocument,n=e.createDocumentFragment(),o=[];if(this.hot.hasRowHeaders()){var r=e.createElement("th");o.push([-1,r]),n.appendChild(r)}this.samples.forEach(function(t){(0,V.Bk)(t.strings,function(t){var r=t.col,i=e.createElement("th");o.push([r,i]),n.appendChild(i)})}),this.table.tHead.appendChild(n),(0,V.Bk)(o,function(e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,2)||function(t,e){if(t){if("string"==typeof t)return eT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eT(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],r=n[1];t.hot.view.appendColHeader(o,r)})}},{key:"createCol",value:function(t){var e=this,n=this.hot.rootDocument,o=n.createDocumentFragment();return this.samples.forEach(function(r){(0,V.Bk)(r.strings,function(r){var i=r.row,a=e.hot.getCellMeta(i,t);a.col=t,a.row=i;var l=e.hot.getCellRenderer(a),s=n.createElement("td"),u=n.createElement("tr");s.setAttribute("ghost-table",1),l(e.hot,s,i,t,e.hot.colToProp(t),r.value,a),u.appendChild(s),o.appendChild(u)})}),o}},{key:"clean",value:function(){this.rows.length=0,this.rows[-1]=void 0,this.columns.length=0,this.samples&&this.samples.clear(),this.samples=null,this.removeTable()}},{key:"injectTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.injected||((t||this.hot.rootElement).appendChild(this.container.fragment),this.injected=!0)}},{key:"removeTable",value:function(){this.injected&&this.container.container.parentNode&&(this.container.container.parentNode.removeChild(this.container.container),this.container=null,this.injected=!1)}},{key:"createColElement",value:function(t){var e=this.hot.rootDocument.createElement("col");return e.style.width="".concat(this.hot.view._wt.wtTable.getStretchedColumnWidth(t),"px"),e}},{key:"createTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),o=e.createElement("table"),r=e.createElement("thead"),i=e.createElement("tbody"),a=e.createElement("colgroup"),l=e.createElement("tr"),s=e.createElement("th");return this.isVertical()&&o.appendChild(a),this.isHorizontal()&&(l.appendChild(s),r.appendChild(l),o.style.tableLayout="auto",o.style.width="auto"),o.appendChild(r),this.isVertical()&&i.appendChild(l),o.appendChild(i),(0,_.cn)(o,t),n.appendChild(o),{fragment:n,table:o,tHead:r,tBody:i,colGroup:a,tr:l,th:s}}},{key:"createContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.hot.rootDocument,n=e.createDocumentFragment(),o=e.createElement("div"),r="htGhostTable htAutoSize ".concat(t.trim());return(0,_.cn)(o,r),n.appendChild(o),{fragment:n,container:o}}},{key:"isVertical",value:function(){return!!(this.rows.length&&!this.columns.length)}},{key:"isHorizontal",value:function(){return!!(this.columns.length&&!this.rows.length)}}],ej(n.prototype,t),e&&ej(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function eD(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(7941);var eH=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.samples=null,this.dataFactory=t,this.customSampleCount=null,this.allowDuplicates=!1}return e=[{key:"SAMPLE_COUNT",get:function(){return 3}}],t=[{key:"getSampleCount",value:function(){return this.customSampleCount?this.customSampleCount:n.SAMPLE_COUNT}},{key:"setSampleCount",value:function(t){this.customSampleCount=t}},{key:"setAllowDuplicates",value:function(t){this.allowDuplicates=t}},{key:"generateRowSamples",value:function(t,e){return this.generateSamples("row",e,t)}},{key:"generateColumnSamples",value:function(t,e){return this.generateSamples("col",e,t)}},{key:"generateSamples",value:function(t,e,n){var o=this,r=new Map,i="number"==typeof n?{from:n,to:n}:n,a=i.from,l=i.to;return(0,t9.q4)(a,l,function(n){var i=o.generateSample(t,e,n);r.set(n,i)}),r}},{key:"generateSample",value:function(t,e,n){var o=this;if("row"!==t&&"col"!==t)throw Error("Unsupported sample type");var r=new Map,i="row"===t?"col":"row",a=[];return(0,t9.q4)(e.from,e.to,function(e){var l,s,u="row"===t?o.dataFactory(n,e):o.dataFactory(e,n),c=u.value,f=u.bundleSeed,h="string"==typeof f&&f.length>0;s=h?f:(0,I.Kn)(c)?"".concat(Object.keys(c).length):Array.isArray(c)?"".concat(c.length):"".concat((0,U.Pz)(c).length),r.has(s)||r.set(s,{needed:o.getSampleCount(),strings:[]});var d=r.get(s);d.needed&&(!(a.indexOf(c)>-1)||o.allowDuplicates||h)&&(d.strings.push((i in(l={value:c})?Object.defineProperty(l,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):l[i]=e,l)),a.push(c),d.needed-=1)}),r}}],eD(n.prototype,t),e&&eD(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),eN=n(2792),eB=n(4165);function eL(t){return(eL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return eU(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eU(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eU(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function eF(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function eW(){return(eW="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eG(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ez(t,e){return(ez=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eY(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eG(t){return(eG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("modifyAutoColumnSizeSeed");var eK="autoColumnSize",eq=new WeakMap,eZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ez(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=eG(i);if(e){var o=eG(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===eL(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return eY(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,t),eq.set(eY(e),{cachedColumnHeaders:[]}),e.ghostTable=new ex(e.hot),e.samplesGenerator=new eH(function(t,n){var o=e.hot.getCellMeta(t,n),r="";o.spanned||(r=e.hot.getDataAtCell(t,n));var i="";return e.hot.hasHook("modifyAutoColumnSizeSeed")&&(i=e.hot.runHooks("modifyAutoColumnSizeSeed",i,o,r)),{value:r,bundleSeed:i}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredColumns=0,e.columnWidthsMap=new eB.L,e.hot.columnIndexMapper.registerMap("autoColumnSize",e.columnWidthsMap),e.addHook("beforeColumnResize",function(t,n,o){return e.onBeforeColumnResize(t,n,o)}),e}return n=[{key:"isEnabled",value:function(){return!1!==this.hot.getSettings()[eK]&&!this.hot.getSettings().colWidths}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[eK];e&&null!==e.useHeaders&&void 0!==e.useHeaders&&this.ghostTable.setSetting("useHeaders",e.useHeaders),this.setSamplingOptions(),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeChangeRender",function(e){return t.onBeforeChange(e)}),this.addHook("afterFormulasValuesUpdate",function(e){return t.onAfterFormulasValuesUpdate(e)}),this.addHook("beforeViewRender",function(e){return t.onBeforeViewRender(e)}),this.addHook("modifyColWidth",function(e,n){return t.getColumnWidth(n,e)}),this.addHook("afterInit",function(){return t.onAfterInit()}),eW(eG(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){var t=this.findColumnsWhereHeaderWasChanged();t.length&&(this.clearCache(t),this.calculateVisibleColumnsWidth()),eW(eG(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){var t=this;eW(eG(i.prototype),"disablePlugin",this).call(this),this.addHook("beforeColumnResize",function(e,n,o){return t.onBeforeColumnResize(e,n,o)})}},{key:"calculateVisibleColumnsWidth",value:function(){if(this.hot.countRows()){var t=this.hot.renderCall,e=this.getFirstVisibleColumn(),n=this.getLastVisibleColumn();-1!==e&&-1!==n&&this.calculateColumnsWidth({from:e,to:n},void 0,t)}}},{key:"calculateColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countRows()-1},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="number"==typeof e?{from:e,to:e}:e,i="number"==typeof n?{from:n,to:n}:n;(0,t9.q4)(r.from,r.to,function(e){var n=t.hot.toPhysicalColumn(e);if(null===n&&(n=e),o||null===t.columnWidthsMap.getValueAtIndex(n)&&!t.hot._getColWidthFromSettings(n)){var r=t.samplesGenerator.generateColumnSamples(e,i);(0,V.Bk)(r,function(e){var n=eV(e,2),o=n[0],r=n[1];return t.ghostTable.addColumn(o,r)})}}),this.ghostTable.columns.length&&(this.hot.batchExecution(function(){t.ghostTable.getWidths(function(e,n){var o=t.hot.toPhysicalColumn(e);t.columnWidthsMap.setValueAtIndex(o,n)})},!0),this.measuredColumns=r.to+1,this.ghostTable.clean())}},{key:"calculateAllColumnsWidth",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=0,o=this.hot.countCols()-1,r=null;this.inProgress=!0;var a=this.getSyncCalculationLimit();this.firstCalculation&&a>=0&&(this.calculateColumnsWidth({from:0,to:a},e),this.firstCalculation=!1,n=a+1),n<o?function a(){if(!t.hot){(0,eI.Wx)(r),t.inProgress=!1;return}t.calculateColumnsWidth({from:n,to:Math.min(n+i.CALCULATION_STEP,o)},e),(n=n+i.CALCULATION_STEP+1)<o?r=(0,eI.U7)(a):((0,eI.Wx)(r),t.inProgress=!1,t.hot.view.adjustElementsSize())}():this.inProgress=!1}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[eK],e=t&&(0,I.nr)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&(0,I.nr)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllColumnsWidth",value:function(){this.hot.view&&this.hot.view._wt.wtTable.isVisible()&&(this.clearCache(),this.calculateAllColumnsWidth())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[eK],e=i.SYNC_CALCULATION_LIMIT,n=this.hot.countCols()-1;return(0,I.Kn)(t)&&(e=t.syncLimit,(0,F.wK)(e)?e=(0,t9.N1)(n,e):e>>=0),Math.min(e,n)}},{key:"getColumnWidth",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],o=e;return void 0===o&&(o=this.columnWidthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t)),n&&"number"==typeof o&&(o=Math.max(o,eN.Z.DEFAULT_WIDTH))),o}},{key:"getFirstVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getFirstVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getFirstRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return -1}},{key:"getLastVisibleColumn",value:function(){var t=this.hot.view._wt;if(t.wtViewport.columnsVisibleCalculator){var e=t.wtTable.getLastVisibleColumn();if(-1!==e)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(e)}if(t.wtViewport.columnsRenderCalculator){var n=t.wtTable.getLastRenderedColumn();if(-1!==n)return this.hot.columnIndexMapper.getVisualFromRenderableIndex(n)}return -1}},{key:"findColumnsWhereHeaderWasChanged",value:function(){var t=this.hot.getColHeader(),e=eq.get(this).cachedColumnHeaders;return(0,V.k$)(t,function(t,n,o){var r=e.length;return(r-1<o||e[o]!==n)&&t.push(o),r-1<o?e.push(n):e[o]=n,t},[])}},{key:"clearCache",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length?this.hot.batchExecution(function(){(0,V.Bk)(e,function(e){t.columnWidthsMap.setValueAtIndex(e,null)})},!0):this.columnWidthsMap.clear()}},{key:"isNeedRecalculate",value:function(){return!!(0,V.w7)(this.columnWidthsMap.getValues().slice(0,this.measuredColumns),function(t){return null===t}).length}},{key:"onBeforeViewRender",value:function(){this.calculateVisibleColumnsWidth(),this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllColumnsWidth()}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllColumnsWidth():setTimeout(function(){t.hot&&t.recalculateAllColumnsWidth()},0)}},{key:"onBeforeChange",value:function(t){var e=this,n=(0,V.Sc)(t,function(t){var n=eV(t,2)[1];return e.hot.toPhysicalColumn(e.hot.propToCol(n))});this.clearCache(Array.from(new Set(n)))}},{key:"onBeforeColumnResize",value:function(t,e,n){var o=t;return n&&(this.calculateColumnsWidth(e,void 0,!0),o=this.getColumnWidth(e,void 0,!1)),o}},{key:"onAfterInit",value:function(){eq.get(this).cachedColumnHeaders=this.hot.getColHeader()}},{key:"onAfterFormulasValuesUpdate",value:function(t){var e=(0,V.w7)(t,function(t){var e;return(0,U.$K)(null===(e=t.address)||void 0===e?void 0:e.col)}),n=(0,V.Sc)(e,function(t){return t.address.col});this.clearCache(Array.from(new Set(n)))}},{key:"destroy",value:function(){this.ghostTable.clean(),eW(eG(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return eK}},{key:"PLUGIN_PRIORITY",get:function(){return 10}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 50}}],n&&eF(i.prototype,n),o&&eF(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_),e$={horizontal:"horizontal",vertical:"vertical"};function eX(t){return(eX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eJ(t,e){if(t){if("string"==typeof t)return eQ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eQ(t,e)}}function eQ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function e0(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e1(){return(e1="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e4(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function e2(t,e){return(e2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function e3(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e4(t){return(e4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("modifyAutofillRange"),tg.Z.getSingleton().register("beforeAutofill"),tg.Z.getSingleton().register("afterAutofill");var e8="autofill",e9=["fillHandle"],e6=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&e2(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=e4(i);if(e){var o=e4(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===eX(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return e3(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).eventManager=new tl.Z(e3(e)),e.addingStarted=!1,e.mouseDownOnCellCorner=!1,e.mouseDragOutside=!1,e.handleDraggedCells=0,e.directions=[],e.autoInsertRow=!1,e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings().fillHandle}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mapSettings(),this.registerEvents(),this.addHook("afterOnCellCornerMouseDown",function(e){return t.onAfterCellCornerMouseDown(e)}),this.addHook("afterOnCellCornerDblClick",function(e){return t.onCellCornerDblClick(e)}),this.addHook("beforeOnCellMouseOver",function(e,n){return t.onBeforeCellMouseOver(n)}),e1(e4(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),e1(e4(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.clearMappedSettings(),e1(e4(i.prototype),"disablePlugin",this).call(this)}},{key:"getSelectionData",value:function(){var t=this,e=this.hot.getSelectedRangeLast(),n=e.getTopStartCorner(),o=n.row,r=n.col,i=e.getBottomEndCorner(),a=i.row,l=i.col,s=this.hot.runHooks("modifyCopyableRange",[{startRow:o,startCol:r,endRow:a,endCol:l}]),u=[],c=[],f=[];return(0,V.Bk)(s,function(t){for(var e=t.startRow;e<=t.endRow;e+=1)-1===u.indexOf(e)&&u.push(e);for(var n=t.startCol;n<=t.endCol;n+=1)-1===c.indexOf(n)&&c.push(n)}),(0,V.Bk)(u,function(e){var n=[];(0,V.Bk)(c,function(o){n.push(t.hot.getCopyableData(e,o))}),f.push(n)}),f}},{key:"fillIn",value:function(){var t,e,n,o,r,i=this;if(this.hot.selection.highlight.getFill().isEmpty())return!1;var a=function(t){if(Array.isArray(t))return t}(t=this.hot.selection.highlight.getFill().getVisualCorners())||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,4)||eJ(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],s=a[1],u=a[2],c=a[3],f=this.hot.getSelectedRangeLast(),h=f.getTopStartCorner(),d=f.getBottomEndCorner();this.resetSelectionOfDraggedArea();var p=[h.row,h.col,d.row,d.col],y=this.hot.runHooks("modifyAutofillRange",[Math.min(h.row,l),Math.min(h.col,s),Math.max(d.row,u),Math.max(d.col,c)],p),g=(e=function(t,e){return i.hot._createCellCoords(t,e)},y[0]===p[0]&&y[1]<p[1]?(r="left",n=e(y[0],y[1]),o=e(y[2],p[1]-1)):y[2]===p[2]&&y[0]===p[0]&&y[3]>p[3]?(r="right",n=e(y[0],p[3]+1),o=e(y[2],y[3])):y[0]<p[0]&&y[1]===p[1]?(r="up",n=e(y[0],y[1]),o=e(p[0]-1,y[3])):y[2]>p[2]&&y[1]===p[1]&&(r="down",n=e(p[2]+1,y[1]),o=e(y[2],y[3])),n&&n.normalize(),o&&o.normalize(),{directionOfDrag:r,startOfDragCoords:n,endOfDragCoords:o}),v=g.directionOfDrag,m=g.startOfDragCoords,b=g.endOfDragCoords;if(m&&m.row>-1&&m.col>-1){var w=this.getSelectionData(),C=f.clone(),k=this.hot._createCellRange(m,m,b),S=this.hot.runHooks("beforeAutofill",w,C,k,v);if(!1===S)return this.hot.selection.highlight.getFill().clear(),this.hot.render(),!1;var O=function(t,e,n,o){var r=n.length,i=n?n[0].length:0,a=[],l=e.row-t.row,s=e.col-t.col;if(-1!==["down","up"].indexOf(o)){for(var u=[],c=0;c<s;c++){var f=parseInt(n[0][c],10),h=parseInt(n[r-1][c],10),d=("down"===o?h-f:f-h)/(r-1)||0;u.push(d)}a.push(u)}if(-1!==["right","left"].indexOf(o))for(var p=0;p<l;p++){var y=parseInt(n[p][0],10),g=parseInt(n[p][i-1],10),v=("right"===o?g-y:y-g)/(i-1)||0;a.push([v])}return a}(m,b,w,v),R=S;if(["up","left"].indexOf(v)>-1&&!(1===S.length&&0===S[0].length)){if(R=[],"up"===v)for(var P=b.row-m.row+1,E=P%S.length,M=0;M<P;M++)R.push(S[(M+(S.length-E))%S.length]);else for(var _=b.col-m.col+1,A=_%S[0].length,I=0;I<S.length;I++){R.push([]);for(var T=0;T<_;T++)R[I].push(S[I][(T+(S[I].length-A))%S[I].length])}}this.hot.populateFromArray(m.row,m.col,R,b.row,b.col,"".concat(this.pluginName,".fill"),null,v,O),this.setSelection(y),this.hot.runHooks("afterAutofill",R,C,k,v),this.hot.render()}else this.hot._refreshBorders();return!0}},{key:"reduceSelectionAreaIfNeeded",value:function(t){return t.row<0&&(t.row=0),t.col<0&&(t.col=0),t}},{key:"getCoordsOfDragAndDropBorders",value:function(t){var e=this.hot.getSelectedRangeLast(),n=e.getBottomEndCorner(),o=t;if(this.directions.includes(e$.vertical)&&this.directions.includes(e$.horizontal)){var r=e.getTopStartCorner();(n.col<=t.col||r.col>=t.col)&&(o=this.hot._createCellCoords(n.row,t.col)),(n.row<t.row||r.row>t.row)&&(o=this.hot._createCellCoords(t.row,n.col))}else if(this.directions.includes(e$.vertical))o=this.hot._createCellCoords(t.row,n.col);else{if(!this.directions.includes(e$.horizontal))return;o=this.hot._createCellCoords(n.row,t.col)}return this.reduceSelectionAreaIfNeeded(o)}},{key:"showBorder",value:function(t){var e=this.getCoordsOfDragAndDropBorders(t);e&&this.redrawBorders(e)}},{key:"addRow",value:function(){var t=this;this.hot._registerTimeout(function(){t.hot.alter("insert_row_below",void 0,1,"".concat(t.pluginName,".fill")),t.addingStarted=!1},200)}},{key:"addNewRowIfNeeded",value:function(){if(!this.hot.selection.highlight.getFill().isEmpty()&&!1===this.addingStarted&&this.autoInsertRow){var t=this.hot.getSelectedLast(),e=this.hot.selection.highlight.getFill().getVisualCorners(),n=this.hot.countRows();t[2]<n-1&&e[2]===n-1&&(this.addingStarted=!0,this.addRow())}}},{key:"getIndexOfLastAdjacentFilledInRow",value:function(t){for(var e,n=this.hot.getData(),o=this.hot.countRows(),r=t[2]+1;r<o;r++){for(var i=t[1];i<=t[3];i++)if(n[r][i])return -1;var a=n[r][t[1]-1],l=n[r][t[3]+1];(a||l)&&(e=r)}return e}},{key:"addSelectionFromStartAreaToSpecificRowIndex",value:function(t,e){this.hot.selection.highlight.getFill().clear().add(this.hot._createCellCoords(t[0],t[1])).add(this.hot._createCellCoords(e,t[3])).commit()}},{key:"setSelection",value:function(t){var e,n;(e=this.hot).selectCell.apply(e,((function(t){if(Array.isArray(t))return eQ(t)})(n=(0,V.Sc)(t,function(t){return Math.max(t,0)}))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||eJ(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([!1,!1]))}},{key:"selectAdjacent",value:function(){var t=this.hot.getSelectedLast(),e=this.getIndexOfLastAdjacentFilledInRow(t);return -1!==e&&void 0!==e&&(this.addSelectionFromStartAreaToSpecificRowIndex(t,e),!0)}},{key:"resetSelectionOfDraggedArea",value:function(){this.handleDraggedCells=0,this.hot.selection.highlight.getFill().clear()}},{key:"redrawBorders",value:function(t){this.hot.selection.highlight.getFill().clear().add(this.hot.getSelectedRangeLast().from).add(this.hot.getSelectedRangeLast().to).add(t).commit(),this.hot.view.render()}},{key:"getIfMouseWasDraggedOutside",value:function(t){var e=this.hot.rootDocument.documentElement,n=(0,_.cv)(this.hot.table).top-(this.hot.rootWindow.pageYOffset||e.scrollTop)+(0,_.Pb)(this.hot.table),o=(0,_.cv)(this.hot.table).left-(this.hot.rootWindow.pageXOffset||e.scrollLeft)+(0,_.iO)(this.hot.table);return t.clientY>n&&t.clientX<=o}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()}),this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)})}},{key:"onCellCornerDblClick",value:function(){this.selectAdjacent()&&this.fillIn()}},{key:"onAfterCellCornerMouseDown",value:function(){this.handleDraggedCells=1,this.mouseDownOnCellCorner=!0}},{key:"onBeforeCellMouseOver",value:function(t){this.mouseDownOnCellCorner&&!this.hot.view.isMouseDown()&&this.handleDraggedCells&&(this.handleDraggedCells+=1,this.showBorder(t),this.addNewRowIfNeeded())}},{key:"onMouseUp",value:function(){this.handleDraggedCells&&(this.handleDraggedCells>1&&this.fillIn(),this.handleDraggedCells=0,this.mouseDownOnCellCorner=!1)}},{key:"onMouseMove",value:function(t){var e=this.getIfMouseWasDraggedOutside(t);!1===this.addingStarted&&this.handleDraggedCells>0&&e?(this.mouseDragOutside=!0,this.addingStarted=!0):this.mouseDragOutside=!1,this.mouseDragOutside&&this.autoInsertRow&&this.addRow()}},{key:"clearMappedSettings",value:function(){this.directions.length=0,this.autoInsertRow=!1}},{key:"mapSettings",value:function(){var t,e,n=(t=this.hot.getSettings().fillHandle,e={},!0===t?(e.directions=Object.keys(e$),e.autoInsertRow=!0):(0,I.Kn)(t)?((0,U.$K)(t.autoInsertRow)?t.direction===e$.horizontal?e.autoInsertRow=!1:e.autoInsertRow=t.autoInsertRow:e.autoInsertRow=!1,(0,U.$K)(t.direction)?e.directions=[t.direction]:e.directions=Object.keys(e$)):"string"==typeof t?(e.directions=[t],e.autoInsertRow=!0):(e.directions=[],e.autoInsertRow=!1),e);this.directions=n.directions,this.autoInsertRow=n.autoInsertRow}},{key:"destroy",value:function(){e1(e4(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return e8}},{key:"PLUGIN_PRIORITY",get:function(){return 20}},{key:"SETTING_KEYS",get:function(){return[e8].concat(e9)}}],n&&e0(i.prototype,n),o&&e0(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function e7(t){return(e7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function nt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ne(){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=no(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nn(t,e){return(nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function no(t){return(no=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nr="autoRowSize",ni=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nn(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=no(i);if(e){var o=no(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===e7(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).rowHeightsMap=void 0,e.headerHeight=null,e.ghostTable=new ex(e.hot),e.samplesGenerator=new eH(function(t,n){var o;return t>=0?o=e.hot.getDataAtCell(t,n):-1===t&&(o=e.hot.getColHeader(n)),{value:o}}),e.firstCalculation=!0,e.inProgress=!1,e.measuredRows=0,e.rowHeightsMap=new eB.L,e.hot.rowIndexMapper.registerMap("autoRowSize",e.rowHeightsMap),e.addHook("beforeRowResize",function(t,n,o){return e.onBeforeRowResize(t,n,o)}),e}return n=[{key:"isEnabled",value:function(){var t=this.hot.getSettings()[nr];return!0===t||(0,I.Kn)(t)}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.setSamplingOptions(),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeChangeRender",function(e){return t.onBeforeChange(e)}),this.addHook("beforeColumnResize",function(){return t.recalculateAllRowsHeight()}),this.addHook("beforeViewRender",function(e){return t.onBeforeViewRender(e)}),this.addHook("modifyRowHeight",function(e,n){return t.getRowHeight(n,e)}),this.addHook("modifyColumnHeaderHeight",function(){return t.getColumnHeaderHeight()}),ne(no(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this;this.headerHeight=null,ne(no(i.prototype),"disablePlugin",this).call(this),this.addHook("beforeRowResize",function(e,n,o){return t.onBeforeRowResize(e,n,o)})}},{key:"calculateRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countRows()-1},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{from:0,to:this.hot.countCols()-1},o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="number"==typeof e?{from:e,to:e}:e,i="number"==typeof n?{from:n,to:n}:n;if(null!==this.hot.getColHeader(0)){var a=this.samplesGenerator.generateRowSamples(-1,i);this.ghostTable.addColumnHeadersRow(a.get(-1))}(0,t9.q4)(r.from,r.to,function(e){if(o||null===t.rowHeightsMap.getValueAtIndex(e)){var n=t.samplesGenerator.generateRowSamples(e,i);(0,V.Bk)(n,function(e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,2)||function(t,e){if(t){if("string"==typeof t)return e5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e5(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],r=n[1];return t.ghostTable.addRow(o,r)})}}),this.ghostTable.rows.length&&(this.hot.batchExecution(function(){t.ghostTable.getHeights(function(e,n){e<0?t.headerHeight=n:t.rowHeightsMap.setValueAtIndex(t.hot.toPhysicalRow(e),n)})},!0),this.measuredRows=r.to+1,this.ghostTable.clean())}},{key:"calculateAllRowsHeight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{from:0,to:this.hot.countCols()-1},n=0,o=this.hot.countRows()-1,r=null;this.inProgress=!0;var a=this.getSyncCalculationLimit();this.firstCalculation&&a>=0&&(this.calculateRowsHeight({from:0,to:a},e),this.firstCalculation=!1,n=a+1),n<o?function a(){if(!t.hot){(0,eI.Wx)(r),t.inProgress=!1;return}t.calculateRowsHeight({from:n,to:Math.min(n+i.CALCULATION_STEP,o)},e),(n=n+i.CALCULATION_STEP+1)<o?r=(0,eI.U7)(a):((0,eI.Wx)(r),t.inProgress=!1,t.hot.view.adjustElementsSize(!0),t.hot.view._wt.wtOverlays.inlineStartOverlay.needFullRender&&t.hot.view._wt.wtOverlays.inlineStartOverlay.clone.draw())}():(this.inProgress=!1,this.hot.view.adjustElementsSize(!1))}},{key:"setSamplingOptions",value:function(){var t=this.hot.getSettings()[nr],e=t&&(0,I.nr)(t,"samplingRatio")?t.samplingRatio:void 0,n=t&&(0,I.nr)(t,"allowSampleDuplicates")?t.allowSampleDuplicates:void 0;e&&!isNaN(e)&&this.samplesGenerator.setSampleCount(parseInt(e,10)),n&&this.samplesGenerator.setAllowDuplicates(n)}},{key:"recalculateAllRowsHeight",value:function(){(0,_.pn)(this.hot.view._wt.wtTable.TABLE)&&(this.clearCache(),this.calculateAllRowsHeight())}},{key:"getSyncCalculationLimit",value:function(){var t=this.hot.getSettings()[nr],e=i.SYNC_CALCULATION_LIMIT,n=this.hot.countRows()-1;return(0,I.Kn)(t)&&(e=t.syncLimit,(0,F.wK)(e)?e=(0,t9.N1)(n,e):e>>=0),Math.min(e,n)}},{key:"getRowHeight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=t<0?this.headerHeight:this.rowHeightsMap.getValueAtIndex(this.hot.toPhysicalRow(t)),o=e;return null!==n&&n>(e||0)&&(o=n),o}},{key:"getColumnHeaderHeight",value:function(){return this.headerHeight}},{key:"getFirstVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getFirstVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getFirstRenderedRow():-1}},{key:"getLastVisibleRow",value:function(){var t=this.hot.view._wt;return t.wtViewport.rowsVisibleCalculator?t.wtTable.getLastVisibleRow():t.wtViewport.rowsRenderCalculator?t.wtTable.getLastRenderedRow():-1}},{key:"clearCache",value:function(){this.headerHeight=null,this.rowHeightsMap.init()}},{key:"clearCacheByRange",value:function(t){var e=this,n="number"==typeof t?{from:t,to:t}:t,o=n.from,r=n.to;this.hot.batchExecution(function(){(0,t9.q4)(Math.min(o,r),Math.max(o,r),function(t){e.rowHeightsMap.setValueAtIndex(t,null)})},!0)}},{key:"isNeedRecalculate",value:function(){return!!(0,V.w7)(this.rowHeightsMap.getValues().slice(0,this.measuredRows),function(t){return null===t}).length}},{key:"onBeforeViewRender",value:function(){var t=this.hot.renderCall,e=this.hot.getSettings().fixedRowsBottom,n=this.getFirstVisibleRow(),o=this.getLastVisibleRow();if(-1!==n&&-1!==o){if(this.calculateRowsHeight({from:n,to:o},void 0,t),e){var r=this.hot.countRows()-1;this.calculateRowsHeight({from:r-e,to:r})}this.isNeedRecalculate()&&!this.inProgress&&this.calculateAllRowsHeight()}}},{key:"onBeforeRowMove",value:function(t,e){this.clearCacheByRange({from:t,to:e}),this.calculateAllRowsHeight()}},{key:"onBeforeRowResize",value:function(t,e,n){var o=t;return n&&(this.calculateRowsHeight(e,void 0,!0),o=this.getRowHeight(e)),o}},{key:"onAfterLoadData",value:function(){var t=this;this.hot.view?this.recalculateAllRowsHeight():setTimeout(function(){t.hot&&t.recalculateAllRowsHeight()},0)}},{key:"onBeforeChange",value:function(t){var e=null;1===t.length?e=t[0][0]:t.length>1&&(e={from:t[0][0],to:t[t.length-1][0]}),null!==e&&this.clearCacheByRange(e)}},{key:"destroy",value:function(){this.ghostTable.clean(),ne(no(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return nr}},{key:"PLUGIN_PRIORITY",get:function(){return 40}},{key:"SETTING_KEYS",get:function(){return!0}},{key:"CALCULATION_STEP",get:function(){return 50}},{key:"SYNC_CALCULATION_LIMIT",get:function(){return 500}}],n&&nt(i.prototype,n),o&&nt(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_),na=n(1023),nl=n(8863),ns=new Map([["indexesSequence",{getListWithInsertedItems:na.S,getListWithRemovedItems:na.t}],["physicallyIndexed",{getListWithInsertedItems:nl.S,getListWithRemovedItems:nl.t}]]),nu=function(t){if(!1===ns.has(t))throw Error("Alter strategy with ID '".concat(t,"' does not exist."));return ns.get(t)},nc=n(3166),nf=n(1496);function nh(t){return(nh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nd(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function np(){return(np="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ng(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ny(t,e){return(ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ng(t){return(ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nv=nu("physicallyIndexed"),nm=nv.getListWithInsertedItems,nb=nv.getListWithRemovedItems,nw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ny(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ng(i);if(e){var o=ng(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nh(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.call(this,function(t){return t})}return n=[{key:"insert",value:function(t,e){var n=(0,nc.X)(this.indexedValues,e);this.indexedValues=nm(n,t,e,this.initValueOrFn),np(ng(i.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){var e=nb(this.indexedValues,t);this.indexedValues=(0,nc.i)(e,t),np(ng(i.prototype),"remove",this).call(this,t)}}],nd(i.prototype,n),o&&nd(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(nf.n);function nC(t){return(nC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function nS(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nO(){return(nO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nP(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nR(t,e){return(nR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nP(t){return(nP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nE=nu("physicallyIndexed"),nM=nE.getListWithInsertedItems,n_=nE.getListWithRemovedItems,nA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nR(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nP(i);if(e){var o=nP(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nC(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.call(this,function(t){return t})}return n=[{key:"insert",value:function(t,e){var n=this;this.indexedValues=nM(this.indexedValues,t,e,function(t,e){return n.getNextValue(e)}),nO(nP(i.prototype),"insert",this).call(this,t,e)}},{key:"remove",value:function(t){this.indexedValues=n_(this.indexedValues,t),nO(nP(i.prototype),"remove",this).call(this,t)}},{key:"getNextValue",value:function(t){var e;return Math.max.apply(Math,function(t){if(Array.isArray(t))return nk(t)}(e=this.getValues())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return nk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(t,e)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())+1+t}}],nS(i.prototype,n),o&&nS(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(nf.n);function nI(t){return(nI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nT(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nj(){return(nj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nD(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nx(t,e){return(nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nD(t){return(nD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nH="bindRowsWithHeaders",nN=new Map([["loose",nw],["strict",nA]]),nB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nx(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nD(i);if(e){var o=nD(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nI(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).headerIndexes=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[nH]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[nH];"string"!=typeof e&&(e="loose");var n=nN.get(e);this.headerIndexes=this.hot.rowIndexMapper.registerMap("bindRowsWithHeaders",new n),this.addHook("modifyRowHeader",function(e){return t.onModifyRowHeader(e)}),nj(nD(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("bindRowsWithHeaders"),nj(nD(i.prototype),"disablePlugin",this).call(this)}},{key:"onModifyRowHeader",value:function(t){return this.headerIndexes.getValueAtIndex(this.hot.toPhysicalRow(t))}},{key:"destroy",value:function(){nj(nD(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return nH}},{key:"PLUGIN_PRIORITY",get:function(){return 210}}],n&&nT(i.prototype,n),o&&nT(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_),nL=n(3895);function nV(t){return(nV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nU(t){return function(t){if(Array.isArray(t))return nF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return nF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nF(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function nW(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function nz(){return(nz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nK(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function nY(t,e){return(nY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nG(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nK(t){return(nK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nZ(t,e){var n=nX(t,e,"get");return n.get?n.get.call(t):n.value}function n$(t,e,n){var o=nX(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function nX(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var nJ="collapsibleColumns",nQ=["nestedHeaders"],n0="collapsibleIndicator",n1=new Map([["collapse",{hideColumn:!0,beforeHook:"beforeColumnCollapse",afterHook:"afterColumnCollapse"}],["expand",{hideColumn:!1,beforeHook:"beforeColumnExpand",afterHook:"afterColumnExpand"}]]),n2=new WeakMap,n3=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nY(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=nK(i);if(e){var o=nK(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===nV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return nG(t)}(this,t)});function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var t,e,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return nq(nG(t=r.call.apply(r,[this].concat(o))),"nestedHeadersPlugin",null),nq(nG(t),"eventManager",new tl.Z(nG(t))),nq(nG(t),"headerStateManager",null),function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")}(e=nG(t),n2),n2.set(e,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[nJ]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.hot.getSettings().nestedHeaders||(0,nL.ZK)("You need to configure the Nested Headers plugin in order to use collapsible headers."),n$(this,n2,this.hot.columnIndexMapper.createAndRegisterIndexMap(this.pluginName,"hiding")),this.nestedHeadersPlugin=this.hot.getPlugin("nestedHeaders"),this.headerStateManager=this.nestedHeadersPlugin.getStateManager(),this.addHook("init",function(){return t.onInit()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("afterGetColHeader",function(){return t.onAfterGetColHeader.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(e,n,o){return t.onBeforeOnCellMouseDown(e,n,o)}),nz(nK(i.prototype),"enablePlugin",this).call(this),this.updatePlugin())}},{key:"updatePlugin",value:function(){if(this.hot.view){if(!this.nestedHeadersPlugin.detectedOverlappedHeaders){var t=this.hot.getSettings().collapsibleColumns;"boolean"==typeof t?this.headerStateManager.mapState(function(t){return{collapsible:t.origColspan>1}}):Array.isArray(t)&&(this.headerStateManager.mapState(function(){return{collapsible:!1}}),this.headerStateManager.mergeStateWith(t))}nz(nK(i.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),n$(this,n2,null),this.nestedHeadersPlugin=null,this.clearButtons(),nz(nK(i.prototype),"disablePlugin",this).call(this)}},{key:"clearButtons",value:function(){if(this.hot.view){var t=this.hot.view._wt.getSetting("columnHeaders").length,e=this.hot.view._wt.wtTable.THEAD,n=this.hot.view._wt.wtOverlays.topOverlay.clone.wtTable.THEAD,o=this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay?this.hot.view._wt.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,r=function(t){t&&t.parentNode.removeChild(t)};(0,t9.q4)(0,t-1,function(t){var i=e.childNodes[t],a=n.childNodes[t],l=o?o.childNodes[t]:null;(0,t9.q4)(0,i.childNodes.length-1,function(t){var e=i.childNodes[t].querySelector(".".concat(n0));r(e),a&&a.childNodes[t]&&r(e=a.childNodes[t].querySelector(".".concat(n0))),o&&l&&l.childNodes[t]&&r(e=l.childNodes[t].querySelector(".".concat(n0)))})},!0)}}},{key:"expandSection",value:function(t){this.toggleCollapsibleSection([t],"expand")}},{key:"collapseSection",value:function(t){this.toggleCollapsibleSection([t],"collapse")}},{key:"toggleAllCollapsibleSections",value:function(t){var e=this,n=this.headerStateManager.mapNodes(function(n){var o=n.collapsible,r=n.origColspan,i=n.headerLevel,a=n.columnIndex,l=n.isCollapsed;if(!0===o&&r>1&&(l&&"expand"===t||!l&&"collapse"===t))return{row:e.headerStateManager.levelToRowCoords(i),col:a}});this.toggleCollapsibleSection(n,t)}},{key:"collapseAll",value:function(){this.toggleAllCollapsibleSections("collapse")}},{key:"expandAll",value:function(){this.toggleAllCollapsibleSections("expand")}},{key:"toggleCollapsibleSection",value:function(t,e){var n=this;if(!n1.has(e))throw Error("Unsupported action is passed (".concat(e,")."));if(Array.isArray(t)){var o=(0,V.w7)(t,function(t){return t.row<0}),r=o.length>0;(0,V.Bk)(o,function(t){var o,i=t.row,a=t.col,l=null!==(o=n.headerStateManager.getHeaderSettings(i,a))&&void 0!==o?o:{},s=l.collapsible,u=l.isCollapsed;if(!s||u&&"collapse"===e||!u&&"expand"===e)return r=!1,!1});var i=[],a=[];r&&(0,V.Bk)(o,function(t){var o=t.row,r=t.col,l=n.headerStateManager.triggerNodeModification(e,o,r),s=l.colspanCompensation,u=l.affectedColumns,c=l.rollbackModification;s>0&&(a.push.apply(a,nU(u)),i.push(c))});var l=this.getCollapsedColumns(),s=[];"collapse"===e?s=(0,V.uW)([].concat(nU(l),a)):"expand"===e&&(s=(0,V.w7)(l,function(t){return!a.includes(t)}));var u=n1.get(e);if(!1===this.hot.runHooks(u.beforeHook,l,s,r)){(0,V.Bk)(i,function(t){t()});return}this.hot.batchExecution(function(){(0,V.Bk)(a,function(t){nZ(n,n2).setValueAtIndex(n.hot.toPhysicalColumn(t),u.hideColumn)})},!0);var c=this.getCollapsedColumns().length!==l.length;this.hot.runHooks(u.afterHook,l,s,r,c),this.hot.render(),this.hot.view.adjustElementsSize(!0)}}},{key:"getCollapsedColumns",value:function(){return nZ(this,n2).getHiddenIndexes()}},{key:"onAfterGetColHeader",value:function(t,e,n){var o,r,i=null!==(o=this.headerStateManager.getHeaderSettings(n,t))&&void 0!==o?o:{},a=i.collapsible,l=i.origColspan,s=i.isCollapsed,u=a&&l>1&&t>=this.hot.getSettings().fixedColumnsStart,c=e.querySelector(".".concat(n0));u?(c||(c=this.hot.rootDocument.createElement("div"),(0,_.cn)(c,n0),e.querySelector("div:first-child").appendChild(c)),(0,_.IV)(c,["collapsed","expanded"]),s?((0,_.cn)(c,"collapsed"),(0,_.tT)(c,"+")):((0,_.cn)(c,"expanded"),(0,_.tT)(c,"-"))):null===(r=c)||void 0===r||r.remove()}},{key:"onBeforeOnCellMouseDown",value:function(t,e){(0,_.pv)(t.target,n0)&&((0,_.pv)(t.target,"expanded")?(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"collapse")):(0,_.pv)(t.target,"collapsed")&&(this.eventManager.fireEvent(t.target,"mouseup"),this.toggleCollapsibleSection([e],"expand")),(0,A.mM)(t))}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){n$(this,n2,null),nz(nK(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return nJ}},{key:"PLUGIN_PRIORITY",get:function(){return 290}},{key:"PLUGIN_DEPS",get:function(){return["plugin:NestedHeaders"]}},{key:"SETTING_KEYS",get:function(){return[nJ].concat(nQ)}}],n&&nW(i.prototype,n),o&&nW(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);n(9337),n(3161),n(9653),n(9601);var n4=n(7161),n8=n(1923);n(4553),n(1249);var n9=n(7099);function n6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function n7(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n5(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var oe=["sortEmptyCells","indicator","headerAction","compareFunctionFactory"],on=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.sortingStates=new n9.A,this.sortEmptyCells=!1,this.indicator=!0,this.headerAction=!0,this.compareFunctionFactory=void 0,this.mapName=e,this.hot.columnIndexMapper.registerMap(e,this.sortingStates)}return t=[{key:"updateAllColumnsProperties",value:function(t){var e=this;(0,I.Kn)(t)&&(0,I._l)(t,function(t,n){oe.includes(n)&&(e[n]=t)})}},{key:"getAllColumnsProperties",value:function(){var t={sortEmptyCells:this.sortEmptyCells,indicator:this.indicator,headerAction:this.headerAction};return"function"==typeof this.compareFunctionFactory&&(t.compareFunctionFactory=this.compareFunctionFactory),t}},{key:"getSortOrderOfColumn",value:function(t){var e;return null===(e=this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))||void 0===e?void 0:e.sortOrder}},{key:"getIndexOfColumnInSortQueue",value:function(t){return t=this.hot.toPhysicalColumn(t),this.sortingStates.getEntries().findIndex(function(e){return n7(e,1)[0]===t})}},{key:"getNumberOfSortedColumns",value:function(){return this.sortingStates.getLength()}},{key:"isListOfSortedColumnsEmpty",value:function(){return 0===this.getNumberOfSortedColumns()}},{key:"isColumnSorted",value:function(t){return(0,I.Kn)(this.sortingStates.getValueAtIndex(this.hot.toPhysicalColumn(t)))}},{key:"getSortStates",value:function(){var t=this;return null===this.sortingStates?[]:this.sortingStates.getEntries().map(function(e){var n=n7(e,2),o=n[0],r=n[1];return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?n6(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n6(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({column:t.hot.toVisualColumn(o)},r)})}},{key:"getColumnSortState",value:function(t){var e=this.getSortOrderOfColumn(t);if((0,U.$K)(e))return{column:t,sortOrder:e}}},{key:"setSortStates",value:function(t){this.sortingStates.clear();for(var e=0;e<t.length;e+=1)this.sortingStates.setValueAtIndex(this.hot.toPhysicalColumn(t[e].column),{sortOrder:t[e].sortOrder})}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.mapName),this.sortingStates=null}}],ot(n.prototype,t),e&&ot(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),oo="desc";function or(t){return t===oo?void 0:"asc"===t?oo:"asc"}function oi(t){return t.querySelector(".".concat("colHeader"))}function oa(t,e){if(t<0||!e.parentNode)return!1;var n=e.parentNode.parentNode.childNodes;return -1==Array.from(n).indexOf(e.parentNode)-n.length}function ol(t,e,n){return -1===t&&e>=0&&!1===(0,A.dO)(n)}var os="indicatorDisabled",ou="columnSorting",oc="sortAction",of=new Map([["asc","ascending"],[oo,"descending"]]);function oh(t,e,n,o){var r=[ou];if(o&&r.push(oc),!1===n)return r.push(os),r;var i=t.getSortOrderOfColumn(e);return(0,U.$K)(i)&&r.push(of.get(i)),r}function od(t,e,n){var o=e.locale;return function(e,r){var i=n.sortEmptyCells;return("string"==typeof e&&(e=e.toLocaleLowerCase(o)),"string"==typeof r&&(r=r.toLocaleLowerCase(o)),e===r)?0:(0,U.xb)(e)?(0,U.xb)(r)?0:i&&"asc"===t?-1:1:(0,U.xb)(r)?i&&"asc"===t?1:-1:isNaN(e)&&!isNaN(r)?"asc"===t?1:-1:!isNaN(e)&&isNaN(r)?"asc"===t?-1:1:(isNaN(e)||isNaN(r)||(e=parseFloat(e),r=parseFloat(r)),e<r)?"asc"===t?-1:1:e>r?"asc"===t?1:-1:0}}var op="default",oy=n(4388),og=(0,oy.Z)("sorting.compareFunctionFactory"),ov=og.register,om=og.getItem,ob=og.hasItem,ow=(0,oy.Z)("sorting.mainSortComparator"),oC=ow.register,ok=ow.getItem;function oS(t){return ob(t)?om(t):om(op)}function oO(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return oR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oR(t,e)}}(t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function oP(t){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}ov("numeric",function(t,e,n){return function(e,o){var r=parseFloat(e),i=parseFloat(o),a=n.sortEmptyCells;if(r===i||isNaN(r)&&isNaN(i))return 0;if(a){if((0,U.xb)(e))return"asc"===t?-1:1;if((0,U.xb)(o))return"asc"===t?1:-1}return isNaN(r)?1:isNaN(i)?-1:r<i?"asc"===t?-1:1:r>i?"asc"===t?1:-1:0}}),ov("checkbox",function(t,e,n){var o=e.checkedTemplate,r=e.uncheckedTemplate,i=n.sortEmptyCells;return function(a,l){var s=(0,U.xb)(a),u=(0,U.xb)(l),c=s?r:a,f=u?r:l,h=c===r||c===o,d=f===r||f===o;if(!1===i){if(s&&!1===u)return 1;if(!1===s&&u)return -1}return!1===h&&d?"asc"===t?-1:1:h&&!1===d?"asc"===t?1:-1:!1===h&&!1===d?od(t,e,n)(a,l):c===r&&f===o?"asc"===t?-1:1:c===o&&f===r?"asc"===t?1:-1:0}}),ov("date",function(t,e,n){return function(o,r){var i=n.sortEmptyCells;if(o===r)return 0;if((0,U.xb)(o))return(0,U.xb)(r)?0:i&&"asc"===t?-1:1;if((0,U.xb)(r))return i&&"asc"===t?1:-1;var a=e.dateFormat,l=ti(o,a),s=ti(r,a);return l.isValid()?s.isValid()?s.isAfter(l)?"asc"===t?-1:1:s.isBefore(l)?"asc"===t?1:-1:0:-1:1}}),ov(op,od);var oE=["column"],oM=["column"];function o_(t){return function(t){if(Array.isArray(t))return oA(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return oA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oA(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function oI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function oT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oI(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oI(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function oj(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ox(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oD(){return(oD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oN(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function oH(t,e){return(oH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oN(t){return(oN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oB="columnSorting",oL="append";oC(oB,function(t,e){return function(n,o){var r,i,a,l,s,u=oO(n).slice(1),c=oO(o).slice(1);return r=t[0],i=e[0],a=u[0],l=c[0],((s=i.columnSorting).compareFunctionFactory?s.compareFunctionFactory:oS(i.type))(r,i,s)(a,l)}}),tg.Z.getSingleton().register("beforeColumnSort"),tg.Z.getSingleton().register("afterColumnSort");var oV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oH(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=oN(i);if(e){var o=oN(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===oP(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).columnStatesManager=null,e.columnMetaCache=null,e.pluginKey=oB,e.indexesSequenceCache=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[this.pluginKey]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnStatesManager=new on(this.hot,"".concat(this.pluginKey,".sortingStates")),this.columnMetaCache=new eB.L(function(e){var n=t.hot.toVisualColumn(e);return null===n&&(n=e),t.getMergedPluginSettings(n)}),this.hot.columnIndexMapper.registerMap("".concat(this.pluginKey,".columnMeta"),this.columnMetaCache),this.addHook("afterGetColHeader",function(e,n){return t.onAfterGetColHeader(e,n)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("afterOnCellMouseDown",function(e,n){return t.onAfterOnCellMouseDown(e,n)}),this.addHook("afterInit",function(){return t.loadOrSortBySettings()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.hot.view&&this.loadOrSortBySettings(),oD(oN(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){var t=this,e=function(e,n){var o=oi(n);!1!==oa(e,n)&&null!==o&&t.updateHeaderClasses(o)};this.hot.addHook("afterGetColHeader",e),this.hot.addHookOnce("afterViewRender",function(){t.hot.removeHook("afterGetColHeader",e)}),this.hot.batchExecution(function(){null!==t.indexesSequenceCache&&(t.hot.rowIndexMapper.setIndexesSequence(t.indexesSequenceCache.getValues()),t.hot.rowIndexMapper.unregisterMap(t.pluginKey))},!0),this.hot.columnIndexMapper.unregisterMap("".concat(this.pluginKey,".columnMeta")),this.columnStatesManager.destroy(),this.columnMetaCache=null,this.columnStatesManager=null,oD(oN(i.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){var e=this.getSortConfig(),n=this.getNormalizedSortConfigs(t),o=this.areValidSortConfigs(n);!1!==this.hot.runHooks("beforeColumnSort",e,n,o)&&(0===e.length&&null===this.indexesSequenceCache&&(this.indexesSequenceCache=this.hot.rowIndexMapper.registerMap(this.pluginKey,new n8.b),this.indexesSequenceCache.setValues(this.hot.rowIndexMapper.getIndexesSequence())),o&&(this.columnStatesManager.setSortStates(n),this.sortByPresetSortStates(n),this.saveAllSortSettings(n)),this.hot.runHooks("afterColumnSort",e,o?n:e,o),o&&(this.hot.render(),this.hot.forceFullRender=!1,this.hot.view.render()))}},{key:"clearSort",value:function(){this.sort([])}},{key:"isSorted",value:function(){return this.enabled&&!this.columnStatesManager.isListOfSortedColumnsEmpty()}},{key:"getSortConfig",value:function(t){return(0,U.$K)(t)?this.columnStatesManager.getColumnSortState(t):this.columnStatesManager.getSortStates()}},{key:"setSortConfig",value:function(t){var e=this.getNormalizedSortConfigs(t);this.areValidSortConfigs(e)&&this.columnStatesManager.setSortStates(e)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t.slice(0,1):[t]}},{key:"areValidSortConfigs",value:function(t){var e=this.hot.countCols();return function(t){if(t.some(function(t){return!1===function(t){if(!1===(0,I.Kn)(t))return!1;var e=t.column,n=t.sortOrder;return Number.isInteger(e)&&["asc",oo].includes(n)}(t)}))return!1;var e=t.map(function(t){return t.column});return new Set(e).size===e.length}(t)&&t.every(function(t){var n=t.column;return n<=e&&n>=0})}},{key:"saveAllSortSettings",value:function(t){var e=this,n=this.columnStatesManager.getAllColumnsProperties(),o=function(t){var n=t.column,o=oj(t,oE);return oT({column:e.hot.toPhysicalColumn(n)},o)};n.initialConfig=(0,V.Sc)(t,o),this.hot.runHooks("persistentStateSave","columnSorting",n)}},{key:"getAllSavedSortSettings",value:function(){var t=this,e={};this.hot.runHooks("persistentStateLoad","columnSorting",e);var n=e.value,o=function(e){var n=e.column,o=oj(e,oM);return oT({column:t.hot.toVisualColumn(n)},o)};return(0,U.$K)(n)&&Array.isArray(n.initialConfig)&&(n.initialConfig=(0,V.Sc)(n.initialConfig,o)),n}},{key:"getColumnNextConfig",value:function(t){var e=this.columnStatesManager.getSortOrderOfColumn(t);if((0,U.$K)(e)){var n=or(e);return(0,U.$K)(n)?{column:t,sortOrder:n}:void 0}var o=this.hot.countCols();if(Number.isInteger(t)&&t>=0&&t<o)return{column:t,sortOrder:or()}}},{key:"getNextSortConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oL,n=this.columnStatesManager.getIndexOfColumnInSortQueue(t),o=this.getSortConfig(),r=this.getColumnNextConfig(t);if(-1!==n){if((0,U.o8)(r))return[].concat(o_(o.slice(0,n)),o_(o.slice(n+1)));if(e===oL)return[].concat(o_(o.slice(0,n)),o_(o.slice(n+1)),[r]);if("replace"===e)return[].concat(o_(o.slice(0,n)),[r],o_(o.slice(n+1)))}return(0,U.$K)(r)?o.concat(r):o}},{key:"getPluginColumnConfig",value:function(t){if((0,I.Kn)(t)){var e=t[this.pluginKey];if((0,I.Kn)(e))return e}return{}}},{key:"getMergedPluginSettings",value:function(t){var e=this.hot.getSettings()[this.pluginKey],n=this.columnStatesManager.getAllColumnsProperties(),o=Object.getPrototypeOf(this.hot.getCellMeta(0,t));return Array.isArray(o.columns)?Object.assign(n,e,this.getPluginColumnConfig(o.columns[t])):(0,n4.mf)(o.columns)?Object.assign(n,e,this.getPluginColumnConfig(o.columns(t))):Object.assign(n,e)}},{key:"getFirstCellSettings",value:function(t){var e=Object.create(this.hot.getCellMeta(0,t));return e[this.pluginKey]=this.columnMetaCache.getValueAtIndex(this.hot.toPhysicalColumn(t)),e}},{key:"getNumberOfRowsToSort",value:function(t){var e=this.hot.getSettings();return e.maxRows<=t?e.maxRows:t-e.minSpareRows}},{key:"sortByPresetSortStates",value:function(t){var e=this;if(0===t.length){this.hot.rowIndexMapper.setIndexesSequence(this.indexesSequenceCache.getValues());return}for(var n=[],o=this.hot.countRows(),r=function(n){return(0,V.Sc)(t,function(t){return e.hot.getDataAtCell(n,t.column)})},i=0;i<this.getNumberOfRowsToSort(o);i+=1)n.push([this.hot.toPhysicalRow(i)].concat(r(i)));var a=(0,V.Sc)(n,function(t){return t[0]});!function(t,e){for(var n=ok(e),o=arguments.length,r=Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];t.sort(n.apply(void 0,r))}(n,this.pluginKey,(0,V.Sc)(t,function(t){return t.sortOrder}),(0,V.Sc)(t,function(t){return e.getFirstCellSettings(t.column)}));for(var l=n.length;l<o;l+=1)n.push([l].concat(r(l)));var s=(0,V.Sc)(n,function(t){return t[0]}),u=new Map((0,V.Sc)(a,function(t,e){return[t,s[e]]})),c=(0,V.Sc)(this.hot.rowIndexMapper.getIndexesSequence(),function(t){return u.has(t)?u.get(t):t});this.hot.rowIndexMapper.setIndexesSequence(c)}},{key:"loadOrSortBySettings",value:function(){var t=this.getAllSavedSortSettings();if((0,I.Kn)(t))this.sortBySettings(t);else{var e=this.hot.getSettings()[this.pluginKey];this.sortBySettings(e)}}},{key:"sortBySettings",value:function(t){if((0,I.Kn)(t)){this.columnStatesManager.updateAllColumnsProperties(t);var e=t.initialConfig;(Array.isArray(e)||(0,I.Kn)(e))&&this.sort(e)}else this.hot.render()}},{key:"onAfterGetColHeader",value:function(t,e){var n=oi(e);if(!1!==oa(t,e)&&null!==n){var o=this.getFirstCellSettings(t)[this.pluginKey],r=o.indicator,i=o.headerAction;this.updateHeaderClasses(n,this.columnStatesManager,t,r,i)}}},{key:"updateHeaderClasses",value:function(t){if((0,_.IV)(t,Array.from(of.values()).concat(oc,os,ou)),!1!==this.enabled){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];(0,_.cn)(t,oh.apply(void 0,n))}}},{key:"onUpdateSettings",value:function(t){oD(oN(i.prototype),"onUpdateSettings",this).call(this),null!==this.columnMetaCache&&this.columnMetaCache.init(this.hot.columnIndexMapper.getNumberOfIndexes()),(0,U.$K)(t[this.pluginKey])&&this.sortBySettings(t[this.pluginKey])}},{key:"onAfterLoadData",value:function(t){!0===t&&this.hot.view&&this.loadOrSortBySettings()}},{key:"wasClickableHeaderClicked",value:function(t,e){return this.getFirstCellSettings(e)[this.pluginKey].headerAction&&"SPAN"===t.target.nodeName}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,o){!1!==ol(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&this.hot.getShortcutManager().isCtrlPressed()&&(o.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==ol(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()&&(this.hot.deselectCell(),this.hot.selectColumns(e.col)),this.sort(this.getColumnNextConfig(e.col)))}},{key:"destroy",value:function(){var t;null===(t=this.columnStatesManager)||void 0===t||t.destroy(),oD(oN(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return oB}},{key:"PLUGIN_PRIORITY",get:function(){return 50}}],n&&ox(i.prototype,n),o&&ox(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function oU(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(3371),n(6977);var oF=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=this.plugin.hot,this.endpoints=[],this.settings=e,this.settingsType="array",this.currentEndpoint=null,this.cellsToSetCache=[]}return t=[{key:"getEndpoint",value:function(t){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings)[t]:this.endpoints[t]}},{key:"getAllEndpoints",value:function(){return"function"===this.settingsType?this.fillMissingEndpointData(this.settings):this.endpoints}},{key:"fillMissingEndpointData",value:function(t){return this.parseSettings(t.call(this))}},{key:"parseSettings",value:function(t){var e=this,n=[],o=t;if(!o&&"function"==typeof this.settings){this.settingsType="function";return}return o||(o=this.settings),(0,V.Bk)(o,function(t){var o={};e.assignSetting(t,o,"ranges",[[0,e.hot.countRows()-1]]),e.assignSetting(t,o,"reversedRowCoords",!1),e.assignSetting(t,o,"destinationRow",Error("\n        You must provide a destination row for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,o,"destinationColumn",Error("\n        You must provide a destination column for the Column Summary plugin in order to work properly!\n      ")),e.assignSetting(t,o,"sourceColumn",t.destinationColumn),e.assignSetting(t,o,"type","sum"),e.assignSetting(t,o,"forceNumeric",!1),e.assignSetting(t,o,"suppressDataTypeErrors",!0),e.assignSetting(t,o,"suppressDataTypeErrors",!0),e.assignSetting(t,o,"customFunction",null),e.assignSetting(t,o,"readOnly",!0),e.assignSetting(t,o,"roundFloat",!1),n.push(o)}),n}},{key:"assignSetting",value:function(t,e,n,o){if("ranges"===n&&void 0===t[n]){e[n]=o;return}if("ranges"!==n||0!==t[n].length){if(void 0===t[n]){if(o instanceof Error)throw o;e[n]=o}else"destinationRow"===n&&e.reversedRowCoords?e[n]=this.hot.countRows()-t[n]-1:e[n]=t[n]}}},{key:"resetSetupBeforeStructureAlteration",value:function(t,e,n){if("function"===this.settingsType){var o=t.indexOf("row")>-1?"row":"col",r=this.getAllEndpoints();(0,V.Bk)(r,function(r){"row"===o&&r.destinationRow>=e&&("insert_row"===t?r.alterRowOffset=n:"remove_row"===t&&(r.alterRowOffset=-1*n)),"col"===o&&r.destinationColumn>=e&&("insert_col"===t?r.alterColumnOffset=n:"remove_col"===t&&(r.alterColumnOffset=-1*n))}),this.resetAllEndpoints(r,!1)}}},{key:"resetSetupAfterStructureAlteration",value:function(t,e,n,o,r){var i=this,a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if("function"===this.settingsType){var l=function t(){return i.hot.removeHook("beforeViewRender",t),i.refreshAllEndpoints()};this.hot.addHookOnce("beforeViewRender",l);return}var s=t.indexOf("row")>-1?"row":"col",u=t.indexOf("remove")>-1?-1:1,c=this.getAllEndpoints(),f=0===t.indexOf("move_row");(0,V.Bk)(c,function(t){"row"===s&&t.destinationRow>=e&&(t.alterRowOffset=u*n),"col"===s&&t.destinationColumn>=e&&(t.alterColumnOffset=u*n)}),this.resetAllEndpoints(c,!f),f?(0,V.Bk)(c,function(t){i.extendEndpointRanges(t,e,o[0],o.length),i.recreatePhysicalRanges(t),i.clearOffsetInformation(t)}):(0,V.Bk)(c,function(t){i.shiftEndpointCoordinates(t,e)}),a&&this.refreshAllEndpoints()}},{key:"clearOffsetInformation",value:function(t){t.alterRowOffset=void 0,t.alterColumnOffset=void 0}},{key:"extendEndpointRanges",value:function(t,e,n,o){(0,V.Bk)(t.ranges,function(t){t[1]&&(e>=t[0]&&e<=t[1]?n>t[1]?t[1]+=o:n<t[0]&&(t[0]-=o):n>=t[0]&&n<=t[1]&&(t[1]-=o,e<=t[0]&&(t[0]+=1,t[1]+=1)))})}},{key:"recreatePhysicalRanges",value:function(t){var e=this,n=t.ranges,o=[],r=[];(0,V.Bk)(n,function(t){var n=[];if(t[1])for(var o=t[0];o<=t[1];o++)n.push(e.hot.toPhysicalRow(o));else n.push(e.hot.toPhysicalRow(t[0]));r.push(n)}),(0,V.Bk)(r,function(t){var e=[];(0,V.Bk)(t,function(n,r){0===r?e.push(n):t[r]!==t[r-1]+1&&(e.push(t[r-1]),o.push(e),(e=[]).push(n)),r===t.length-1&&(e.push(n),o.push(e))})}),t.ranges=o}},{key:"shiftEndpointCoordinates",value:function(t,e){t.alterRowOffset&&0!==t.alterRowOffset?(t.destinationRow+=t.alterRowOffset||0,(0,V.Bk)(t.ranges,function(n){(0,V.Bk)(n,function(o,r){o>=e&&(n[r]+=t.alterRowOffset||0)})})):t.alterColumnOffset&&0!==t.alterColumnOffset&&(t.destinationColumn+=t.alterColumnOffset||0,t.sourceColumn+=t.alterColumnOffset||0)}},{key:"resetAllEndpoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAllEndpoints(),n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e.some(function(e){var n=e.alterRowOffset||0,o=e.alterColumnOffset||0;return!!(e.destinationRow+n>=t.hot.countRows()||e.destinationColumn+o>=t.hot.countCols())})||(this.cellsToSetCache=[],(0,V.Bk)(e,function(e){t.resetEndpointValue(e,n)}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[])}},{key:"refreshAllEndpoints",value:function(){var t=this;this.cellsToSetCache=[],(0,V.Bk)(this.getAllEndpoints(),function(e){t.currentEndpoint=e,t.plugin.calculate(e),t.setEndpointValue(e,"init")}),this.currentEndpoint=null,this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshChangedEndpoints",value:function(t){var e=this,n=[];this.cellsToSetCache=[],(0,V.Bk)(t,function(t,o,r){"".concat(t[2]||"")!=="".concat(t[3])&&(0,V.Bk)(e.getAllEndpoints(),function(t,i){e.hot.propToCol(r[o][1])===t.sourceColumn&&-1===n.indexOf(i)&&n.push(i)})}),(0,V.Bk)(n,function(t){e.refreshEndpoint(e.getEndpoint(t))}),this.hot.setDataAtCell(this.cellsToSetCache,"ColumnSummary.reset"),this.cellsToSetCache=[]}},{key:"refreshEndpoint",value:function(t){this.currentEndpoint=t,this.plugin.calculate(t),this.setEndpointValue(t),this.currentEndpoint=null}},{key:"resetEndpointValue",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=t.alterRowOffset||0,o=t.alterColumnOffset||0,r=[this.hot.toVisualRow(t.destinationRow),this.hot.toVisualColumn(t.destinationColumn)],i=r[0],a=r[1];if(null!==a&&null!==i){var l=this.hot.getCellMeta(i,a);l.readOnly=!1,l.className=""}this.cellsToSetCache.push([this.hot.toVisualRow(t.destinationRow+(e?n:0)),this.hot.toVisualColumn(t.destinationColumn+(e?o:0)),""])}},{key:"setEndpointValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=-1*t.alterRowOffset||0,r=-1*t.alterColumnOffset||0,i=this.hot.toVisualRow(t.destinationRow);if(t.destinationRow>=this.hot.countRows()||t.destinationColumn>=this.hot.countCols()){this.throwOutOfBoundsWarning();return}var a=this.hot.toVisualRow(t.destinationRow+o);if(null!==a){var l=this.hot.getCellMeta(a,t.destinationColumn+r);("init"===e||l.readOnly!==t.readOnly)&&(l.readOnly=t.readOnly,l.className="columnSummaryResult")}t.roundFloat&&!isNaN(t.result)&&(t.result=t.result.toFixed(t.roundFloat)),n?this.hot.setDataAtCell(i,t.destinationColumn,t.result,"ColumnSummary.set"):this.cellsToSetCache.push([i,t.destinationColumn,t.result]),t.alterRowOffset=void 0,t.alterColumnOffset=void 0}},{key:"throwOutOfBoundsWarning",value:function(){(0,nL.ZK)("One of the Column Summary plugins' destination points you provided is beyond the table boundaries!")}}],oU(n.prototype,t),e&&oU(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),oW=n(8336);function oz(t){return null==t||isNaN(t)}function oY(t){return(oY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oG(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oK(){return(oK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oZ(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function oq(t,e){return(oq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oZ(t){return(oZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var o$="columnSummary",oX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oq(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=oZ(i);if(e){var o=oZ(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===oY(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).endpoints=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[o$]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.settings=this.hot.getSettings()[o$],this.endpoints=new oF(this,this.settings),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("afterChange",function(){return t.onAfterChange.apply(t,arguments)}),this.addHook("beforeCreateRow",function(e,n,o){return t.endpoints.resetSetupBeforeStructureAlteration("insert_row",e,n,null,o)}),this.addHook("beforeCreateCol",function(e,n,o){return t.endpoints.resetSetupBeforeStructureAlteration("insert_col",e,n,null,o)}),this.addHook("beforeRemoveRow",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_row"].concat(o))}),this.addHook("beforeRemoveCol",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.endpoints).resetSetupBeforeStructureAlteration.apply(e,["remove_col"].concat(o))}),this.addHook("afterCreateRow",function(e,n,o){return t.endpoints.resetSetupAfterStructureAlteration("insert_row",e,n,null,o)}),this.addHook("afterCreateCol",function(e,n,o){return t.endpoints.resetSetupAfterStructureAlteration("insert_col",e,n,null,o)}),this.addHook("afterRemoveRow",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_row"].concat(o))}),this.addHook("afterRemoveCol",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.endpoints).resetSetupAfterStructureAlteration.apply(e,["remove_col"].concat(o))}),this.addHook("afterRowMove",function(){return t.onAfterRowMove.apply(t,arguments)}),oK(oZ(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.endpoints=null,this.settings=null,this.currentEndpoint=null}},{key:"calculate",value:function(t){switch(t.type.toLowerCase()){case"sum":t.result=this.calculateSum(t);break;case"min":case"max":t.result=this.calculateMinMax(t,t.type);break;case"count":t.result=this.countEntries(t);break;case"average":t.result=this.calculateAverage(t);break;case"custom":t.result=t.customFunction.call(this,t)}}},{key:"calculateSum",value:function(t){var e=this,n=0;return(0,I._l)(t.ranges,function(o){n+=e.getPartialSum(o,t.sourceColumn)}),n}},{key:"getPartialSum",value:function(t,e){var n=0,o=t[1]||t[0],r=null,i=0;do{if(null!==(r=oz(r=this.getCellValue(o,e))?null:r)){var a=("".concat(r).split(".")[1]||[]).length||1;a>i&&(i=a)}n+=r||0,o-=1}while(o>=t[0]);return Math.round(n*Math.pow(10,i))/Math.pow(10,i)}},{key:"calculateMinMax",value:function(t,e){var n=this,o=null;return(0,I._l)(t.ranges,function(r){var i=n.getPartialMinMax(r,t.sourceColumn,e);if(null===o&&null!==i&&(o=i),null!==i)switch(e){case"min":o=Math.min(o,i);break;case"max":o=Math.max(o,i)}}),null===o?"Not enough data":o}},{key:"getPartialMinMax",value:function(t,e,n){var o,r=null,i=t[1]||t[0];do{if(o=oz(o=this.getCellValue(i,e))?null:o,null===r)r=o;else if(null!==o)switch(n){case"min":r=Math.min(r,o);break;case"max":r=Math.max(r,o)}i-=1}while(i>=t[0]);return r}},{key:"countEmpty",value:function(t,e){var n,o=0,r=t[1]||t[0];do null===(n=oz(n=this.getCellValue(r,e))?null:n)&&(o+=1),r-=1;while(r>=t[0]);return o}},{key:"countEntries",value:function(t){var e=this,n=0,o=t.ranges;return(0,I._l)(o,function(o){var r=void 0===o[1]?1:o[1]-o[0]+1,i=e.countEmpty(o,t.sourceColumn);n+=r,n-=i}),n}},{key:"calculateAverage",value:function(t){return this.calculateSum(t)/this.countEntries(t)}},{key:"getCellValue",value:function(t,e){var n=this.hot.toVisualRow(t),o=this.hot.toVisualColumn(e),r=this.hot.getSourceDataAtCell(t,e),i="";if(null!==n&&null!==o&&(i=this.hot.getCellMeta(n,o).className||""),i.indexOf("columnSummaryResult")>-1)return null;if(this.endpoints.currentEndpoint.forceNumeric&&("string"==typeof r&&(r=r.replace(/,/,".")),r=parseFloat(r)),isNaN(r)&&!this.endpoints.currentEndpoint.suppressDataTypeErrors)throw Error((0,oW.e)(c||(c=Object.freeze(Object.defineProperties(["ColumnSummary plugin: cell at (",", ",") is not in a \n          numeric format. Cannot do the calculation."],{raw:{value:Object.freeze(["ColumnSummary plugin: cell at (",", ",") is not in a\\x20\n          numeric format. Cannot do the calculation."])}}))),t,e));return r}},{key:"onAfterInit",value:function(){this.endpoints.endpoints=this.endpoints.parseSettings(),this.endpoints.refreshAllEndpoints(!0)}},{key:"onAfterChange",value:function(t,e){t&&"ColumnSummary.reset"!==e&&"ColumnSummary.set"!==e&&"loadData"!==e&&this.endpoints.refreshChangedEndpoints(t)}},{key:"onAfterRowMove",value:function(t,e){this.endpoints.resetSetupBeforeStructureAlteration("move_row",t[0],t.length,t,this.pluginName),this.endpoints.resetSetupAfterStructureAlteration("move_row",e,t.length,t,this.pluginName)}}],o=[{key:"PLUGIN_KEY",get:function(){return o$}},{key:"PLUGIN_PRIORITY",get:function(){return 220}}],n&&oG(i.prototype,n),o&&oG(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function oJ(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var oQ=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.rootDocument=t,this.isRtl=e,this.container=null,this.editor=this.createEditor(),this.editorStyle=this.editor.style,this.hidden=!0,this.hide()}return e=[{key:"CLASS_EDITOR_CONTAINER",get:function(){return"htCommentsContainer"}},{key:"CLASS_EDITOR",get:function(){return"htComments"}},{key:"CLASS_INPUT",get:function(){return"htCommentTextArea"}},{key:"CLASS_CELL",get:function(){return"htCommentCell"}}],t=[{key:"setPosition",value:function(t,e){this.editorStyle.left="".concat(t,"px"),this.editorStyle.top="".concat(e,"px")}},{key:"setSize",value:function(t,e){if(t&&e){var n=this.getInputElement();n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px")}}},{key:"getSize",value:function(){return{width:(0,_.iO)(this.getInputElement()),height:(0,_.Pb)(this.getInputElement())}}},{key:"resetSize",value:function(){var t=this.getInputElement();t.style.width="",t.style.height=""}},{key:"setReadOnlyState",value:function(t){this.getInputElement().readOnly=t}},{key:"show",value:function(){this.editorStyle.display="block",this.hidden=!1}},{key:"hide",value:function(){this.hidden||(this.editorStyle.display="none"),this.hidden=!0}},{key:"isVisible",value:function(){return"block"===this.editorStyle.display}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.getInputElement().value=t||""}},{key:"getValue",value:function(){return this.getInputElement().value}},{key:"isFocused",value:function(){return this.rootDocument.activeElement===this.getInputElement()}},{key:"focus",value:function(){this.getInputElement().focus()}},{key:"createEditor",value:function(){var t=this.rootDocument.createElement("div"),e=this.rootDocument.createElement("textarea");return t.style.display="none",this.container=this.rootDocument.createElement("div"),this.container.setAttribute("dir",this.isRtl?"rtl":"ltr"),(0,_.cn)(this.container,n.CLASS_EDITOR_CONTAINER),this.rootDocument.body.appendChild(this.container),(0,_.cn)(t,n.CLASS_EDITOR),(0,_.cn)(e,n.CLASS_INPUT),t.appendChild(e),this.container.appendChild(t),t}},{key:"getInputElement",value:function(){return this.editor.querySelector(".".concat(n.CLASS_INPUT))}},{key:"destroy",value:function(){var t=this.container?this.container.parentNode:null;this.editor.parentNode.removeChild(this.editor),this.editor=null,this.editorStyle=null,t&&t.removeChild(this.container)}}],oJ(n.prototype,t),e&&oJ(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();n(5069);var o0="---------";function o1(t){return(0,_.pv)(t,"htSeparator")}function o2(t){return(0,_.pv)(t,"htDisabled")}function o3(t){return(0,_.pv)(t,"htSelectionDisabled")}function o4(t){var e=t.getSelected();return!e||e[0]<0?null:e}function o8(t,e){var n={};return(0,V.Bk)(t,function(t){t.forAll(function(t,o){t>=0&&o>=0&&(n[t]||(n[t]=[]),n[t][o]=e(t,o))})}),n}function o9(t,e,n,o,r){(0,V.Bk)(t,function(t){t.forAll(function(t,i){var a,l;t>=0&&i>=0&&(a=o(t,i),l=n,a.className&&(l="vertical"===e?function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htTop","").replace("htMiddle","").replace("htBottom","").replace("  ","");return"".concat(n," ").concat(e)}(a.className,n):function(t,e){if(-1!==t.indexOf(e))return t;var n=t.replace("htLeft","").replace("htCenter","").replace("htRight","").replace("htJustify","").replace("  ","");return"".concat(n," ").concat(e)}(a.className,n)),r(t,i,"className",l))})})}function o6(t,e){var n=!1;return Array.isArray(t)&&(0,V.Bk)(t,function(t){return t.forAll(function(t,o){if(t>=0&&o>=0&&e(t,o))return n=!0,!1}),n}),n}function o7(t){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(t)}function o5(t,e){for(var n=t.slice(0);0<n.length;)if(n[0].name===e)n.shift();else break;return n}var rt=n(5981);function re(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var rn=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.wasLastActionShow=!0,this.showDebounced=null,this.hidingTimer=null,this.updateDelay(t)}return re(e.prototype,[{key:"hide",value:function(){var t=this;this.wasLastActionShow=!1,this.hidingTimer=setTimeout(function(){!1===t.wasLastActionShow&&t.runLocalHooks("hide")},250)}},{key:"show",value:function(t){this.wasLastActionShow=!0,this.showDebounced(t)}},{key:"cancelHiding",value:function(){this.wasLastActionShow=!0,clearTimeout(this.hidingTimer),this.hidingTimer=null}},{key:"updateDelay",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:250;this.showDebounced=(0,n4.Ds)(function(e){t.wasLastActionShow&&t.runLocalHooks("show",e.from.row,e.from.col)},e)}},{key:"destroy",value:function(){this.clearLocalHooks()}}]),t&&re(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();(0,I.jB)(rn,rt.Z);var ro=n(1196);function rr(t){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ra(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rl(){return(rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rc(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function rs(t,e){return(rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ru(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rc(t){return(rc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rf="comments",rh=new WeakMap,rd="comment",rp="value",ry="style",rg="readOnly",rv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rs(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=rc(i);if(e){var o=rc(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===rr(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ru(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).editor=null,e.displaySwitch=null,e.eventManager=null,e.range={},e.preventEditorAutoSwitch=!1,rh.set(ru(e),{tempEditorDimensions:{},cellBelowCursor:null}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[rf]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.editor||(this.editor=new oQ(this.hot.rootDocument,this.hot.isRtl())),this.eventManager||(this.eventManager=new tl.Z(this)),this.displaySwitch||(this.displaySwitch=new rn(this.getDisplayDelaySetting())),this.addHook("afterContextMenuDefaultOptions",function(e){return t.addToContextMenu(e)}),this.addHook("afterRenderer",function(e,n,o,r,i,a){return t.onAfterRenderer(e,a)}),this.addHook("afterScrollHorizontally",function(){return t.hide()}),this.addHook("afterScrollVertically",function(){return t.hide()}),this.addHook("afterBeginEditing",function(){return t.hide()}),this.displaySwitch.addLocalHook("hide",function(){return t.hide()}),this.displaySwitch.addLocalHook("show",function(e,n){return t.showAtCell(e,n)}),this.registerListeners(),rl(rc(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),rl(rc(i.prototype),"updatePlugin",this).call(this),this.displaySwitch.updateDelay(this.getDisplayDelaySetting())}},{key:"disablePlugin",value:function(){rl(rc(i.prototype),"disablePlugin",this).call(this)}},{key:"registerListeners",value:function(){var t=this,e=this.hot.rootDocument;this.eventManager.addEventListener(e,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(e,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()}),this.eventManager.addEventListener(this.editor.getInputElement(),"blur",function(){return t.onEditorBlur()}),this.eventManager.addEventListener(this.editor.getInputElement(),"mousedown",function(e){return t.onEditorMouseDown(e)}),this.eventManager.addEventListener(this.editor.getInputElement(),"mouseup",function(e){return t.onEditorMouseUp(e)})}},{key:"setRange",value:function(t){this.range=t}},{key:"clearRange",value:function(){this.range={}}},{key:"targetIsCellWithComment",value:function(t){var e=(0,_.oq)(t.target,"TD","TBODY");return!!(e&&(0,_.pv)(e,"htCommentCell")&&(0,_.oq)(e,[this.hot.rootElement]))}},{key:"targetIsCommentTextArea",value:function(t){return this.editor.getInputElement()===t.target}},{key:"setComment",value:function(t){if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var e=this.editor.getValue(),n="";null!=t?n=t:null!=e&&(n=e);var o=this.range.from.row,r=this.range.from.col;this.updateCommentMeta(o,r,ri({},rp,n)),this.hot.render()}},{key:"setCommentAtCell",value:function(t,e,n){this.setRange({from:this.hot._createCellCoords(t,e)}),this.setComment(n)}},{key:"removeComment",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');this.hot.setCellMeta(this.range.from.row,this.range.from.col,rd),t&&this.hot.render(),this.hide()}},{key:"removeCommentAtCell",value:function(t,e){var n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.setRange({from:this.hot._createCellCoords(t,e)}),this.removeComment(n)}},{key:"getComment",value:function(){var t=this.range.from.row,e=this.range.from.col;return this.getCommentMeta(t,e,rp)}},{key:"getCommentAtCell",value:function(t,e){return this.getCommentMeta(t,e,rp)}},{key:"show",value:function(){if(!this.range.from)throw Error('Before using this method, first set cell range (hot.getPlugin("comment").setRange())');var t=this.range.from,e=t.row,n=t.col;if(e<0||e>this.hot.countSourceRows()-1||n<0||n>this.hot.countSourceCols()-1)return!1;var o=this.hot.getCellMeta(this.range.from.row,this.range.from.col);return this.editor.setValue(o[rd]?o[rd][rp]:""),this.editor.show(),this.refreshEditor(!0),!0}},{key:"showAtCell",value:function(t,e){return this.setRange({from:this.hot._createCellCoords(t,e)}),this.show()}},{key:"hide",value:function(){this.editor.hide()}},{key:"refreshEditor",value:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n||this.range.from&&this.editor.isVisible()){var o=this.hot,r=o.rowIndexMapper,i=o.columnIndexMapper,a=this.range.from,l=a.row,s=a.col,u=r.getRenderableFromVisualIndex(l),c=i.getRenderableFromVisualIndex(s),f=null===u;null===u&&(u=r.getRenderableFromVisualIndex(r.getNearestNotHiddenIndex(l,-1))),null===c&&(c=i.getRenderableFromVisualIndex(i.getNearestNotHiddenIndex(s,-1)));var h=null===u,d=null===c;u=null!==(t=u)&&void 0!==t?t:0,c=null!==(e=c)&&void 0!==e?e:0;var p=this.hot,y=p.rootWindow,g=p.view._wt.wtTable,v=g.getCell({row:u,col:c}),m=this.getCommentMeta(l,s,ry);m?this.editor.setSize(m.width,m.height):this.editor.resetSize();var b=d?0:g.getStretchedColumnWidth(c),w=f&&!h?(0,_.Pb)(v):0,C=v.getBoundingClientRect(),k=C.left,S=C.top,O=C.width,R=C.height,P=this.editor.getSize(),E=P.width,M=P.height,A=this.hot.rootWindow,I=A.innerWidth,T=A.innerHeight,j=this.hot.rootDocument.documentElement,x=k+y.scrollX+b,D=S+y.scrollY+w;this.hot.isRtl()&&(x-=E+b),this.hot.isLtr()&&k+O+E>I?x=k+y.scrollX-E-1:this.hot.isRtl()&&x<-(j.scrollWidth-j.clientWidth)&&(x=k+y.scrollX+b+1),S+M>T&&(D-=M-R+1),this.editor.setPosition(x,D),this.editor.setReadOnlyState(this.getCommentMeta(l,s,rg))}}},{key:"checkSelectionCommentsConsistency",value:function(){var t=this.hot.getSelectedRangeLast();if(!t)return!1;var e=!1,n=t.getTopStartCorner();return this.getCommentMeta(n.row,n.col,rp)&&(e=!0),e}},{key:"updateCommentMeta",value:function(t,e,n){var o,r=this.hot.getCellMeta(t,e)[rd];r?(o=(0,I.I8)(r),(0,I.ZB)(o,n)):o=n,this.hot.setCellMeta(t,e,rd,o)}},{key:"getCommentMeta",value:function(t,e,n){var o=this.hot.getCellMeta(t,e);if(o[rd])return o[rd][n]}},{key:"onMouseDown",value:function(t){if(this.hot.view&&this.hot.view._wt&&!this.preventEditorAutoSwitch&&!this.targetIsCommentTextArea(t)){var e=(0,_.oq)(t.target,"TD","TBODY"),n=null;e&&(n=this.hot.getCoords(e)),(!e||this.range.from&&n&&(this.range.from.row!==n.row||this.range.from.col!==n.col))&&this.hide()}}},{key:"onMouseOver",value:function(t){var e=rh.get(this),n=this.hot.rootDocument;if(!(this.preventEditorAutoSwitch||this.editor.isFocused()||(0,_.pv)(t.target,"wtBorder"))&&e.cellBelowCursor!==t.target&&this.editor){if(e.cellBelowCursor=n.elementFromPoint(t.clientX,t.clientY),this.targetIsCellWithComment(t)){var o=this.hot._createCellRange(this.hot.getCoords(t.target));this.displaySwitch.show(o)}else(0,_.MO)(t.target,n)&&!this.targetIsCommentTextArea(t)&&this.displaySwitch.hide()}}},{key:"onMouseUp",value:function(){this.preventEditorAutoSwitch=!1}},{key:"onAfterRenderer",value:function(t,e){e[rd]&&e[rd][rp]&&(0,_.cn)(t,e.commentedCellClassName)}},{key:"onEditorBlur",value:function(){this.setComment()}},{key:"onEditorMouseDown",value:function(t){rh.get(this).tempEditorDimensions={width:(0,_.iO)(t.target),height:(0,_.Pb)(t.target)}}},{key:"onEditorMouseUp",value:function(t){var e=rh.get(this),n=(0,_.iO)(t.target),o=(0,_.Pb)(t.target);(n!==e.tempEditorDimensions.width+1||o!==e.tempEditorDimensions.height+2)&&this.updateCommentMeta(this.range.from.row,this.range.from.col,ri({},ry,{width:n,height:o}))}},{key:"onContextMenuAddComment",value:function(){var t=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,this.displaySwitch.cancelHiding(),this.setRange({from:t.highlight}),this.show(),this.hot.deselectCell(),this.editor.focus()}},{key:"onContextMenuRemoveComment",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll(function(e,n){e>=0&&n>=0&&t.removeCommentAtCell(e,n,!1)}),this.hot.render()}},{key:"onContextMenuMakeReadOnly",value:function(){var t=this,e=this.hot.getSelectedRangeLast();this.preventEditorAutoSwitch=!0,e.forAll(function(e,n){if(e>=0&&n>=0){var o=!!t.getCommentMeta(e,n,rg);t.updateCommentMeta(e,n,ri({},rg,!o))}})}},{key:"addToContextMenu",value:function(t){var e=this,n=function(){return e.hot.rowIndexMapper.getRenderableIndexesLength()>0&&e.hot.columnIndexMapper.getRenderableIndexesLength()>0};t.items.push({name:"---------"},{key:"commentsAddEdit",name:function(){return e.checkSelectionCommentsConsistency()?e.hot.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_EDIT_COMMENT):e.hot.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ADD_COMMENT)},callback:function(){return e.onContextMenuAddComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsRemove",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_REMOVE_COMMENT)},callback:function(){return e.onContextMenuRemoveComment()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())}},{key:"commentsReadOnly",name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_READ_ONLY_COMMENT);return o6(this.getSelectedRangeLast(),function(e,n){var o=t.getCellMeta(e,n)[rd];if(o&&(o=o[rg]),o)return!0})&&(e=o7(e)),e},callback:function(){return e.onContextMenuMakeReadOnly()},disabled:function(){return!n()||!(e.hot.getSelectedLast()&&!e.hot.selection.isSelectedByCorner())||!e.checkSelectionCommentsConsistency()}})}},{key:"getDisplayDelaySetting",value:function(){var t=this.hot.getSettings()[rf];if((0,I.Kn)(t))return t.displayDelay}},{key:"destroy",value:function(){this.editor&&this.editor.destroy(),this.displaySwitch&&this.displaySwitch.destroy(),rl(rc(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return rf}},{key:"PLUGIN_PRIORITY",get:function(){return 60}}],n&&ra(i.prototype,n),o&&ra(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function rm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var rb=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.commands={},this.commonCallback=null}return t=[{key:"registerCommand",value:function(t,e){this.commands[t]=e}},{key:"setCommonCallback",value:function(t){this.commonCallback=t}},{key:"execute",value:function(t){for(var e,n,o=this,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];var l=t.split(":"),s=l[0],u=2===l.length?l[1]:null,c=this.commands[s];if(!c)throw Error("Menu command '".concat(s,"' not exists."));if(u&&c.submenu&&(e=c.submenu.items,(0,V.Bk)(e,function(t){var e=t.key?t.key.split(":"):null;if(Array.isArray(e)&&e[1]===u)return n=t,!1}),c=n),!(!0===c.disabled||"function"==typeof c.disabled&&!0===c.disabled.call(this.hot)||(0,I.nr)(c,"submenu"))){var f=[];"function"==typeof c.callback&&f.push(c.callback),"function"==typeof this.commonCallback&&f.push(this.commonCallback),i.unshift(l.join(":")),(0,V.Bk)(f,function(t){return t.apply(o.hot,i)})}}}],rm(n.prototype,t),e&&rm(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),rw="alignment",rC="clear_column",rk="col_left",rS="col_right",rO="make_read_only",rR="redo",rP=n(1199);function rE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var rM="remove_col";function r_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var rA="remove_row",rI="row_above",rT="row_below",rj="no_items",rx="undo";function rD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rH=[rI,rT,rk,rS,rC,rA,rM,rx,rR,rO,rw,o0,rj],rN=(rD(f={},o0,function(){return{name:o0}}),rD(f,rj,function(){return{key:rj,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_NO_ITEMS)},disabled:!0,isCommand:!1}}),rD(f,rI,function(){return{key:rI,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ROW_ABOVE)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner();this.alter("insert_row_above",t.row,1,"ContextMenu.rowAbove")},disabled:function(){return!o4(this)||(this.selection.isSelectedByCorner()?0===this.countRows():this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),rD(f,rT,function(){return{key:rT,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ROW_BELOW)},callback:function(){var t=this.getSelectedRangeLast().getBottomRightCorner();this.alter("insert_row_below",t.row,1,"ContextMenu.rowBelow")},disabled:function(){return!o4(this)||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByColumnHeader()||this.countRows()>=this.getSettings().maxRows)},hidden:function(){return!this.getSettings().allowInsertRow}}}),rD(f,rk,function(){return{key:rk,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_INSERT_LEFT)},callback:function(){var t=this.getSelectedRangeLast().getTopLeftCorner(),e=this.isRtl()?"insert_col_end":"insert_col_start";this.alter(e,t.col,1,"ContextMenu.columnLeft")},disabled:function(){return!(this.isColumnModificationAllowed()&&o4(this))||(this.selection.isSelectedByCorner()?0===this.countCols():this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),rD(f,rS,function(){return{key:rS,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_INSERT_RIGHT)},callback:function(){var t=this.getSelectedRangeLast().getTopRightCorner(),e=this.isRtl()?"insert_col_start":"insert_col_end";this.alter(e,t.col,1,"ContextMenu.columnRight")},disabled:function(){return!(this.isColumnModificationAllowed()&&o4(this))||!this.selection.isSelectedByCorner()&&(this.selection.isSelectedByRowHeader()||this.countCols()>=this.getSettings().maxCols)},hidden:function(){return!this.getSettings().allowInsertColumn}}}),rD(f,rC,function(){return{key:rC,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_CLEAR_COLUMN)},callback:function(t,e){var n=e[0].start.col,o=e[0].end.col;this.countRows()&&this.populateFromArray(0,n,[[null]],Math.max(e[0].start.row,e[0].end.row),o,"ContextMenu.clearColumn")},disabled:function(){return!o4(this)||!this.selection.isSelectedByColumnHeader()}}}),rD(f,rA,function(){return{key:rA,name:function(){var t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{var n,o=function(t){if(Array.isArray(t))return t}(n=t[0])||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(n,3)||function(t,e){if(t){if("string"==typeof t)return r_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r_(t,e)}}(n,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o[0]-o[2]!=0&&(e=1)}}return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_REMOVE_ROW,e)},callback:function(){this.alter("remove_row",(0,rP.I8)(this.getSelected()),1,"ContextMenu.removeRow")},disabled:function(){if(!o4(this))return!0;var t=this.countRows();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByColumnHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveRow}}}),rD(f,rM,function(){return{key:rM,name:function(){var t=this.getSelected(),e=0;if(t){if(t.length>1)e=1;else{var n,o=function(t){if(Array.isArray(t))return t}(n=t[0])||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(n,4)||function(t,e){if(t){if("string"==typeof t)return rE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rE(t,e)}}(n,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o[1]-o[3]!=0&&(e=1)}}return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_REMOVE_COLUMN,e)},callback:function(){this.alter("remove_col",(0,rP.X8)(this.getSelected()),null,"ContextMenu.removeColumn")},disabled:function(){if(!this.isColumnModificationAllowed()||!o4(this))return!0;var t=this.countCols();return this.selection.isSelectedByCorner()?0===t:this.selection.isSelectedByRowHeader()||0===t},hidden:function(){return!this.getSettings().allowRemoveColumn}}}),rD(f,rx,function(){return{key:rx,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_UNDO)},callback:function(){this.undo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isUndoAvailable()}}}),rD(f,rR,function(){return{key:rR,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_REDO)},callback:function(){this.redo()},hidden:function(){var t=this.getPlugin("undoRedo");return!t||!t.isEnabled()},disabled:function(){return!this.getPlugin("undoRedo").isRedoAvailable()}}}),rD(f,rO,function(){return{key:rO,name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_READ_ONLY);return o6(this.getSelectedRange(),function(e,n){return t.getCellMeta(e,n).readOnly})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o6(e,function(e,n){return t.getCellMeta(e,n).readOnly});(0,V.Bk)(e,function(e){e.forAll(function(e,o){e>=0&&o>=0&&t.setCellMeta(e,o,"readOnly",!n)})}),this.render()},disabled:function(){return!!this.selection.isSelectedByCorner()||0===this.countRows()||0===this.countCols()||!this.getSelectedRange()||0===this.getSelectedRange().length}}}),rD(f,rw,function(){return{key:rw,name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT)},disabled:function(){return 0===this.countRows()||0===this.countCols()||!(this.getSelectedRange()&&!this.selection.isSelectedByCorner())},submenu:{items:[{key:"".concat(rw,":left"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_LEFT);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htLeft"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="horizontal",r="htLeft";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{key:"".concat(rw,":center"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_CENTER);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htCenter"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="horizontal",r="htCenter";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{key:"".concat(rw,":right"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_RIGHT);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htRight"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="horizontal",r="htRight";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{key:"".concat(rw,":justify"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_JUSTIFY);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htJustify"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="horizontal",r="htJustify";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{name:o0},{key:"".concat(rw,":top"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_TOP);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htTop"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="vertical",r="htTop";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{key:"".concat(rw,":middle"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_MIDDLE);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htMiddle"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="vertical",r="htMiddle";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1},{key:"".concat(rw,":bottom"),name:function(){var t=this,e=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_ALIGNMENT_BOTTOM);return o6(this.getSelectedRange(),function(e,n){var o=t.getCellMeta(e,n).className;if(o&&-1!==o.indexOf("htBottom"))return!0})&&(e=o7(e)),e},callback:function(){var t=this,e=this.getSelectedRange(),n=o8(e,function(e,n){return t.getCellMeta(e,n).className}),o="vertical",r="htBottom";this.runHooks("beforeCellAlignment",n,e,o,r),o9(e,o,r,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),this.render()},disabled:!1}]}}}),f);function rB(){var t={};return(0,I._l)(rN,function(e,n){t[n]=e()}),t}function rL(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var rV=function(){var t,e;function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.predefinedItems=rB(),this.defaultOrderPattern=e}return t=[{key:"setPredefinedItems",value:function(t){var e=this,n={};this.defaultOrderPattern.length=0,(0,I._l)(t,function(t,o){var r="";t.name===o0?(n[o0]=t,r=o0):isNaN(parseInt(o,10))?(t.key=void 0===t.key?o:t.key,n[o]=t,r=t.key):(n[t.key]=t,r=t.key),e.defaultOrderPattern.push(r)}),this.predefinedItems=n}},{key:"getItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=[],r=t;return r&&r.items?r=r.items:Array.isArray(r)||(r=e),(0,I.Kn)(r)?(0,I._l)(r,function(t,e){var r=n["string"==typeof t?t:e];r||(r=t),(0,I.Kn)(t)?(0,I.l7)(r,t):"string"==typeof r&&(r={name:r}),void 0===r.key&&(r.key=e),o.push(r)}):(0,V.Bk)(r,function(t,e){var r=n[t];!r&&rH.indexOf(t)>=0||(r||(r={name:t,key:"".concat(e)}),(0,I.Kn)(t)&&(0,I.l7)(r,t),void 0===r.key&&(r.key=e),o.push(r))}),o}(t,this.defaultOrderPattern,this.predefinedItems)}}],rL(n.prototype,t),e&&rL(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function rU(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(4603);var rF=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n);var o,r,i,a,l,s,u=(0,_.AQ)(e),c=(0,_.DZ)(e);this.rootWindow=e,this.type=this.getSourceType(t),"literal"===this.type?(o=parseInt(t.top,10),i=parseInt(t.left,10),l=t.height||0,s=t.width||0,r=o,a=i,o+=u,i+=c):"event"===this.type&&(o=parseInt(t.pageY,10),i=parseInt(t.pageX,10),l=t.target.clientHeight,s=t.target.clientWidth,r=o-u,a=i-c),this.top=o,this.topRelative=r,this.left=i,this.leftRelative=a,this.scrollTop=u,this.scrollLeft=c,this.cellHeight=l,this.cellWidth=s}return t=[{key:"getSourceType",value:function(t){var e="literal";return t instanceof Event&&(e="event"),e}},{key:"fitsAbove",value:function(t){return this.topRelative>=t.offsetHeight}},{key:"fitsBelow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerHeight;return this.topRelative+t.offsetHeight<=e}},{key:"fitsOnRight",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rootWindow.innerWidth;return this.leftRelative+this.cellWidth+t.offsetWidth<=e}},{key:"fitsOnLeft",value:function(t){return this.leftRelative>=t.offsetWidth}}],rU(n.prototype,t),e&&rU(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}(),rW=n(8194),rz=n(9931);function rY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function rG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rY(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rY(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function rK(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var rq="menu",rZ=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.options=e||{parent:null,name:null,className:"",keepInViewport:!0,standalone:!1,minWidth:215,container:this.hot.rootDocument.documentElement},this.eventManager=new tl.Z(this),this.container=this.createContainer(this.options.name),this.hotMenu=null,this.hotSubMenus={},this.parentMenu=this.options.parent||null,this.menuItems=null,this.origOutsideClickDeselects=null,this.keyEvent=!1,this.offset={above:0,below:0,left:0,right:0},this._afterScrollCallback=null,this.registerEvents()}return t=[{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"mousedown",function(e){return t.onDocumentMouseDown(e)}),this.eventManager.addEventListener(e.document,"contextmenu",function(e){return t.onDocumentContextMenu(e)}),e=(0,_.f5)(e)}},{key:"setMenuItems",value:function(t){this.menuItems=t}},{key:"getSelectedItem",value:function(){return this.hasSelectedItem()?this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]):null}},{key:"hasSelectedItem",value:function(){return Array.isArray(this.hotMenu.getSelectedLast())}},{key:"setOffset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.offset[t]=e}},{key:"isSubMenu",value:function(){return null!==this.parentMenu}},{key:"open",value:function(){var t=this;this.runLocalHooks("beforeOpen"),this.container.removeAttribute("style"),this.container.style.display="block";var e=(0,n4.Ds)(function(e){return t.openSubMenu(e)},300),n=this.options.minWidth||215,o=!1,r=(0,V.w7)(this.menuItems,function(e){var n;return e.key===rj&&(o=!0),n=t.hot,!e.hidden||!("function"==typeof e.hidden&&e.hidden.call(n))});if(r.length<1&&!o)r.push(rB()[rj]);else if(0===r.length)return;r=function(t){var e,n,o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o0,i=t.slice(0);return(e=(i=o5(i,r)).slice(0)).reverse(),(e=o5(e,r)).reverse(),n=i=e,o=[],(0,V.Bk)(n,function(t,e){e>0?o[o.length-1].name!==t.name&&o.push(t):o.push(t)}),i=o}(r,o0);var i=!1,a={data:r,colHeaders:!1,autoColumnSize:!0,autoWrapRow:!1,modifyColWidth:function(t){return(0,U.$K)(t)&&t<n?n:t},autoRowSize:!1,readOnly:!0,editor:!1,copyPaste:!1,maxCols:1,columns:[{data:"name",renderer:function(e,n,o,r,i,a){return t.menuItemRenderer(e,n,o,r,i,a)}}],renderAllRows:!0,fragmentSelection:!1,outsideClickDeselects:!1,disableVisualSelection:"area",layoutDirection:this.hot.isRtl()?"rtl":"ltr",afterOnCellMouseOver:function(n,o){t.isAllSubMenusClosed()?e(o.row):t.openSubMenu(o.row)},rowHeights:function(t){return r[t].name===o0?1:23},afterOnCellContextMenu:function(e){e.preventDefault(),(0,rz.uM)()&&i&&t.hasSelectedItem()&&t.close(!0)},beforeOnCellMouseUp:function(e){t.hasSelectedItem()&&(i=!t.isCommandPassive(t.getSelectedItem()),t.executeCommand(e))},afterOnCellMouseUp:function(e){(!(0,rz.uM)()||!(0,A.dO)(e))&&i&&t.hasSelectedItem()&&((0,rz.K1)()||(0,rz.L)()?setTimeout(function(){return t.close(!0)},325):t.close(!0))},afterUnlisten:function(){!t.hasSelectedItem()&&t.isOpened()&&t.hotMenu.listen()}};this.origOutsideClickDeselects=this.hot.getSettings().outsideClickDeselects,this.hot.getSettings().outsideClickDeselects=!1,this.hotMenu=new rW.Z(this.container,a),this.hotMenu.addHook("afterInit",function(){return t.onAfterInit()}),this.hotMenu.addHook("afterSelection",function(){return t.onAfterSelection.apply(t,arguments)}),this.hotMenu.init(),this.hotMenu.listen();var l=this.hotMenu.getShortcutManager(),s=l.addContext(rq),u=rG(rG({},{group:rq}),{},{runOnlyIf:function(e){return!1===(0,_.u7)(e.target)||!1===t.container.contains(e.target)}});l.setActiveContextName("menu"),s.addShortcuts([{keys:[["Escape"]],callback:function(){t.keyEvent=!0,t.close(),t.keyEvent=!1}},{keys:[["ArrowDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectNextCell(e[0],e[1]):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["ArrowUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.selectPrevCell(e[0],e[1]):t.selectLastCell(),t.keyEvent=!1}},{keys:[["ArrowRight"]],callback:function(){var e=t.hotMenu.getSelectedLast();if(t.keyEvent=!0,e){var n=t.openSubMenu(e[0]);n&&n.selectFirstCell()}t.keyEvent=!1}},{keys:[["ArrowLeft"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e&&t.isSubMenu()&&(t.close(),t.parentMenu&&t.parentMenu.hotMenu.listen()),t.keyEvent=!1}},{keys:[["Enter"]],callback:function(e){var n=t.hotMenu.getSelectedLast();t.keyEvent=!0,t.hotMenu.getSourceDataAtRow(n[0]).submenu||(t.executeCommand(e),t.close(!0)),t.keyEvent=!1}},{keys:[["PageUp"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(-t.hotMenu.countVisibleRows(),0):t.selectFirstCell(),t.keyEvent=!1}},{keys:[["PageDown"]],callback:function(){var e=t.hotMenu.getSelectedLast();t.keyEvent=!0,e?t.hotMenu.selection.transformStart(t.hotMenu.countVisibleRows(),0):t.selectLastCell(),t.keyEvent=!1}}],u),this.blockMainTableCallbacks(),this.runLocalHooks("afterOpen")}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isOpened()&&(t&&this.parentMenu?this.parentMenu.close():(this.closeAllSubMenus(),this.container.style.display="none",this.releaseMainTableCallbacks(),this.hotMenu.destroy(),this.hotMenu=null,this.hot.getSettings().outsideClickDeselects=this.origOutsideClickDeselects,this.runLocalHooks("afterClose"),this.parentMenu&&this.parentMenu.hotMenu.listen()))}},{key:"openSubMenu",value:function(t){if(!this.hotMenu)return!1;var e=this.hotMenu.getCell(t,0);if(this.closeAllSubMenus(),!e||!(0,_.pv)(e,"htSubmenu"))return!1;var o=this.hotMenu.getSourceDataAtRow(t),r=new n(this.hot,{parent:this,name:o.name,className:this.options.className,keepInViewport:!0,container:this.options.container});return r.setMenuItems(o.submenu.items),r.open(),r.setPosition(e.getBoundingClientRect()),this.hotSubMenus[o.key]=r,r}},{key:"closeSubMenu",value:function(t){var e=this.hotMenu.getSourceDataAtRow(t),n=this.hotSubMenus[e.key];n&&(n.destroy(),delete this.hotSubMenus[e.key])}},{key:"closeAllSubMenus",value:function(){var t=this;(0,V.Bk)(this.hotMenu.getData(),function(e,n){return t.closeSubMenu(n)})}},{key:"isAllSubMenusClosed",value:function(){return 0===Object.keys(this.hotSubMenus).length}},{key:"destroy",value:function(){var t=this.container.parentNode;this.clearLocalHooks(),this.close(),this.parentMenu=null,this.eventManager.destroy(),t&&t.removeChild(this.container)}},{key:"isOpened",value:function(){return null!==this.hotMenu}},{key:"executeCommand",value:function(t){if(this.isOpened()&&this.hasSelectedItem()){var e=this.getSelectedItem();if(this.runLocalHooks("select",e,t),!this.isCommandPassive(e)){var n=this.hot.getSelectedRange(),o=n?(0,V.Sc)(n,function(t){return{start:t.getTopStartCorner(),end:t.getBottomEndCorner()}}):[];this.runLocalHooks("executeCommand",e.key,o,t),this.isSubMenu()&&this.parentMenu.runLocalHooks("executeCommand",e.key,o,t)}}}},{key:"isCommandPassive",value:function(t){var e=t.isCommand,n=t.name,o=t.disabled,r=t.submenu,i=!0===o||"function"==typeof o&&!0===o.call(this.hot);return!1===e||n===o0||!0===i||r}},{key:"setPosition",value:function(t){var e=new rF(t,this.container.ownerDocument.defaultView);this.options.keepInViewport?(e.fitsBelow(this.container)?this.setPositionBelowCursor(e):e.fitsAbove(this.container)?this.setPositionAboveCursor(e):this.setPositionBelowCursor(e),this.hot.isLtr()?this.setHorizontalPositionForLtr(e):this.setHorizontalPositionForRtl(e)):(this.setPositionBelowCursor(e),this.setPositionOnRightOfCursor(e))}},{key:"setHorizontalPositionForRtl",value:function(t){t.fitsOnLeft(this.container)?this.setPositionOnLeftOfCursor(t):this.setPositionOnRightOfCursor(t)}},{key:"setHorizontalPositionForLtr",value:function(t){t.fitsOnRight(this.container)?this.setPositionOnRightOfCursor(t):this.setPositionOnLeftOfCursor(t)}},{key:"setPositionAboveCursor",value:function(t){var e=this.offset.above+t.top-this.container.offsetHeight;this.isSubMenu()&&(e=t.top+t.cellHeight-this.container.offsetHeight+3),this.container.style.top="".concat(e,"px")}},{key:"setPositionBelowCursor",value:function(t){var e=this.offset.below+t.top+1;this.isSubMenu()&&(e=t.top-1),this.container.style.top="".concat(e,"px")}},{key:"setPositionOnRightOfCursor",value:function(t){var e=t.left;if(this.isSubMenu()){var n=this.parentMenu.container.getBoundingClientRect().right;e+=t.cellWidth+n-(t.left+t.cellWidth)}else e+=this.offset.right;this.container.style.left="".concat(e,"px")}},{key:"setPositionOnLeftOfCursor",value:function(t){var e=this.offset.left+t.left-this.container.offsetWidth;if(this.isSubMenu()){var n=this.parentMenu.container.getBoundingClientRect().left;e-=t.left-n}this.container.style.left="".concat(e,"px")}},{key:"selectFirstCell",value:function(){var t=this.hotMenu.getCell(0,0);o1(t)||o2(t)||o3(t)?this.selectNextCell(0,0):this.hotMenu.selectCell(0,0)}},{key:"selectLastCell",value:function(){var t=this.hotMenu.countRows()-1,e=this.hotMenu.getCell(t,0);o1(e)||o2(e)||o3(e)?this.selectPrevCell(t,0):(this.hotMenu.selectCell(t,0,void 0,void 0,!1),this.hotMenu.scrollViewportTo(t,0,!0,!1))}},{key:"selectNextCell",value:function(t,e){var n=t+1,o=n<this.hotMenu.countRows()?this.hotMenu.getCell(n,e):null;o&&(o1(o)||o2(o)||o3(o)?this.selectNextCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"selectPrevCell",value:function(t,e){var n=t-1,o=n>=0?this.hotMenu.getCell(n,e):null;o&&(o1(o)||o2(o)||o3(o)?this.selectPrevCell(n,e):this.hotMenu.selectCell(n,e))}},{key:"menuItemRenderer",value:function(t,e,n,o,r,i){var a=t.getSourceDataAtRow(n),l=this.hot.rootDocument.createElement("div"),s=function(t){return t.disableSelection},u=i;("function"==typeof u&&(u=u.call(this.hot)),(0,_.cS)(e),(0,_.cn)(l,"htItemWrapper"),e.appendChild(l),RegExp(o0,"i").test(a.name))?(0,_.cn)(e,"htSeparator"):"function"==typeof a.renderer?((0,_.cn)(e,"htCustomMenuRenderer"),e.appendChild(a.renderer(t,l,n,o,r,u))):(0,_.uS)(l,u),!0===a.disabled||"function"==typeof a.disabled&&!0===a.disabled.call(this.hot)?((0,_.cn)(e,"htDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):s(a)?((0,_.cn)(e,"htSelectionDisabled"),this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()})):(0,I.nr)(a,"submenu")?((0,_.cn)(e,"htSubmenu"),s(a)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,o,void 0,void 0,!1,!1)})):((0,_.IV)(e,["htSubmenu","htDisabled"]),s(a)?this.eventManager.addEventListener(e,"mouseenter",function(){return t.deselectCell()}):this.eventManager.addEventListener(e,"mouseenter",function(){return t.selectCell(n,o,void 0,void 0,!1,!1)}))}},{key:"createContainer",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.options.container.ownerDocument,o=e;return o&&((0,n4.mf)(o)&&(o=null===(o=o.call(this.hot))||(0,U.o8)(o)?"":o.toString()),o=o.replace(/[^A-z0-9]/g,"_"),o="".concat(this.options.className,"Sub_").concat(o),t=n.querySelector(".".concat(this.options.className,".").concat(o))),t||(t=n.createElement("div"),(0,_.cn)(t,"htMenu ".concat(this.options.className)),o&&(0,_.cn)(t,o),this.options.container.appendChild(t)),t}},{key:"blockMainTableCallbacks",value:function(){this._afterScrollCallback=function(){},this.hot.addHook("afterScrollVertically",this._afterScrollCallback),this.hot.addHook("afterScrollHorizontally",this._afterScrollCallback)}},{key:"releaseMainTableCallbacks",value:function(){this._afterScrollCallback&&(this.hot.removeHook("afterScrollVertically",this._afterScrollCallback),this.hot.removeHook("afterScrollHorizontally",this._afterScrollCallback),this._afterScrollCallback=null)}},{key:"onAfterInit",value:function(){var t=this.hotMenu.view._wt.wtTable,e=this.hotMenu.getSettings().data,n=t.hider.style,o=t.holder.style,r=parseInt(n.width,10),i=(0,V.k$)(e,function(t,e){return t+(e.name===o0?1:26)},0);o.width="".concat(r+3,"px"),o.height="".concat(i+3,"px"),n.height=o.height}},{key:"onAfterSelection",value:function(t,e,n,o,r){!1===this.keyEvent&&(r.value=!0)}},{key:"onDocumentMouseDown",value:function(t){this.isOpened()&&(this.options.standalone&&this.hotMenu&&!(0,_.MO)(t.target,this.hotMenu.rootElement)?this.close(!0):(this.isAllSubMenusClosed()||this.isSubMenu())&&!(0,_.MO)(t.target,".htMenu")&&this.close(!0))}},{key:"onDocumentContextMenu",value:function(t){this.isOpened()&&(0,_.pv)(t.target,"htCore")&&(0,_.MO)(t.target,this.hotMenu.rootElement)&&t.preventDefault()}}],rK(n.prototype,t),e&&rK(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function r$(t){return(r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rX(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function rJ(){return(rJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r1(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function rQ(t,e){return(rQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function r0(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r1(t){return(r1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(0,I.jB)(rZ,rt.Z);var r2="contextMenu";tg.Z.getSingleton().register("afterContextMenuDefaultOptions"),tg.Z.getSingleton().register("beforeContextMenuShow"),tg.Z.getSingleton().register("afterContextMenuShow"),tg.Z.getSingleton().register("afterContextMenuHide"),tg.Z.getSingleton().register("afterContextMenuExecute");var r3=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rQ(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=r1(i);if(e){var o=r1(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===r$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return r0(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).eventManager=new tl.Z(r0(e)),e.commandExecutor=new rb(e.hot),e.itemsFactory=null,e.menu=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[r2]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[r2];"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),this.menu=new rZ(this.hot,{className:"htContextMenu",keepInViewport:!0,container:e.uiContainer||this.hot.rootDocument.body}),this.menu.addLocalHook("beforeOpen",function(){return t.onMenuBeforeOpen()}),this.menu.addLocalHook("afterOpen",function(){return t.onMenuAfterOpen()}),this.menu.addLocalHook("afterClose",function(){return t.onMenuAfterClose()}),this.menu.addLocalHook("executeCommand",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.executeCommand).call.apply(e,[t].concat(o))}),this.addHook("afterOnCellContextMenu",function(e){return t.onAfterOnCellContextMenu(e)}),rJ(r1(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),rJ(r1(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&(this.menu.destroy(),this.menu=null),rJ(r1(i.prototype),"disablePlugin",this).call(this)}},{key:"open",value:function(t){if(this.menu&&(this.prepareMenuItems(),this.menu.open(),this.menu.isOpened())){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var o=this.hot.rootWindow.frameElement.getBoundingClientRect(),r=o.top,i=o.left;e=r-(0,_.AQ)(t.view),n=i-(0,_.DZ)(t.view)}else e=-1*(0,_.AQ)(this.menu.hotMenu.rootWindow),n=-1*(0,_.DZ)(this.menu.hotMenu.rootWindow);this.menu.setPosition({top:parseInt(t.pageY,10)+e,left:parseInt(t.pageX,10)+n})}}},{key:"close",value:function(){this.menu&&(this.menu.close(),this.itemsFactory=null)}},{key:"executeCommand",value:function(t){var e;null===this.itemsFactory&&this.prepareMenuItems();for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(e=this.commandExecutor).execute.apply(e,[t].concat(o))}},{key:"prepareMenuItems",value:function(){var t=this;this.itemsFactory=new rV(this.hot,i.DEFAULT_ITEMS);var e=this.hot.getSettings()[r2],n={items:this.itemsFactory.getItems(e)};this.hot.runHooks("afterContextMenuDefaultOptions",n),this.itemsFactory.setPredefinedItems(n.items);var o=this.itemsFactory.getItems(e);this.hot.runHooks("beforeContextMenuSetItems",o),this.menu.setMenuItems(o),(0,V.Bk)(o,function(e){return t.commandExecutor.registerCommand(e.key,e)})}},{key:"onAfterOnCellContextMenu",value:function(t){var e=this.hot.getSettings(),n=e.rowHeaders,o=e.colHeaders,r=t.target;if(this.close(),!(0,_.pv)(r,"handsontableInput")){if(t.preventDefault(),t.stopPropagation(),!(n||o)&&!("TD"===r.nodeName||"TD"===r.parentNode.nodeName)&&!((0,_.pv)(r,"current")&&(0,_.pv)(r,"wtBorder")))return;this.open(t)}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeContextMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterContextMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterContextMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),rJ(r1(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return r2}},{key:"PLUGIN_PRIORITY",get:function(){return 70}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[rI,rT,o0,rk,rS,o0,rA,rM,o0,rx,rR,o0,rO,o0,rw]}}],n&&rX(i.prototype,n),o&&rX(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);r3.SEPARATOR={name:o0};var r4=n(1655);function r8(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r9=function(){var t;function e(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.data={}}return r8(e.prototype,[{key:"setData",value:function(t,e){this.data[t]=e}},{key:"getData",value:function(t){return this.data[t]||void 0}}]),t&&r8(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function r6(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r7=(o=function t(){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,t),this.clipboardData=new r9},r&&r6(o.prototype,r),i&&r6(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o);function r5(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var it=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.rootDocument=t.defaultView?t:t.ownerDocument,this.mainElement=null,this.eventManager=new tl.Z(this),this.listenersCount=new WeakSet,this.container=t}return t=[{key:"useSecondaryElement",value:function(){var t=function(t){var e=ii.get(t);if(e)return e.parentElement||t.appendChild(e),e;var n=(t.defaultView?t:t.ownerDocument).createElement("textarea");return ii.set(t,n),n.setAttribute("data-hot-input",""),n.className="HandsontableCopyPaste",n.tabIndex=-1,n.autocomplete="off",n.wrap="hard",n.value=" ",t.appendChild(n),n}(this.container);this.listenersCount.has(t)||(this.listenersCount.add(t),ir(this.eventManager,t,this)),this.mainElement=t}},{key:"setFocusableElement",value:function(t){this.listenersCount.has(t)||(this.listenersCount.add(t),ir(this.eventManager,t,this)),this.mainElement=t}},{key:"getFocusableElement",value:function(){return this.mainElement}},{key:"focus",value:function(){this.mainElement.value=" ",(0,rz.K1)()||(0,_.hd)(this.mainElement)}}],r5(n.prototype,t),e&&r5(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();(0,I.jB)(it,rt.Z);var ie=new WeakMap,io=function(t,e){return function(n){return e.runLocalHooks(t,n)}};function ir(t,e,n){t.addEventListener(e,"copy",io("copy",n)),t.addEventListener(e,"cut",io("cut",n)),t.addEventListener(e,"paste",io("paste",n))}var ii=new WeakMap;function ia(t){if(t instanceof it){var e=ie.get(t.container);if((e=isNaN(e)?0:e)>0&&(e-=1),!function(t){t.eventManager.clear()}(t),e<=0){e=0;var n=ii.get(t.container);n&&n.parentNode&&(n.parentNode.removeChild(n),ii.delete(t.container)),t.mainElement=null}ie.set(t.container,e)}}var il=n(9906);function is(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ic(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ih(){return(ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iy(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function id(t,e){return(id=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ip(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iy(t){return(iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("afterCopyLimit"),tg.Z.getSingleton().register("modifyCopyableRange"),tg.Z.getSingleton().register("beforeCut"),tg.Z.getSingleton().register("afterCut"),tg.Z.getSingleton().register("beforePaste"),tg.Z.getSingleton().register("afterPaste"),tg.Z.getSingleton().register("beforeCopy"),tg.Z.getSingleton().register("afterCopy");var ig="copyPaste",iv=["fragmentSelection"],im=1/0,ib=1/0,iw=new WeakMap,iC='<meta name="generator" content="Handsontable"/><style type="text/css">td{white-space:normal}br{mso-data-placement:same-cell}</style>',ik=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&id(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iy(i);if(e){var o=iy(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===iu(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ip(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).columnsLimit=ib,e.copyableRanges=[],e.focusableElement=void 0,e.pasteMode="overwrite",e.rowsLimit=im,e.uiContainer=e.hot.rootDocument.body,iw.set(ip(e),{isTriggeredByCopy:!1,isTriggeredByCut:!1,isBeginEditing:!1,isFragmentSelectionEnabled:!1}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[ig]}},{key:"enablePlugin",value:function(){var t,e,n,o=this;if(!this.enabled){var r=this.hot.getSettings(),a=r[ig],l=r.fragmentSelection;iw.get(this).isFragmentSelectionEnabled=!!l,"object"===iu(a)&&(this.pasteMode=a.pasteMode||this.pasteMode,this.rowsLimit=isNaN(a.rowsLimit)?this.rowsLimit:a.rowsLimit,this.columnsLimit=isNaN(a.columnsLimit)?this.columnsLimit:a.columnsLimit,this.uiContainer=a.uiContainer||this.uiContainer),this.addHook("afterContextMenuDefaultOptions",function(t){return o.onAfterContextMenuDefaultOptions(t)}),this.addHook("afterOnCellMouseUp",function(){return o.onAfterOnCellMouseUp()}),this.addHook("afterSelectionEnd",function(){return o.onAfterSelectionEnd()}),this.addHook("beforeKeyDown",function(){return o.onBeforeKeyDown()}),this.focusableElement=(t=this.uiContainer,e=new it(t),n=isNaN(n=ie.get(t))?0:n,ie.set(t,n+1),e),this.focusableElement.addLocalHook("copy",function(t){return o.onCopy(t)}).addLocalHook("cut",function(t){return o.onCut(t)}).addLocalHook("paste",function(t){return o.onPaste(t)}),ih(iy(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.getOrCreateFocusableElement(),ih(iy(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.focusableElement&&ia(this.focusableElement),ih(iy(i.prototype),"disablePlugin",this).call(this)}},{key:"copy",value:function(){iw.get(this).isTriggeredByCopy=!0,this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("copy")}},{key:"cut",value:function(){iw.get(this).isTriggeredByCut=!0,this.getOrCreateFocusableElement(),this.focusableElement.focus(),this.hot.rootDocument.execCommand("cut")}},{key:"getRangedCopyableData",value:function(t){var e=this,n=[],o=[],r=[];return(0,V.Bk)(t,function(t){(0,t9.q4)(t.startRow,t.endRow,function(t){-1===o.indexOf(t)&&o.push(t)}),(0,t9.q4)(t.startCol,t.endCol,function(t){-1===r.indexOf(t)&&r.push(t)})}),(0,V.Bk)(o,function(t){var o=[];(0,V.Bk)(r,function(n){o.push(e.hot.getCopyableData(t,n))}),n.push(o)}),(0,r4.P)(n)}},{key:"getRangedData",value:function(t){var e=this,n=[],o=[],r=[];return(0,V.Bk)(t,function(t){(0,t9.q4)(t.startRow,t.endRow,function(t){-1===o.indexOf(t)&&o.push(t)}),(0,t9.q4)(t.startCol,t.endCol,function(t){-1===r.indexOf(t)&&r.push(t)})}),(0,V.Bk)(o,function(t){var o=[];(0,V.Bk)(r,function(n){o.push(e.hot.getCopyableData(t,n))}),n.push(o)}),n}},{key:"paste",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(t||e){var n=new r7;t&&n.clipboardData.setData("text/plain",t),e&&n.clipboardData.setData("text/html",e),this.getOrCreateFocusableElement(),this.onPaste(n)}}},{key:"setCopyableText",value:function(){var t=this.hot.getSelectedRangeLast();if(t){var e=t.getTopStartCorner(),n=t.getBottomEndCorner(),o=e.row,r=e.col,i=n.row,a=n.col,l=Math.min(i,o+this.rowsLimit-1),s=Math.min(a,r+this.columnsLimit-1);this.copyableRanges.length=0,this.copyableRanges.push({startRow:o,startCol:r,endRow:l,endCol:s}),this.copyableRanges=this.hot.runHooks("modifyCopyableRange",this.copyableRanges),(i!==l||a!==s)&&this.hot.runHooks("afterCopyLimit",i-o+1,a-r+1,this.rowsLimit,this.columnsLimit)}}},{key:"getOrCreateFocusableElement",value:function(){var t=this.hot.getActiveEditor(),e=t?t.TEXTAREA:void 0;e?this.focusableElement.setFocusableElement(e):this.focusableElement.useSecondaryElement()}},{key:"isEditorOpened",value:function(){var t=this.hot.getActiveEditor();return t&&t.isOpened()}},{key:"populateValues",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.hot.getSelectedRangeLast();if(t.length){for(var n=t.length,o=t[0].length,r=[],i=e.getTopStartCorner(),a=i.row,l=i.col,s=e.getBottomEndCorner(),u=s.row,c=s.col,f=a,h=l,d=a,p=l;r.length<n||f<=u;){var y=this.hot.getCellMeta(f,l),g=y.skipRowOnPaste,v=y.visualRow;if(f=v+1,!0!==g){d=v,h=l;for(var m=[],b=r.length%n;m.length<o||h<=c;){var w=this.hot.getCellMeta(a,h),C=w.skipColumnOnPaste,k=w.visualCol;if(h=k+1,!0!==C){p=k;var S=m.length%o;m.push(t[b][S])}}r.push(m)}}return this.hot.populateFromArray(a,l,r,void 0,void 0,"CopyPaste.paste",this.pasteMode),[a,l,d,p]}}},{key:"onCopy",value:function(t){var e=iw.get(this);if(!(!this.hot.isListening()&&!e.isTriggeredByCopy||this.isEditorOpened())){this.setCopyableText(),e.isTriggeredByCopy=!1;var n=this.getRangedData(this.copyableRanges);if(this.hot.runHooks("beforeCopy",n,this.copyableRanges)){var o=(0,r4.P)(n);if(t&&t.clipboardData){var r=(0,il.bt)(n,this.hot.rootDocument);t.clipboardData.setData("text/plain",o),t.clipboardData.setData("text/html",[iC,r].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",o);this.hot.runHooks("afterCopy",n,this.copyableRanges)}t.preventDefault()}}},{key:"onCut",value:function(t){var e=iw.get(this);if(!(!this.hot.isListening()&&!e.isTriggeredByCut||this.isEditorOpened())){this.setCopyableText(),e.isTriggeredByCut=!1;var n=this.getRangedData(this.copyableRanges);if(this.hot.runHooks("beforeCut",n,this.copyableRanges)){var o=(0,r4.P)(n);if(t&&t.clipboardData){var r=(0,il.bt)(n,this.hot.rootDocument);t.clipboardData.setData("text/plain",o),t.clipboardData.setData("text/html",[iC,r].join(""))}else"undefined"==typeof ClipboardEvent&&this.hot.rootWindow.clipboardData.setData("Text",o);this.hot.emptySelectedCells("CopyPaste.cut"),this.hot.runHooks("afterCut",n,this.copyableRanges)}t.preventDefault()}}},{key:"onPaste",value:function(t){if(!(!this.hot.isListening()||this.isEditorOpened())){if(t&&t.preventDefault&&t.preventDefault(),t&&void 0!==t.clipboardData){var e,n,o=(0,F.Nw)(t.clipboardData.getData("text/html"),{ADD_TAGS:["meta"],ADD_ATTR:["content"],FORCE_BODY:!0});n=o&&/(<table)|(<TABLE)/g.test(o)?(0,il.BU)(o,this.hot.rootDocument).data:t.clipboardData.getData("text/plain")}else"undefined"==typeof ClipboardEvent&&void 0!==this.hot.rootWindow.clipboardData&&(n=this.hot.rootWindow.clipboardData.getData("Text"));if("string"==typeof n&&(n=(0,r4.Q)(n)),(!n||0!==n.length)&&!1!==this.hot.runHooks("beforePaste",n,this.copyableRanges)){var r=function(t){if(Array.isArray(t))return t}(e=this.populateValues(n))||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,4)||function(t,e){if(t){if("string"==typeof t)return is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return is(t,e)}}(e,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=r[0],a=r[1],l=r[2],s=r[3];this.hot.selectCell(i,a,Math.min(this.hot.countRows()-1,l),Math.min(this.hot.countCols()-1,s)),this.hot.runHooks("afterPaste",n,this.copyableRanges)}}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n;t.items.push({name:"---------"},(e=this,{key:"copy",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_COPY)},callback:function(){e.copy()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}),(n=this,{key:"cut",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_CUT)},callback:function(){n.cut()},disabled:function(){if(0===this.countRows()||0===this.countCols())return!0;var t=this.getSelected();return!t||t.length>1},hidden:!1}))}},{key:"onAfterOnCellMouseUp",value:function(){!this.hot.isListening()||this.isEditorOpened()||this.hot.getSettings().fragmentSelection||(this.getOrCreateFocusableElement(),this.focusableElement.focus())}},{key:"onAfterSelectionEnd",value:function(){var t=iw.get(this).isFragmentSelectionEnabled;!this.isEditorOpened()&&(this.getOrCreateFocusableElement(),t&&this.focusableElement.getFocusableElement()!==this.hot.rootDocument.activeElement&&(0,_.mR)()||(this.setCopyableText(),this.focusableElement.focus()))}},{key:"onBeforeKeyDown",value:function(){if(!(!this.hot.isListening()||this.isEditorOpened())){var t=this.hot.rootDocument.activeElement,e=this.hot.getActiveEditor();e&&(t===this.focusableElement.getFocusableElement()||t===e.select)&&(this.getOrCreateFocusableElement(),this.focusableElement.focus())}}},{key:"destroy",value:function(){this.focusableElement&&(ia(this.focusableElement),this.focusableElement=null),ih(iy(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return ig}},{key:"SETTING_KEYS",get:function(){return[ig].concat(iv)}},{key:"PLUGIN_PRIORITY",get:function(){return 80}}],n&&ic(i.prototype,n),o&&ic(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function iS(t,e){return"border_row".concat(t,"col").concat(e)}function iO(){return{width:1,color:"#000"}}function iR(){return{hide:!0}}function iP(t){var e,n;return((0,U.$K)(t.start)||(0,U.$K)(t.left))&&(t.start=null!==(e=t.start)&&void 0!==e?e:t.left),((0,U.$K)(t.end)||(0,U.$K)(t.right))&&(t.end=null!==(n=t.end)&&void 0!==n?n:t.right),delete t.left,delete t.right,t}function iE(t){return(0,U.$K)(t.start)&&(t.left=t.start),(0,U.$K)(t.end)&&(t.right=t.end),t}function iM(t,e){return{id:iS(t,e),border:{width:1,color:"#000",cornerVisible:!1},row:t,col:e,top:iR(),bottom:iR(),start:iR(),end:iR()}}function i_(t,e){var n=!1;return(0,V.Bk)(t.getSelectedRange(),function(o){o.forAll(function(o,r){if(!(o<0)&&!(r<0)){var i=t.getCellMeta(o,r).borders;if(i&&(!e||!(0,I.nr)(i[e],"hide")||!1===i[e].hide))return n=!0,!1}})}),n}function iA(t){return'<span class="selected">'.concat(String.fromCharCode(10003),"</span>").concat(t)}var iI=new Map([["left","start"],["right","end"]]);function iT(t){return(iT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ij(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ix(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ix(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ix(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function iD(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function iH(){return(iH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iL(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function iN(t,e){return(iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iB(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iL(t){return(iL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iV="customBorders",iU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iN(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iL(i);if(e){var o=iL(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===iT(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return iB(t)}(this,t)});function i(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var t,e,n,o,a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return e=iB(t=r.call.apply(r,[this].concat(l))),o=[],(n="savedBorders")in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[iV]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(e){return t.onAfterContextMenuDefaultOptions(e)}),this.addHook("init",function(){return t.onAfterInit()}),iH(iL(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hideBorders(),iH(iL(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.changeBorderSettings(),iH(iL(i.prototype),"updatePlugin",this).call(this)}},{key:"setBorders",value:function(t,e){var n=this,o=["top","bottom","start","end"],r=null;e&&(this.checkSettingsCohesion([e]),o=Object.keys(e),r=iP(e));var i=(0,rP.AV)(t),a=(0,rP.S5)(i);(0,V.Bk)(t,function(t){for(var e=ij(a(t),4),i=e[0],l=e[1],s=e[2],u=e[3],c=function(t){for(var e=function(e){(0,V.Bk)(o,function(o){var i;n.prepareBorderFromCustomAdded(t,e,r,null!==(i=iI.get(o))&&void 0!==i?i:o)})},i=l;i<=u;i+=1)e(i)},f=i;f<=s;f+=1)c(f)}),this.hot.view.render()}},{key:"getBorders",value:function(t){var e=this;if(!Array.isArray(t))return this.savedBorders;var n=(0,rP.AV)(t),o=(0,rP.S5)(n),r=[];return(0,V.Bk)(t,function(t){for(var n=ij(o(t),4),i=n[0],a=n[1],l=n[2],s=n[3],u=function(t){for(var n=function(n){(0,V.Bk)(e.savedBorders,function(e){e.row===t&&e.col===n&&r.push(iE(e))})},o=a;o<=s;o+=1)n(o)},c=i;c<=l;c+=1)u(c)}),r}},{key:"clearBorders",value:function(t){var e=this;t?this.setBorders(t):((0,V.Bk)(this.savedBorders,function(t){e.clearBordersFromSelectionSettings(t.id),e.clearNullCellRange(),e.hot.removeCellMeta(t.row,t.col,"borders")}),this.savedBorders.length=0)}},{key:"insertBorderIntoSettings",value:function(t,e){this.checkSavedBorders(t)||this.savedBorders.push(t);var n=this.hot._createCellRange(this.hot._createCellCoords(t.row,t.col));this.checkCustomSelections(t,n,e)||this.hot.selection.highlight.addCustomSelection({border:t,visualCellRange:n})}},{key:"prepareBorderFromCustomAdded",value:function(t,e,n,o){var r,i,a=this.hot.countRows(),l=this.hot.countCols();if(!(t>=a)&&!(e>=l)){var s=iM(t,e);n&&(r=s,i=n,(0,I.nr)(i,"border")&&i.border&&(r.border=i.border),(0,I.nr)(i,"top")&&(0,U.$K)(i.top)&&(i.top?((0,I.Kn)(i.top)||(i.top=iO()),r.top=i.top):(i.top=iR(),r.top=i.top)),(0,I.nr)(i,"bottom")&&(0,U.$K)(i.bottom)&&(i.bottom?((0,I.Kn)(i.bottom)||(i.bottom=iO()),r.bottom=i.bottom):(i.bottom=iR(),r.bottom=i.bottom)),(0,I.nr)(i,"start")&&(0,U.$K)(i.start)&&(i.start?((0,I.Kn)(i.start)||(i.start=iO()),r.start=i.start):(i.start=iR(),r.start=i.start)),(0,I.nr)(i,"end")&&(0,U.$K)(i.end)&&(i.end?((0,I.Kn)(i.end)||(i.end=iO()),r.end=i.end):(i.end=iR(),r.end=i.end)),s=r,(0,V.Bk)(this.hot.selection.highlight.customSelections,function(t){if(s.id===t.settings.id)return Object.assign(t.settings,n),s.id=t.settings.id,s.top=t.settings.top,s.bottom=t.settings.bottom,s.start=t.settings.start,s.end=t.settings.end,!1})),this.hot.setCellMeta(t,e,"borders",iE(s)),this.insertBorderIntoSettings(s,o)}}},{key:"prepareBorderFromCustomAddedRange",value:function(t,e){var n=this,o=Math.min(t.to.row,this.hot.countRows()-1),r=Math.min(t.to.col,this.hot.countCols()-1);(0,t9.q4)(t.from.row,o,function(o){(0,t9.q4)(t.from.col,r,function(r){var i=iM(o,r),a=0;o===t.from.row&&(0,I.nr)(e,"top")&&(a+=1,i.top=e.top),o===t.to.row&&(0,I.nr)(e,"bottom")&&(a+=1,i.bottom=e.bottom),r===t.from.col&&(0,I.nr)(e,"start")&&(a+=1,i.start=e.start),r===t.to.col&&(0,I.nr)(e,"end")&&(a+=1,i.end=e.end),a>0&&(n.hot.setCellMeta(o,r,"borders",iE(i)),n.insertBorderIntoSettings(i))})})}},{key:"removeAllBorders",value:function(t,e){var n=iS(t,e);this.spliceBorder(n),this.clearBordersFromSelectionSettings(n),this.clearNullCellRange(),this.hot.removeCellMeta(t,e,"borders")}},{key:"setBorder",value:function(t,e,n,o){var r=this.hot.getCellMeta(t,e).borders;r=r&&void 0!==r.border?iP(r):iM(t,e),o?(r[n]=iR(),4===this.countHide(r)?this.removeAllBorders(t,e):(this.checkCustomSelectionsFromContextMenu(r,n,o)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",iE(r)))):(r[n]=iO(),this.checkCustomSelectionsFromContextMenu(r,n,o)||this.insertBorderIntoSettings(r),this.hot.setCellMeta(t,e,"borders",iE(r)))}},{key:"prepareBorder",value:function(t,e,n){var o=this;(0,V.Bk)(t,function(t){var r=t.start,i=t.end;if(r.row===i.row&&r.col===i.col)"noBorders"===e?o.removeAllBorders(r.row,r.col):o.setBorder(r.row,r.col,e,n);else switch(e){case"noBorders":(0,t9.q4)(r.col,i.col,function(t){(0,t9.q4)(r.row,i.row,function(e){o.removeAllBorders(e,t)})});break;case"top":(0,t9.q4)(r.col,i.col,function(t){o.setBorder(r.row,t,e,n)});break;case"bottom":(0,t9.q4)(r.col,i.col,function(t){o.setBorder(i.row,t,e,n)});break;case"start":(0,t9.q4)(r.row,i.row,function(t){o.setBorder(t,r.col,e,n)});break;case"end":(0,t9.q4)(r.row,i.row,function(t){o.setBorder(t,i.col,e,n)})}})}},{key:"createCustomBorders",value:function(t){var e=this;(0,V.Bk)(t,function(t){var n=iP(t);t.range?e.prepareBorderFromCustomAddedRange(t.range,n):e.prepareBorderFromCustomAdded(t.row,t.col,n)})}},{key:"countHide",value:function(t){var e=t.top,n=t.bottom,o=t.start,r=t.end;return(0,V.k$)([e,n,o,r],function(t,e){var n=t;return e&&e.hide&&(n+=1),n},0)}},{key:"clearBordersFromSelectionSettings",value:function(t){var e=(0,V.Sc)(this.hot.selection.highlight.customSelections,function(t){return t.settings.id}).indexOf(t);e>-1&&this.hot.selection.highlight.customSelections[e].clear()}},{key:"clearNullCellRange",value:function(){var t=this;(0,V.Bk)(this.hot.selection.highlight.customSelections,function(e,n){if(null===e.cellRange)return t.hot.selection.highlight.customSelections[n].destroy(),t.hot.selection.highlight.customSelections.splice(n,1),!1})}},{key:"hideBorders",value:function(){var t=this;(0,V.Bk)(this.savedBorders,function(e){t.clearBordersFromSelectionSettings(e.id),t.clearNullCellRange()})}},{key:"spliceBorder",value:function(t){var e=(0,V.Sc)(this.savedBorders,function(t){return t.id}).indexOf(t);e>-1&&this.savedBorders.splice(e,1)}},{key:"checkSavedBorders",value:function(t){var e=this,n=!1;return 4===this.countHide(t)?(this.spliceBorder(t.id),n=!0):(0,V.Bk)(this.savedBorders,function(o,r){if(t.id===o.id)return e.savedBorders[r]=t,n=!0,!1}),n}},{key:"checkCustomSelectionsFromContextMenu",value:function(t,e,n){var o=!1;return(0,V.Bk)(this.hot.selection.highlight.customSelections,function(r){if(t.id===r.settings.id)return(0,I._l)(r.instanceBorders,function(t){t.toggleHiddenClass(e,n)}),o=!0,!1}),o}},{key:"checkCustomSelections",value:function(t,e,n){var o=this.countHide(t),r=!1;return 4===o?(this.removeAllBorders(t.row,t.col),r=!0):(0,V.Bk)(this.hot.selection.highlight.customSelections,function(o){if(t.id===o.settings.id)return o.visualCellRange=e,o.commit(),n&&(0,I._l)(o.instanceBorders,function(e){e.changeBorderStyle(n,t)}),r=!0,!1}),r}},{key:"changeBorderSettings",value:function(){var t=this.hot.getSettings()[iV];if(Array.isArray(t)){var e=(0,I.I8)(t);this.checkSettingsCohesion(e),e.length||(this.savedBorders=e),this.createCustomBorders(e)}else void 0!==t&&this.createCustomBorders(this.savedBorders)}},{key:"checkSettingsCohesion",value:function(t){var e=t.some(function(t){return(0,U.$K)(t.left)||(0,U.$K)(t.right)}),n=t.some(function(t){return(0,U.$K)(t.start)||(0,U.$K)(t.end)});if(e&&n)throw Error('The "left"/"right" and "start"/"end" options should not be used together. Please use only the option "start"/"end".');if(this.hot.isRtl()&&e)throw Error('The "left"/"right" properties are not supported for RTL. Please use option "start"/"end".')}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,o,r,i,a,l;this.hot.getSettings()[iV]&&t.items.push({name:"---------"},{key:"borders",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_BORDERS)},disabled:function(){return this.selection.isSelectedByCorner()},submenu:{items:[(e=this,{key:"borders:top",name:function(){var t=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_BORDERS_TOP);return i_(this,"top")&&(t=iA(t)),t},callback:function(t,n){var o=i_(this,"top");e.prepareBorder(n,"top",o)}}),(n=this,o=n.hot.isRtl()?"start":"end",{key:"borders:right",name:function(){var t=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_BORDERS_RIGHT);return i_(this,o)&&(t=iA(t)),t},callback:function(t,e){var r=i_(this,o);n.prepareBorder(e,o,r)}}),(r=this,{key:"borders:bottom",name:function(){var t=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_BORDERS_BOTTOM);return i_(this,"bottom")&&(t=iA(t)),t},callback:function(t,e){var n=i_(this,"bottom");r.prepareBorder(e,"bottom",n)}}),(i=this,a=i.hot.isRtl()?"end":"start",{key:"borders:left",name:function(){var t=this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_BORDERS_LEFT);return i_(this,a)&&(t=iA(t)),t},callback:function(t,e){var n=i_(this,a);i.prepareBorder(e,a,n)}}),(l=this,{key:"borders:no_borders",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_REMOVE_BORDERS)},callback:function(t,e){l.prepareBorder(e,"noBorders")},disabled:function(){return!i_(this)}})]}})}},{key:"onAfterInit",value:function(){this.changeBorderSettings()}},{key:"destroy",value:function(){iH(iL(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return iV}},{key:"PLUGIN_PRIORITY",get:function(){return 90}}],n&&iD(i.prototype,n),o&&iD(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function iF(t){return(iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iW(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function iz(){return(iz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iK(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function iY(t,e){return(iY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iG(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iK(t){return(iK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iq="dragToScroll",iZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iY(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=iK(i);if(e){var o=iK(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===iF(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return iG(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).eventManager=new tl.Z(iG(e)),e.boundaries=null,e.callback=null,e.listening=!1,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[iq]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterOnCellMouseDown",function(e){return t.setupListening(e)}),this.addHook("afterOnCellCornerMouseDown",function(e){return t.setupListening(e)}),this.registerEvents(),iz(iK(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),iz(iK(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.unregisterEvents(),iz(iK(i.prototype),"disablePlugin",this).call(this)}},{key:"setBoundaries",value:function(t){this.boundaries=t}},{key:"setCallback",value:function(t){this.callback=t}},{key:"check",value:function(t,e){var n=0,o=0;e<this.boundaries.top?o=e-this.boundaries.top:e>this.boundaries.bottom&&(o=e-this.boundaries.bottom),t<this.boundaries.left?n=t-this.boundaries.left:t>this.boundaries.right&&(n=t-this.boundaries.right),this.callback(n,o)}},{key:"listen",value:function(){this.listening=!0}},{key:"unlisten",value:function(){this.listening=!1}},{key:"isListening",value:function(){return this.listening}},{key:"registerEvents",value:function(){for(var t=this,e=this.hot.rootWindow;e;)this.eventManager.addEventListener(e.document,"contextmenu",function(){return t.unlisten()}),this.eventManager.addEventListener(e.document,"mouseup",function(){return t.unlisten()}),this.eventManager.addEventListener(e.document,"mousemove",function(e){return t.onMouseMove(e)}),e=(0,_.f5)(e)}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"setupListening",value:function(t){if(!(0,A.dO)(t)){var e=this.hot.view._wt.wtTable.holder;e!==this.hot.rootWindow&&(this.setBoundaries(e.getBoundingClientRect()),this.setCallback(function(t,n){t<0?e.scrollLeft-=50:t>0&&(e.scrollLeft+=50),n<0?e.scrollTop-=20:n>0&&(e.scrollTop+=20)}),this.listen())}}},{key:"onMouseMove",value:function(t){this.isListening()&&this.check(t.clientX,t.clientY)}},{key:"destroy",value:function(){iz(iK(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return iq}},{key:"PLUGIN_PRIORITY",get:function(){return 100}}],n&&iW(i.prototype,n),o&&iW(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function i$(t){return(i$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iX(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function iJ(){return(iJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i1(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function iQ(t,e){return(iQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i0(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i1(t){return(i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("afterDropdownMenuDefaultOptions"),tg.Z.getSingleton().register("beforeDropdownMenuShow"),tg.Z.getSingleton().register("afterDropdownMenuShow"),tg.Z.getSingleton().register("afterDropdownMenuHide"),tg.Z.getSingleton().register("afterDropdownMenuExecute");var i2="dropdownMenu",i3="changeType",i4=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iQ(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=i1(i);if(e){var o=i1(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===i$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return i0(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).eventManager=new tl.Z(i0(e)),e.commandExecutor=new rb(e.hot),e.itemsFactory=null,e.menu=null,e.hot.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[i2]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.itemsFactory=new rV(this.hot,i.DEFAULT_ITEMS);var e=this.hot.getSettings()[i2],n={items:this.itemsFactory.getItems(e)};this.registerEvents(),"function"==typeof e.callback&&this.commandExecutor.setCommonCallback(e.callback),iJ(i1(i.prototype),"enablePlugin",this).call(this),this.callOnPluginsReady(function(){t.hot.runHooks("afterDropdownMenuDefaultOptions",n),t.itemsFactory.setPredefinedItems(n.items);var o=t.itemsFactory.getItems(e);t.menu&&t.menu.destroy(),t.menu=new rZ(t.hot,{className:"htDropdownMenu",keepInViewport:!0,container:e.uiContainer||t.hot.rootDocument.body}),t.hot.runHooks("beforeDropdownMenuSetItems",o),t.menu.setMenuItems(o),t.menu.addLocalHook("beforeOpen",function(){return t.onMenuBeforeOpen()}),t.menu.addLocalHook("afterOpen",function(){return t.onMenuAfterOpen()}),t.menu.addLocalHook("afterClose",function(){return t.onMenuAfterClose()}),t.menu.addLocalHook("executeCommand",function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.executeCommand).call.apply(e,[t].concat(o))}),(0,V.Bk)(o,function(e){return t.commandExecutor.registerCommand(e.key,e)})})}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),iJ(i1(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.close(),this.menu&&this.menu.destroy(),iJ(i1(i.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.eventManager.addEventListener(this.hot.rootElement,"click",function(e){return t.onTableClick(e)})}},{key:"open",value:function(t){this.menu&&(this.menu.open(),t.width&&this.menu.setOffset("left",t.width),this.menu.setPosition(t))}},{key:"close",value:function(){this.menu&&this.menu.close()}},{key:"executeCommand",value:function(t){for(var e,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];(e=this.commandExecutor).execute.apply(e,[t].concat(o))}},{key:"setListening",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.menu.isOpened()&&(t?this.menu.hotMenu.listen():this.menu.hotMenu.unlisten())}},{key:"onTableClick",value:function(t){if(t.stopPropagation(),(0,_.pv)(t.target,i3)&&!this.menu.isOpened()){var e=0,n=0;if(this.hot.rootDocument!==this.menu.container.ownerDocument){var o=this.hot.rootWindow.frameElement.getBoundingClientRect(),r=o.top,i=o.left;e=r,n=i}var a=t.target.getBoundingClientRect();this.open({left:a.left+n,top:a.top+t.target.offsetHeight+3+e,width:a.width,height:a.height})}}},{key:"onAfterGetColHeader",value:function(t,e){var n=e.parentNode;if(n){var o=n.parentNode.childNodes,r=Array.prototype.indexOf.call(o,n);if(!(t<0)&&r===o.length-1){var i=e.querySelector(".".concat(i3));if(!this.enabled||!i){if(!this.enabled){i&&i.parentNode.removeChild(i);return}var a=this.hot.rootDocument.createElement("button");a.className=i3,a.type="button",a.onclick=function(){return!1},e.firstChild.insertBefore(a,e.firstChild.firstChild)}}}}},{key:"onMenuBeforeOpen",value:function(){this.hot.runHooks("beforeDropdownMenuShow",this)}},{key:"onMenuAfterOpen",value:function(){this.hot.runHooks("afterDropdownMenuShow",this)}},{key:"onMenuAfterClose",value:function(){this.hot.listen(),this.hot.runHooks("afterDropdownMenuHide",this)}},{key:"destroy",value:function(){this.close(),this.menu&&this.menu.destroy(),iJ(i1(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return i2}},{key:"PLUGIN_PRIORITY",get:function(){return 230}},{key:"PLUGIN_DEPS",get:function(){return["plugin:AutoColumnSize"]}},{key:"DEFAULT_ITEMS",get:function(){return[rk,rS,o0,rM,o0,rC,o0,rO,o0,rw]}}],n&&iX(i.prototype,n),o&&iX(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function i8(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function i9(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i4.SEPARATOR={name:o0};var i6=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.options={}}return t=[{key:"setOptions",value:function(t){this.options=t}},{key:"getData",value:function(){var t=this,e=this._getDataRange(),n=e.startRow,o=e.startCol,r=e.endRow,i=e.endCol,a=this.options,l=[];return(0,t9.q4)(n,r,function(e){var n=[];!a.exportHiddenRows&&t._isHiddenRow(e)||((0,t9.q4)(o,i,function(o){!a.exportHiddenColumns&&t._isHiddenColumn(o)||n.push(t.hot.getDataAtCell(e,o))}),l.push(n))}),l}},{key:"getRowHeaders",value:function(){var t=this,e=[];if(this.options.rowHeaders){var n=this._getDataRange(),o=n.startRow,r=n.endRow,i=this.hot.getRowHeader();(0,t9.q4)(o,r,function(n){!t.options.exportHiddenRows&&t._isHiddenRow(n)||e.push(i[n])})}return e}},{key:"getColumnHeaders",value:function(){var t=this,e=[];if(this.options.columnHeaders){var n=this._getDataRange(),o=n.startCol,r=n.endCol,i=this.hot.getColHeader();(0,t9.q4)(o,r,function(n){!t.options.exportHiddenColumns&&t._isHiddenColumn(n)||e.push(i[n])})}return e}},{key:"_getDataRange",value:function(){var t,e=this.hot.countCols()-1,n=this.hot.countRows()-1,o=function(t){if(Array.isArray(t))return t}(t=this.options.range)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,4)||function(t,e){if(t){if("string"==typeof t)return i8(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i8(t,e)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=o[0],i=void 0===r?0:r,a=o[1],l=void 0===a?0:a,s=o[2],u=void 0===s?n:s,c=o[3],f=void 0===c?e:c;return{startRow:i=Math.max(i,0),startCol:l=Math.max(l,0),endRow:u=Math.min(u,n),endCol:f=Math.min(f,e)}}},{key:"_isHiddenRow",value:function(t){return this.hot.rowIndexMapper.isHidden(this.hot.toPhysicalRow(t))}},{key:"_isHiddenColumn",value:function(t){return this.hot.columnIndexMapper.isHidden(this.hot.toPhysicalColumn(t))}}],i9(n.prototype,t),e&&i9(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function i7(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i5(t){return(i5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ae(t,e){return(ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(3112);var ao=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ae(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=an(i);if(e){var o=an(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===i5(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/csv",fileExtension:"csv",bom:!0,columnDelimiter:",",rowDelimiter:"\r\n"}}}],n=[{key:"export",value:function(){var t=this,e=this.options,n=this.dataProvider.getData(),o=this.dataProvider.getColumnHeaders(),r=o.length>0,i=this.dataProvider.getRowHeaders(),a=i.length>0,l=e.bom?String.fromCharCode(65279):"";return r&&(o=(0,V.Sc)(o,function(e){return t._escapeCell(e,!0)}),a&&(l+=e.columnDelimiter),l+=o.join(e.columnDelimiter),l+=e.rowDelimiter),(0,V.Bk)(n,function(n,o){o>0&&(l+=e.rowDelimiter),a&&(l+=t._escapeCell(i[o])+e.columnDelimiter),l+=n.map(function(e){return t._escapeCell(e)}).join(e.columnDelimiter)}),l}},{key:"_escapeCell",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,U.Pz)(t);return""!==n&&(e||n.indexOf("\r")>=0||n.indexOf('"')>=0||n.indexOf("\n")>=0||n.indexOf(this.options.columnDelimiter)>=0)&&(n=n.replace(RegExp('"',"g"),'""'),n='"'.concat(n,'"')),n}}],at(i.prototype,n),o&&at(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.dataProvider=t,this.options=this._mergeOptions(e),this.dataProvider.setOptions(this.options)}return e=[{key:"DEFAULT_OPTIONS",get:function(){return{mimeType:"text/plain",fileExtension:"txt",filename:"Handsontable [YYYY]-[MM]-[DD]",encoding:"utf-8",bom:!1,columnHeaders:!1,rowHeaders:!1,exportHiddenColumns:!1,exportHiddenRows:!1,range:[]}}}],t=[{key:"_mergeOptions",value:function(t){var e=(0,I.d9)(this.constructor.DEFAULT_OPTIONS),o=new Date;return e=(0,I.l7)((0,I.d9)(n.DEFAULT_OPTIONS),e),(e=(0,I.l7)(e,t)).filename=(0,F.ng)(e.filename,{YYYY:o.getFullYear(),MM:"".concat(o.getMonth()+1).padStart(2,"0"),DD:"".concat(o.getDate()).padStart(2,"0")}),e}}],i7(n.prototype,t),e&&i7(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}()),ar=("csv"in(a={})?Object.defineProperty(a,"csv",{value:ao,enumerable:!0,configurable:!0,writable:!0}):a.csv=ao,a);function ai(t){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aa(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function al(t,e){return(al=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function as(t){return(as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var au=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&al(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=as(i);if(e){var o=as(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ai(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return o=[{key:"PLUGIN_KEY",get:function(){return"exportFile"}},{key:"PLUGIN_PRIORITY",get:function(){return 240}}],n=[{key:"isEnabled",value:function(){return!0}},{key:"exportAsString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createTypeFormatter(t,e).export()}},{key:"exportAsBlob",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._createBlob(this._createTypeFormatter(t,e))}},{key:"downloadFile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.hot,o=n.rootDocument,r=n.rootWindow,i=this._createTypeFormatter(t,e),a=this._createBlob(i),l=r.URL||r.webkitURL,s=o.createElement("a"),u="".concat(i.options.filename,".").concat(i.options.fileExtension);if(void 0!==s.download){var c=l.createObjectURL(a);s.style.display="none",s.setAttribute("href",c),s.setAttribute("download",u),o.body.appendChild(s),s.dispatchEvent(new MouseEvent("click")),o.body.removeChild(s),setTimeout(function(){l.revokeObjectURL(c)},100)}else navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob(a,u)}},{key:"_createTypeFormatter",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ar[t])throw Error('Export format type "'.concat(t,'" is not supported.'));return e=new i6(this.hot),"function"==typeof ar[t]?new ar[t](e,n):null}},{key:"_createBlob",value:function(t){var e=null;return"undefined"!=typeof Blob&&(e=new Blob([t.export()],{type:"".concat(t.options.mimeType,";charset=").concat(t.options.encoding)})),e}}],aa(i.prototype,n),o&&aa(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function ac(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n(6755);var af=function(){var t;function e(t,n){var o=n.id,r=n.stateless;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this.id=o,this.elements=[],this.hidden=!1,this.stateId="Filters.component.".concat(this.id),this.state=void 0===r||r?null:this.hot.columnIndexMapper.registerMap(this.stateId,new n9.A)}return ac(e.prototype,[{key:"reset",value:function(){(0,V.Bk)(this.elements,function(t){return t.reset()})}},{key:"hide",value:function(){this.hidden=!0}},{key:"show",value:function(){this.hidden=!1}},{key:"isHidden",value:function(){return null===this.hot||this.hidden}},{key:"restoreState",value:function(t){this.state&&this.setState(this.state.getValueAtIndex(t))}},{key:"setState",value:function(){throw Error("The state setting logic is not implemented")}},{key:"saveState",value:function(t){this.state&&this.state.setValueAtIndex(t,this.getState())}},{key:"getState",value:function(){throw Error("The state gathering logic is not implemented")}},{key:"destroy",value:function(){this.hot.columnIndexMapper.unregisterMap(this.stateId),this.clearLocalHooks(),(0,V.Bk)(this.elements,function(t){return t.destroy()}),this.state=null,this.elements=null,this.hot=null}}]),t&&ac(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();(0,I.jB)(af,rt.Z);var ah={};function ad(t,e){if(!ah[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));var n=ah[t],o=n.condition,r=n.descriptor,i=e;return r.inputValuesDecorator&&(i=r.inputValuesDecorator(i)),function(t){return o.apply(t.meta.instance,[].concat([t],[i]))}}function ap(t){if(!ah[t])throw Error('Filter condition "'.concat(t,'" does not exist.'));return ah[t].descriptor}function ay(t,e,n){n.key=t,ah[t]={condition:e,descriptor:n}}var ag="none";ay(ag,function(){return!0},{name:ro.FILTERS_CONDITIONS_NONE,inputsCount:0,showOperators:!1});var av="empty";ay(av,function(t){return(0,U.xb)(t.value)},{name:ro.FILTERS_CONDITIONS_EMPTY,inputsCount:0,showOperators:!0});var am="not_empty";function ab(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function aw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function aC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ak(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function aS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function aO(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(am,function(t,e){return!ad(av,e)(t)},{name:ro.FILTERS_CONDITIONS_NOT_EMPTY,inputsCount:0,showOperators:!0}),ay("eq",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return ab(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ab(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,U.Pz)(t.value).toLocaleLowerCase(t.meta.locale)===(0,U.Pz)(n)},{name:ro.FILTERS_CONDITIONS_EQUAL,inputsCount:1,showOperators:!0}),ay("neq",function(t,e){return!ad("eq",e)(t)},{name:ro.FILTERS_CONDITIONS_NOT_EQUAL,inputsCount:1,showOperators:!0}),ay("gt",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aw(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>n},{name:ro.FILTERS_CONDITIONS_GREATER_THAN,inputsCount:1,showOperators:!0}),ay("gte",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aC(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value>=n},{name:ro.FILTERS_CONDITIONS_GREATER_THAN_OR_EQUAL,inputsCount:1,showOperators:!0}),ay("lt",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return ak(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<n},{name:ro.FILTERS_CONDITIONS_LESS_THAN,inputsCount:1,showOperators:!0}),ay("lte",function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aS(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return"numeric"===t.meta.type&&(n=parseFloat(n,10)),t.value<=n},{name:ro.FILTERS_CONDITIONS_LESS_THAN_OR_EQUAL,inputsCount:1,showOperators:!0});var aR="date_after";function aP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(aR,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=ti(t.value,t.meta.dateFormat),r=ti(n,t.meta.dateFormat);return!!(o.isValid()&&r.isValid())&&o.diff(r)>=0},{name:ro.FILTERS_CONDITIONS_AFTER,inputsCount:1,showOperators:!0});var aE="date_before";function aM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(aE,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aP(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=ti(t.value,t.meta.dateFormat),r=ti(n,t.meta.dateFormat);return!!(o.isValid()&&r.isValid())&&0>=o.diff(r)},{name:ro.FILTERS_CONDITIONS_BEFORE,inputsCount:1,showOperators:!0});var a_="between";ay(a_,function(t,e){var n=function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,2)||function(t,e){if(t){if("string"==typeof t)return aM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aM(t,e)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=n[0],r=n[1],i=o,a=r;if("numeric"===t.meta.type){var l=parseFloat(i,10),s=parseFloat(a,10);i=Math.min(l,s),a=Math.max(l,s)}else if("date"===t.meta.type){var u=ad(aE,[a]),c=ad(aR,[i]);return u(t)&&c(t)}return t.value>=i&&t.value<=a},{name:ro.FILTERS_CONDITIONS_BETWEEN,inputsCount:2,showOperators:!0});var aA="not_between";function aI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(aA,function(t,e){return!ad(a_,e)(t)},{name:ro.FILTERS_CONDITIONS_NOT_BETWEEN,inputsCount:2,showOperators:!0});var aT="begins_with";function aj(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(aT,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aI(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,U.Pz)(t.value).toLocaleLowerCase(t.meta.locale).startsWith((0,U.Pz)(n))},{name:ro.FILTERS_CONDITIONS_BEGINS_WITH,inputsCount:1,showOperators:!0}),n(7852);var ax="ends_with";function aD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}ay(ax,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aj(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aj(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,U.Pz)(t.value).toLocaleLowerCase(t.meta.locale).endsWith((0,U.Pz)(n))},{name:ro.FILTERS_CONDITIONS_ENDS_WITH,inputsCount:1,showOperators:!0});var aH="contains";ay(aH,function(t,e){var n=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return aD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aD(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return(0,U.Pz)(t.value).toLocaleLowerCase(t.meta.locale).indexOf((0,U.Pz)(n))>=0},{name:ro.FILTERS_CONDITIONS_CONTAINS,inputsCount:1,showOperators:!0});var aN="not_contains";ay(aN,function(t,e){return!ad(aH,e)(t)},{name:ro.FILTERS_CONDITIONS_NOT_CONTAIN,inputsCount:1,showOperators:!0});var aB="date_tomorrow";ay(aB,function(t){var e=ti(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(ti().subtract(-1,"days").startOf("day"),"d")},{name:ro.FILTERS_CONDITIONS_TOMORROW,inputsCount:0});var aL="date_today";ay(aL,function(t){var e=ti(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(ti().startOf("day"),"d")},{name:ro.FILTERS_CONDITIONS_TODAY,inputsCount:0});var aV="date_yesterday";function aU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ay(aV,function(t){var e=ti(t.value,t.meta.dateFormat);return!!e.isValid()&&e.isSame(ti().subtract(1,"days").startOf("day"),"d")},{name:ro.FILTERS_CONDITIONS_YESTERDAY,inputsCount:0});var aF="text",aW=(aU(h={},"numeric",[ag,o0,av,am,o0,"eq","neq",o0,"gt","gte","lt","lte",a_,aA]),aU(h,aF,[ag,o0,av,am,o0,"eq","neq",o0,aT,ax,o0,aH,aN]),aU(h,"date",[ag,o0,av,am,o0,"eq","neq",o0,aE,aR,a_,o0,aB,aL,aV]),h);function az(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var aY="built",aG="building",aK=["click","input","keydown","keypress","keyup","focus","blur","change"],aq=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.eventManager=new tl.Z(this),this.options=(0,I.l7)(n.DEFAULTS,e),this._element=this.hot.rootDocument.createElement(this.options.wrapIt?"div":this.options.tagName),this.buildState=null}return t=[{key:"setValue",value:function(t){this.options.value=t,this.update()}},{key:"getValue",value:function(){return this.options.value}},{key:"element",get:function(){return this.buildState===aG?this._element:this.buildState===aY?(this.update(),this._element):(this.buildState=aG,this.build(),this.buildState=aY,this._element)}},{key:"isBuilt",value:function(){return this.buildState===aY}},{key:"translateIfPossible",value:function(t){return"string"==typeof t&&t.startsWith(ro.FILTERS_NAMESPACE)?this.hot.getTranslatedPhrase(t):t}},{key:"build",value:function(){var t=this,e=function(e,n){t.eventManager.addEventListener(e,n,function(e){return t.runLocalHooks(n,e,t)})};if(this.buildState||(this.buildState=aG),this.options.className&&(0,_.cn)(this._element,this.options.className),this.options.children.length)(0,V.Bk)(this.options.children,function(e){return t._element.appendChild(e.element)});else if(this.options.wrapIt){var n=this.hot.rootDocument.createElement(this.options.tagName);(0,I._l)(this.options,function(e,o){void 0!==n[o]&&"className"!==o&&"tagName"!==o&&"children"!==o&&(n[o]=t.translateIfPossible(e))}),this._element.appendChild(n),(0,V.Bk)(aK,function(t){return e(n,t)})}else(0,V.Bk)(aK,function(n){return e(t._element,n)})}},{key:"update",value:function(){}},{key:"reset",value:function(){this.options.value="",this.update()}},{key:"show",value:function(){this.element.style.display=""}},{key:"hide",value:function(){this.element.style.display="none"}},{key:"focus",value:function(){}},{key:"destroy",value:function(){this.eventManager.destroy(),this.eventManager=null,this.hot=null,this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null}}],e=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"",value:"",tagName:"div",children:[],wrapIt:!0})}}],t&&az(n.prototype,t),e&&az(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function aZ(t){return(aZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a$(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function aX(){return(aX="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a0(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function aJ(t,e){return(aJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aQ(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a0(t){return(a0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(0,I.jB)(aq,rt.Z);var a1=new WeakMap,a2=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aJ(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=a0(i);if(e){var o=a0(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===aZ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return aQ(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,(0,I.l7)(i.DEFAULTS,e)),a1.set(aQ(n),{}),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",function(){return t.onClick()}),this.addLocalHook("keyup",function(e){return t.onKeyup(e)})}},{key:"build",value:function(){aX(a0(i.prototype),"build",this).call(this);var t=a1.get(this),e=this.hot.rootDocument.createElement("div");t.input=this._element.firstChild,(0,_.cn)(this._element,"htUIInput"),(0,_.cn)(e,"htUIInputIcon"),this._element.appendChild(e),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var t=a1.get(this).input;t.type=this.options.type,t.placeholder=this.translateIfPossible(this.options.placeholder),t.value=this.translateIfPossible(this.options.value)}}},{key:"focus",value:function(){this.isBuilt()&&a1.get(this).input.focus()}},{key:"onClick",value:function(){}},{key:"onKeyup",value:function(t){this.options.value=t.target.value}}],o=[{key:"DEFAULTS",get:function(){return(0,I.d9)({placeholder:"",type:"text",tagName:"input"})}}],n&&a$(i.prototype,n),o&&a$(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(aq);function a3(t){return(a3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a4(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a8(){return(a8="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a7(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function a9(t,e){return(a9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a6(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a7(t){return(a7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a5=new WeakMap,lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a9(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=a7(i);if(e){var o=a7(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===a3(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return a6(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,(0,I.l7)(i.DEFAULTS,e)),a5.set(a6(n),{}),n.menu=null,n.items=[],n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.addLocalHook("click",function(){return t.onClick()})}},{key:"setItems",value:function(t){this.items=this.translateNames(t),this.menu&&this.menu.setMenuItems(this.items)}},{key:"translateNames",value:function(t){var e=this;return(0,V.Bk)(t,function(t){t.name=e.translateIfPossible(t.name)}),t}},{key:"build",value:function(){var t=this;a8(a7(i.prototype),"build",this).call(this),this.menu=new rZ(this.hot,{className:"htSelectUI htFiltersConditionsMenu",keepInViewport:!1,standalone:!0,container:this.options.menuContainer}),this.menu.setMenuItems(this.items);var e=new aq(this.hot,{className:"htUISelectCaption"}),n=new aq(this.hot,{className:"htUISelectDropdown"}),o=a5.get(this);o.caption=e,o.captionElement=e.element,o.dropdown=n,(0,V.Bk)([e,n],function(e){return t._element.appendChild(e.element)}),this.menu.addLocalHook("select",function(e){return t.onMenuSelect(e)}),this.menu.addLocalHook("afterClose",function(){return t.onMenuClosed()}),this.update()}},{key:"update",value:function(){var t;this.isBuilt()&&(t=this.options.value?this.options.value.name:this.menu.hot.getTranslatedPhrase(ro.FILTERS_CONDITIONS_NONE),a5.get(this).captionElement.textContent=t,a8(a7(i.prototype),"update",this).call(this))}},{key:"openOptions",value:function(){var t=this.element.getBoundingClientRect();this.menu&&(this.menu.open(),this.menu.setPosition({left:this.hot.isLtr()?t.left-5:t.left-31,top:t.top-1,width:t.width,height:t.height}))}},{key:"closeOptions",value:function(){this.menu&&this.menu.close()}},{key:"onMenuSelect",value:function(t){t.name!==o0&&(this.options.value=t,this.update(),this.runLocalHooks("select",this.options.value))}},{key:"onMenuClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onClick",value:function(){this.openOptions()}},{key:"destroy",value:function(){this.menu&&(this.menu.destroy(),this.menu=null);var t=a5.get(this),e=t.caption,n=t.dropdown;e&&e.destroy(),n&&n.destroy(),a8(a7(i.prototype),"destroy",this).call(this)}}],o=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"htUISelect",wrapIt:!1})}}],n&&a4(i.prototype,n),o&&a4(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(aq);function le(t){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ln(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lo(){return(lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=li(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function lr(t,e){return(lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function li(t){return(li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var la=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lr(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=li(i);if(e){var o=li(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===le(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.addSeparator=e.addSeparator,n.elements.push(new lt(n.hot,{menuContainer:e.menuContainer})),n.elements.push(new a2(n.hot,{placeholder:ro.FILTERS_BUTTONS_PLACEHOLDER_VALUE})),n.elements.push(new a2(n.hot,{placeholder:ro.FILTERS_BUTTONS_PLACEHOLDER_SECOND_VALUE})),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.getSelectElement().addLocalHook("select",function(e){return t.onConditionSelect(e)}),this.getSelectElement().addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),(0,V.Bk)(this.getInputElements(),function(e){e.addLocalHook("keydown",function(e){return t.onInputKeyDown(e)})})}},{key:"setState",value:function(t){var e=this;if(this.reset(),t){var n=(0,I.d9)(t.command);n.name.startsWith(ro.FILTERS_CONDITIONS_NAMESPACE)&&(n.name=this.hot.getTranslatedPhrase(n.name)),this.getSelectElement().setValue(n),(0,V.Bk)(t.args,function(t,o){if(o>n.inputsCount-1)return!1;var r=e.getInputElement(o);r.setValue(t),r[n.inputsCount>o?"show":"hide"](),o||setTimeout(function(){return r.focus()},10)})}}},{key:"getState",value:function(){var t=this.getSelectElement().getValue()||ap(ag),e=[];return(0,V.Bk)(this.getInputElements(),function(n,o){t.inputsCount>o&&e.push(n.getValue())}),{command:t,args:e}}},{key:"updateState",value:function(t,e){var n=t?ap(t.name):ap(ag);this.state.setValueAtIndex(e,{command:n,args:t?t.args:[]}),t||(0,V.Bk)(this.getInputElements(),function(t){return t.setValue(null)})}},{key:"getSelectElement",value:function(){return this.elements.filter(function(t){return t instanceof lt})[0]}},{key:"getInputElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.getInputElements()[t]}},{key:"getInputElements",value:function(){return this.elements.filter(function(t){return t instanceof a2})}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,o,r,i,a){(0,_.cn)(n.parentNode,"htFiltersMenuCondition"),t.addSeparator&&(0,_.cn)(n.parentNode,"border");var l=t.hot.rootDocument.createElement("div");return(0,_.cn)(l,"htFiltersMenuLabel"),l.textContent=a,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||(0,V.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"reset",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn(),e=[ap(ag)];if(null!==t){var n,o,r,a=t.visualIndex;n=this.hot.getDataType(0,a,this.hot.countRows(),a),o=[],aW[r=n]||(r=aF),(0,V.Bk)(aW[r],function(t){var e;e=t===o0?{name:o0}:(0,I.d9)(ap(t)),o.push(e)}),e=o}(0,V.Bk)(this.getInputElements(),function(t){return t.hide()}),this.getSelectElement().setItems(e),lo(li(i.prototype),"reset",this).call(this),this.getSelectElement().setValue(e[0])}},{key:"onConditionSelect",value:function(t){(0,V.Bk)(this.getInputElements(),function(e,n){e[t.inputsCount>n?"show":"hide"](),0===n&&setTimeout(function(){return e.focus()},10)}),this.runLocalHooks("change",t)}},{key:"onSelectUIClosed",value:function(){this.runLocalHooks("afterClose")}},{key:"onInputKeyDown",value:function(t){(0,W.ot)(t.keyCode,"ENTER")?(this.runLocalHooks("accept"),(0,A.mM)(t)):(0,W.ot)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,A.mM)(t))}}],ln(i.prototype,n),o&&ln(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(af),ll={};function ls(t,e,n){ll[t]={name:e,func:n}}var lu="conjunction";ls(lu,ro.FILTERS_LABELS_CONJUNCTION,function(t,e){return t.every(function(t){return t.func(e)})});var lc="disjunction";ls(lc,ro.FILTERS_LABELS_DISJUNCTION,function(t,e){return t.some(function(t){return t.func(e)})});var lf="disjunctionWithExtraCondition";function lh(t){return(lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ld(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lp(){return(lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lv(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ly(t,e){return(ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lg(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lv(t){return(lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ls(lf,ro.FILTERS_LABELS_DISJUNCTION,function(t,e){if(t.length<3)throw Error("Operation doesn't work on less then three conditions.");return t.slice(0,t.length-1).some(function(t){return t.func(e)})&&t[t.length-1].func(e)});var lm=new WeakMap,lb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ly(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=lv(i);if(e){var o=lv(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lh(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return lg(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,(0,I.l7)(i.DEFAULTS,e)),lm.set(lg(n),{}),n}return n=[{key:"build",value:function(){lp(lv(i.prototype),"build",this).call(this);var t=lm.get(this);t.input=this._element.firstChild;var e=this.hot.rootDocument.createElement("label");e.textContent=this.translateIfPossible(this.options.label.textContent),e.htmlFor=this.translateIfPossible(this.options.label.htmlFor),t.label=e,this._element.appendChild(e),this.update()}},{key:"update",value:function(){if(this.isBuilt()){var t=lm.get(this);t.input.checked=this.options.checked,t.label.textContent=this.translateIfPossible(this.options.label.textContent)}}},{key:"isChecked",value:function(){return this.options.checked}},{key:"setChecked",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];this.options.checked=t,this.update()}},{key:"focus",value:function(){this.isBuilt()&&lm.get(this).input.focus()}}],o=[{key:"DEFAULTS",get:function(){return(0,I.d9)({type:"radio",tagName:"input",className:"htUIRadio",label:{}})}}],n&&ld(i.prototype,n),o&&ld(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(aq);function lw(t){return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lC(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lk(t,e){return(lk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lS(t){return(lS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lk(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=lS(i);if(e){var o=lS(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lw(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.buildOperatorsElement(),n}return n=[{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return(0,_.cn)(n.parentNode,"htFiltersMenuOperators"),n.parentNode.hasAttribute("ghost-table")||(0,V.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"buildOperatorsElement",value:function(){var t=this,e=[lu,lc];(0,V.Bk)(e,function(n){var o=new lb(t.hot,{name:"operator",label:{htmlFor:n,textContent:ll[n].name},value:n,checked:n===e[0],id:n});o.addLocalHook("change",function(e){return t.onRadioInputChange(e)}),t.elements.push(o)})}},{key:"setChecked",value:function(t){if(this.elements.length<t){var e,n;throw Error((0,oW.e)(d||(e=["Radio button with index "," doesn't exist."],n||(n=e.slice(0)),d=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))),t))}(0,V.Bk)(this.elements,function(e,n){e.setChecked(n===t)})}},{key:"getActiveOperationId",value:function(){var t=this.elements.find(function(t){return t instanceof lb&&t.isChecked()});return t?t.getValue():lu}},{key:"getState",value:function(){return this.getActiveOperationId()}},{key:"setState",value:function(t){this.reset(),t&&this.getActiveOperationId()!==t&&(0,V.Bk)(this.elements,function(e){e.setChecked(e.getValue()===t)})}},{key:"updateState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lu,e=arguments.length>1?arguments[1]:void 0,n=t;n===lf&&(n=lc),this.state.setValueAtIndex(e,n)}},{key:"reset",value:function(){this.setChecked(0)}},{key:"onRadioInputChange",value:function(t){this.setState(t.target.value)}}],lC(i.prototype,n),o&&lC(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(af);(0,eI.sx)();var lR=new Set([1]).has(1),lP=lR&&"function"==typeof Array.from;function lE(t){var e=t;return lR&&(e=new Set(e)),function(t){return lR?e.has(t):!!~e.indexOf(t)}}function lM(t){return null==t?"":t}function l_(t){var e=t;return(e=lP?Array.from(new Set(e)):(0,V.uW)(e)).sort(function(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t===e?0:t>e?1:-1})}function lA(t,e,n,o){var r,i=[],a=t===e;return a||(r=lE(e)),(0,V.Bk)(t,function(t){var e,l=!1;(a||r(t))&&(l=!0);var s={checked:l,value:t,visualValue:(""===(e=t)&&(e="(".concat(n,")")),e)};o&&o(s),i.push(s)}),i}var lI=n(3817);function lT(t){return(lT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lj(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lx(){return(lx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lN(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function lD(t,e){return(lD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lH(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lN(t){return(lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(9254);var lB=new WeakMap,lL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lD(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=lN(i);if(e){var o=lN(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lT(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return lH(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,(0,I.l7)(i.DEFAULTS,e)),lB.set(lH(n),{}),n}return n=[{key:"build",value:function(){lx(lN(i.prototype),"build",this).call(this),lB.get(this).link=this._element.firstChild}},{key:"update",value:function(){this.isBuilt()&&(lB.get(this).link.textContent=this.translateIfPossible(this.options.textContent))}}],o=[{key:"DEFAULTS",get:function(){return(0,I.d9)({href:"#",tagName:"a"})}}],n&&lj(i.prototype,n),o&&lj(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(aq);function lV(t){return(lV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lU(t){return function(t){if(Array.isArray(t))return lF(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return lF(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lF(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lF(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function lW(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function lz(){return(lz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lK(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function lY(t,e){return(lY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lG(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lK(t){return(lK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lq=new WeakMap,lZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lY(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=lK(i);if(e){var o=lK(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return lG(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,(0,I.l7)(i.DEFAULTS,e)),lq.set(lG(n),{}),n.searchInput=new a2(n.hot,{placeholder:ro.FILTERS_BUTTONS_PLACEHOLDER_SEARCH,className:"htUIMultipleSelectSearch"}),n.selectAllUI=new lL(n.hot,{textContent:ro.FILTERS_BUTTONS_SELECT_ALL,className:"htUISelectAll"}),n.clearAllUI=new lL(n.hot,{textContent:ro.FILTERS_BUTTONS_CLEAR,className:"htUIClearAll"}),n.items=[],n.itemsBox=null,n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.searchInput.addLocalHook("keydown",function(e){return t.onInputKeyDown(e)}),this.searchInput.addLocalHook("input",function(e){return t.onInput(e)}),this.selectAllUI.addLocalHook("click",function(e){return t.onSelectAllClick(e)}),this.clearAllUI.addLocalHook("click",function(e){return t.onClearAllClick(e)})}},{key:"setItems",value:function(t){this.items=t,this.itemsBox&&this.itemsBox.loadData(this.items)}},{key:"setLocale",value:function(t){this.locale=t}},{key:"getLocale",value:function(){return this.locale}},{key:"getItems",value:function(){return lU(this.items)}},{key:"getValue",value:function(){var t,e;return t=this.items,e=[],(0,V.Bk)(t,function(t){t.checked&&e.push(t.value)}),e}},{key:"isSelectedAllValues",value:function(){return this.items.length===this.getValue().length}},{key:"build",value:function(){var t=this;lz(lK(i.prototype),"build",this).call(this);var e=this.hot.rootDocument,n=e.createElement("div"),o=new aq(this.hot,{className:"htUISelectionControls",children:[this.selectAllUI,this.clearAllUI]});this._element.appendChild(this.searchInput.element),this._element.appendChild(o.element),this._element.appendChild(n);var r=function(n){t._element&&(t.itemsBox&&t.itemsBox.destroy(),(0,_.cn)(n,"htUIMultipleSelectHot"),t.itemsBox=new t.hot.constructor(n,{data:t.items,columns:[{data:"checked",type:"checkbox",label:{property:"visualValue",position:"after"}}],beforeRenderer:function(t,e,n,o,r,i){t.title=i.instance.getDataAtRowProp(e,i.label.property)},maxCols:1,autoWrapCol:!0,height:110,colWidths:function(){return t.itemsBox.container.scrollWidth-(0,_.np)(e)},copyPaste:!1,disableVisualSelection:"area",fillHandle:!1,fragmentSelection:"cell",tabMoves:{row:1,col:0},layoutDirection:t.hot.isRtl()?"rtl":"ltr"}),t.itemsBox.init(),t.itemsBox.getShortcutManager().getContext("grid").addShortcut({keys:[["Escape"]],callback:function(e){t.runLocalHooks("keydown",e,t)},group:"multipleSelect.itemBox"}))};r(n),setTimeout(function(){return r(n)},100)}},{key:"reset",value:function(){this.searchInput.reset(),this.selectAllUI.reset(),this.clearAllUI.reset()}},{key:"update",value:function(){if(this.isBuilt()){var t,e;this.itemsBox.loadData((t=this.items,e=lE(this.options.value),(0,V.Sc)(t,function(t){return t.checked=e(t.value),t}))),lz(lK(i.prototype),"update",this).call(this)}}},{key:"destroy",value:function(){this.itemsBox&&this.itemsBox.destroy(),this.searchInput.destroy(),this.clearAllUI.destroy(),this.selectAllUI.destroy(),this.searchInput=null,this.clearAllUI=null,this.selectAllUI=null,this.itemsBox=null,this.items=null,lz(lK(i.prototype),"destroy",this).call(this)}},{key:"onInput",value:function(t){var e,n=this,o=t.target.value.toLocaleLowerCase(this.getLocale());e=""===o?lU(this.items):(0,V.w7)(this.items,function(t){return"".concat(t.value).toLocaleLowerCase(n.getLocale()).indexOf(o)>=0}),this.itemsBox.loadData(e)}},{key:"onInputKeyDown",value:function(t){this.runLocalHooks("keydown",t,this),(0,n4.r$)(W.ot,t.keyCode)("ARROW_DOWN|TAB")&&!this.itemsBox.isListening()&&((0,A.mM)(t),this.itemsBox.listen(),this.itemsBox.selectCell(0,0))}},{key:"onSelectAllClick",value:function(t){var e=[];t.preventDefault(),(0,V.Bk)(this.itemsBox.getSourceData(),function(t,n){t.checked=!0,e.push((0,lI.ec)(t,n)[0])}),this.itemsBox.setSourceDataAtCell(e)}},{key:"onClearAllClick",value:function(t){var e=[];t.preventDefault(),(0,V.Bk)(this.itemsBox.getSourceData(),function(t,n){t.checked=!1,e.push((0,lI.ec)(t,n)[0])}),this.itemsBox.setSourceDataAtCell(e)}}],o=[{key:"DEFAULTS",get:function(){return(0,I.d9)({className:"htUIMultipleSelect",value:[]})}}],n&&lW(i.prototype,n),o&&lW(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(aq);function l$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return lX(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lX(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lX(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var lJ="by_value";function lQ(t){return(lQ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function l1(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l2(){return(l2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l4(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function l3(t,e){return(l3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l4(t){return(l4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}ay(lJ,function(t,e){return(0,l$(e,1)[0])(t.value)},{name:"By value",inputsCount:0,inputValuesDecorator:function(t){return[lE(l$(t,1)[0])]},showOperators:!1});var l8=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l3(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=l4(i);if(e){var o=l4(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===lQ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,{id:e.id,stateless:!1})).name=e.name,n.elements.push(new lZ(n.hot)),n.registerHooks(),n}return n=[{key:"registerHooks",value:function(){var t=this;this.getMultipleSelectElement().addLocalHook("keydown",function(e){return t.onInputKeyDown(e)})}},{key:"setState",value:function(t){if(this.reset(),t&&t.command.key===lJ){var e=this.getMultipleSelectElement();e.setItems(t.itemsSnapshot),e.setValue(t.args[0]),e.setLocale(t.locale)}}},{key:"getState",value:function(){var t=this.getMultipleSelectElement(),e=t.getItems();return{command:{key:t.isSelectedAllValues()||!e.length?ag:lJ},args:[t.getValue()],itemsSnapshot:e}}},{key:"updateState",value:function(t){var e=this,n=function(n,o,r,i,a){var l,s=(function(t){if(Array.isArray(t))return t}(l=(0,V.w7)(o,function(t){return t.name===lJ}))||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(l,1)||function(t,e){if(t){if("string"==typeof t)return l0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l0(t,e)}}(l,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],u={},c=e.hot.getTranslatedPhrase(ro.FILTERS_VALUES_BLANK_CELLS);if(s){var f=l_((0,V.Sc)(i(n,a),function(t){return t.value}));r&&(s.args[0]=r);var h=[],d=lA(f,s.args[0],c,function(t){t.checked&&h.push(t.value)}),p=t.editedConditionStack.column;u.locale=e.hot.getCellMeta(0,p).locale,u.args=[h],u.command=ap(lJ),u.itemsSnapshot=d}else u.args=[],u.command=ap(ag);e.state.setValueAtIndex(n,u)};n(t.editedConditionStack.column,t.editedConditionStack.conditions,t.conditionArgsChange,t.filteredRowsFactory),t.dependentConditionStacks.length&&n(t.dependentConditionStacks[0].column,t.dependentConditionStacks[0].conditions,t.conditionArgsChange,t.filteredRowsFactory,t.editedConditionStack)}},{key:"getMultipleSelectElement",value:function(){return this.elements.filter(function(t){return t instanceof lZ})[0]}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n,o,r,i,a){(0,_.cn)(n.parentNode,"htFiltersMenuValue");var l=t.hot.rootDocument.createElement("div");return(0,_.cn)(l,"htFiltersMenuLabel"),l.textContent=a,n.appendChild(l),n.parentNode.hasAttribute("ghost-table")||(0,V.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"reset",value:function(){var t=this.hot.getTranslatedPhrase(ro.FILTERS_VALUES_BLANK_CELLS),e=l_(this._getColumnVisibleValues()),n=lA(e,e,t);this.getMultipleSelectElement().setItems(n),l2(l4(i.prototype),"reset",this).call(this),this.getMultipleSelectElement().setValue(e);var o=this.hot.getPlugin("filters").getSelectedColumn();null!==o&&this.getMultipleSelectElement().setLocale(this.hot.getCellMeta(0,o.visualIndex).locale)}},{key:"onInputKeyDown",value:function(t){(0,W.ot)(t.keyCode,"ESCAPE")&&(this.runLocalHooks("cancel"),(0,A.mM)(t))}},{key:"_getColumnVisibleValues",value:function(){var t=this.hot.getPlugin("filters").getSelectedColumn();return null===t?[]:(0,V.Sc)(this.hot.getDataAtCol(t.visualIndex),function(t){return lM(t)})}}],l1(i.prototype,n),o&&l1(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(af);function l9(t){return(l9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l6(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l7(t,e){return(l7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function l5(t){return(l5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l7(t,e)}(r,t);var e,n,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=l5(r);if(e){var o=l5(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===l9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function r(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),(n=o.call(this,t,{id:e.id,stateless:!0})).name=e.name,n.elements.push(new a2(n.hot,{type:"button",value:ro.FILTERS_BUTTONS_OK,className:"htUIButton htUIButtonOK",identifier:r.BUTTON_OK})),n.elements.push(new a2(n.hot,{type:"button",value:ro.FILTERS_BUTTONS_CANCEL,className:"htUIButton htUIButtonCancel",identifier:r.BUTTON_CANCEL})),n.registerHooks(),n}return n=[{key:"BUTTON_OK",get:function(){return"ok"}},{key:"BUTTON_CANCEL",get:function(){return"cancel"}}],l6(r.prototype,[{key:"registerHooks",value:function(){var t=this;(0,V.Bk)(this.elements,function(e){e.addLocalHook("click",function(e,n){return t.onButtonClick(e,n)})})}},{key:"getMenuItemDescriptor",value:function(){var t=this;return{key:this.id,name:this.name,isCommand:!1,disableSelection:!0,hidden:function(){return t.isHidden()},renderer:function(e,n){return(0,_.cn)(n.parentNode,"htFiltersMenuActionBar"),n.parentNode.hasAttribute("ghost-table")||(0,V.Bk)(t.elements,function(t){return n.appendChild(t.element)}),n}}}},{key:"accept",value:function(){this.runLocalHooks("accept")}},{key:"cancel",value:function(){this.runLocalHooks("cancel")}},{key:"onButtonClick",value:function(t,e){e.options.identifier===r.BUTTON_OK?this.accept():this.cancel()}}]),n&&l6(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}(af);function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return sn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function so(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function sr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var si="ConditionCollection.filteringStates",sa=function(){var t,e;function n(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.isMapRegistrable=e,this.filteringStates=new n9.A,!0===this.isMapRegistrable?this.hot.columnIndexMapper.registerMap(si,this.filteringStates):this.filteringStates.init(this.hot.columnIndexMapper.getNumberOfIndexes())}return t=[{key:"isEmpty",value:function(){return 0===this.getFilteredColumns().length}},{key:"isMatch",value:function(t,e){var n,o=this.filteringStates.getValueAtIndex(e),r=null!==(n=null==o?void 0:o.conditions)&&void 0!==n?n:[],i=null==o?void 0:o.operation;return this.isMatchInConditions(r,t,i)}},{key:"isMatchInConditions",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu;return!t.length||(function(t){if(!ll[t])throw Error('Operation with id "'.concat(t,'" does not exist.'));var e=ll[t].func;return function(t,n){return e(t,n)}})(n)(t,e)}},{key:"addCondition",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lu,o=arguments.length>3?arguments[3]:void 0,r=this.hot.getCellMeta(0,t).locale,i=(0,V.Sc)(e.args,function(t){return"string"==typeof t?t.toLocaleLowerCase(r):t}),a=e.name||e.command.key;this.runLocalHooks("beforeAdd",t);var l=this.getOperation(t);if(l){if(l!==n)throw Error((0,oW.e)(p||(p=so(["The column of index "," has been already applied with a `","` \n        filter operation. Use `removeConditions` to clear the current conditions and then add new ones. \n        Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, \n        use it consequently for a particular column)."],["The column of index "," has been already applied with a \\`","\\`\\x20\n        filter operation. Use \\`removeConditions\\` to clear the current conditions and then add new ones.\\x20\n        Mind that you cannot mix different types of operations (for instance, if you use \\`conjunction\\`,\\x20\n        use it consequently for a particular column)."])),t,l))}else if((0,U.o8)(ll[n]))throw Error((0,oW.e)(y||(y=so(["Unexpected operation named `","`. Possible ones are \n        `disjunction` and `conjunction`."],["Unexpected operation named \\`","\\`. Possible ones are\\x20\n        \\`disjunction\\` and \\`conjunction\\`."])),n));var s=this.getConditions(t);0===s.length?this.filteringStates.setValueAtIndex(t,{operation:n,conditions:[{name:a,args:i,func:ad(a,i)}]},o):s.push({name:a,args:i,func:ad(a,i)}),this.runLocalHooks("afterAdd",t)}},{key:"getConditions",value:function(t){var e,n;return null!==(e=null===(n=this.filteringStates.getValueAtIndex(t))||void 0===n?void 0:n.conditions)&&void 0!==e?e:[]}},{key:"getOperation",value:function(t){var e;return null===(e=this.filteringStates.getValueAtIndex(t))||void 0===e?void 0:e.operation}},{key:"getFilteredColumns",value:function(){return this.filteringStates.getEntries().map(function(t){return se(t,1)[0]})}},{key:"getColumnStackPosition",value:function(t){return this.getFilteredColumns().indexOf(t)}},{key:"exportAllConditions",value:function(){return(0,V.k$)(this.filteringStates.getEntries(),function(t,e){var n=se(e,2),o=n[0],r=n[1],i=r.operation,a=r.conditions;return t.push({column:o,operation:i,conditions:(0,V.Sc)(a,function(t){return{name:t.name,args:t.args}})}),t},[])}},{key:"importAllConditions",value:function(t){var e=this;this.clean(),(0,V.Bk)(t,function(t){(0,V.Bk)(t.conditions,function(n){return e.addCondition(t.column,n)})})}},{key:"removeConditions",value:function(t){this.runLocalHooks("beforeRemove",t),this.filteringStates.clearValue(t),this.runLocalHooks("afterRemove",t)}},{key:"clean",value:function(){this.runLocalHooks("beforeClean"),this.filteringStates.clear(),this.runLocalHooks("afterClean")}},{key:"hasConditions",value:function(t,e){var n=this.getConditions(t);return e?n.some(function(t){return t.name===e}):n.length>0}},{key:"destroy",value:function(){this.isMapRegistrable&&this.hot.columnIndexMapper.unregisterMap(si),this.filteringStates=null,this.clearLocalHooks()}}],sr(n.prototype,t),e&&sr(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function sl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(0,I.jB)(sa,rt.Z);var ss=function(){var t,e;function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return[]};!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.conditionCollection=t,this.columnDataFactory=e}return t=[{key:"filter",value:function(){var t=this,e=[];return(0,V.Bk)(this.conditionCollection.getFilteredColumns(),function(n,o){var r=t.columnDataFactory(n);o&&(r=t._getIntersectData(r,e)),e=t.filterByColumn(n,r)}),e}},{key:"filterByColumn",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[];return(0,V.Bk)(n,function(n){void 0!==n&&e.conditionCollection.isMatch(n,t)&&o.push(n)}),o}},{key:"_getIntersectData",value:function(t,e){var n=[];return(0,V.Bk)(e,function(e){var o=e.meta.visualRow;void 0!==t[o]&&(n[o]=t[o])}),n}}],sl(n.prototype,t),e&&sl(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function su(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var sc=function(){var t,e;function n(t,e){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return[]};!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this.conditionCollection=e,this.columnDataFactory=r,this.changes=[],this.grouping=!1,this.latestEditedColumnPosition=-1,this.latestOrderStack=[],this.conditionCollection.addLocalHook("beforeRemove",function(t){return o._onConditionBeforeModify(t)}),this.conditionCollection.addLocalHook("afterRemove",function(t){return o.updateStatesAtColumn(t)}),this.conditionCollection.addLocalHook("afterAdd",function(t){return o.updateStatesAtColumn(t)}),this.conditionCollection.addLocalHook("beforeClean",function(){return o._onConditionBeforeClean()}),this.conditionCollection.addLocalHook("afterClean",function(){return o._onConditionAfterClean()})}return t=[{key:"groupChanges",value:function(){this.grouping=!0}},{key:"flush",value:function(){var t=this;this.grouping=!1,(0,V.Bk)(this.changes,function(e){t.updateStatesAtColumn(e)}),this.changes.length=0}},{key:"_onConditionBeforeModify",value:function(t){this.latestEditedColumnPosition=this.conditionCollection.getColumnStackPosition(t)}},{key:"updateStatesAtColumn",value:function(t,e){var n=this;if(this.grouping){-1===this.changes.indexOf(t)&&this.changes.push(t);return}var o=this.conditionCollection.exportAllConditions(),r=this.conditionCollection.getColumnStackPosition(t);-1===r&&(r=this.latestEditedColumnPosition);var i=o.slice(0,r),a=o.slice(r);a.length&&a[0].column===t&&a.shift();var l=(0,n4.WA)(function(t,e){var o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new sa(n.hot,!1),a=[].concat(t,r);i.importAllConditions(a);var l=n.columnDataFactory(e);o=i.isEmpty()?l:new ss(i,function(t){return n.columnDataFactory(t)}).filter();var s=lE(o=(0,V.Sc)(o,function(t){return t.meta.visualRow}));return i.destroy(),(0,V.w7)(l,function(t){return s(t.meta.visualRow)})})(i),s=[].concat(this.conditionCollection.getConditions(t));this.runLocalHooks("update",{editedConditionStack:{column:t,conditions:s},dependentConditionStacks:a,filteredRowsFactory:l,conditionArgsChange:e})}},{key:"_onConditionBeforeClean",value:function(){this.latestOrderStack=this.conditionCollection.getFilteredColumns()}},{key:"_onConditionAfterClean",value:function(){var t=this;(0,V.Bk)(this.latestOrderStack,function(e){t.updateStatesAtColumn(e)})}},{key:"destroy",value:function(){var t=this;this.clearLocalHooks(),(0,I._l)(this,function(e,n){t[n]=null})}}],su(n.prototype,t),e&&su(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();(0,I.jB)(sc,rt.Z);var sf=n(7469);function sh(t){return(sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function sp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sy(){return(sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function sg(t,e){return(sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sv(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sm(t){return(sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sb="filters",sw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sg(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=sm(i);if(e){var o=sm(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===sh(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return sv(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).eventManager=new tl.Z(sv(e)),e.dropdownMenuPlugin=null,e.conditionCollection=null,e.conditionUpdateObserver=null,e.components=new Map([["filter_by_condition",null],["filter_operators",null],["filter_by_condition2",null],["filter_by_value",null],["filter_action_bar",null]]),e.lastSelectedColumn=null,e.filtersRowsMap=null,e.hot.addHook("afterGetColHeader",function(t,n){return e.onAfterGetColHeader(t,n)}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[sb]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){this.filtersRowsMap=this.hot.rowIndexMapper.registerMap(this.pluginName,new sf.n),this.dropdownMenuPlugin=this.hot.getPlugin("dropdownMenu");var e=this.hot.getSettings().dropdownMenu,n=e&&e.uiContainer||this.hot.rootDocument.body,o=function(e){return e.addLocalHook("accept",function(){return t.onActionBarSubmit("accept")}),e.addLocalHook("cancel",function(){return t.onActionBarSubmit("cancel")}),e.addLocalHook("change",function(n){return t.onComponentChange(e,n)}),e},r=function(){return"".concat(t.hot.getTranslatedPhrase(ro.FILTERS_DIVS_FILTER_BY_CONDITION),":")},a=function(){return"".concat(t.hot.getTranslatedPhrase(ro.FILTERS_DIVS_FILTER_BY_VALUE),":")};if(!this.components.get("filter_by_condition")){var l=new la(this.hot,{id:"filter_by_condition",name:r,addSeparator:!1,menuContainer:n});l.addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),this.components.set("filter_by_condition",o(l))}if(this.components.get("filter_operators")||this.components.set("filter_operators",new lO(this.hot,{id:"filter_operators",name:"Operators"})),!this.components.get("filter_by_condition2")){var s=new la(this.hot,{id:"filter_by_condition2",name:"",addSeparator:!0,menuContainer:n});s.addLocalHook("afterClose",function(){return t.onSelectUIClosed()}),this.components.set("filter_by_condition2",o(s))}this.components.get("filter_by_value")||this.components.set("filter_by_value",o(new l8(this.hot,{id:"filter_by_value",name:a}))),this.components.get("filter_action_bar")||this.components.set("filter_action_bar",o(new st(this.hot,{id:"filter_action_bar",name:"Action bar"}))),this.conditionCollection||(this.conditionCollection=new sa(this.hot)),this.conditionUpdateObserver||(this.conditionUpdateObserver=new sc(this.hot,this.conditionCollection,function(e){return t.getDataMapAtColumn(e)}),this.conditionUpdateObserver.addLocalHook("update",function(e){return t.updateComponents(e)})),this.components.forEach(function(t){return t.show()}),this.addHook("beforeDropdownMenuSetItems",function(e){return t.onBeforeDropdownMenuSetItems(e)}),this.addHook("afterDropdownMenuDefaultOptions",function(e){return t.onAfterDropdownMenuDefaultOptions(e)}),this.addHook("afterDropdownMenuShow",function(){return t.onAfterDropdownMenuShow()}),this.addHook("afterDropdownMenuHide",function(){return t.onAfterDropdownMenuHide()}),this.addHook("afterChange",function(e){return t.onAfterChange(e)}),this.hot.getSettings().dropdownMenu&&this.dropdownMenuPlugin&&(this.dropdownMenuPlugin.disablePlugin(),this.dropdownMenuPlugin.enablePlugin()),sy(sm(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t,e=this;this.enabled&&(null!==(t=this.dropdownMenuPlugin)&&void 0!==t&&t.enabled&&this.dropdownMenuPlugin.menu.clearLocalHooks(),this.components.forEach(function(t,n){t.destroy(),e.components.set(n,null)}),this.conditionCollection.destroy(),this.conditionCollection=null,this.hot.rowIndexMapper.unregisterMap(this.pluginName)),sy(sm(i.prototype),"disablePlugin",this).call(this)}},{key:"addCondition",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lu,r=this.hot.toPhysicalColumn(t);this.conditionCollection.addCondition(r,{command:{key:e},args:n},o)}},{key:"removeConditions",value:function(t){var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}},{key:"clearConditions",value:function(t){if(void 0===t)this.conditionCollection.clean();else{var e=this.hot.toPhysicalColumn(t);this.conditionCollection.removeConditions(e)}}},{key:"filter",value:function(){var t=this,e=this._createDataFilter(),n=!this.conditionCollection.isEmpty(),o=[],r=this.conditionCollection.exportAllConditions();if(!1!==this.hot.runHooks("beforeFilter",r)){if(n){var i=[];this.hot.batchExecution(function(){t.filtersRowsMap.clear();var n=lE(o=(0,V.Sc)(e.filter(),function(t){return t.meta.visualRow}));(0,t9.q4)(t.hot.countSourceRows()-1,function(t){n(t)||i.push(t)}),(0,V.Bk)(i,function(e){t.filtersRowsMap.setValueAtIndex(e,!0)})},!0),o.length||this.hot.deselectCell()}else this.filtersRowsMap.clear()}this.hot.runHooks("afterFilter",r),this.hot.view.adjustElementsSize(!0),this.hot.render(),this.clearColumnSelection()}},{key:"getSelectedColumn",value:function(){var t,e=null===(t=this.hot.getSelectedRangeLast())||void 0===t?void 0:t.highlight;return e?{visualIndex:e.col,physicalIndex:this.hot.toPhysicalColumn(e.col)}:null}},{key:"clearColumnSelection",value:function(){var t=this.getSelectedColumn();null!==t&&this.hot.selectCell(0,t.visualIndex)}},{key:"getDataMapAtColumn",value:function(t){var e=this,n=this.hot.toVisualColumn(t),o=[];return(0,V.Bk)(this.hot.getSourceDataAtCol(n),function(t,r){var i,a=e.hot.getCellMeta(r,n),l=a.row,s=a.col,u=a.visualCol,c=a.visualRow,f=a.type,h=a.instance,d=a.dateFormat,p=a.locale,y=null!==(i=e.hot.getDataAtCell(e.hot.toVisualRow(r),n))&&void 0!==i?i:t;o.push({meta:{row:l,col:s,visualCol:u,visualRow:c,type:f,instance:h,dateFormat:d,locale:p},value:lM(y)})}),o}},{key:"onAfterChange",value:function(t){var e=this;t&&(0,V.Bk)(t,function(t){var n=(function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,2)||function(t,e){if(t){if("string"==typeof t)return sd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sd(t,e)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1],o=e.hot.propToCol(n);e.conditionCollection.hasConditions(o)&&e.updateValueComponentCondition(o)})}},{key:"updateValueComponentCondition",value:function(t){var e=l_(this.hot.getDataAtCol(t));this.conditionUpdateObserver.updateStatesAtColumn(t,e)}},{key:"restoreComponents",value:function(t){var e,n=null===(e=this.getSelectedColumn())||void 0===e?void 0:e.physicalIndex;t.forEach(function(t){t.isHidden()||t.restoreState(n)}),this.updateDependentComponentsVisibility()}},{key:"onAfterDropdownMenuShow",value:function(){this.restoreComponents(Array.from(this.components.values()))}},{key:"onAfterDropdownMenuHide",value:function(){this.components.get("filter_by_condition").getSelectElement().closeOptions(),this.components.get("filter_by_condition2").getSelectElement().closeOptions()}},{key:"onBeforeDropdownMenuSetItems",value:function(){var t=this;this.dropdownMenuPlugin&&this.dropdownMenuPlugin.menu.addLocalHook("afterOpen",function(){t.dropdownMenuPlugin.menu.hotMenu.updateSettings({hiddenRows:!0})})}},{key:"onAfterDropdownMenuDefaultOptions",value:function(t){t.items.push({name:o0}),this.components.forEach(function(e){t.items.push(e.getMenuItemDescriptor())})}},{key:"getOperationBasedOnArguments",value:function(t,e,n,o){var r=t;return r===lc&&e.command.key!==ag&&n.command.key!==ag&&o.command.key!==ag?r=lf:o.command.key!==ag&&(e.command.key===ag||n.command.key===ag)&&(r=lu),r}},{key:"onActionBarSubmit",value:function(t){var e;if("accept"===t){var n,o=this.getSelectedColumn();if(null===o){null===(n=this.dropdownMenuPlugin)||void 0===n||n.close();return}var r=o.physicalIndex,i=this.components.get("filter_by_condition").getState(),a=this.components.get("filter_by_condition2").getState(),l=this.components.get("filter_by_value").getState(),s=this.getOperationBasedOnArguments(this.components.get("filter_operators").getActiveOperationId(),i,a,l);this.conditionUpdateObserver.groupChanges();var u=this.conditionCollection.getColumnStackPosition(r);-1===u&&(u=void 0),this.conditionCollection.removeConditions(r),i.command.key!==ag&&(this.conditionCollection.addCondition(r,i,s,u),a.command.key!==ag&&this.conditionCollection.addCondition(r,a,s,u)),l.command.key!==ag&&this.conditionCollection.addCondition(r,l,s,u),this.conditionUpdateObserver.flush(),this.components.forEach(function(t){return t.saveState(r)}),this.filtersRowsMap.clear(),this.filter()}null===(e=this.dropdownMenuPlugin)||void 0===e||e.close()}},{key:"onComponentChange",value:function(t,e){this.updateDependentComponentsVisibility(),t.constructor!==la||e.inputsCount||this.setListeningDropdownMenu()}},{key:"onSelectUIClosed",value:function(){this.setListeningDropdownMenu()}},{key:"setListeningDropdownMenu",value:function(){this.dropdownMenuPlugin&&this.dropdownMenuPlugin.setListening()}},{key:"updateDependentComponentsVisibility",value:function(){var t=this.components.get("filter_by_condition").getState().command,e=[this.components.get("filter_by_condition2"),this.components.get("filter_operators")];t.showOperators?this.showComponents.apply(this,e):this.hideComponents.apply(this,e)}},{key:"onAfterGetColHeader",value:function(t,e){var n=this.hot.toPhysicalColumn(t);this.enabled&&this.conditionCollection.hasConditions(n)?(0,_.cn)(e,"htFiltersActive"):(0,_.IV)(e,"htFiltersActive")}},{key:"_createDataFilter",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.conditionCollection;return new ss(e,function(e){return t.getDataMapAtColumn(e)})}},{key:"updateComponents",value:function(t){if(null!==(e=this.dropdownMenuPlugin)&&void 0!==e&&e.enabled){var e,n=t.editedConditionStack,o=n.conditions,r=n.column,i=o.filter(function(t){return t.name===lJ}),a=o.filter(function(t){return t.name!==lJ});if(i.length>=2||a.length>=3)(0,nL.ZK)((0,oW.e)(g||(g=Object.freeze(Object.defineProperties(["The filter conditions have been applied properly, but couldnt be displayed visually. \n        The overall amount of conditions exceed the capability of the dropdown menu. \n        For more details see the documentation."],{raw:{value:Object.freeze(["The filter conditions have been applied properly, but couldnt be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation."])}})))));else{var l=this.conditionCollection.getOperation(r);this.components.get("filter_by_condition").updateState(a[0],r),this.components.get("filter_by_condition2").updateState(a[1],r),this.components.get("filter_operators").updateState(l,r),this.components.get("filter_by_value").updateState(t)}}}},{key:"getIndexesOfComponents",value:function(){var t=[];if(!this.dropdownMenuPlugin)return t;for(var e=this.dropdownMenuPlugin.menu,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];return(0,V.Bk)(o,function(n){(0,V.Bk)(e.menuItems,function(e,o){e.key===n.getMenuItemDescriptor().key&&t.push(o)})}),t}},{key:"changeComponentsVisibility",value:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.dropdownMenuPlugin){for(var e=this.dropdownMenuPlugin.menu.hotMenu,n=e.getPlugin("hiddenRows"),o=arguments.length,r=Array(o>1?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];var a=this.getIndexesOfComponents.apply(this,r);t?n.showRows(a):n.hideRows(a),e.render()}}},{key:"hideComponents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!1].concat(e))}},{key:"showComponents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.changeComponentsVisibility.apply(this,[!0].concat(e))}},{key:"destroy",value:function(){var t=this;this.enabled&&(this.components.forEach(function(e,n){null!==e&&(e.destroy(),t.components.set(n,null))}),this.conditionCollection.destroy(),this.conditionUpdateObserver.destroy(),this.hot.rowIndexMapper.unregisterMap(this.pluginName)),sy(sm(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return sb}},{key:"PLUGIN_PRIORITY",get:function(){return 250}},{key:"PLUGIN_DEPS",get:function(){return["plugin:DropdownMenu","plugin:HiddenRows","cell-type:checkbox"]}}],n&&sp(i.prototype,n),o&&sp(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function sC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function sk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sC(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}n(5827);var sS="internal-use-in-handsontable",sO={licenseKey:sS,useArrayArithmetic:!0,useColumnIndex:!1,useStats:!1,evaluateNullToZero:!0,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,leapYear1900:!0,nullDate:{year:1899,month:12,day:31},nullYear:30,dateFormats:["DD/MM/YYYY","DD/MM/YY"],timeFormats:["hh:mm","hh:mm:ss.sss"],matchWholeCell:!0,useRegularExpressions:!1,useWildcards:!0,functionArgSeparator:",",thousandSeparator:"",decimalSeparator:".",language:"enGB"};function sR(t){var e,n;return{maxColumns:t.maxColumns,maxRows:t.maxRows,language:null===(e=t[sZ])||void 0===e?void 0:null===(n=e.language)||void 0===n?void 0:n.langCode}}function sP(t){return Object.keys(t).reduce(function(e,n){return"hyperformula"!==n&&(e[n]=t[n]),e},{})}function sE(t){return(sE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sM(){var t="engine_relationship",e=(0,oy.Z)(sZ);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function s_(){var t="shared_engine_usage",e=(0,oy.Z)(sZ);return e.hasItem(t)||e.register(t,new Map),e.getItem(t)}function sA(t){var e,n=sM(),o=0===n.size?[]:Array.from(null!==(e=n.get(t))&&void 0!==e?e:[]);return new Map(o.map(function(t){return[t.getPlugin("formulas").sheetId,t]}))}function sI(t,e){if(t){var n=sM(),o=n.get(t),r=s_(),i=r.get(t);o&&o.includes(e)&&(o.splice(o.indexOf(e),1),0===o.length&&n.delete(t)),i&&i.includes(e.guid)&&(i.splice(i.indexOf(e.guid),1),0===i.length&&(r.delete(t),t.destroy()))}}function sT(t){return"string"==typeof t&&"'"===t.charAt(0)&&"="===t.charAt(1)}function sj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function sx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sj(Object(n),!0).forEach(function(e){sz(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sj(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function sD(t){return(sD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sH(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||sN(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sN(t,e){if(t){if("string"==typeof t)return sB(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sB(t,e)}}function sB(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function sL(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sV(){return(sV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sW(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function sU(t,e){return(sU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sF(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sW(t){return(sW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sz(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sY(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function sG(t,e,n){var o=sq(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function sK(t,e){var n=sq(t,e,"get");return n.get?n.get.call(t):n.value}function sq(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var sZ="formulas",s$="row_move";tg.Z.getSingleton().register("afterNamedExpressionAdded"),tg.Z.getSingleton().register("afterNamedExpressionRemoved"),tg.Z.getSingleton().register("afterSheetAdded"),tg.Z.getSingleton().register("afterSheetRemoved"),tg.Z.getSingleton().register("afterSheetRenamed"),tg.Z.getSingleton().register("afterFormulasValuesUpdate");var sX=function(t){return"UndoRedo.undo"===t||"UndoRedo.redo"===t||"auto"===t},sJ=new WeakMap,sQ=new WeakMap,s0=new WeakMap,s1=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sU(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=sW(i);if(e){var o=sW(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===sD(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return sF(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return sY(sF(t=r.call.apply(r,[this].concat(n))),sJ,{writable:!0,value:!1}),sY(sF(t),sQ,{writable:!0,value:!1}),sY(sF(t),s0,{writable:!0,value:[["valuesUpdated",function(){return t.onEngineValuesUpdated.apply(t,arguments)}],["namedExpressionAdded",function(){return t.onEngineNamedExpressionsAdded.apply(t,arguments)}],["namedExpressionRemoved",function(){return t.onEngineNamedExpressionsRemoved.apply(t,arguments)}],["sheetAdded",function(){return t.onEngineSheetAdded.apply(t,arguments)}],["sheetRenamed",function(){return t.onEngineSheetRenamed.apply(t,arguments)}],["sheetRemoved",function(){return t.onEngineSheetRemoved.apply(t,arguments)}]]}),sz(sF(t),"staticRegister",(0,oy.Z)("formulas")),sz(sF(t),"engine",null),sz(sF(t),"sheetName",null),t}return n=[{key:"sheetId",get:function(){return null===this.sheetName?null:this.engine.getSheetId(this.sheetName)}},{key:"isEnabled",value:function(){return!!this.hot.getSettings()[sZ]}},{key:"enablePlugin",value:function(){var t,e=this;if(!this.enabled){if(this.engine=null!==(t=function(t){var e,n=t.getSettings(),o=n[sZ],r=null==o?void 0:o.engine;if(!0===o||(0,U.o8)(r))return null;if("function"==typeof r.hyperformula||"function"==typeof r)return function(t,e,n){var o,r,i,a,l,s,u=e[sZ],c=(l=sP(null!=(a=e[sZ])&&null!==(i=a.engine)&&void 0!==i&&i.hyperformula?a.engine:{}),s=sR(e),sk(sk(sk({},sO),l),s)),f=sM(),h=s_();(o=u.functions)&&o.forEach(function(e){var n=e.name,o=e.plugin,r=e.translations;try{t.registerFunction(n,o,r)}catch(i){(0,nL.ZK)(i.message)}}),function(t,e){if(e){var n=e.langCode;try{t.registerLanguage(n,e)}catch(o){(0,nL.ZK)(o.message)}}}(t,u.language);var d=t.buildEmpty(c);return f.set(d,[n]),h.set(d,[n.guid]),(r=u.namedExpressions)&&(d.suspendEvaluation(),r.forEach(function(t){var e=t.name,n=t.expression,o=t.scope,r=t.options;try{d.addNamedExpression(e,n,o,r)}catch(i){(0,nL.ZK)(i.message)}}),d.resumeEvaluation()),d.on("sheetAdded",function(){d.rebuildAndRecalculate()}),d.on("sheetRemoved",function(){d.rebuildAndRecalculate()}),d}(null!==(e=r.hyperformula)&&void 0!==e?e:r,n,t);if("object"===sE(r)&&(0,U.o8)(r.hyperformula)){var i=sM(),a=s_().get(r);return i.has(r)||i.set(r,[]),i.get(r).push(t),a&&a.push(t.guid),r.getConfig().licenseKey||r.updateConfig({licenseKey:sS}),r}return null}(this.hot))&&void 0!==t?t:this.engine,!this.engine){(0,nL.ZK)("Missing the required `engine` key in the Formulas settings. Please fill it with either an engine class or an engine instance.");return}if(null!==this.sheetName&&!this.engine.doesSheetExist(this.sheetName)){var n=this.addSheet(this.sheetName,this.hot.getSourceDataArray());!1!==n&&(this.sheetName=n)}this.addHook("beforeLoadData",function(){return e.onBeforeLoadData.apply(e,arguments)}),this.addHook("afterLoadData",function(){return e.onAfterLoadData.apply(e,arguments)}),this.addHook("modifyData",function(){return e.onModifyData.apply(e,arguments)}),this.addHook("modifySourceData",function(){return e.onModifySourceData.apply(e,arguments)}),this.addHook("beforeValidate",function(){return e.onBeforeValidate.apply(e,arguments)}),this.addHook("afterSetSourceDataAtCell",function(){return e.onAfterSetSourceDataAtCell.apply(e,arguments)}),this.addHook("afterSetDataAtCell",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("afterSetDataAtRowProp",function(){return e.onAfterSetDataAtCell.apply(e,arguments)}),this.addHook("beforeCreateRow",function(){return e.onBeforeCreateRow.apply(e,arguments)}),this.addHook("beforeCreateCol",function(){return e.onBeforeCreateCol.apply(e,arguments)}),this.addHook("afterCreateRow",function(){return e.onAfterCreateRow.apply(e,arguments)}),this.addHook("afterCreateCol",function(){return e.onAfterCreateCol.apply(e,arguments)}),this.addHook("beforeRemoveRow",function(){return e.onBeforeRemoveRow.apply(e,arguments)}),this.addHook("beforeRemoveCol",function(){return e.onBeforeRemoveCol.apply(e,arguments)}),this.addHook("afterRemoveRow",function(){return e.onAfterRemoveRow.apply(e,arguments)}),this.addHook("afterRemoveCol",function(){return e.onAfterRemoveCol.apply(e,arguments)}),this.addHook("beforeUndo",function(t){(null==t?void 0:t.actionType)!==s$&&e.engine.undo()}),this.addHook("beforeRedo",function(t){(null==t?void 0:t.actionType)!==s$&&e.engine.redo()}),this.addHook("afterDetachChild",function(){return e.onAfterDetachChild.apply(e,arguments)}),this.addHook("beforeAutofill",function(){return e.onBeforeAutofill.apply(e,arguments)}),sK(this,s0).forEach(function(t){var n=sH(t,2),o=n[0],r=n[1];return e.engine.on(o,r)}),sV(sW(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t=this;sK(this,s0).forEach(function(e){var n=sH(e,2),o=n[0],r=n[1];return t.engine.off(o,r)}),sI(this.engine,this.hot),this.engine=null,sV(sW(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(t){this.engine.updateConfig((r=sP(null!=(o=(e=this.hot.getSettings())[sZ])&&null!==(n=o.engine)&&void 0!==n&&n.hyperformula?o.engine:{}),a=sR(e),sk(sk({},r),a)));var e,n,o,r,a,l=this.hot.getSettings()[sZ];if((0,U.$K)(l)&&(0,U.$K)(l.sheetName)&&l.sheetName!==this.sheetName&&this.switchSheet(l.sheetName),!t.data&&null===this.sheetName){var s=this.hot.getSettings()[sZ].sheetName;s&&this.engine.doesSheetExist(s)?this.switchSheet(this.sheetName):this.sheetName=this.addSheet(null!=s?s:void 0,this.hot.getSourceDataArray())}sV(sW(i.prototype),"updatePlugin",this).call(this,t)}},{key:"destroy",value:function(){var t=this;sK(this,s0).forEach(function(e){var n,o=sH(e,2),r=o[0],i=o[1];return null===(n=t.engine)||void 0===n?void 0:n.off(r,i)}),sG(this,s0,null),sI(this.engine,this.hot),this.engine=null,sV(sW(i.prototype),"destroy",this).call(this)}},{key:"getPhysicalIndexPosition",value:function(t,e,n,o,r){return!r&&t>=n?o+(t-n):e}},{key:"toPhysicalRowPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalRow(t),this.hot.countRows(),this.hot.countSourceRows(),e)}},{key:"toPhysicalColumnPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getPhysicalIndexPosition(t,this.hot.toPhysicalColumn(t),this.hot.countCols(),this.hot.countSourceCols(),e)}},{key:"addSheet",value:function(t,e){if((0,U.$K)(e)&&!(0,lI.Jr)(e))return(0,nL.ZK)("The provided data should be an array of arrays."),!1;if(null!=t&&this.engine.doesSheetExist(t))return(0,nL.ZK)("Sheet with the provided name already exists."),!1;try{var n=this.engine.addSheet(null!=t?t:void 0);return e&&this.engine.setSheetContent(this.engine.getSheetId(n),e),n}catch(o){return(0,nL.ZK)(o.message),!1}}},{key:"switchSheet",value:function(t){if(!this.engine.doesSheetExist(t)){(0,nL.vU)("The sheet named `".concat(t,"` does not exist, switch aborted."));return}this.sheetName=t;var e=this.engine.getSheetSerialized(this.sheetId);e.length>0&&this.hot.loadData(e,"".concat((0,F.ct)(sZ),".switchSheet"))}},{key:"getCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,o=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(e);return null!==o&&null!==r?this.engine.getCellType({sheet:n,row:o,col:r}):"EMPTY"}},{key:"isFormulaCellType",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.sheetId,o=this.hot.toPhysicalRow(t),r=this.hot.toPhysicalColumn(e);return null!==o&&null!==r&&this.engine.doesCellHaveFormula({sheet:n,row:o,col:r})}},{key:"renderDependentSheets",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=new Set;t.forEach(function(t){var e,n=null==t?void 0:null===(e=t.address)||void 0===e?void 0:e.sheet;void 0===n||o.has(n)||o.add(n)}),sA(this.engine).forEach(function(t,r){if((n||r!==e.sheetId)&&o.has(r)){var i;t.render(),null===(i=t.view)||void 0===i||i.adjustElementsSize()}})}},{key:"validateDependentCells",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=function(t){var e,n=null!==(e=null==t?void 0:t.address)&&void 0!==e?e:{},o=n.row,r=n.col,i=n.sheet;return(0,U.$K)(i)?"".concat(i,":").concat(o,"x").concat(r):""},r=new Set(n.map(function(t){return o(t)}));t.forEach(function(t){var n,i,a=null!==(n=t.address)&&void 0!==n?n:{},l=a.row,s=a.col,u=(0,U.$K)(l)?e.hot.toVisualRow(l):null,c=(0,U.$K)(s)?e.hot.toVisualColumn(s):null;if(null!==u&&null!==c){var f=null==t?void 0:null===(i=t.address)||void 0===i?void 0:i.sheet,h=o(t);if(void 0!==f&&!r.has(h)){var d=sA(e.engine).get(f);if(!d)return;d.validateCell(d.getDataAtCell(u,c),d.getCellMeta(u,c),function(){})}}})}},{key:"syncChangeWithEngine",value:function(t,e,n){var o={row:this.toPhysicalRowPosition(t),col:this.toPhysicalColumnPosition(e),sheet:this.sheetId};if(!this.engine.isItPossibleToSetCellContents(o)){(0,nL.ZK)("Not possible to set cell data at ".concat(JSON.stringify(o)));return}return this.engine.setCellContents(o,n)}},{key:"onBeforeValidate",value:function(t,e,n){var o=this.hot.propToCol(n);if(this.isFormulaCellType(e,o)){var r={row:this.hot.toPhysicalRow(e),col:this.hot.toPhysicalColumn(o),sheet:this.sheetId},i=this.engine.getCellValue(r);return"object"===sD(i)&&null!==i?i.value:i}return t}},{key:"onBeforeAutofill",value:function(t,e,n){var o=this,r=function(t){return sx(sx({},t),{},{sheet:o.sheetId})},i={start:r(e.getTopStartCorner()),end:r(e.getBottomEndCorner())},a={start:r(n.getTopStartCorner()),end:r(n.getBottomEndCorner())};return!1!==this.engine.isItPossibleToSetCellContents(a)&&this.engine.getFillRangeData(i,a)}},{key:"onBeforeLoadData",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.includes((0,F.ct)(sZ))||sG(this,sQ,(0,U.o8)(this.hot.getSettings().data))}},{key:"onAfterLoadData",value:function(t,e){var n,o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!r.includes((0,F.ct)(sZ))){if(this.sheetName=(n=this.engine,o=this.hot.getSettings()[sZ].sheetName,((0,U.o8)(o)||!n.doesSheetExist(o))&&(o=n.addSheet(o)),o),sK(this,sQ))this.switchSheet(this.sheetName);else{var i=this.hot.getSourceDataArray();if(this.engine.isItPossibleToReplaceSheetContent(this.sheetId,i)){sG(this,sJ,!0);var a=this.engine.setSheetContent(this.sheetId,this.hot.getSourceDataArray());this.renderDependentSheets(a),sG(this,sJ,!1)}}}}},{key:"onModifyData",value:function(t,e,n,o){if(!("get"!==o||sK(this,sJ))&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var r,i=this.hot.toVisualRow(t);if(!this.isFormulaCellType(i,e)&&"ARRAY"!==this.getCellType(i,e)){sT(n.value)&&(n.value=sT(r=n.value)?r.substr(1):r);return}var a={row:t,col:this.toPhysicalColumnPosition(e),sheet:this.sheetId},l=this.engine.getCellValue(a),s="object"===sD(l)&&null!==l?l.value:l;n.value=s}}},{key:"onModifySourceData",value:function(t,e,n,o){if(!("get"!==o||sK(this,sJ))&&null!==this.sheetName&&this.engine.doesSheetExist(this.sheetName)){var r=this.hot.toVisualRow(t),i=this.hot.propToCol(e);if(this.isFormulaCellType(r,i)||"ARRAY"===this.getCellType(r,i)){var a=this.engine.getSheetDimensions(this.engine.getSheetId(this.sheetName));if(0!==a.width||0!==a.height){var l={row:t,col:this.toPhysicalColumnPosition(i),sheet:this.sheetId};n.value=this.engine.getCellSerialized(l)}}}}},{key:"onAfterSetDataAtCell",value:function(t,e){var n=this;if(!sX(e)){var o=[],r=[],i=this.engine.batch(function(){t.forEach(function(t){var e=sH(t,4),i=e[0],a=e[1],l=e[3],s=n.hot.propToCol(a),u=n.hot.toPhysicalRow(i),c=n.hot.toPhysicalColumn(s),f={row:u,col:c,sheet:n.sheetId};null!==u&&null!==c?n.syncChangeWithEngine(i,s,l):o.push([i,s,l]),r.push({address:f})})});o.length&&this.hot.addHookOnce("afterChange",function(){var t=n.engine.batch(function(){o.forEach(function(t){var e=sH(t,3),o=e[0],r=e[1],i=e[2];n.syncChangeWithEngine(o,r,i)})});n.renderDependentSheets(t,!0)}),this.renderDependentSheets(i),this.validateDependentCells(i,r)}}},{key:"onAfterSetSourceDataAtCell",value:function(t,e){var n=this;if(!sX(e)){var o=[],r=[];t.forEach(function(t){var e,i=sH(t,4),a=i[0],l=i[1],s=i[3],u=n.hot.propToCol(l);if((0,t9.kE)(u)){var c={row:a,col:n.toPhysicalColumnPosition(u),sheet:n.sheetId};if(!n.engine.isItPossibleToSetCellContents(c)){(0,nL.ZK)("Not possible to set source cell data at ".concat(JSON.stringify(c)));return}r.push({address:c}),o.push.apply(o,function(t){if(Array.isArray(t))return sB(t)}(e=n.engine.setCellContents(c,s))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||sN(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}),this.renderDependentSheets(o),this.validateDependentCells(o,r)}}},{key:"onBeforeCreateRow",value:function(t,e){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddRows(this.sheetId,[this.toPhysicalRowPosition(t),e]))return!1}},{key:"onBeforeCreateCol",value:function(t,e){if(null===this.sheetId||!this.engine.doesSheetExist(this.sheetName)||!this.engine.isItPossibleToAddColumns(this.sheetId,[this.toPhysicalColumnPosition(t),e]))return!1}},{key:"onBeforeRemoveRow",value:function(t,e,n){var o=this;return!1!==n.every(function(t){return o.engine.isItPossibleToRemoveRows(o.sheetId,[t,1])})&&void 0}},{key:"onBeforeRemoveCol",value:function(t,e,n){var o=this;return!1!==n.every(function(t){return o.engine.isItPossibleToRemoveColumns(o.sheetId,[t,1])})&&void 0}},{key:"onAfterCreateRow",value:function(t,e,n){if(!sX(n)){var o=this.engine.addRows(this.sheetId,[this.toPhysicalRowPosition(t),e]);this.renderDependentSheets(o)}}},{key:"onAfterCreateCol",value:function(t,e,n){if(!sX(n)){var o=this.engine.addColumns(this.sheetId,[this.toPhysicalColumnPosition(t),e]);this.renderDependentSheets(o)}}},{key:"onAfterRemoveRow",value:function(t,e,n,o){var r=this;if(!sX(o)){var i=n.sort().reverse(),a=this.engine.batch(function(){i.forEach(function(t){r.engine.removeRows(r.sheetId,[t,1])})});this.renderDependentSheets(a)}}},{key:"onAfterRemoveCol",value:function(t,e,n,o){var r=this;if(!sX(o)){var i=n.sort().reverse(),a=this.engine.batch(function(){i.forEach(function(t){r.engine.removeColumns(r.sheetId,[t,1])})});this.renderDependentSheets(a)}}},{key:"onAfterDetachChild",value:function(t,e,n){var o,r=this;sG(this,sJ,!0);var i=this.hot.getSourceDataArray(n,0,n+((null===(o=e.__children)||void 0===o?void 0:o.length)||0),this.hot.countSourceCols());sG(this,sJ,!1),i.forEach(function(t,e){t.forEach(function(t,o){r.engine.setCellContents({col:o,row:n+e,sheet:r.sheetId},[[t]])})})}},{key:"onEngineValuesUpdated",value:function(t){this.hot.runHooks("afterFormulasValuesUpdate",t)}},{key:"onEngineNamedExpressionsAdded",value:function(t,e){this.hot.runHooks("afterNamedExpressionAdded",t,e)}},{key:"onEngineNamedExpressionsRemoved",value:function(t,e){this.hot.runHooks("afterNamedExpressionRemoved",t,e)}},{key:"onEngineSheetAdded",value:function(t){this.hot.runHooks("afterSheetAdded",t)}},{key:"onEngineSheetRenamed",value:function(t,e){this.hot.runHooks("afterSheetRenamed",t,e)}},{key:"onEngineSheetRemoved",value:function(t,e){this.hot.runHooks("afterSheetRemoved",t,e)}}],o=[{key:"PLUGIN_KEY",get:function(){return sZ}},{key:"PLUGIN_PRIORITY",get:function(){return 260}}],n&&sL(i.prototype,n),o&&sL(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function s2(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function s3(t){return function(t){if(Array.isArray(t))return s4(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s4(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var s8=n(331);function s9(t){return(s9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s6(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s7(){return(s7="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ue(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function s5(t,e){return(s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ut(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function uo(t,e){var n=ui(t,e,"get");return n.get?n.get.call(t):n.value}function ur(t,e,n){var o=ui(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function ui(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}tg.Z.getSingleton().register("beforeHideColumns"),tg.Z.getSingleton().register("afterHideColumns"),tg.Z.getSingleton().register("beforeUnhideColumns"),tg.Z.getSingleton().register("afterUnhideColumns");var ua="hiddenColumns",ul=new WeakMap,us=new WeakMap,uu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s5(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ue(i);if(e){var o=ue(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===s9(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ut(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return un(ut(t=r.call.apply(r,[this].concat(n))),ul,{writable:!0,value:{}}),un(ut(t),us,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[ua]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[ua];(0,I.Kn)(e)&&(ur(this,ul,e),(0,U.o8)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),ur(this,us,new s8.o),uo(this,us).addLocalHook("init",function(){return t.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,uo(this,us)),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(e,n,o){return t.onAfterGetCellMeta(e,n,o)}),this.addHook("modifyColWidth",function(e,n){return t.onModifyColWidth(e,n)}),this.addHook("afterGetColHeader",function(){return t.onAfterGetColHeader.apply(t,arguments)}),this.addHook("modifyCopyableRange",function(e){return t.onModifyCopyableRange(e)}),s7(ue(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),s7(ue(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.columnIndexMapper.unregisterMap(this.pluginName),ur(this,ul,{}),s7(ue(i.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showColumns",value:function(t){var e=this,n=this.getHiddenColumns(),o=this.isValidConfig(t),r=n,i=uo(this,us).getValues().slice(),a=t.length>0;if(o&&a){var l=t.map(function(t){return e.hot.toPhysicalColumn(t)});(0,V.Bk)(l,function(t){i[t]=!1}),r=(0,V.k$)(i,function(t,n,o){return n&&t.push(e.hot.toVisualColumn(o)),t},[])}!1!==this.hot.runHooks("beforeUnhideColumns",n,r,o&&a)&&(o&&a&&uo(this,us).setValues(i),this.hot.view.adjustElementsSize(),this.hot.runHooks("afterUnhideColumns",n,r,o&&a,o&&r.length<n.length))}},{key:"showColumn",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showColumns(e)}},{key:"hideColumns",value:function(t){var e=this,n=this.getHiddenColumns(),o=this.isValidConfig(t),r=n;o&&(r=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideColumns",n,r,o)&&(o&&this.hot.batchExecution(function(){(0,V.Bk)(t,function(t){uo(e,us).setValueAtIndex(e.hot.toPhysicalColumn(t),!0)})},!0),this.hot.runHooks("afterHideColumns",n,r,o,o&&r.length>n.length))}},{key:"hideColumn",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideColumns(e)}},{key:"getHiddenColumns",value:function(){var t=this;return(0,V.Sc)(uo(this,us).getHiddenIndexes(),function(e){return t.hot.toVisualColumn(e)})}},{key:"isHidden",value:function(t){return uo(this,us).getValueAtIndex(this.hot.toPhysicalColumn(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countCols();return!!Array.isArray(t)&&t.length>0&&t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"resetCellsMeta",value:function(){(0,V.Bk)(this.hot.getCellsMeta(),function(t){t&&(t.skipColumnOnPaste=!1)})}},{key:"onModifyColWidth",value:function(t,e){return this.isHidden(e)?0:uo(this,ul).indicators&&(this.isHidden(e+1)||this.isHidden(e-1))&&"number"==typeof t&&this.hot.hasColHeaders()?t+15:void 0}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===uo(this,ul).copyPasteEnabled&&this.isHidden(e)&&(n.skipColumnOnPaste=!0),this.isHidden(e-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenColumn")&&(n.className+=" afterHiddenColumn");else if(n.className){var o=n.className.split(" ");if(o.length>0){var r=o.indexOf("afterHiddenColumn");r>-1&&o.splice(r,1),n.className=o.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(uo(this,ul).copyPasteEnabled)return t;var n=[],o=function(t,e,o,r){n.push({startRow:t,endRow:e,startCol:o,endCol:r})};return(0,V.Bk)(t,function(t){var n=!0,r=0;(0,t9.q4)(t.startCol,t.endCol,function(i){e.isHidden(i)?(n||o(t.startRow,t.endRow,r,i-1),n=!0):(n&&(r=i),i===t.endCol&&o(t.startRow,t.endRow,r,i),n=!1)})}),n}},{key:"onAfterGetColHeader",value:function(t,e){if(uo(this,ul).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenColumn"),t<this.hot.countCols()-1&&this.isHidden(t+1)&&n.push("beforeHiddenColumn"),(0,_.cn)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,o;t.items.push({name:o0},(e=this,{key:"hidden_columns_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,4)||function(t,e){if(t){if("string"==typeof t)return s2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s2(t,e)}}(t,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[1]-n[3]!=0&&(e=1)}return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_HIDE_COLUMN,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,o=t.to,r=Math.max(Math.min(n.col,o.col),0),i=Math.max(n.col,o.col),a=[],l=r;l<=i;l+=1)a.push(l);e.hideColumns(a);var s=a[a.length-1],u=this.columnIndexMapper.getNearestNotHiddenIndex(s,1,!0);Number.isInteger(u)&&u>=0?this.selectColumns(u):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())}}),(n=this,o=[],{key:"hidden_columns_show",name:function(){var t=o.length>1?1:0;return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_SHOW_COLUMN,t)},callback:function(){if(0!==o.length){var t,e,r=o[0],i=o[o.length-1];r=null!==(t=this.columnIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==t?t:0,i=null!==(e=this.columnIndexMapper.getNearestNotHiddenIndex(i+1,1))&&void 0!==e?e:this.countCols()-1,n.showColumns(o),this.render(),this.view.adjustElementsSize(!0),i-r+1!==this.countCols()&&this.selectColumns(r,i)}},disabled:!1,hidden:function(){var t=this,e=(0,V.Sc)(n.getHiddenColumns(),function(e){return t.toPhysicalColumn(e)});if(!(this.selection.isSelectedByColumnHeader()||this.selection.isSelectedByCorner())||e.length<1)return!0;o.length=0;var r=this.getSelectedRangeLast(),i=r.getTopStartCorner().col,a=r.getBottomEndCorner().col,l=this.columnIndexMapper,s=l.getRenderableFromVisualIndex(i),u=l.getRenderableFromVisualIndex(a),c=l.getNotTrimmedIndexes(),f=[];if(i!==a){if(a-i+1>u-s+1){var h=c.slice(i,a+1);f.push.apply(f,s3(h.filter(function(t){return e.includes(t)})))}}else if(0===s&&s<i)f.push.apply(f,s3(c.slice(0,i)));else if(null===s)f.push.apply(f,s3(c.slice(0,this.countCols())));else{var d=this.countCols()-1;u===l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(d,-1))&&d>a&&f.push.apply(f,s3(c.slice(a+1)))}return(0,V.Bk)(f,function(e){o.push(t.toVisualColumn(e))}),0===o.length}}))}},{key:"onMapInit",value:function(){Array.isArray(uo(this,ul).columns)&&this.hideColumns(uo(this,ul).columns)}},{key:"destroy",value:function(){ur(this,ul,null),ur(this,us,null),s7(ue(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return ua}},{key:"PLUGIN_PRIORITY",get:function(){return 310}}],n&&s6(i.prototype,n),o&&s6(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function uc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function uf(t){return function(t){if(Array.isArray(t))return uh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return uh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uh(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ud(t){return(ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function up(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uy(){return(uy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=um(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ug(t,e){return(ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uv(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function um(t){return(um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ub(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function uw(t,e){var n=uk(t,e,"get");return n.get?n.get.call(t):n.value}function uC(t,e,n){var o=uk(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function uk(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}tg.Z.getSingleton().register("beforeHideRows"),tg.Z.getSingleton().register("afterHideRows"),tg.Z.getSingleton().register("beforeUnhideRows"),tg.Z.getSingleton().register("afterUnhideRows");var uS="hiddenRows",uO=new WeakMap,uR=new WeakMap,uP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ug(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=um(i);if(e){var o=um(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ud(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uv(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return ub(uv(t=r.call.apply(r,[this].concat(n))),uO,{writable:!0,value:{}}),ub(uv(t),uR,{writable:!0,value:null}),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[uS]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[uS];(0,I.Kn)(e)&&(uC(this,uO,e),(0,U.o8)(e.copyPasteEnabled)&&(e.copyPasteEnabled=!0)),uC(this,uR,new s8.o),uw(this,uR).addLocalHook("init",function(){return t.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,uw(this,uR)),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(e,n,o){return t.onAfterGetCellMeta(e,n,o)}),this.addHook("modifyRowHeight",function(e,n){return t.onModifyRowHeight(e,n)}),this.addHook("afterGetRowHeader",function(){return t.onAfterGetRowHeader.apply(t,arguments)}),this.addHook("modifyCopyableRange",function(e){return t.onModifyCopyableRange(e)}),uy(um(i.prototype),"enablePlugin",this).call(this)}}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),uy(um(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap(this.pluginName),uC(this,uO,{}),uy(um(i.prototype),"disablePlugin",this).call(this),this.resetCellsMeta()}},{key:"showRows",value:function(t){var e=this,n=this.getHiddenRows(),o=this.isValidConfig(t),r=n,i=uw(this,uR).getValues().slice(),a=t.length>0;if(o&&a){var l=t.map(function(t){return e.hot.toPhysicalRow(t)});(0,V.Bk)(l,function(t){i[t]=!1}),r=(0,V.k$)(i,function(t,n,o){return n&&t.push(e.hot.toVisualRow(o)),t},[])}!1!==this.hot.runHooks("beforeUnhideRows",n,r,o&&a)&&(o&&a&&uw(this,uR).setValues(i),this.hot.runHooks("afterUnhideRows",n,r,o&&a,o&&r.length<n.length))}},{key:"showRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.showRows(e)}},{key:"hideRows",value:function(t){var e=this,n=this.getHiddenRows(),o=this.isValidConfig(t),r=n;o&&(r=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeHideRows",n,r,o)&&(o&&this.hot.batchExecution(function(){(0,V.Bk)(t,function(t){uw(e,uR).setValueAtIndex(e.hot.toPhysicalRow(t),!0)})},!0),this.hot.runHooks("afterHideRows",n,r,o,o&&r.length>n.length))}},{key:"hideRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.hideRows(e)}},{key:"getHiddenRows",value:function(){var t=this;return(0,V.Sc)(uw(this,uR).getHiddenIndexes(),function(e){return t.hot.toVisualRow(e)})}},{key:"isHidden",value:function(t){return uw(this,uR).getValueAtIndex(this.hot.toPhysicalRow(t))||!1}},{key:"isValidConfig",value:function(t){var e=this.hot.countRows();return!!Array.isArray(t)&&t.length>0&&t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"resetCellsMeta",value:function(){(0,V.Bk)(this.hot.getCellsMeta(),function(t){t&&(t.skipRowOnPaste=!1)})}},{key:"onModifyRowHeight",value:function(t,e){return this.isHidden(e)?0:t}},{key:"onAfterGetCellMeta",value:function(t,e,n){if(!1===uw(this,uO).copyPasteEnabled&&this.isHidden(t)&&(n.skipRowOnPaste=!0),this.isHidden(t-1))n.className=n.className||"",-1===n.className.indexOf("afterHiddenRow")&&(n.className+=" afterHiddenRow");else if(n.className){var o=n.className.split(" ");if(o.length>0){var r=o.indexOf("afterHiddenRow");r>-1&&o.splice(r,1),n.className=o.join(" ")}}}},{key:"onModifyCopyableRange",value:function(t){var e=this;if(uw(this,uO).copyPasteEnabled)return t;var n=[],o=function(t,e,o,r){n.push({startRow:t,endRow:e,startCol:o,endCol:r})};return(0,V.Bk)(t,function(t){var n=!0,r=0;(0,t9.q4)(t.startRow,t.endRow,function(i){e.isHidden(i)?(n||o(r,i-1,t.startCol,t.endCol),n=!0):(n&&(r=i),i===t.endRow&&o(r,i,t.startCol,t.endCol),n=!1)})}),n}},{key:"onAfterGetRowHeader",value:function(t,e){if(uw(this,uO).indicators&&!(t<0)){var n=[];t>=1&&this.isHidden(t-1)&&n.push("afterHiddenRow"),t<this.hot.countRows()-1&&this.isHidden(t+1)&&n.push("beforeHiddenRow"),(0,_.cn)(e,n)}}},{key:"onAfterContextMenuDefaultOptions",value:function(t){var e,n,o;t.items.push({name:o0},(e=this,{key:"hidden_rows_hide",name:function(){var t=this.getSelectedLast(),e=0;if(Array.isArray(t)){var n=function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,3)||function(t,e){if(t){if("string"==typeof t)return uc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uc(t,e)}}(t,3)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n[0]-n[2]!=0&&(e=1)}return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_HIDE_ROW,e)},callback:function(){for(var t=this.getSelectedRangeLast(),n=t.from,o=t.to,r=Math.max(Math.min(n.row,o.row),0),i=Math.max(n.row,o.row),a=[],l=r;l<=i;l+=1)a.push(l);e.hideRows(a);var s=a[a.length-1],u=this.rowIndexMapper.getNearestNotHiddenIndex(s,1,!0);Number.isInteger(u)&&u>=0?this.selectRows(u):this.deselectCell(),this.render(),this.view.adjustElementsSize(!0)},disabled:!1,hidden:function(){return!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())}}),(n=this,o=[],{key:"hidden_rows_show",name:function(){var t=o.length>1?1:0;return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_SHOW_ROW,t)},callback:function(){if(0!==o.length){var t,e,r=o[0],i=o[o.length-1];r=null!==(t=this.rowIndexMapper.getNearestNotHiddenIndex(r-1,-1))&&void 0!==t?t:0,i=null!==(e=this.rowIndexMapper.getNearestNotHiddenIndex(i+1,1))&&void 0!==e?e:this.countRows()-1,n.showRows(o),this.render(),this.view.adjustElementsSize(!0),i-r+1!==this.countRows()&&this.selectRows(r,i)}},disabled:!1,hidden:function(){var t=this,e=(0,V.Sc)(n.getHiddenRows(),function(e){return t.toPhysicalRow(e)});if(!(this.selection.isSelectedByRowHeader()||this.selection.isSelectedByCorner())||e.length<1)return!0;o.length=0;var r=this.getSelectedRangeLast(),i=r.getTopStartCorner().row,a=r.getBottomEndCorner().row,l=this.rowIndexMapper,s=l.getRenderableFromVisualIndex(i),u=l.getRenderableFromVisualIndex(a),c=l.getNotTrimmedIndexes(),f=[];if(i!==a){if(a-i+1>u-s+1){var h=c.slice(i,a+1);f.push.apply(f,uf(h.filter(function(t){return e.includes(t)})))}}else if(0===s&&s<i)f.push.apply(f,uf(c.slice(0,i)));else if(null===s)f.push.apply(f,uf(c.slice(0,this.countRows())));else{var d=this.countRows()-1;u===l.getRenderableFromVisualIndex(l.getNearestNotHiddenIndex(d,-1))&&d>a&&f.push.apply(f,uf(c.slice(a+1)))}return(0,V.Bk)(f,function(e){o.push(t.toVisualRow(e))}),0===o.length}}))}},{key:"onMapInit",value:function(){Array.isArray(uw(this,uO).rows)&&this.hideRows(uw(this,uO).rows)}},{key:"destroy",value:function(){uC(this,uO,null),uC(this,uR,null),uy(um(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return uS}},{key:"PLUGIN_PRIORITY",get:function(){return 320}}],n&&up(i.prototype,n),o&&up(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function uE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function uM(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function u_(t){return(u_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uA(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uI(){return(uI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ux(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function uT(t,e){return(uT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uj(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ux(t){return(ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("beforeColumnFreeze"),tg.Z.getSingleton().register("afterColumnFreeze"),tg.Z.getSingleton().register("beforeColumnUnfreeze"),tg.Z.getSingleton().register("afterColumnUnfreeze");var uD="manualColumnFreeze",uH=new WeakMap,uN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uT(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ux(i);if(e){var o=ux(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===u_(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return uj(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,t),uH.set(uj(e),{afterFirstUse:!1}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[uD]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterContextMenuDefaultOptions",function(e){return t.addContextMenuEntry(e)}),this.addHook("beforeColumnMove",function(e,n){return t.onBeforeColumnMove(e,n)}),uI(ux(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){uH.get(this).afterFirstUse=!1,uI(ux(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),uI(ux(i.prototype),"updatePlugin",this).call(this)}},{key:"freezeColumn",value:function(t){var e=uH.get(this),n=this.hot.getSettings(),o=n.fixedColumnsStart<this.hot.countCols()&&t>n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnFreeze",t,o)&&(o&&(this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart),n._fixedColumnsStart+=1),this.hot.runHooks("afterColumnFreeze",t,o))}},{key:"unfreezeColumn",value:function(t){var e=uH.get(this),n=this.hot.getSettings(),o=n.fixedColumnsStart>0&&t<=n.fixedColumnsStart-1;e.afterFirstUse||(e.afterFirstUse=!0),!1!==this.hot.runHooks("beforeColumnUnfreeze",t,o)&&(o&&(n._fixedColumnsStart-=1,this.hot.columnIndexMapper.moveIndexes(t,n.fixedColumnsStart)),this.hot.runHooks("afterColumnUnfreeze",t,o))}},{key:"addContextMenuEntry",value:function(t){var e,n;t.items.push({name:"---------"},(e=this,{key:"freeze_column",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_FREEZE_COLUMN)},callback:function(t,n){var o=(function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(n,1)||function(t,e){if(t){if("string"==typeof t)return uE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uE(t,e)}}(n,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].start.col;e.freezeColumn(o),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col<=this.getSettings().fixedColumnsStart-1)&&(e=!0),e}}),(n=this,{key:"unfreeze_column",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_UNFREEZE_COLUMN)},callback:function(t,e){var o=(function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,1)||function(t,e){if(t){if("string"==typeof t)return uM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uM(t,e)}}(e,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0].start.col;n.unfreezeColumn(o),this.render(),this.view.adjustElementsSize(!0)},hidden:function(){var t=this.getSelectedRange(),e=!1;return void 0===t?e=!0:t.length>1?e=!0:(t[0].from.col!==t[0].to.col||t[0].from.col>=this.getSettings().fixedColumnsStart)&&(e=!0),e}}))}},{key:"onBeforeColumnMove",value:function(t,e){if(uH.get(this).afterFirstUse){var n=this.hot.getSettings().fixedColumnsStart;if(e<n||t.some(function(t){return t<n}))return!1}}}],o=[{key:"PLUGIN_KEY",get:function(){return uD}},{key:"PLUGIN_PRIORITY",get:function(){return 110}}],n&&uA(i.prototype,n),o&&uA(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function uB(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var uL=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=t,this._element=null,this.state=0,this.inlineProperty=t.isRtl()?"right":"left"}return t=[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){(0,t9.kE)(t)&&(this._element.style.top=t+"px"),(0,t9.kE)(e)&&(this._element.style[this.inlineProperty]=e+"px")}},{key:"getPosition",value:function(){var t=this._element.style;return{top:t.top?parseInt(t.top,10):0,start:t[this.inlineProperty]?parseInt(t[this.inlineProperty],10):0}}},{key:"setSize",value:function(t,e){(0,t9.kE)(t)&&(this._element.style.width=t+"px"),(0,t9.kE)(e)&&(this._element.style.height=e+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){(0,t9.kE)(t)&&(this._element.style.marginTop=t+"px"),(0,t9.kE)(e)&&(this._element.style["margin".concat((0,F.ct)(this.inlineProperty))]=e+"px")}},{key:"getOffset",value:function(){var t=this._element.style,e="margin".concat((0,F.ct)(this.inlineProperty));return{top:t.marginTop?parseInt(t.marginTop,10):0,start:t[e]?parseInt(t[e],10):0}}}],uB(n.prototype,t),e&&uB(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function uV(t){return(uV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uU(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uF(){return(uF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uz(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function uW(t,e){return(uW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uz(t){return(uz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uY=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uW(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=uz(i);if(e){var o=uz(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return n=[{key:"build",value:function(){uF(uz(i.prototype),"build",this).call(this),(0,_.cn)(this._element,"ht__manualColumnMove--backlight")}}],uU(i.prototype,n),o&&uU(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(uL);function uG(t){return(uG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uK(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function uq(){return(uq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u$(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function uZ(t,e){return(uZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u$(t){return(u$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uX=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uZ(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=u$(i);if(e){var o=u$(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uG(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return n=[{key:"build",value:function(){uq(u$(i.prototype),"build",this).call(this),(0,_.cn)(this._element,"ht__manualColumnMove--guideline")}}],uK(i.prototype,n),o&&uK(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(uL);function uJ(t){return(uJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uQ(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u0(){return(u0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u3(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function u1(t,e){return(u1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u2(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u3(t){return(u3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("beforeColumnMove"),tg.Z.getSingleton().register("afterColumnMove");var u4="manualColumnMove",u8=new WeakMap,u9="ht__manualColumnMove",u6="show-ui",u7="on-moving--columns",u5="after-selection--columns",ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u1(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=u3(i);if(e){var o=u3(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===uJ(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return u2(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,t),u8.set(u2(e),{columnsToMove:[],countCols:0,fixedColumns:0,pressed:void 0,target:{eventPageX:void 0,coords:void 0,TD:void 0,col:void 0},cachedDropIndex:void 0}),e.eventManager=new tl.Z(u2(e)),e.backlight=new uY(t),e.guideline=new uX(t),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[u4]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterScrollVertically",function(){return t.onAfterScrollVertically()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.buildPluginUI(),this.registerEvents(),(0,_.cn)(this.hot.rootElement,u9),u0(u3(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),u0(u3(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){(0,_.IV)(this.hot.rootElement,u9),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),u0(u3(i.prototype),"disablePlugin",this).call(this)}},{key:"moveColumn",value:function(t,e){return this.moveColumns([t],e)}},{key:"moveColumns",value:function(t,e){var n=u8.get(this),o=n.cachedDropIndex,r=this.isMovePossible(t,e),i=this.hot.runHooks("beforeColumnMove",t,e,o,r);if(n.cachedDropIndex=void 0,!1!==i){r&&this.hot.columnIndexMapper.moveIndexes(t,e);var a=r&&this.isColumnOrderChanged(t,e);return this.hot.runHooks("afterColumnMove",t,e,o,r,a),a}}},{key:"dragColumn",value:function(t,e){return this.dragColumns([t],e)}},{key:"dragColumns",value:function(t,e){var n=this.countFinalIndex(t,e);return u8.get(this).cachedDropIndex=e,this.moveColumns(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.columnIndexMapper.getNotTrimmedIndexesLength(),o=t.length+e>n,r=t.some(function(t){return t<0}),i=t.some(function(t){return t>=n});return!o&&!(e<0)&&!r&&!i}},{key:"isColumnOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}},{key:"countFinalIndex",value:function(t,e){var n=(0,V.k$)(t,function(t,n){return n<e&&(t+=1),t},0);return e-n}},{key:"getColumnsWidth",value:function(t,e){for(var n=this.hot.columnIndexMapper,o=0,r=t;r<=e;r+=1){var i=n.getRenderableFromVisualIndex(r);r<0?o+=this.hot.view._wt.wtViewport.getRowHeaderWidth()||0:null!==i&&(o+=this.hot.view._wt.wtTable.getStretchedColumnWidth(i)||0)}return o}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[u4];if(Array.isArray(t))this.moveColumns(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveColumns(e,0)}}},{key:"isFixedColumnsStart",value:function(t){return t<this.hot.getSettings().fixedColumnsStart}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualColumnMove",this.hot.columnIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualColumnMove",t),t.value?t.value:[]}},{key:"prepareColumnsToMoving",value:function(t,e){var n=[];return(0,t9.q4)(t,e,function(t){n.push(t)}),n}},{key:"refreshPositions",value:function(){var t=u8.get(this),e=this.hot.view.getFirstFullyVisibleColumn();this.isFixedColumnsStart(t.hoveredColumn)&&e>0&&this.hot.scrollViewportTo(void 0,this.hot.columnIndexMapper.getNearestNotHiddenIndex(e-1,-1));var n=this.hot.view._wt.wtTable,o=this.hot.view._wt.wtOverlays.scrollableElement,r="number"==typeof o.scrollX?o.scrollX:o.scrollLeft,i=this.hot.view.THEAD.offsetLeft+this.getColumnsWidth(0,t.hoveredColumn-1),a=n.hider.offsetWidth,l=n.TBODY.offsetLeft,s=this.backlight.getOffset().start,u=this.backlight.getSize().width,c=0,f=0;if(this.hot.isRtl()){var h=this.hot.rootWindow,d=(0,_.iO)(this.hot.rootElement),p=h.innerWidth-t.rootElementOffset-d;f=h.innerWidth-t.target.eventPageX-p-(void 0===o.scrollX?r:0)}else f=t.target.eventPageX-(t.rootElementOffset-(void 0===o.scrollX?r:0));if(t.hasRowHeaders&&(c=this.hot.view._wt.wtOverlays.inlineStartOverlay.clone.wtTable.getColumnHeader(-1).offsetWidth),this.isFixedColumnsStart(t.hoveredColumn)&&(i+=r),i+=c,t.hoveredColumn<0)t.fixedColumnsStart>0?t.target.col=0:t.target.col=e>0?e-1:e;else if(t.target.TD.offsetWidth/2+i<=f){var y=t.hoveredColumn>=t.countCols?t.countCols-1:t.hoveredColumn;t.target.col=y+1,i+=t.target.TD.offsetWidth}else t.target.col=t.hoveredColumn;var g=f,v=i;f+u+s>=a?g=a-u-s:f+s<l+c&&(g=l+c+Math.abs(s)),i>=a-1?v=a-1:0===v?v=1:void 0!==o.scrollX&&t.hoveredColumn<t.fixedColumnsStart&&(v-=t.rootElementOffset<=o.scrollX?t.rootElementOffset:0),this.backlight.setPosition(null,g),this.guideline.setPosition(null,v)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,o){var r=this.hot.view._wt.wtTable,i=this.hot.selection.isSelectedByColumnHeader(),a=this.hot.getSelectedRangeLast(),l=u8.get(this),s=(0,_.pv)(t.target,"sortAction");if(!a||!i||l.pressed||0!==t.button||s){l.pressed=!1,l.columnsToMove.length=0,(0,_.IV)(this.hot.rootElement,[u7,u6]);return}var u=this.guideline.isBuilt()&&!this.guideline.isAppended(),c=this.backlight.isBuilt()&&!this.backlight.isAppended();u&&c&&(this.guideline.appendTo(r.hider),this.backlight.appendTo(r.hider));var f=a.from,h=a.to,d=Math.min(f.col,h.col),p=Math.max(f.col,h.col);if(e.row<0&&e.col>=d&&e.col<=p){o.column=!0,l.pressed=!0,l.target.eventPageX=t.pageX,l.target.eventOffsetX=t.offsetX,l.hoveredColumn=e.col,l.target.TD=n,l.target.col=e.col,l.columnsToMove=this.prepareColumnsToMoving(d,p),l.hasRowHeaders=!!this.hot.getSettings().rowHeaders,l.countCols=this.hot.countCols(),l.fixedColumnsStart=this.hot.getSettings().fixedColumnsStart,l.rootElementOffset=(0,_.cv)(this.hot.rootElement).left;var y=l.hasRowHeaders?-1:0,g=r.holder.scrollTop+r.getColumnHeaderHeight(0)+1,v=e.col<l.fixedColumnsStart,m=Math.abs(this.hot.view._wt.wtOverlays.inlineStartOverlay.getScrollPosition()),b=Math.abs(t.offsetX-(this.hot.isRtl()?t.target.offsetWidth:0)),w=this.getColumnsWidth(d,e.col-1)+b,C=this.getColumnsWidth(y,d-1)+(v?m:0)+w;this.backlight.setPosition(g,C),this.backlight.setSize(this.getColumnsWidth(d,p),r.hider.offsetHeight-g),this.backlight.setOffset(null,-w),(0,_.cn)(this.hot.rootElement,u7)}else(0,_.IV)(this.hot.rootElement,u5),l.pressed=!1,l.columnsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=u8.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().width;this.backlight.setSize(0),setTimeout(function(){this.backlight.setPosition(n)})}e.target.eventPageX=t.pageX,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,o){var r=this.hot.getSelectedRangeLast(),i=u8.get(this);r&&i.pressed&&(i.columnsToMove.indexOf(e.col)>-1?(0,_.IV)(this.hot.rootElement,u6):(0,_.cn)(this.hot.rootElement,u6),o.row=!0,o.column=!0,o.cell=!0,i.hoveredColumn=e.col,i.target.TD=n)}},{key:"onMouseUp",value:function(){var t=u8.get(this),e=t.target.col,n=t.columnsToMove.length;if(t.hoveredColumn=void 0,t.pressed=!1,t.backlightWidth=0,(0,_.IV)(this.hot.rootElement,[u7,u6,u5]),this.hot.selection.isSelectedByColumnHeader()&&(0,_.cn)(this.hot.rootElement,u5),!(n<1)&&void 0!==e){var o=t.columnsToMove[0],r=this.hot.toPhysicalColumn(o),i=this.dragColumns(t.columnsToMove,e);if(t.columnsToMove.length=0,!0===i){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var a=this.hot.toVisualColumn(r);this.hot.selectColumns(a,a+n-1)}}}},{key:"onAfterScrollVertically",value:function(){var t=this.hot.view._wt.wtTable,e=t.getColumnHeaderHeight(0)+1+t.holder.scrollTop;this.backlight.setPosition(e),this.backlight.setSize(null,t.hider.offsetHeight-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),u0(u3(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return u4}},{key:"PLUGIN_PRIORITY",get:function(){return 120}}],n&&uQ(i.prototype,n),o&&uQ(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function co(){return(co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ca(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function cr(t,e){return(cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ci(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cl="manualColumnResize",cs="manualColumnWidths",cu=new WeakMap,cc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cr(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=ca(i);if(e){var o=ca(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===ce(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return ci(t)}(this,t)});function i(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);var e,n=(e=r.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentCol=null,e.selectedCols=[],e.currentWidth=null,e.newSize=null,e.startY=null,e.startWidth=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new tl.Z(ci(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.columnWidthsMap=void 0,cu.set(ci(e),{config:void 0}),(0,_.cn)(e.handle,"manualColumnResizer"),(0,_.cn)(e.guide,"manualColumnResizerGuide"),e}return n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[cl]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.columnWidthsMap=new eB.L,this.columnWidthsMap.addLocalHook("init",function(){return t.onMapInit()}),this.hot.columnIndexMapper.registerMap(this.pluginName,this.columnWidthsMap),this.addHook("modifyColWidth",function(e,n){return t.onModifyColWidth(e,n)}),this.addHook("beforeStretchingColumnWidth",function(e,n){return t.onBeforeStretchingColumnWidth(e,n)}),this.addHook("beforeColumnResize",function(e,n,o){return t.onBeforeColumnResize(e,n,o)}),this.bindEvents(),co(ca(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),co(ca(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){cu.get(this).config=this.columnWidthsMap.getValues(),this.hot.columnIndexMapper.unregisterMap(this.pluginName),co(ca(i.prototype),"disablePlugin",this).call(this)}},{key:"saveManualColumnWidths",value:function(){this.hot.runHooks("persistentStateSave",cs,this.columnWidthsMap.getValues())}},{key:"loadManualColumnWidths",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",cs,t),t.value}},{key:"setManualSize",value:function(t,e){var n=Math.max(e,20),o=this.hot.toPhysicalColumn(t);return this.columnWidthsMap.setValueAtIndex(o,n),n}},{key:"clearManualSize",value:function(t){var e=this.hot.toPhysicalColumn(t);this.columnWidthsMap.setValueAtIndex(e,null)}},{key:"onMapInit",value:function(){var t=this,e=cu.get(this),n=this.hot.getSettings()[cl],o=this.loadManualColumnWidths();void 0!==o?this.hot.batchExecution(function(){o.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0):Array.isArray(n)?(this.hot.batchExecution(function(){n.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0),e.config=n):!0===n&&Array.isArray(e.config)&&this.hot.batchExecution(function(){e.config.forEach(function(e,n){t.columnWidthsMap.setValueAtIndex(n,e)})},!0)}},{key:"setupHandlePosition",value:function(t){var e,n=this;if(t.parentNode){this.currentTH=t;var o=this.hot.view._wt,r=o.wtTable.getCoords(this.currentTH),i=r.col;if(!(i<0)){var a=(0,_.Pb)(this.currentTH),l=this.currentTH.getBoundingClientRect();i<o.getSetting("fixedColumnsStart")&&(e=o.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),e||(e=o.wtOverlays.topOverlay.getRelativeCellPosition(this.currentTH,r.row,r.col)),this.currentCol=this.hot.columnIndexMapper.getVisualFromRenderableIndex(i),this.selectedCols=[];var s=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByColumnHeader();if(this.hot.selection.isSelected()&&s){var u=this.hot.getSelectedRange();(0,V.Bk)(u,function(t){var e=t.getTopStartCorner().col,o=t.getBottomEndCorner().col;(0,t9.q4)(e,o,function(t){n.selectedCols.includes(t)||n.selectedCols.push(t)})})}this.selectedCols.includes(this.currentCol)||(this.selectedCols=[this.currentCol]),this.startOffset=e.start-6,this.startWidth=parseInt(l.width,10),this.handle.style.top="".concat(e.top,"px"),this.handle.style[this.inlineDir]="".concat(this.startOffset+this.startWidth,"px"),this.handle.style.height="".concat(a,"px"),this.hot.rootElement.appendChild(this.handle)}}}},{key:"refreshHandlePosition",value:function(){this.handle.style[this.inlineDir]="".concat(this.startOffset+this.currentWidth,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,_.Pb)(this.handle),10),e=parseInt(this.handle.style.top,10)+t,n=parseInt(this.hot.view.maximumVisibleElementHeight(0),10);(0,_.cn)(this.handle,"active"),(0,_.cn)(this.guide,"active"),this.guide.style.top="".concat(e,"px"),this.refreshGuidePosition(),this.guide.style.height="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style[this.inlineDir]=this.handle.style[this.inlineDir]}},{key:"hideHandleAndGuide",value:function(){(0,_.IV)(this.handle,"active"),(0,_.IV)(this.guide,"active")}},{key:"checkIfColumnHeader",value:function(t){return!!(0,_.oq)(t,["THEAD"],this.hot.rootElement)}},{key:"getClosestTHParent",value:function(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}},{key:"onMouseOver",value:function(t){if(!(0,_.z4)(t.target)&&this.checkIfColumnHeader(t.target)){var e=this.getClosestTHParent(t.target);if(e){var n=e.getAttribute("colspan");e&&(null===n||"1"===n)&&!this.pressed&&this.setupHandlePosition(e)}}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,o){var r=t.hot.runHooks("beforeColumnResize",t.newSize,n,!0);void 0!==r&&(t.newSize=r),"all"===t.hot.getSettings().stretchH?t.clearManualSize(n):t.setManualSize(n,t.newSize),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!0),o&&e()};this.dblclick>=2&&(this.selectedCols.length>1?((0,V.Bk)(this.selectedCols,function(t){n(t)}),e()):(0,V.Bk)(this.selectedCols,function(t){n(t,!0)})),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,_.pv)(t.target,"manualColumnResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startX=t.pageX,this.newSize=this.startWidth)}},{key:"onMouseMove",value:function(t){var e=this;if(this.pressed){var n=(t.pageX-this.startX)*this.hot.getDirectionFactor();this.currentWidth=this.startWidth+n,(0,V.Bk)(this.selectedCols,function(t){e.newSize=e.setManualSize(t,e.currentWidth)}),this.refreshHandlePosition(),this.refreshGuidePosition()}}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,o){t.hot.runHooks("beforeColumnResize",t.newSize,n,!1),o&&e(),t.saveManualColumnWidths(),t.hot.runHooks("afterColumnResize",t.newSize,n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startWidth&&(this.selectedCols.length>1?((0,V.Bk)(this.selectedCols,function(t){n(t)}),e()):(0,V.Bk)(this.selectedCols,function(t){n(t,!0)})),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootWindow,o=e.rootElement;this.eventManager.addEventListener(o,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(o,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(n,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(n,"mouseup",function(){return t.onMouseUp()})}},{key:"onModifyColWidth",value:function(t,e){var n=t;if(this.enabled){var o=this.hot.toPhysicalColumn(e),r=this.columnWidthsMap.getValueAtIndex(o);this.hot.getSettings()[cl]&&r&&(n=r)}return n}},{key:"onBeforeStretchingColumnWidth",value:function(t,e){var n=this.columnWidthsMap.getValueAtIndex(e);return null===n&&(n=t),n}},{key:"onBeforeColumnResize",value:function(){this.hot.view._wt.wtViewport.resetHasOversizedColumnHeadersMarked()}},{key:"destroy",value:function(){co(ca(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return cl}},{key:"PLUGIN_PRIORITY",get:function(){return 130}}],n&&cn(i.prototype,n),o&&cn(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function cf(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ch=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.hot=t,this._element=null,this.state=0}return cf(e.prototype,[{key:"appendTo",value:function(t){t.appendChild(this._element),this.state=2}},{key:"build",value:function(){0===this.state&&(this._element=this.hot.rootDocument.createElement("div"),this.state=1)}},{key:"destroy",value:function(){this.isAppended()&&this._element.parentElement.removeChild(this._element),this._element=null,this.state=0}},{key:"isAppended",value:function(){return 2===this.state}},{key:"isBuilt",value:function(){return this.state>=1}},{key:"setPosition",value:function(t,e){void 0!==t&&(this._element.style.top=t+"px"),void 0!==e&&(this._element.style.left=e+"px")}},{key:"getPosition",value:function(){return{top:this._element.style.top?parseInt(this._element.style.top,10):0,left:this._element.style.left?parseInt(this._element.style.left,10):0}}},{key:"setSize",value:function(t,e){t&&(this._element.style.width=t+"px"),e&&(this._element.style.height=e+"px")}},{key:"getSize",value:function(){return{width:this._element.style.width?parseInt(this._element.style.width,10):0,height:this._element.style.height?parseInt(this._element.style.height,10):0}}},{key:"setOffset",value:function(t,e){t&&(this._element.style.marginTop=t+"px"),e&&(this._element.style.marginLeft=e+"px")}},{key:"getOffset",value:function(){return{top:this._element.style.marginTop?parseInt(this._element.style.marginTop,10):0,left:this._element.style.marginLeft?parseInt(this._element.style.marginLeft,10):0}}}]),t&&cf(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function cd(t){return(cd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cp(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cy(){return(cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cv(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function cg(t,e){return(cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cv(t){return(cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cg(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cv(i);if(e){var o=cv(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cd(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return n=[{key:"build",value:function(){cy(cv(i.prototype),"build",this).call(this),(0,_.cn)(this._element,"ht__manualRowMove--backlight")}}],cp(i.prototype,n),o&&cp(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(ch);function cb(t){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cw(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cC(){return(cC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cS(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function ck(t,e){return(ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cS(t){return(cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ck(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cS(i);if(e){var o=cS(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cb(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),r.apply(this,arguments)}return n=[{key:"build",value:function(){cC(cS(i.prototype),"build",this).call(this),(0,_.cn)(this._element,"ht__manualRowMove--guideline")}}],cw(i.prototype,n),o&&cw(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(ch);function cR(t){return(cR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cP(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cE(){return(cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cA(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function cM(t,e){return(cM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c_(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cA(t){return(cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("beforeRowMove"),tg.Z.getSingleton().register("afterRowMove");var cI="manualRowMove",cT=new WeakMap,cj="ht__manualRowMove",cx="show-ui",cD="on-moving--rows",cH="after-selection--rows",cN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cM(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cA(i);if(e){var o=cA(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cR(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return c_(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,t),cT.set(c_(e),{rowsToMove:[],pressed:void 0,target:{eventPageY:void 0,coords:void 0,TD:void 0,row:void 0},cachedDropIndex:void 0}),e.eventManager=new tl.Z(c_(e)),e.backlight=new cm(t),e.guideline=new cO(t),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[cI]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterScrollHorizontally",function(){return t.onAfterScrollHorizontally()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.buildPluginUI(),this.registerEvents(),(0,_.cn)(this.hot.rootElement,cj),cE(cA(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),this.moveBySettingsOrLoad(),cE(cA(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){(0,_.IV)(this.hot.rootElement,cj),this.unregisterEvents(),this.backlight.destroy(),this.guideline.destroy(),cE(cA(i.prototype),"disablePlugin",this).call(this)}},{key:"moveRow",value:function(t,e){return this.moveRows([t],e)}},{key:"moveRows",value:function(t,e){var n=cT.get(this),o=n.cachedDropIndex,r=this.isMovePossible(t,e),i=this.hot.runHooks("beforeRowMove",t,e,o,r);if(n.cachedDropIndex=void 0,!1!==i){r&&this.hot.rowIndexMapper.moveIndexes(t,e);var a=r&&this.isRowOrderChanged(t,e);return this.hot.runHooks("afterRowMove",t,e,o,r,a),a}}},{key:"dragRow",value:function(t,e){return this.dragRows([t],e)}},{key:"dragRows",value:function(t,e){var n=this.countFinalIndex(t,e);return cT.get(this).cachedDropIndex=e,this.moveRows(t,n)}},{key:"isMovePossible",value:function(t,e){var n=this.hot.rowIndexMapper.getNotTrimmedIndexesLength(),o=t.length+e>n,r=t.some(function(t){return t<0}),i=t.some(function(t){return t>=n});return!o&&!(e<0)&&!r&&!i}},{key:"isRowOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}},{key:"countFinalIndex",value:function(t,e){var n=(0,V.k$)(t,function(t,n){return n<e&&(t+=1),t},0);return e-n}},{key:"getRowsHeight",value:function(t,e){for(var n=this.hot.rowIndexMapper,o=0,r=t;r<=e;r++){var i=n.getRenderableFromVisualIndex(r);null!==i&&(o+=this.hot.view._wt.wtTable.getRowHeight(i)||23)}return o}},{key:"moveBySettingsOrLoad",value:function(){var t=this.hot.getSettings()[cI];if(Array.isArray(t))this.moveRows(t,0);else if(void 0!==t){var e=this.persistentStateLoad();e.length&&this.moveRows(e,0)}}},{key:"isFixedRowTop",value:function(t){return t<this.hot.getSettings().fixedRowsTop}},{key:"isFixedRowBottom",value:function(t){return t>this.hot.countRows()-1-this.hot.getSettings().fixedRowsBottom}},{key:"persistentStateSave",value:function(){this.hot.runHooks("persistentStateSave","manualRowMove",this.hot.rowIndexMapper.getIndexesSequence())}},{key:"persistentStateLoad",value:function(){var t={};return this.hot.runHooks("persistentStateLoad","manualRowMove",t),t.value?t.value:[]}},{key:"prepareRowsToMoving",value:function(){var t=this.hot.getSelectedRangeLast(),e=[];if(!t)return e;var n=t.from,o=t.to,r=Math.min(n.row,o.row),i=Math.max(n.row,o.row);return(0,t9.q4)(r,i,function(t){e.push(t)}),e}},{key:"refreshPositions",value:function(){var t=cT.get(this),e=t.target.coords,n=this.hot.view.getFirstFullyVisibleRow(),o=this.hot.view.getLastFullyVisibleRow(),r=this.hot.countRows();this.isFixedRowTop(e.row)&&n>0&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(n-1,-1)),this.isFixedRowBottom(e.row)&&o<r&&this.hot.scrollViewportTo(this.hot.rowIndexMapper.getNearestNotHiddenIndex(o+1,1),void 0,!0);var i=this.hot.view._wt.wtTable,a=t.target.TD,l=(0,_.cv)(this.hot.rootElement),s=this.hot.view.THEAD.offsetHeight+this.getRowsHeight(0,e.row-1),u=t.target.eventPageY-l.top+i.holder.scrollTop,c=i.hider.offsetHeight,f=i.TBODY.offsetTop,h=this.backlight.getOffset().top,d=this.backlight.getSize().height;this.isFixedRowTop(e.row)&&(s+=i.holder.scrollTop),e.row<0?t.target.row=n>0?n-1:n:a.offsetHeight/2+s<=u?(t.target.row=e.row+1,s+=0===e.row?a.offsetHeight-1:a.offsetHeight):t.target.row=e.row;var p=u,y=s;u+d+h>=c?p=c-d-h:u+h<f&&(p=f+Math.abs(h)),s>=c-1&&(y=c-1),this.backlight.setPosition(p),this.guideline.setPosition(y)}},{key:"registerEvents",value:function(){var t=this,e=this.hot.rootDocument.documentElement;this.eventManager.addEventListener(e,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(e,"mouseup",function(){return t.onMouseUp()})}},{key:"unregisterEvents",value:function(){this.eventManager.clear()}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,o){var r=this.hot.view._wt,i=r.wtTable,a=r.wtViewport,l=this.hot.selection.isSelectedByRowHeader(),s=this.hot.getSelectedRangeLast(),u=cT.get(this);if(!s||!l||u.pressed||0!==t.button){u.pressed=!1,u.rowsToMove.length=0,(0,_.IV)(this.hot.rootElement,[cD,cx]);return}var c=this.guideline.isBuilt()&&!this.guideline.isAppended(),f=this.backlight.isBuilt()&&!this.backlight.isAppended();c&&f&&(this.guideline.appendTo(i.hider),this.backlight.appendTo(i.hider));var h=s.from,d=s.to,p=Math.min(h.row,d.row),y=Math.max(h.row,d.row);if(e.col<0&&e.row>=p&&e.row<=y){o.row=!0,u.pressed=!0,u.target.eventPageY=t.pageY,u.target.coords=e,u.target.TD=n,u.rowsToMove=this.prepareRowsToMoving();var g=i.holder.scrollLeft+a.getRowHeaderWidth();this.backlight.setPosition(null,g),this.backlight.setSize(i.hider.offsetWidth-g,this.getRowsHeight(p,y)),this.backlight.setOffset(-((this.getRowsHeight(p,e.row-1)+t.offsetY)*1),null),(0,_.cn)(this.hot.rootElement,cD),this.refreshPositions()}else(0,_.IV)(this.hot.rootElement,cH),u.pressed=!1,u.rowsToMove.length=0}},{key:"onMouseMove",value:function(t){var e=cT.get(this);if(e.pressed){if(t.target===this.backlight.element){var n=this.backlight.getSize().height;this.backlight.setSize(null,0),setTimeout(function(){this.backlight.setPosition(null,n)})}e.target.eventPageY=t.pageY,this.refreshPositions()}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,o){var r=this.hot.getSelectedRangeLast(),i=cT.get(this);r&&i.pressed&&(i.rowsToMove.indexOf(e.row)>-1?(0,_.IV)(this.hot.rootElement,cx):(0,_.cn)(this.hot.rootElement,cx),o.row=!0,o.column=!0,o.cell=!0,i.target.coords=e,i.target.TD=n)}},{key:"onMouseUp",value:function(){var t=cT.get(this),e=t.target.row,n=t.rowsToMove.length;if(t.pressed=!1,t.backlightHeight=0,(0,_.IV)(this.hot.rootElement,[cD,cx,cH]),this.hot.selection.isSelectedByRowHeader()&&(0,_.cn)(this.hot.rootElement,cH),!(n<1)&&void 0!==e){var o=t.rowsToMove[0],r=this.hot.toPhysicalRow(o),i=this.dragRows(t.rowsToMove,e);if(t.rowsToMove.length=0,!0===i){this.persistentStateSave(),this.hot.render(),this.hot.view.adjustElementsSize(!0);var a=this.hot.toVisualRow(r);this.hot.selectRows(a,a+n-1)}}}},{key:"onAfterScrollHorizontally",value:function(){var t=this.hot.view._wt.wtTable,e=this.hot.view._wt.wtViewport.getRowHeaderWidth()+t.holder.scrollLeft;this.backlight.setPosition(null,e),this.backlight.setSize(t.hider.offsetWidth-e)}},{key:"buildPluginUI",value:function(){this.backlight.build(),this.guideline.build()}},{key:"onAfterLoadData",value:function(){this.moveBySettingsOrLoad()}},{key:"destroy",value:function(){this.backlight.destroy(),this.guideline.destroy(),cE(cA(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return cI}},{key:"PLUGIN_PRIORITY",get:function(){return 140}}],n&&cP(i.prototype,n),o&&cP(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_),cB=n(1343);function cL(t){return(cL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cV(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function cU(){return(cU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cz(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function cF(t,e){return(cF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cW(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cz(t){return(cz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cY="manualRowResize",cG="manualRowHeights",cK=new WeakMap,cq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cF(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=cz(i);if(e){var o=cz(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===cL(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return cW(t)}(this,t)});function i(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);var e,n=(e=r.call(this,t)).hot.rootDocument;return e.currentTH=null,e.currentRow=null,e.selectedRows=[],e.currentHeight=null,e.newSize=null,e.startY=null,e.startHeight=null,e.startOffset=null,e.handle=n.createElement("DIV"),e.guide=n.createElement("DIV"),e.eventManager=new tl.Z(cW(e)),e.pressed=null,e.dblclick=0,e.autoresizeTimeout=null,e.rowHeightsMap=void 0,cK.set(cW(e),{config:void 0}),(0,_.cn)(e.handle,"manualRowResizer"),(0,_.cn)(e.guide,"manualRowResizerGuide"),e}return n=[{key:"inlineDir",get:function(){return this.hot.isRtl()?"right":"left"}},{key:"isEnabled",value:function(){return this.hot.getSettings()[cY]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.rowHeightsMap=new eB.L,this.rowHeightsMap.addLocalHook("init",function(){return t.onMapInit()}),this.hot.rowIndexMapper.registerMap(this.pluginName,this.rowHeightsMap),this.addHook("modifyRowHeight",function(e,n){return t.onModifyRowHeight(e,n)}),this.bindEvents(),cU(cz(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),cU(cz(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){cK.get(this).config=this.rowHeightsMap.getValues(),this.hot.rowIndexMapper.unregisterMap(this.pluginName),cU(cz(i.prototype),"disablePlugin",this).call(this)}},{key:"saveManualRowHeights",value:function(){this.hot.runHooks("persistentStateSave",cG,this.rowHeightsMap.getValues())}},{key:"loadManualRowHeights",value:function(){var t={};return this.hot.runHooks("persistentStateLoad",cG,t),t.value}},{key:"setManualSize",value:function(t,e){var n=this.hot.toPhysicalRow(t),o=Math.max(e,cB.Z.DEFAULT_HEIGHT);return this.rowHeightsMap.setValueAtIndex(n,o),o}},{key:"setupHandlePosition",value:function(t){var e,n=this;this.currentTH=t;var o=this.hot.view,r=o._wt,i=r.wtTable.getCoords(this.currentTH),a=i.row;if(!(a<0)){var l=(0,_.iO)(this.currentTH),s=this.currentTH.getBoundingClientRect(),u=a<r.getSetting("fixedRowsTop"),c=a>=o.countNotHiddenRowIndexes(0,1)-r.getSetting("fixedRowsBottom");u?e=r.wtOverlays.topInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col):c&&(e=r.wtOverlays.bottomInlineStartCornerOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),e||(e=r.wtOverlays.inlineStartOverlay.getRelativeCellPosition(this.currentTH,i.row,i.col)),this.currentRow=this.hot.rowIndexMapper.getVisualFromRenderableIndex(a),this.selectedRows=[];var f=this.hot.selection.isSelectedByCorner()||this.hot.selection.isSelectedByRowHeader();if(this.hot.selection.isSelected()&&f){var h=this.hot.getSelectedRange();(0,V.Bk)(h,function(t){var e=t.getTopStartCorner().row,o=t.getBottomStartCorner().row;(0,t9.q4)(e,o,function(t){n.selectedRows.includes(t)||n.selectedRows.push(t)})})}this.selectedRows.includes(this.currentRow)||(this.selectedRows=[this.currentRow]),this.startOffset=e.top-6,this.startHeight=parseInt(s.height,10),this.handle.style.top="".concat(this.startOffset+this.startHeight,"px"),this.handle.style[this.inlineDir]="".concat(e.start,"px"),this.handle.style.width="".concat(l,"px"),this.hot.rootElement.appendChild(this.handle)}}},{key:"refreshHandlePosition",value:function(){this.handle.style.top="".concat(this.startOffset+this.currentHeight,"px")}},{key:"setupGuidePosition",value:function(){var t=parseInt((0,_.iO)(this.handle),10),e=parseInt(this.handle.style[this.inlineDir],10)+t,n=parseInt(this.hot.view.maximumVisibleElementWidth(0),10);(0,_.cn)(this.handle,"active"),(0,_.cn)(this.guide,"active"),this.guide.style.top=this.handle.style.top,this.guide.style[this.inlineDir]="".concat(e,"px"),this.guide.style.width="".concat(n-t,"px"),this.hot.rootElement.appendChild(this.guide)}},{key:"refreshGuidePosition",value:function(){this.guide.style.top=this.handle.style.top}},{key:"hideHandleAndGuide",value:function(){(0,_.IV)(this.handle,"active"),(0,_.IV)(this.guide,"active")}},{key:"checkIfRowHeader",value:function(t){var e,n;return(0,_.oq)(t,["TH"],this.hot.rootElement)&&(null===(e=t.parentNode)||void 0===e?void 0:null===(n=e.parentNode)||void 0===n?void 0:n.tagName)==="TBODY"}},{key:"getClosestTHParent",value:function(t){return"TABLE"!==t.tagName?"TH"===t.tagName?t:this.getClosestTHParent(t.parentNode):null}},{key:"getActualRowHeight",value:function(t){var e=this.hot.view._wt.wtTable.getRowHeight(t);return void 0!==e&&this.newSize<e?e:this.newSize}},{key:"onMouseOver",value:function(t){if(!(0,_.z4)(t.target)&&this.checkIfRowHeader(t.target)){var e=this.getClosestTHParent(t.target);e&&!this.pressed&&this.setupHandlePosition(e)}}},{key:"afterMouseDownTimeout",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,o){var r=t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!0);void 0!==r&&(t.newSize=r),t.setManualSize(n,t.newSize),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!0),o&&e()};this.dblclick>=2&&(this.selectedRows.length>1?((0,V.Bk)(this.selectedRows,function(t){n(t)}),e()):(0,V.Bk)(this.selectedRows,function(t){n(t,!0)})),this.dblclick=0,this.autoresizeTimeout=null}},{key:"onMouseDown",value:function(t){var e=this;(0,_.pv)(t.target,"manualRowResizer")&&(this.setupHandlePosition(this.currentTH),this.setupGuidePosition(),this.pressed=!0,null===this.autoresizeTimeout&&(this.autoresizeTimeout=setTimeout(function(){return e.afterMouseDownTimeout()},500),this.hot._registerTimeout(this.autoresizeTimeout)),this.dblclick+=1,this.startY=t.pageY,this.newSize=this.startHeight)}},{key:"onMouseMove",value:function(t){var e=this;this.pressed&&(this.currentHeight=this.startHeight+(t.pageY-this.startY),(0,V.Bk)(this.selectedRows,function(t){e.newSize=e.setManualSize(t,e.currentHeight)}),this.refreshHandlePosition(),this.refreshGuidePosition())}},{key:"onMouseUp",value:function(){var t=this,e=function(){t.hot.forceFullRender=!0,t.hot.view.render(),t.hot.view.adjustElementsSize(!0)},n=function(n,o){t.hot.runHooks("beforeRowResize",t.getActualRowHeight(n),n,!1),o&&e(),t.saveManualRowHeights(),t.hot.runHooks("afterRowResize",t.getActualRowHeight(n),n,!1)};this.pressed&&(this.hideHandleAndGuide(),this.pressed=!1,this.newSize!==this.startHeight&&(this.selectedRows.length>1?((0,V.Bk)(this.selectedRows,function(t){n(t)}),e()):(0,V.Bk)(this.selectedRows,function(t){n(t,!0)})),this.setupHandlePosition(this.currentTH))}},{key:"bindEvents",value:function(){var t=this,e=this.hot,n=e.rootElement,o=e.rootWindow;this.eventManager.addEventListener(n,"mouseover",function(e){return t.onMouseOver(e)}),this.eventManager.addEventListener(n,"mousedown",function(e){return t.onMouseDown(e)}),this.eventManager.addEventListener(o,"mousemove",function(e){return t.onMouseMove(e)}),this.eventManager.addEventListener(o,"mouseup",function(){return t.onMouseUp()})}},{key:"onModifyRowHeight",value:function(t,e){var n=t;if(this.enabled){var o=this.hot.toPhysicalRow(e),r=this.rowHeightsMap.getValueAtIndex(o);this.hot.getSettings()[cY]&&r&&(n=r)}return n}},{key:"onMapInit",value:function(){var t=this,e=cK.get(this),n=this.hot.getSettings()[cY],o=this.loadManualRowHeights();this.hot.batchExecution(function(){void 0!==o?o.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)}):Array.isArray(n)?(n.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)}),e.config=n):!0===n&&Array.isArray(e.config)&&e.config.forEach(function(e,n){t.rowHeightsMap.setValueAtIndex(n,e)})},!0)}},{key:"destroy",value:function(){cU(cz(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return cY}},{key:"PLUGIN_PRIORITY",get:function(){return 30}}],n&&cV(i.prototype,n),o&&cV(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function cZ(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c$(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var cX=function(){var t,e;function n(t,e,o,r,i,a){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.row=t,this.col=e,this.rowspan=o,this.colspan=r,this.removed=!1,this.cellCoordsFactory=i,this.cellRangeFactory=a}return t=[{key:"normalize",value:function(t){var e=t.countRows(),n=t.countCols();this.row<0?this.row=0:this.row>e-1&&(this.row=e-1),this.col<0?this.col=0:this.col>n-1&&(this.col=n-1),this.row+this.rowspan>e-1&&(this.rowspan=e-this.row),this.col+this.colspan>n-1&&(this.colspan=n-this.col)}},{key:"includes",value:function(t,e){return this.row<=t&&this.col<=e&&this.row+this.rowspan-1>=t&&this.col+this.colspan-1>=e}},{key:"includesHorizontally",value:function(t){return this.col<=t&&this.col+this.colspan-1>=t}},{key:"includesVertically",value:function(t){return this.row<=t&&this.row+this.rowspan-1>=t}},{key:"shift",value:function(t,e){var n=t[0]||t[1],o=e+Math.abs(t[0]||t[1])-1,r=t[0]?"colspan":"rowspan",i=t[0]?"col":"row",a=Math.min(e,o),l=Math.max(e,o),s=this[i],u=this[i]+this[r]-1;if(s>=e&&(this[i]+=n),n>0)e<=u&&e>s&&(this[r]+=n);else if(n<0){if(a<=s&&l>=u)return this.removed=!0,!1;if(s>=a&&s<=l){var c=l-s+1;this[i]-=Math.abs(n)-c+n,this[r]-=c}else s<=a&&u>=l?this[r]+=n:s<=a&&u>=a&&u<l&&(this[r]-=u-a+1)}return!0}},{key:"isFarther",value:function(t,e){return!t||("down"===e?t.row+t.rowspan-1<this.row+this.rowspan-1:"up"===e?t.row>this.row:"right"===e?t.col+t.colspan-1<this.col+this.colspan-1:"left"===e?t.col>this.col:null)}},{key:"getLastRow",value:function(){return this.row+this.rowspan-1}},{key:"getLastColumn",value:function(){return this.col+this.colspan-1}},{key:"getRange",value:function(){return this.cellRangeFactory(this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.row,this.col),this.cellCoordsFactory(this.getLastRow(),this.getLastColumn()))}}],e=[{key:"NEGATIVE_VALUES_WARNING",value:function(t){return(0,oW.e)(v||(v=cZ(["The merged cell declared with {row: ",", col: ",", \n      rowspan: ",", colspan: ","} contains negative values, which is \n      not supported. It will not be added to the collection."],["The merged cell declared with {row: ",", col: ",",\\x20\n      rowspan: ",", colspan: ","} contains negative values, which is\\x20\n      not supported. It will not be added to the collection."])),t.row,t.col,t.rowspan,t.colspan)}},{key:"IS_OUT_OF_BOUNDS_WARNING",value:function(t){return(0,oW.e)(m||(m=cZ(["The merged cell declared at [",", ","] is positioned \n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."],["The merged cell declared at [",", ","] is positioned\\x20\n      (or positioned partially) outside of the table range. It was not added to the table, please fix your setup."])),t.row,t.col)}},{key:"IS_SINGLE_CELL",value:function(t){return(0,oW.e)(b||(b=cZ(["The merged cell declared at [",", ",'] has both "rowspan" \n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has both "rowspan"\\x20\n      and "colspan" declared as "1", which makes it a single cell. It cannot be added to the collection.'])),t.row,t.col)}},{key:"ZERO_SPAN_WARNING",value:function(t){return(0,oW.e)(w||(w=cZ(["The merged cell declared at [",", ",'] has "rowspan" \n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'],["The merged cell declared at [",", ",'] has "rowspan"\\x20\n      or "colspan" declared as "0", which is not supported. It cannot be added to the collection.'])),t.row,t.col)}},{key:"containsNegativeValues",value:function(t){return t.row<0||t.col<0||t.rowspan<0||t.colspan<0}},{key:"isSingleCell",value:function(t){return 1===t.colspan&&1===t.rowspan}},{key:"containsZeroSpan",value:function(t){return 0===t.colspan||0===t.rowspan}},{key:"isOutOfBounds",value:function(t,e,n){return t.row<0||t.col<0||t.row>=e||t.row+t.rowspan-1>=e||t.col>=n||t.col+t.colspan-1>=n}}],t&&c$(n.prototype,t),e&&c$(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function cJ(t,e,n,o){e?e.row===n&&e.col===o?(t.setAttribute("rowspan",e.rowspan.toString()),t.setAttribute("colspan",e.colspan.toString())):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="none"):(t.removeAttribute("rowspan"),t.removeAttribute("colspan"),t.style.display="")}function cQ(t){return function(t){if(Array.isArray(t))return c0(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c0(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function c1(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c2=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.mergedCells=[],this.hot=t.hot}return t=[{key:"get",value:function(t,e){var n=this.mergedCells,o=!1;return(0,V.Bk)(n,function(n){return!(n.row<=t)||!(n.row+n.rowspan-1>=t)||!(n.col<=e)||!(n.col+n.colspan-1>=e)||(o=n,!1)}),o}},{key:"getByRange",value:function(t){var e=this.mergedCells,n=!1;return(0,V.Bk)(e,function(e){return!(e.row<=t.from.row)||!(e.row+e.rowspan-1>=t.to.row)||!(e.col<=t.from.col)||!(e.col+e.colspan-1>=t.to.col)||(n=e)}),n}},{key:"getWithinRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.mergedCells,r=[],i=t;if(!i.includesRange){var a=this.hot._createCellCoords(i.from.row,i.from.col),l=this.hot._createCellCoords(i.to.row,i.to.col);i=this.hot._createCellRange(a,a,l)}return(0,V.Bk)(o,function(t){var o=e.hot._createCellCoords(t.row,t.col),a=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),l=e.hot._createCellRange(o,o,a);n?i.overlaps(l)&&r.push(t):i.includesRange(l)&&r.push(t)}),!!r.length&&r}},{key:"add",value:function(t){var e=this.mergedCells,o=t.row,r=t.col,i=t.rowspan,a=t.colspan,l=new cX(o,r,i,a,this.hot._createCellCoords,this.hot._createCellRange),s=this.get(o,r),u=this.isOverlapping(l);return s||u?((0,nL.ZK)(n.IS_OVERLAPPING_WARNING(l)),!1):(this.hot&&l.normalize(this.hot),e.push(l),l)}},{key:"remove",value:function(t,e){var n=this.mergedCells,o=this.get(t,e),r=o?this.mergedCells.indexOf(o):-1;return!!o&&-1!==r&&(n.splice(r,1),o)}},{key:"clear",value:function(){var t=this,e=this.mergedCells,n=[],o=[];(0,V.Bk)(e,function(e){var o=t.hot.getCell(e.row,e.col);o&&n.push([o,t.get(e.row,e.col),e.row,e.col])}),this.mergedCells.length=0,(0,V.Bk)(n,function(e,r){(0,t9.q4)(0,e.rowspan-1,function(n){(0,t9.q4)(0,e.colspan-1,function(r){if(0!==r||0!==n){var i=t.hot.getCell(e.row+n,e.col+r);i&&o.push([i,null,null,null])}})}),n[r][1]=null}),(0,V.Bk)(n,function(t){cJ.apply(void 0,cQ(t))}),(0,V.Bk)(o,function(t){cJ.apply(void 0,cQ(t))})}},{key:"isOverlapping",value:function(t){var e=this,n=this.hot._createCellRange(this.hot._createCellCoords(0,0),this.hot._createCellCoords(t.row,t.col),this.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1)),o=!1;return(0,V.Bk)(this.mergedCells,function(t){return!e.hot._createCellRange(e.hot._createCellCoords(0,0),e.hot._createCellCoords(t.row,t.col),e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1)).overlaps(n)||(o=!0,!1)}),o}},{key:"isFirstRenderableMergedCell",value:function(t,e){var n=this.get(t,e);return n&&this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1)===t&&this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1)===e}},{key:"getFirstRenderableCoords",value:function(t,e){var n=this.get(t,e);if(!n||this.isFirstRenderableMergedCell(t,e))return this.hot._createCellCoords(t,e);var o=this.hot.rowIndexMapper.getNearestNotHiddenIndex(n.row,1),r=this.hot.columnIndexMapper.getNearestNotHiddenIndex(n.col,1);return this.hot._createCellCoords(o,r)}},{key:"shiftCollections",value:function(t,e,n){var o=this,r=[0,0];switch(t){case"right":r[0]+=n;break;case"left":r[0]-=n;break;case"down":r[1]+=n;break;case"up":r[1]-=n}(0,V.Bk)(this.mergedCells,function(t){t.shift(r,e)}),(0,t9.yh)(this.mergedCells.length-1,0,function(t){var e=o.mergedCells[t];e&&e.removed&&o.mergedCells.splice(o.mergedCells.indexOf(e),1)})}}],e=[{key:"IS_OVERLAPPING_WARNING",value:function(t){return(0,oW.e)(C||(C=Object.freeze(Object.defineProperties(["The merged cell declared at [",", ","], overlaps \n      with the other declared merged cell. The overlapping merged cell was not added to the table, please \n      fix your setup."],{raw:{value:Object.freeze(["The merged cell declared at [",", ","], overlaps\\x20\n      with the other declared merged cell. The overlapping merged cell was not added to the table, please\\x20\n      fix your setup."])}}))),t.row,t.col)}}],t&&c1(n.prototype,t),e&&c1(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function c3(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return c4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c4(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c4(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function c8(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c9=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.mergedCellsCollection=this.plugin.mergedCellsCollection,this.currentFillData=null}return t=[{key:"correctSelectionAreaSize",value:function(t){if(t[0]===t[2]&&t[1]===t[3]){var e=this.mergedCellsCollection.get(t[0],t[1]);e&&(t[2]=t[0]+e.rowspan-1,t[3]=t[1]+e.colspan-1)}}},{key:"getDirection",value:function(t,e){return e[0]===t[0]&&e[1]===t[1]&&e[3]===t[3]?"down":e[2]===t[2]&&e[1]===t[1]&&e[3]===t[3]?"up":e[1]===t[1]&&e[2]===t[2]?"right":"left"}},{key:"snapDragArea",value:function(t,e,n,o){var r=e.slice(0),i=this.getAutofillSize(t,e,n),a=c3(t,4),l=a[0],s=a[1],u=a[2],c=a[3],f=["up","down"].indexOf(n)>-1?u-l+1:c-s+1,h=i-Math.floor(i/f)*f,d=this.getFarthestCollection(t,e,n,o);if(d){if("down"===n){var p=d.row+d.rowspan-l-h;r[2]+p>=this.plugin.hot.countRows()?r[2]-=h:r[2]+=h?p:0}else if("right"===n){var y=d.col+d.colspan-s-h;r[3]+y>=this.plugin.hot.countCols()?r[3]-=h:r[3]+=h?y:0}else if("up"===n){var g=u-h-d.row+1;r[0]+g<0?r[0]+=h:r[0]-=h?g:0}else if("left"===n){var v=c-h-d.col+1;r[1]+v<0?r[1]+=h:r[1]-=h?v:0}}return this.updateCurrentFillCache({baseArea:t,dragDirection:n,foundMergedCells:o,fillSize:i,dragArea:r,cycleLength:f}),r}},{key:"updateCurrentFillCache",value:function(t){this.currentFillData||(this.currentFillData={}),(0,I.l7)(this.currentFillData,t)}},{key:"getAutofillSize",value:function(t,e,n){var o=c3(t,4),r=o[0],i=o[1],a=o[2],l=o[3],s=c3(e,4),u=s[0],c=s[1],f=s[2],h=s[3];switch(n){case"up":return r-u;case"down":return f-a;case"left":return i-c;case"right":return h-l;default:return null}}},{key:"getDragArea",value:function(t,e,n){var o=c3(t,4),r=o[0],i=o[1],a=o[2],l=o[3],s=c3(e,4),u=s[0],c=s[1],f=s[2],h=s[3];switch(n){case"up":return[u,c,r-1,l];case"down":return[a+1,i,f,l];case"left":return[u,c,a,i-1];case"right":return[r,l+1,f,h];default:return null}}},{key:"getFarthestCollection",value:function(t,e,n,o){var r=c3(t,4),i=r[0],a=r[1],l=r[2],s=r[3],u=["up","down"].indexOf(n)>-1,c=u?l:s,f=u?i:a,h=this.getAutofillSize(t,e,n),d=u?l-i+1:s-a+1,p=h-Math.floor(h/d)*d,y=null,g=null,v=null;switch(n){case"up":y="includesVertically",v=c-p+1;break;case"left":y="includesHorizontally",v=c-p+1;break;case"down":y="includesVertically",v=f+p-1;break;case"right":y="includesHorizontally",v=f+p-1}return(0,V.Bk)(o,function(t){t[y](v)&&t.isFarther(g,n)&&(g=t)}),g}},{key:"recreateAfterDataPopulation",value:function(t){if(this.currentFillData){var e=this.getRangeFromChanges(t),n=this.currentFillData.foundMergedCells,o=this.currentFillData.dragDirection,r=function(t,n){switch(o){case"up":return t.row-n>=e.from.row;case"down":return t.row+t.rowspan-1+n<=e.to.row;case"left":return t.col-n>=e.from.column;case"right":return t.col+t.colspan-1+n<=e.to.column;default:return null}},i=0,a=null,l=1;do for(var s=0;s<n.length;s+=1){if(r(a=n[s],i=l*this.currentFillData.cycleLength))switch(o){case"up":this.plugin.mergedCellsCollection.add({row:a.row-i,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"down":this.plugin.mergedCellsCollection.add({row:a.row+i,rowspan:a.rowspan,col:a.col,colspan:a.colspan});break;case"left":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col-i,colspan:a.colspan});break;case"right":this.plugin.mergedCellsCollection.add({row:a.row,rowspan:a.rowspan,col:a.col+i,colspan:a.colspan})}s===n.length-1&&(l+=1)}while(r(a,i));this.currentFillData=null,this.plugin.hot.render()}}},{key:"getRangeFromChanges",value:function(t){var e=this,n={min:null,max:null},o={min:null,max:null};return(0,V.Bk)(t,function(t){var r=t[0],i=e.plugin.hot.propToCol(t[1]);(null===n.min||r<n.min)&&(n.min=r),(null===n.max||r>n.max)&&(n.max=r),(null===o.min||i<o.min)&&(o.min=i),(null===o.max||i>o.max)&&(o.max=i)}),{from:{row:n.min,column:o.min},to:{row:n.max,column:o.max}}}},{key:"dragAreaOverlapsCollections",value:function(t,e,n){var o=c3(this.getDragArea(t,e,n),4),r=o[0],i=o[1],a=o[2],l=o[3],s=this.plugin.hot._createCellCoords(r,i),u=this.plugin.hot._createCellCoords(a,l),c=this.plugin.hot._createCellRange(s,s,u);return!!this.mergedCellsCollection.getWithinRange(c,!0)}}],c8(n.prototype,t),e&&c8(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function c6(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var c7=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=t.hot,this.fullySelectedMergedCellClassName="fullySelectedMergedCell"}return t=[{key:"snapDelta",value:function(t,e,n){var o=e.to,r=o.row+t.row,i=o.col+t.col;t.row?this.jumpOverMergedCell(t,n,r):t.col&&this.jumpOverMergedCell(t,n,i)}},{key:"jumpOverMergedCell",value:function(t,e,n){var o=t.row||t.col,r=null,i=null,a=null;t.row?(r=e.includesVertically(n),i=e.row,a=e.getLastRow()):t.col&&(r=e.includesHorizontally(n),i=e.col,a=e.getLastColumn()),0!==o&&(o>0?r&&n!==i&&(o+=a-n+1):r&&n!==a&&(o-=n-i+1),t.row?t.row=o:t.col&&(t.col=o))}},{key:"getUpdatedSelectionRange",value:function(t,e){return this.hot._createCellRange(t.highlight,t.from,this.hot._createCellCoords(t.to.row+e.row,t.to.col+e.col))}},{key:"getSelectedMergedCellClassName",value:function(t,e,n,o){var r=Math.min(n[0],n[2]),i=Math.min(n[1],n[3]),a=Math.max(n[0],n[2]),l=Math.max(n[1],n[3]);if(void 0!==o&&this.plugin.mergedCellsCollection.isFirstRenderableMergedCell(t,e)){var s=this.plugin.mergedCellsCollection.get(t,e);if(s){var u=s.getLastRow(),c=s.getLastColumn();return r<=s.row&&i<=s.col&&a>=u&&l>=c?"".concat(this.fullySelectedMergedCellClassName,"-").concat(o):this.plugin.selectionCalculations.isMergeCellFullySelected(s,this.plugin.hot.getSelectedRange())?"".concat(this.fullySelectedMergedCellClassName,"-multiple"):void 0}}}},{key:"isMergeCellFullySelected",value:function(t,e){var n=[];if(!e||!t)return!1;for(var o=0;o<t.rowspan;o+=1)for(var r=0;r<t.colspan;r+=1)n.push(this.hot._createCellCoords(t.row+o,t.col+r));for(var i=0;i<n.length;i+=1){for(var a=[],l=0;l<e.length;l+=1)a[l]=e[l].includes(n[i]);if(!a.includes(!0))return!1}return!0}},{key:"getSelectedMergedCellClassNameToRemove",value:function(){for(var t=[],e=0;e<=7;e+=1)t.push("".concat(this.fullySelectedMergedCellClassName,"-").concat(e));return t.push("".concat(this.fullySelectedMergedCellClassName,"-multiple")),t}}],c6(n.prototype,t),e&&c6(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function c5(t){return(c5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function fe(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fn(){return(fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function fo(t,e){return(fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fr(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("beforeMergeCells"),tg.Z.getSingleton().register("afterMergeCells"),tg.Z.getSingleton().register("beforeUnmergeCells"),tg.Z.getSingleton().register("afterUnmergeCells");var fa="mergeCells",fl=new WeakMap,fs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fo(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fi(i);if(e){var o=fi(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===c5(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return fr(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),e=r.call(this,t),fl.set(fr(e),{lastDesiredCoords:null}),e.mergedCellsCollection=null,e.autofillCalculations=null,e.selectionCalculations=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[fa]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.mergedCellsCollection=new c2(this),this.autofillCalculations=new c9(this),this.selectionCalculations=new c7(this),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("modifyTransformStart",function(){return t.onModifyTransformStart.apply(t,arguments)}),this.addHook("afterModifyTransformStart",function(){return t.onAfterModifyTransformStart.apply(t,arguments)}),this.addHook("modifyTransformEnd",function(){return t.onModifyTransformEnd.apply(t,arguments)}),this.addHook("modifyGetCellCoords",function(){return t.onModifyGetCellCoords.apply(t,arguments)}),this.addHook("beforeSetRangeStart",function(){return t.onBeforeSetRangeStart.apply(t,arguments)}),this.addHook("beforeSetRangeStartOnly",function(){return t.onBeforeSetRangeStart.apply(t,arguments)}),this.addHook("beforeSetRangeEnd",function(){return t.onBeforeSetRangeEnd.apply(t,arguments)}),this.addHook("afterIsMultipleSelection",function(){return t.onAfterIsMultipleSelection.apply(t,arguments)}),this.addHook("afterRenderer",function(){return t.onAfterRenderer.apply(t,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return t.addMergeActionsToContextMenu.apply(t,arguments)}),this.addHook("afterGetCellMeta",function(){return t.onAfterGetCellMeta.apply(t,arguments)}),this.addHook("afterViewportRowCalculatorOverride",function(){return t.onAfterViewportRowCalculatorOverride.apply(t,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)}),this.addHook("modifyAutofillRange",function(){return t.onModifyAutofillRange.apply(t,arguments)}),this.addHook("afterCreateCol",function(){return t.onAfterCreateCol.apply(t,arguments)}),this.addHook("afterRemoveCol",function(){return t.onAfterRemoveCol.apply(t,arguments)}),this.addHook("afterCreateRow",function(){return t.onAfterCreateRow.apply(t,arguments)}),this.addHook("afterRemoveRow",function(){return t.onAfterRemoveRow.apply(t,arguments)}),this.addHook("afterChange",function(){return t.onAfterChange.apply(t,arguments)}),this.addHook("beforeDrawBorders",function(){return t.onBeforeDrawAreaBorders.apply(t,arguments)}),this.addHook("afterDrawSelection",function(){return t.onAfterDrawSelection.apply(t,arguments)}),this.addHook("beforeRemoveCellClassNames",function(){return t.onBeforeRemoveCellClassNames.apply(t,arguments)}),this.addHook("beforeUndoStackChange",function(t,e){if("MergeCells"===e)return!1}),this.registerShortcuts(),fn(fi(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.clearCollections(),this.unregisterShortcuts(),this.hot.render(),fn(fi(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){var t=this.hot.getSettings()[fa];this.disablePlugin(),this.enablePlugin(),this.generateFromSettings(t),fn(fi(i.prototype),"updatePlugin",this).call(this)}},{key:"validateSetting",value:function(t){var e=!0;return!!t&&(cX.containsNegativeValues(t)?((0,nL.ZK)(cX.NEGATIVE_VALUES_WARNING(t)),e=!1):cX.isOutOfBounds(t,this.hot.countRows(),this.hot.countCols())?((0,nL.ZK)(cX.IS_OUT_OF_BOUNDS_WARNING(t)),e=!1):cX.isSingleCell(t)?((0,nL.ZK)(cX.IS_SINGLE_CELL(t)),e=!1):cX.containsZeroSpan(t)&&((0,nL.ZK)(cX.ZERO_SPAN_WARNING(t)),e=!1),e)}},{key:"generateFromSettings",value:function(t){var e=this;if(Array.isArray(t)){var n=[];if((0,V.Bk)(t,function(t){if(e.validateSetting(t)){var o=e.hot._createCellCoords(t.row,t.col),r=e.hot._createCellCoords(t.row+t.rowspan-1,t.col+t.colspan-1),i=e.hot._createCellRange(o,o,r);e.mergeRange(i,!0,!0),(0,t9.q4)(t.row,t.row+t.rowspan-1,function(e){(0,t9.q4)(t.col,t.col+t.colspan-1,function(o){!1==(e===t.row&&o===t.col)&&n.push([e,o,null])})})}}),0===n.length)return;this.hot.setDataAtCell(n)}}},{key:"clearCollections",value:function(){this.mergedCellsCollection.clear()}},{key:"canMergeRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e||this.validateSetting(t)}},{key:"toggleMergeOnSelection",value:function(){var t=this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.toggleMerge(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){t.setDirection(this.hot.isRtl()?"NE-SW":"NW-SE");var e=t.from,n=t.to;this.unmergeRange(t,!0),this.mergeRange(t),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"unmergeSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.hot.getSelectedRangeLast();if(t){var e=t.from,n=t.to;this.unmergeRange(t,!0),this.hot.selectCell(e.row,e.col,n.row,n.col,!1)}}},{key:"mergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.getTopStartCorner(),i=t.getBottomEndCorner(),a={row:r.row,col:r.col,rowspan:i.row-r.row+1,colspan:i.col-r.col+1},l=[],s=null;return!!this.canMergeRange(a,n)&&(this.hot.runHooks("beforeMergeCells",t,n),(0,t9.q4)(0,a.rowspan-1,function(t){(0,t9.q4)(0,a.colspan-1,function(n){var o=null;l[t]||(l[t]=[]),0===t&&0===n?o=e.hot.getSourceDataAtCell(e.hot.toPhysicalRow(a.row),e.hot.toPhysicalColumn(a.col)):e.hot.setCellMeta(a.row+t,a.col+n,"hidden",!0),l[t][n]=o})}),this.hot.setCellMeta(a.row,a.col,"spanned",!0),!this.mergedCellsCollection.add(a)||(o?s=[a.row,a.col,l]:this.hot.populateFromArray(a.row,a.col,l,void 0,void 0,this.pluginName),this.hot.runHooks("afterMergeCells",t,a,n),s))}},{key:"unmergeRange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.mergedCellsCollection.getWithinRange(t);o&&(this.hot.runHooks("beforeUnmergeCells",t,n),(0,V.Bk)(o,function(t){e.mergedCellsCollection.remove(t.row,t.col),(0,t9.q4)(0,t.rowspan-1,function(n){(0,t9.q4)(0,t.colspan-1,function(o){e.hot.removeCellMeta(t.row+n,t.col+o,"hidden")})}),e.hot.removeCellMeta(t.row,t.col,"spanned")}),this.hot.runHooks("afterUnmergeCells",t,n),this.hot.render())}},{key:"toggleMerge",value:function(t){var e=this.mergedCellsCollection.get(t.from.row,t.from.col);e.row===t.from.row&&e.col===t.from.col&&e.row+e.rowspan-1===t.to.row&&e.col+e.colspan-1===t.to.col?this.unmergeRange(t):this.mergeSelection(t)}},{key:"merge",value:function(t,e,n,o){var r=this.hot._createCellCoords(t,e),i=this.hot._createCellCoords(n,o);this.mergeRange(this.hot._createCellRange(r,r,i))}},{key:"unmerge",value:function(t,e,n,o){var r=this.hot._createCellCoords(t,e),i=this.hot._createCellCoords(n,o);this.unmergeRange(this.hot._createCellRange(r,r,i))}},{key:"onAfterInit",value:function(){this.generateFromSettings(this.hot.getSettings()[fa]),this.hot.render()}},{key:"registerShortcuts",value:function(){var t=this;this.hot.getShortcutManager().getContext("grid").addShortcut({keys:[["Control","m"]],callback:function(){t.toggleMerge(t.hot.getSelectedRangeLast()),t.hot.render()},runOnlyIf:function(t){return!t.altKey},group:fa})}},{key:"unregisterShortcuts",value:function(){this.hot.getShortcutManager().getContext("grid").removeShortcutsByGroup(fa)}},{key:"onAfterIsMultipleSelection",value:function(t){if(t){for(var e=this.mergedCellsCollection.mergedCells,n=this.hot.getSelectedRangeLast(),o=0;o<e.length;o+=1)if(n.from.row===e[o].row&&n.from.col===e[o].col&&n.to.row===e[o].row+e[o].rowspan-1&&n.to.col===e[o].col+e[o].colspan-1)return!1}return t}},{key:"onModifyTransformStart",value:function(t){var e=fl.get(this),n=this.hot.getSelectedRangeLast(),o={row:t.row,col:t.col},r=null,i=this.hot._createCellCoords(n.highlight.row,n.highlight.col),a=this.mergedCellsCollection.get(i.row,i.col);if(e.lastDesiredCoords||(e.lastDesiredCoords=this.hot._createCellCoords(null,null)),a){var l=this.hot._createCellCoords(a.row,a.col),s=this.hot._createCellCoords(a.row+a.rowspan-1,a.col+a.colspan-1);this.hot._createCellRange(l,l,s).includes(e.lastDesiredCoords)||(e.lastDesiredCoords=this.hot._createCellCoords(null,null)),o.row=e.lastDesiredCoords.row?e.lastDesiredCoords.row-i.row:o.row,o.col=e.lastDesiredCoords.col?e.lastDesiredCoords.col-i.col:o.col,t.row>0?o.row=a.row+a.rowspan-1-i.row+t.row:t.row<0&&(o.row=i.row-a.row+t.row),t.col>0?o.col=a.col+a.colspan-1-i.col+t.col:t.col<0&&(o.col=i.col-a.col+t.col)}r=this.hot._createCellCoords(n.highlight.row+o.row,n.highlight.col+o.col);var u=this.mergedCellsCollection.get(r.row,r.col);if(u){var c=this.mergedCellsCollection.getFirstRenderableCoords(u.row,u.col);e.lastDesiredCoords=r,o={row:c.row-i.row,col:c.col-i.col}}0!==o.row&&(t.row=o.row),0!==o.col&&(t.col=o.col)}},{key:"onModifyTransformEnd",value:function(t){var e=this,n=this.hot.getSelectedRangeLast(),o=(0,I.d9)(t),r=this.selectionCalculations.getUpdatedSelectionRange(n,t),i=(0,I.d9)(o),a=this.mergedCellsCollection.getWithinRange(r,!0);do i=(0,I.d9)(o),this.selectionCalculations.getUpdatedSelectionRange(n,o),(0,V.Bk)(a,function(t){e.selectionCalculations.snapDelta(o,n,t)});while(o.row!==i.row||o.col!==i.col);t.row=o.row,t.col=o.col}},{key:"onModifyGetCellCoords",value:function(t,e){if(!(t<0)&&!(e<0)){var n=this.mergedCellsCollection.get(t,e);if(n){var o=n.row,r=n.col,i=n.colspan;return[o,r,o+n.rowspan-1,r+i-1]}}}},{key:"addMergeActionsToContextMenu",value:function(t){var e;t.items.push({name:"---------"},(e=this,{key:"mergeCells",name:function(){var t=this.getSelectedLast();if(t){var n=e.mergedCellsCollection.get(t[0],t[1]);if(n.row===t[0]&&n.col===t[1]&&n.row+n.rowspan-1===t[2]&&n.col+n.colspan-1===t[3])return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_UNMERGE_CELLS)}return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_MERGE_CELLS)},callback:function(){e.toggleMergeOnSelection()},disabled:function(){var t=this.getSelectedLast();return!t||cX.isSingleCell({row:t[0],col:t[1],rowspan:t[2]-t[0]+1,colspan:t[3]-t[1]+1})||this.selection.isSelectedByCorner()},hidden:!1}))}},{key:"onAfterRenderer",value:function(t,e,n){var o=this.mergedCellsCollection.get(e,n),r=(0,I.Kn)(o)?(0,I.d9)(o):void 0;if((0,I.Kn)(r)){var i,a=this.hot,l=a.rowIndexMapper,s=a.columnIndexMapper,u=r.row,c=r.col,f=r.colspan,h=r.rowspan,d=function(t){if(Array.isArray(t))return t}(i=this.translateMergedCellToRenderable(u,h,c,f))||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(i,2)||function(t,e){if(t){if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}}(i,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],y=d[1],g=l.getRenderableFromVisualIndex(e),v=s.getRenderableFromVisualIndex(n);r.row=l.getNearestNotHiddenIndex(r.row,1),r.col=s.getNearestNotHiddenIndex(r.col,1),r.rowspan=Math.min(r.rowspan,p-g+1),r.colspan=Math.min(r.colspan,y-v+1)}cJ(t,r,e,n)}},{key:"onBeforeSetRangeStart",value:function(t){if(this.mergedCellsCollection.isFirstRenderableMergedCell(t.row,t.col)){var e=this.mergedCellsCollection.get(t.row,t.col),n=[e.row,e.col];t.row=n[0],t.col=n[1]}}},{key:"onBeforeSetRangeEnd",value:function(t){var e=this.hot.getSelectedRangeLast();e.highlight=this.hot._createCellCoords(e.highlight.row,e.highlight.col),e.to=t;var n=!1;if(!(this.hot.selection.isSelectedByColumnHeader()||this.hot.selection.isSelectedByRowHeader()))do{n=!1;for(var o=0;o<this.mergedCellsCollection.mergedCells.length;o+=1){var r=this.mergedCellsCollection.mergedCells[o].getRange();e.expandByRange(r)&&(t.row=e.to.row,t.col=e.to.col,n=!0)}}while(n)}},{key:"onAfterGetCellMeta",value:function(t,e,n){var o=this.mergedCellsCollection.get(t,e);o&&(o.row!==t||o.col!==e?n.copyable=!1:(n.rowspan=o.rowspan,n.colspan=o.colspan))}},{key:"onAfterViewportRowCalculatorOverride",value:function(t){var e=this.hot.countCols();this.modifyViewportRowStart(t,e),this.modifyViewportRowEnd(t,e)}},{key:"modifyViewportRowStart",value:function(t,e){for(var n=this.hot.rowIndexMapper,o=n.getVisualFromRenderableIndex(t.startRow),r=0;r<e;r+=1){var i=this.mergedCellsCollection.get(o,r);if((0,I.Kn)(i)){var a=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i.row,1));if(a<t.startRow){t.startRow=a,this.modifyViewportRowStart(t,e);return}}}}},{key:"modifyViewportRowEnd",value:function(t,e){for(var n=this.hot.rowIndexMapper,o=n.getVisualFromRenderableIndex(t.endRow),r=0;r<e;r+=1){var i=this.mergedCellsCollection.get(o,r);if((0,I.Kn)(i)){var a=i.row+i.rowspan-1,l=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,-1));if(l>t.endRow){t.endRow=l,this.modifyViewportRowEnd(t,e);return}}}}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){var e=this.hot.countRows();this.modifyViewportColumnStart(t,e),this.modifyViewportColumnEnd(t,e)}},{key:"modifyViewportColumnStart",value:function(t,e){for(var n=this.hot.columnIndexMapper,o=n.getVisualFromRenderableIndex(t.startColumn),r=0;r<e;r+=1){var i=this.mergedCellsCollection.get(r,o);if((0,I.Kn)(i)){var a=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(i.col,1));if(a<t.startColumn){t.startColumn=a,this.modifyViewportColumnStart(t,e);return}}}}},{key:"modifyViewportColumnEnd",value:function(t,e){for(var n=this.hot.columnIndexMapper,o=n.getVisualFromRenderableIndex(t.endColumn),r=0;r<e;r+=1){var i=this.mergedCellsCollection.get(r,o);if((0,I.Kn)(i)){var a=i.col+i.colspan-1,l=n.getRenderableFromVisualIndex(n.getNearestNotHiddenIndex(a,-1));if(l>t.endColumn){t.endColumn=l,this.modifyViewportColumnEnd(t,e);return}}}}},{key:"translateMergedCellToRenderable",value:function(t,e,n,o){var r,i,a=this.hot,l=a.rowIndexMapper,s=a.columnIndexMapper;return r=0===e?l.getNearestNotHiddenIndex(t,1):l.getNearestNotHiddenIndex(t+e-1,-1),i=0===o?s.getNearestNotHiddenIndex(n,1):s.getNearestNotHiddenIndex(n+o-1,-1),[t>=0?l.getRenderableFromVisualIndex(r):t,n>=0?s.getRenderableFromVisualIndex(i):n]}},{key:"onModifyAutofillRange",value:function(t,e){this.autofillCalculations.correctSelectionAreaSize(e);var n=this.autofillCalculations.getDirection(e,t),o=t;if(this.autofillCalculations.dragAreaOverlapsCollections(e,o,n))return e;var r=this.mergedCellsCollection.getWithinRange({from:{row:e[0],col:e[1]},to:{row:e[2],col:e[3]}});return r?o=this.autofillCalculations.snapDragArea(e,o,n,r):o}},{key:"onAfterCreateCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("right",t,e)}},{key:"onAfterRemoveCol",value:function(t,e){this.mergedCellsCollection.shiftCollections("left",t,e)}},{key:"onAfterCreateRow",value:function(t,e,n){"auto"!==n&&this.mergedCellsCollection.shiftCollections("down",t,e)}},{key:"onAfterRemoveRow",value:function(t,e){this.mergedCellsCollection.shiftCollections("up",t,e)}},{key:"onAfterChange",value:function(t,e){"Autofill.fill"===e&&this.autofillCalculations.recreateAfterDataPopulation(t)}},{key:"onBeforeDrawAreaBorders",value:function(t,e){if(e&&"area"===e){var n=this.hot.getSelectedRangeLast(),o=this.mergedCellsCollection.getWithinRange(n);(0,V.Bk)(o,function(e){n.getBottomEndCorner().row===e.getLastRow()&&n.getBottomEndCorner().col===e.getLastColumn()&&(t[2]=e.row,t[3]=e.col)})}}},{key:"onAfterModifyTransformStart",value:function(t,e,n){if(this.enabled){var o=this.mergedCellsCollection.get(t.row,t.col);if(o){var r=o.row+o.rowspan-1==this.hot.countRows()-1,i=0===o.row,a=o.col+o.colspan-1==this.hot.countCols()-1,l=0===o.col;(e>0&&r||e<0&&i||n>0&&a||n<0&&l)&&(t.row=o.row,t.col=o.col)}}}},{key:"onAfterDrawSelection",value:function(t,e,n,o){if(n)return this.selectionCalculations.getSelectedMergedCellClassName(t,e,n,o)}},{key:"onBeforeRemoveCellClassNames",value:function(){return this.selectionCalculations.getSelectedMergedCellClassNameToRemove()}}],o=[{key:"PLUGIN_KEY",get:function(){return fa}},{key:"PLUGIN_PRIORITY",get:function(){return 150}}],n&&fe(i.prototype,n),o&&fe(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function fu(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fc(t,e)}}(t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function ff(){(0,nL.ZK)((0,oW.e)(k||(k=Object.freeze(Object.defineProperties(["Plugins `columnSorting` and `multiColumnSorting` should not be enabled simultaneously. \n    Only `multiColumnSorting` will work."],{raw:{value:Object.freeze(["Plugins \\`columnSorting\\` and \\`multiColumnSorting\\` should not be enabled simultaneously. \n    Only \\`multiColumnSorting\\` will work."])}})))))}var fh="sort";function fd(t,e,n){var o=[];return!1===n||t.isColumnSorted(e)&&t.getNumberOfSortedColumns()>1&&o.push("".concat(fh,"-").concat(t.getIndexOfColumnInSortQueue(e)+1)),o}function fp(t){return(fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fg(){return(fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fm(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function fv(t,e){return(fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fm(t){return(fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fb="multiColumnSorting",fw="columnSorting";oC(fb,function(t,e){return function(n,o){var r=fu(n).slice(1),i=fu(o).slice(1);return function n(o){var a=t[o],l=e[o],s=r[o],u=i[o],c=l.multiColumnSorting,f=(c.compareFunctionFactory?c.compareFunctionFactory:oS(l.type))(a,l,c)(s,u);if(0===f){var h=o+1;if(void 0!==e[h])return n(h)}return f}(0)}});var fC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fv(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fm(i);if(e){var o=fm(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fp(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).pluginKey=fb,e}return n=[{key:"isEnabled",value:function(){return fg(fm(i.prototype),"isEnabled",this).call(this)}},{key:"enablePlugin",value:function(){!this.enabled&&this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[fw]&&ff(),fg(fm(i.prototype),"enablePlugin",this).call(this)}},{key:"disablePlugin",value:function(){fg(fm(i.prototype),"disablePlugin",this).call(this)}},{key:"sort",value:function(t){fg(fm(i.prototype),"sort",this).call(this,t)}},{key:"clearSort",value:function(){fg(fm(i.prototype),"clearSort",this).call(this)}},{key:"isSorted",value:function(){return fg(fm(i.prototype),"isSorted",this).call(this)}},{key:"getSortConfig",value:function(t){return fg(fm(i.prototype),"getSortConfig",this).call(this,t)}},{key:"setSortConfig",value:function(t){fg(fm(i.prototype),"setSortConfig",this).call(this,t)}},{key:"getNormalizedSortConfigs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)?t:[t]}},{key:"updateHeaderClasses",value:function(t){for(var e,n,o,r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];(e=fg(fm(i.prototype),"updateHeaderClasses",this)).call.apply(e,[this,t].concat(a)),(0,_.IV)(t,(n=t.className.split(" "),o=RegExp("^".concat(fh,"-[0-9]{1,2}$")),n.filter(function(t){return o.test(t)}))),!1!==this.enabled&&(0,_.cn)(t,fd.apply(void 0,a))}},{key:"onUpdateSettings",value:function(t){this.hot.getSettings()[this.pluginKey]&&this.hot.getSettings()[fw]&&ff(),fg(fm(i.prototype),"onUpdateSettings",this).call(this,t)}},{key:"onAfterOnCellMouseDown",value:function(t,e){!1!==ol(e.row,e.col,t)&&this.wasClickableHeaderClicked(t,e.col)&&(this.hot.getShortcutManager().isCtrlPressed()?(this.hot.deselectCell(),this.hot.selectColumns(e.col),this.sort(this.getNextSortConfig(e.col,"append"))):this.sort(this.getColumnNextConfig(e.col)))}}],o=[{key:"PLUGIN_KEY",get:function(){return fb}},{key:"PLUGIN_PRIORITY",get:function(){return 170}}],n&&fy(i.prototype,n),o&&fy(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(oV);function fk(t){return(fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fS(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fO(){return(fO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fP(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function fR(t,e){return(fR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fP(t){return(fP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fR(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=fP(i);if(e){var o=fP(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===fk(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).dragged=[],e.eventManager=null,e.lastSetCell=null,e}return o=[{key:"PLUGIN_KEY",get:function(){return"multipleSelectionHandles"}},{key:"PLUGIN_PRIORITY",get:function(){return 160}}],n=[{key:"isEnabled",value:function(){return(0,rz.K1)()}},{key:"enablePlugin",value:function(){this.enabled||(this.eventManager||(this.eventManager=new tl.Z(this)),this.registerListeners(),fO(fP(i.prototype),"enablePlugin",this).call(this))}},{key:"registerListeners",value:function(){var t=this,e=this,n=this.hot.rootElement;function o(t){if(1===e.dragged.length)return e.dragged.splice(0,e.dragged.length),!0;var n=e.dragged.indexOf(t);if(-1===n)return!1;0===n?e.dragged=e.dragged.slice(0,1):1===n&&(e.dragged=e.dragged.slice(-1))}this.eventManager.addEventListener(n,"touchstart",function(t){var n;return(0,_.pv)(t.target,"topSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("top"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):(0,_.pv)(t.target,"bottomSelectionHandle-HitArea")?(n=e.hot.getSelectedRangeLast(),e.dragged.push("bottom"),e.touchStartRange={width:n.getWidth(),height:n.getHeight(),direction:n.getDirection()},t.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchend",function(t){return(0,_.pv)(t.target,"topSelectionHandle-HitArea")?(o.call(e,"top"),e.touchStartRange=void 0,t.preventDefault(),!1):(0,_.pv)(t.target,"bottomSelectionHandle-HitArea")?(o.call(e,"bottom"),e.touchStartRange=void 0,t.preventDefault(),!1):void 0}),this.eventManager.addEventListener(n,"touchmove",function(n){var o,r,i,a,l,s,u=t.hot.rootDocument;if(0!==e.dragged.length){var c=u.elementFromPoint(n.touches[0].clientX,n.touches[0].clientY);c&&c!==e.lastSetCell&&(("TD"===c.nodeName||"TH"===c.nodeName)&&(-1===(o=e.hot.getCoords(c)).col&&(o.col=0),i=(r=e.hot.getSelectedRangeLast()).getWidth(),a=r.getHeight(),l=r.getDirection(),1===i&&1===a&&e.hot.selection.setRangeEnd(o),null!==(s=e.getCurrentRangeCoords(r,o,e.touchStartRange.direction,l,e.dragged[0])).start&&e.hot.selection.setRangeStart(s.start),e.hot.selection.setRangeEnd(s.end),e.lastSetCell=c),n.preventDefault())}})}},{key:"getCurrentRangeCoords",value:function(t,e,n,o,r){var i=t.getTopStartCorner(),a=t.getBottomEndCorner(),l=t.getBottomStartCorner(),s=t.getTopEndCorner(),u={start:null,end:null};switch(n){case"NE-SW":switch(o){case"NE-SW":case"NW-SE":u="top"===r?{start:this.hot._createCellCoords(e.row,t.highlight.col),end:this.hot._createCellCoords(l.row,e.col)}:{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,i.col)};break;case"SE-NW":"bottom"===r&&(u={start:this.hot._createCellCoords(a.row,e.col),end:this.hot._createCellCoords(e.row,i.col)})}break;case"NW-SE":switch(o){case"NE-SW":"top"===r?u={start:e,end:l}:u.end=e;break;case"NW-SE":"top"===r?u={start:e,end:a}:u.end=e;break;case"SE-NW":"top"===r?u={start:e,end:i}:u.end=e;break;case"SW-NE":"top"===r?u={start:e,end:s}:u.end=e}break;case"SW-NE":switch(o){case"NW-SE":u="bottom"===r?{start:this.hot._createCellCoords(e.row,i.col),end:this.hot._createCellCoords(l.row,e.col)}:{start:this.hot._createCellCoords(i.row,e.col),end:this.hot._createCellCoords(e.row,a.col)};break;case"SW-NE":u="top"===r?{start:this.hot._createCellCoords(t.highlight.row,e.col),end:this.hot._createCellCoords(e.row,a.col)}:{start:this.hot._createCellCoords(e.row,i.col),end:this.hot._createCellCoords(i.row,e.col)};break;case"SE-NW":"bottom"===r?u={start:this.hot._createCellCoords(e.row,s.col),end:this.hot._createCellCoords(i.row,e.col)}:"top"===r&&(u={start:l,end:e})}break;case"SE-NW":switch(o){case"NW-SE":case"NE-SW":case"SW-NE":"top"===r&&(u.end=e);break;case"SE-NW":"top"===r?u.end=e:u={start:e,end:i}}}return u}},{key:"isDragged",value:function(){return this.dragged.length>0}}],fS(i.prototype,n),o&&fS(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_),fM=n(2600);function f_(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=t.colspan,o=t.origColspan,r=t.collapsible,i=t.crossHiddenColumns,a=t.isCollapsed,l=t.isHidden,s=t.isRoot,u=t.isPlaceholder;return{label:void 0===e?"":e,colspan:void 0===n?1:n,origColspan:void 0===o?1:o,collapsible:void 0!==r&&r,isCollapsed:void 0!==a&&a,crossHiddenColumns:void 0===i?[]:i,isHidden:void 0!==l&&l,isRoot:void 0!==s&&s,isPlaceholder:void 0!==u&&u}}function fA(){return{label:"",isPlaceholder:!0}}function fI(t){return function(t){if(Array.isArray(t))return fT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return fT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fT(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var fj=["row","col"];function fx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function fD(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fH(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function fN(t,e){var n=fL(t,e,"get");return n.get?n.get.call(t):n.value}function fB(t,e,n){var o=fL(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function fL(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var fV=["label","collapsible"],fU=new WeakMap,fF=new WeakMap,fW=new WeakMap,fz=function(){var t,e;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),fH(this,fU,{writable:!0,value:[]}),fH(this,fF,{writable:!0,value:0}),fH(this,fW,{writable:!0,value:1/0})}return t=[{key:"setColumnsLimit",value:function(t){fB(this,fW,t)}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];fB(this,fU,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===e)return n;(0,V.Bk)(t,function(t){var o=[],r=0;n.push(o),(0,V.Bk)(t,function(t){var n=f_();if((0,I.Kn)(t)){var i=t.label,a=t.colspan;n.label=(0,U.Pz)(i),"number"==typeof a&&a>1&&(n.colspan=a,n.origColspan=a)}else n.label=(0,U.Pz)(t);r+=n.origColspan;var l=!1;if(r>=e&&(n.colspan=n.origColspan-(r-e),n.origColspan=n.colspan,l=!0),o.push(n),n.colspan>1)for(var s=0;s<n.colspan-1;s++)o.push(fA());return!l})});var o=Math.max.apply(Math,fI((0,V.Sc)(n,function(t){return t.length})));return(0,V.Bk)(n,function(t){if(t.length<o){var e=(0,V.Sc)(Array(o-t.length),function(){return f_()});t.splice.apply(t,[t.length,0].concat(fI(e)))}}),n}(t,fN(this,fW))),fB(this,fF,fN(this,fU).length)}},{key:"getData",value:function(){return fN(this,fU)}},{key:"mergeWith",value:function(t){var e=this;(0,V.Bk)(t,function(t){var n=t.row,o=t.col,r=function(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,fj),i=e.getHeaderSettings(n,o);null!==i&&(0,I.l7)(i,r,fV)})}},{key:"map",value:function(t){(0,V.Bk)(fN(this,fU),function(e){(0,V.Bk)(e,function(e){var n=t(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fx(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fx(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e));(0,I.Kn)(n)&&(0,I.l7)(e,n,fV)})})}},{key:"getHeaderSettings",value:function(t,e){if(t>=fN(this,fF)||t<0)return null;var n,o=fN(this,fU)[t];return e>=o.length?null:null!==(n=o[e])&&void 0!==n?n:null}},{key:"getHeadersSettings",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=[];if(t>=fN(this,fF)||t<0)return o;for(var r=fN(this,fU)[t],i=0,a=e;a<r.length;a++){var l=r[a];if(l.isPlaceholder)throw Error("The first column settings cannot overlap the other header layers");if(i+=l.colspan,o.push(l),l.colspan>1&&(a+=l.colspan-1),i===n)break;if(i>n)throw Error("The last column settings cannot overlap the other header layers")}return o}},{key:"getLayersCount",value:function(){return fN(this,fF)}},{key:"getColumnsCount",value:function(){return fN(this,fF)>0?fN(this,fU)[0].length:0}},{key:"clear",value:function(){fB(this,fU,[]),fB(this,fF,0)}}],fD(n.prototype,t),e&&fD(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function fY(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function fG(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fY(Object(n),!0).forEach(function(e){fq(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fY(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function fK(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function fq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fZ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var f$=new Map([["DF-pre-order",function t(e,n){for(var o=e.call(n,this),r=0;r<this.childs.length;r++){if(!1===o)return!1;o=t.call(this.childs[r],e,n)}return o}],["DF-post-order",function t(e,n){for(var o=0;o<this.childs.length;o++)if(!1===t.call(this.childs[o],e,n))return!1;return e.call(n,this)}],["BF",function(t,e){var n=[this];!function o(){if(0!==n.length){var r,i=n.shift();n.push.apply(n,function(t){if(Array.isArray(t))return fZ(t)}(r=i.childs)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return fZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fZ(t,e)}}(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),!1!==t.call(e,i)&&o()}}()}]]),fX=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),fq(this,"data",{}),fq(this,"parent",null),fq(this,"childs",[]),this.data=t}return t=[{key:"addChild",value:function(t){t.parent=this,this.childs.push(t)}},{key:"cloneTree",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=new n(fG({},t.data)),o=0;o<t.childs.length;o++)e.addChild(this.cloneTree(t.childs[o]));return e}},{key:"replaceTreeWith",value:function(t){this.data=fG({},t.data),this.childs=[];for(var e=0;e<t.childs.length;e++)this.addChild(t.childs[e])}},{key:"walkDown",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BF";if(!f$.has(e))throw Error('Traversal strategy "'.concat(e,'" does not exist'));f$.get(e).call(this,t,this)}},{key:"walkUp",value:function(t){var e=this;!function n(o){!1!==t.call(e,o)&&null!==o.parent&&n(o.parent)}(this)}}],fK(n.prototype,t),e&&fK(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function fJ(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function fQ(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fJ(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fJ(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f0(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function f1(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f2(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function f3(t,e){var n=f4(t,e,"get");return n.get?n.get.call(t):n.value}function f4(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var f8=new WeakMap,f9=new WeakMap,f6=new WeakMap,f7=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),f2(this,f8,{writable:!0,value:new Map}),f2(this,f9,{writable:!0,value:new Map}),f2(this,f6,{writable:!0,value:null}),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(this,f4(this,f6,"set"),t)}return t=[{key:"getRoots",value:function(){return Array.from(f3(this,f8).values())}},{key:"getRootByColumn",value:function(t){var e;return f3(this,f9).has(t)&&(e=f3(this,f8).get(f3(this,f9).get(t))),e}},{key:"getNode",value:function(t,e){var n,o=this.getRootByColumn(e);if(o){var r=e-f3(this,f9).get(e),i=0;return o.walkDown(function(e){var o=e.data,a=o.origColspan;if(t===o.headerLevel){if(r>=i&&r<=i+a-1)return n=e,!1;i+=a}}),n}}},{key:"rebuildTreeIndex",value:function(){var t=this,e=0;f3(this,f9).clear(),(0,V.Bk)(f3(this,f8),function(n){for(var o=(function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(n,2)||function(t,e){if(t){if("string"==typeof t)return f0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f0(t,e)}}(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1].data.colspan,r=e;r<e+o;r++)f3(t,f9).set(r,e);e+=o})}},{key:"buildTree",value:function(){this.clear();for(var t=f3(this,f6).getColumnsCount(),e=0;e<t;){var n=f3(this,f6).getHeaderSettings(0,e),o=new fX;f3(this,f8).set(e,o),this.buildLeaves(o,e,0,n.origColspan),e+=n.origColspan}this.rebuildTreeIndex()}},{key:"buildLeaves",value:function(t,e,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=f3(this,f6).getHeadersSettings(n,e,r);n+=1,(0,V.Bk)(i,function(r){var i,a=fQ(fQ({},r),{},{headerLevel:n-1,columnIndex:e});1===n?(t.data=a,i=t):(i=new fX(a),t.addChild(i)),n<f3(o,f6).getLayersCount()&&o.buildLeaves(i,e,n,r.origColspan),e+=r.origColspan})}},{key:"clear",value:function(){f3(this,f8).clear(),f3(this,f9).clear()}}],f1(n.prototype,t),e&&f1(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function f5(t,e){t.walkDown(function(t){var n=t.data,o=t.childs;if(!n.isHidden&&(e(n.columnIndex),0===o.length))for(var r=1;r<n.colspan;r++)e(n.columnIndex+r)})}function ht(t,e){var n=t.childs;if(0!==n.length)return n[0].data[e]}function he(t){return ht(t,"origColspan")===t.data.origColspan}function hn(t){var e=t.data,n=t.childs;if(!e.isCollapsed||e.isHidden||e.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(he(t))return hn(n[0]);e.isCollapsed=!1;var o=n.slice(1),r=new Set,i=0;if(o.length>0)(0,V.Bk)(o,function(t){t.replaceTreeWith(t.data.clonedTree),t.data.clonedTree=null,i+=t.data.colspan,f5(t,function(t){r.add(t)})});else{var a=e.colspan,l=e.origColspan,s=e.columnIndex;i=l-a;for(var u=1;u<l;u++)r.add(s+u)}return t.walkUp(function(t){var e=t.data;e.colspan+=i,e.colspan>=e.origColspan?(e.colspan=e.origColspan,e.isCollapsed=!1):he(t)&&(e.isCollapsed=ht(t,"isCollapsed"))}),{rollbackModification:function(){return ho(t)},affectedColumns:Array.from(r),colspanCompensation:i}}function ho(t){var e,n=t.data,o=t.childs;if(n.isCollapsed||n.isHidden||n.origColspan<=1)return{rollbackModification:function(){},affectedColumns:[],colspanCompensation:0};if(he(t))return ho(o[0]);n.isCollapsed=!0;var r=o.slice(1),i=new Set;if(r.length>0)(0,V.Bk)(r,function(t){f5(t,function(t){i.add(t)}),t.data.clonedTree=t.cloneTree(),t.walkDown(function(t){t.data.isHidden=!0})});else for(var a=n.origColspan,l=n.columnIndex,s=1;s<a;s++){var u=l+s;i.add(u)}var c=n.colspan-(null!==(e=ht(t,"colspan"))&&void 0!==e?e:1);return t.walkUp(function(t){var e=t.data;e.colspan-=c,e.colspan<=1?(e.colspan=1,e.isCollapsed=!0):he(t)&&(e.isCollapsed=ht(t,"isCollapsed"))}),{rollbackModification:function(){return hn(t)},affectedColumns:Array.from(i),colspanCompensation:c}}var hr=new Map([["collapse",ho],["expand",hn],["hide-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,oW.e)(S||(S=Object.freeze(Object.defineProperties(["The passed node is not the last node on the tree. Only for \nthe last node, the hide column modification can be applied."],{raw:{value:Object.freeze(["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the hide column modification can be applied."])}})))));if(!t.data.crossHiddenColumns.includes(e)){var n=!1;t.walkUp(function(t){if(t.data.collapsible)return n=!0,!1}),n||t.walkUp(function(t){var n=t.data;n.crossHiddenColumns.push(e),n.colspan>1?n.colspan-=1:n.isHidden=!0})}}],["show-column",function(t,e){if(!Number.isInteger(e))throw Error("The passed gridColumnIndex argument has invalid type.");if(t.childs.length>0)throw Error((0,oW.e)(O||(O=Object.freeze(Object.defineProperties(["The passed node is not the last node on the tree. Only for \nthe last node, the show column modification can be applied."],{raw:{value:Object.freeze(["The passed node is not the last node on the tree. Only for\\x20\nthe last node, the show column modification can be applied."])}})))));if(t.data.crossHiddenColumns.includes(e)){var n=!1;t.walkUp(function(t){if(t.data.collapsible)return n=!0,!1}),n||t.walkUp(function(t){var n=t.data;n.crossHiddenColumns.splice(n.crossHiddenColumns.indexOf(e),1),!n.isHidden&&n.colspan<n.origColspan&&(n.colspan+=1),n.isHidden=!1})}}]]),hi=["crossHiddenColumns"];function ha(t){var e=[];return(0,V.Bk)(t,function(t){t.walkDown(function(t){for(var n,o,r=t.data,i=r.origColspan,a=r.columnIndex,l=r.headerLevel,s=r.crossHiddenColumns,u=(Array.isArray((n=e)[l])?o=n[l]:(o=[],n[l]=o),o),c=!1,f=a;f<a+i;f++)if(s.includes(f)||c)u.push(fA(r));else{var h=function(t){var e=f_(t);return e.crossHiddenColumns,function(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(e,hi)}(r);h.isRoot=!0,u.push(h),c=!0}})}),e}var hl=["row"];function hs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function hu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hs(Object(n),!0).forEach(function(e){var o,r;o=t,r=n[e],e in o?Object.defineProperty(o,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function hc(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hf(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function hh(t,e,n){var o=hp(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function hd(t,e){var n=hp(t,e,"get");return n.get?n.get.call(t):n.value}function hp(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var hy=new WeakMap,hg=new WeakMap,hv=new WeakMap,hm=function(){var t,e;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),hf(this,hy,{writable:!0,value:new fz}),hf(this,hg,{writable:!0,value:new f7(hd(this,hy))}),hf(this,hv,{writable:!0,value:[[]]})}return t=[{key:"setState",value:function(t){hd(this,hy).setData(t);var e=!1;try{hd(this,hg).buildTree()}catch(n){hd(this,hg).clear(),hd(this,hy).clear(),e=!0}return hh(this,hv,ha(hd(this,hg).getRoots())),e}},{key:"setColumnsLimit",value:function(t){hd(this,hy).setColumnsLimit(t)}},{key:"mergeStateWith",value:function(t){var e=this,n=(0,V.Sc)(t,function(t){var n=t.row,o=function(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)n=i[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(o=0;o<i.length;o++)n=i[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}(t,hl);return hu({row:n<0?e.rowCoordsToLevel(n):n},o)});hd(this,hy).mergeWith(n),hd(this,hg).buildTree(),hh(this,hv,ha(hd(this,hg).getRoots()))}},{key:"mapState",value:function(t){hd(this,hy).map(t),hd(this,hg).buildTree(),hh(this,hv,ha(hd(this,hg).getRoots()))}},{key:"mapNodes",value:function(t){return(0,V.k$)(hd(this,hg).getRoots(),function(e,n){return n.walkDown(function(n){var o=t(n.data);void 0!==o&&e.push(o)}),e},[])}},{key:"triggerNodeModification",value:function(t,e,n){e<0&&(e=this.rowCoordsToLevel(e));var o,r=hd(this,hg).getNode(e,n);return r&&(o=function(t,e,n){if(!hr.has(t))throw Error('The node modifier action ("'.concat(t,'") does not exist.'));return hr.get(t)(e,n)}(t,r,n),hh(this,hv,ha(hd(this,hg).getRoots()))),o}},{key:"triggerColumnModification",value:function(t,e){return this.triggerNodeModification(t,-1,e)}},{key:"rowCoordsToLevel",value:function(t){var e=Math.max(this.getLayersCount(),1);return Math.min(Math.max(t+e,0),e-1)}},{key:"levelToRowCoords",value:function(t){var e=Math.max(this.getLayersCount(),1);return Math.min(Math.max(t-e,-e),-1)}},{key:"getHeaderSettings",value:function(t,e){var n,o;return(t<0&&(t=this.rowCoordsToLevel(t)),t>=this.getLayersCount())?null:null!==(n=null===(o=hd(this,hv)[t])||void 0===o?void 0:o[e])&&void 0!==n?n:null}},{key:"getHeaderTreeNodeData",value:function(t,e){t<0&&(t=this.rowCoordsToLevel(t));var n=hd(this,hg).getNode(t,e);return n?hu({},n.data):null}},{key:"findLeftMostColumnIndex",value:function(t,e){if((null!==(n=this.getHeaderSettings(t,e))&&void 0!==n?n:{isRoot:!0}).isRoot)return e;for(var n,o,r=e-1;r>=0&&!(null!==(o=this.getHeaderSettings(t,r))&&void 0!==o?o:{isRoot:!0}).isRoot;)r-=1;return r}},{key:"getLayersCount",value:function(){return hd(this,hy).getLayersCount()}},{key:"getColumnsCount",value:function(){return hd(this,hy).getColumnsCount()}},{key:"clear",value:function(){hh(this,hv,[]),hd(this,hy).clear(),hd(this,hg).clear()}}],hc(n.prototype,t),e&&hc(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hb(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hC=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),hw(this,"hot",void 0),hw(this,"nestedHeaderSettingsGetter",void 0),hw(this,"layersCount",0),hw(this,"container",void 0),hw(this,"widthsMap",void 0),this.hot=t,this.nestedHeaderSettingsGetter=e,this.widthsMap=this.hot.columnIndexMapper.createAndRegisterIndexMap("nestedHeaders.widthsMap","physicalIndexToValue")}return t=[{key:"setLayersCount",value:function(t){return this.layersCount=t,this}},{key:"getWidth",value:function(t){return this.widthsMap.getValueAtIndex(this.hot.toPhysicalColumn(t))}},{key:"buildWidthsMap",value:function(){this.container=this.hot.rootDocument.createElement("div"),this.container.classList.add("handsontable","htGhostTable","htAutoSize"),this._buildGhostTable(this.container),this.hot.rootDocument.body.appendChild(this.container);var t=this.container.querySelectorAll("tr:last-of-type th"),e=t.length;this.widthsMap.clear();for(var n=0;n<e;n++){var o=this.hot.columnIndexMapper.getVisualFromRenderableIndex(n),r=this.hot.toPhysicalColumn(o);this.widthsMap.setValueAtIndex(r,t[n].offsetWidth)}this.container.parentNode.removeChild(this.container),this.container=null}},{key:"_buildGhostTable",value:function(t){for(var e=this.hot,n=e.rootDocument,o=e.columnIndexMapper,r=n.createDocumentFragment(),i=n.createElement("table"),a=!!this.hot.getSettings().dropdownMenu,l=o.getRenderableIndexesLength(),s=0;s<this.layersCount;s++){for(var u=n.createElement("tr"),c=0;c<l;c++){var f=o.getVisualFromRenderableIndex(c);null===f&&(f=c);var h=n.createElement("th"),d=this.nestedHeaderSettingsGetter(s,f);if(d&&(!d.isPlaceholder||d.isHidden)){var p=d.label;a&&(p+='<button class="changeType"></button>'),(0,_.uS)(h,p),h.colSpan=d.colspan,u.appendChild(h)}}i.appendChild(u)}r.appendChild(i),t.appendChild(r)}},{key:"clear",value:function(){this.widthsMap.clear(),this.container=null}}],hb(n.prototype,t),e&&hb(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hk(t){return(hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hS(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function hO(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hR(){return(hR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hM(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function hP(t,e){return(hP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hE(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hM(t){return(hM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hA(t,e,n){(function(t,e){if(e.has(t))throw TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function hI(t,e,n){var o=hj(t,e,"set");return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw TypeError("attempted to set read only private field");e.value=n}}(t,o,n),n}function hT(t,e){var n=hj(t,e,"get");return n.get?n.get.call(t):n.value}function hj(t,e,n){if(!e.has(t))throw TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var hx="nestedHeaders",hD=new WeakMap,hH=new WeakMap,hN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hP(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=hM(i);if(e){var o=hM(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===hk(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return hE(t)}(this,t)});function i(){var t;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i);for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return hA(hE(t=r.call.apply(r,[this].concat(n))),hD,{writable:!0,value:new hm}),hA(hE(t),hH,{writable:!0,value:null}),h_(hE(t),"ghostTable",new hC(t.hot,function(e,n){return t.getHeaderSettings(e,n)})),h_(hE(t),"detectedOverlappedHeaders",!1),t}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[hx]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings().nestedHeaders;Array.isArray(e)&&Array.isArray(e[0])||(0,nL.ZK)((0,oW.e)(R||(R=hS(["Your Nested Headers plugin configuration is invalid. The settings has to be \n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"],["Your Nested Headers plugin configuration is invalid. The settings has to be\\x20\n                        passed as an array of arrays e.q. [['A1', { label: 'A2', colspan: 2 }]]"])))),this.addHook("init",function(){return t.onInit()}),this.addHook("afterLoadData",function(){return t.onAfterLoadData.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("afterOnCellMouseDown",function(){return t.onAfterOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeOnCellMouseOver",function(){return t.onBeforeOnCellMouseOver.apply(t,arguments)}),this.addHook("afterGetColumnHeaderRenderers",function(e){return t.onAfterGetColumnHeaderRenderers(e)}),this.addHook("modifyColWidth",function(){return t.onModifyColWidth.apply(t,arguments)}),this.addHook("beforeHighlightingColumnHeader",function(){return t.onBeforeHighlightingColumnHeader.apply(t,arguments)}),this.addHook("afterViewportColumnCalculatorOverride",function(){return t.onAfterViewportColumnCalculatorOverride.apply(t,arguments)}),hR(hM(i.prototype),"enablePlugin",this).call(this),this.updatePlugin()}}},{key:"updatePlugin",value:function(){var t=this;if(this.hot.view){var e=this.hot.getSettings().nestedHeaders;hT(this,hD).setColumnsLimit(this.hot.countCols()),Array.isArray(e)&&(this.detectedOverlappedHeaders=hT(this,hD).setState(e)),this.detectedOverlappedHeaders&&(0,nL.ZK)((0,oW.e)(P||(P=hS(["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration \n                        is currently not supported."],["Your Nested Headers plugin setup contains overlapping headers. This kind of configuration\\x20\n                        is currently not supported."])))),this.enabled&&this.hot.columnIndexMapper.hidingMapsCollection.getMergedValues().forEach(function(e,n){hT(t,hD).triggerColumnModification(!0===e?"hide-column":"show-column",n)}),!hT(this,hH)&&this.enabled&&hI(this,hH,this.hot.columnIndexMapper.createChangesObserver("hiding").subscribe(function(e){e.forEach(function(e){var n=e.op,o=e.index,r=e.newValue;"replace"===n&&hT(t,hD).triggerColumnModification(!0===r?"hide-column":"show-column",o)}),t.ghostTable.buildWidthsMap()})),this.ghostTable.setLayersCount(this.getLayersCount()).buildWidthsMap(),hR(hM(i.prototype),"updatePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){this.clearColspans(),hT(this,hD).clear(),hT(this,hH).unsubscribe(),hI(this,hH,null),this.ghostTable.clear(),hR(hM(i.prototype),"disablePlugin",this).call(this)}},{key:"getStateManager",value:function(){return hT(this,hD)}},{key:"getLayersCount",value:function(){return hT(this,hD).getLayersCount()}},{key:"getHeaderSettings",value:function(t,e){return hT(this,hD).getHeaderSettings(t,e)}},{key:"clearColspans",value:function(){if(this.hot.view)for(var t=this.hot.view._wt,e=t.getSetting("columnHeaders").length,n=t.wtTable.THEAD,o=t.wtOverlays.topOverlay.clone.wtTable.THEAD,r=t.wtOverlays.topInlineStartCornerOverlay?t.wtOverlays.topInlineStartCornerOverlay.clone.wtTable.THEAD:null,i=0;i<e;i++){var a=n.childNodes[i];if(!a)break;for(var l=o.childNodes[i],s=r?r.childNodes[i]:null,u=0,c=a.childNodes.length;u<c;u++)a.childNodes[u].removeAttribute("colspan"),(0,_.IV)(a.childNodes[u],"hiddenHeader"),l&&l.childNodes[u]&&(l.childNodes[u].removeAttribute("colspan"),(0,_.IV)(l.childNodes[u],"hiddenHeader")),r&&s&&s.childNodes[u]&&(s.childNodes[u].removeAttribute("colspan"),(0,_.IV)(s.childNodes[u],"hiddenHeader"))}}},{key:"headerRendererFactory",value:function(t){var e=this,n=this.hot.view._wt.getSetting("fixedColumnsStart");return function(o,r){var i=e.hot,a=i.columnIndexMapper,l=i.view,s=a.getVisualFromRenderableIndex(o);null===s&&(s=o),r.removeAttribute("colspan"),(0,_.IV)(r,"hiddenHeader");var u=null!==(d=hT(e,hD).getHeaderSettings(t,s))&&void 0!==d?d:{label:""},c=u.colspan,f=u.label,h=u.isHidden;if(u.isPlaceholder||h)(0,_.cn)(r,"hiddenHeader");else if(c>1){var d,p,y,g=l._wt.wtOverlays,v=null===(p=g.topInlineStartCornerOverlay)||void 0===p?void 0:p.clone.wtTable.THEAD.contains(r),m=null===(y=g.inlineStartOverlay)||void 0===y?void 0:y.clone.wtTable.THEAD.contains(r),b=v||m?Math.min(c,n-o):c;b>1&&r.setAttribute("colspan",b)}e.hot.view.appendColHeader(s,r,function(){return f},t)}}},{key:"onBeforeHighlightingColumnHeader",value:function(t,e,n){var o=hT(this,hD).getHeaderTreeNodeData(e,t);if(!o)return t;var r=n.classNames,i=n.columnCursor,a=n.selectionType,l=n.selectionWidth,s=hT(this,hD).getHeaderSettings(e,t),u=s.isRoot,c=s.colspan;if(a===fM.Nc){if(!u)return o.columnIndex}else a===fM.CD&&(c>l-i||!u)&&(r.length=0);return t}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n,o){this._getHeaderTreeNodeDataByCoords(e)&&(o.column=!0)}},{key:"onAfterOnCellMouseDown",value:function(t,e){var n=this._getHeaderTreeNodeDataByCoords(e);if(n){var o=this.hot.selection,r=o.isSelected()?o.getSelectedRange().current():null,i=[],a=n.columnIndex,l=n.origColspan,s=!o.inInSelection(e);t.shiftKey&&r?e.col<r.from.col?i.push(r.getTopEndCorner().col,a,e.row):e.col>r.from.col?i.push(r.getTopStartCorner().col,a+l-1,e.row):i.push(a,a+l-1,e.row):((0,A.pW)(t)||(0,A.dO)(t)&&s)&&i.push(a,a+l-1,e.row),o.selectColumns.apply(o,i)}}},{key:"onBeforeOnCellMouseOver",value:function(t,e,n,o){if(this.hot.view.isMouseDown()){var r,i=this._getHeaderTreeNodeDataByCoords(e);if(i){var a=i.columnIndex,l=i.origColspan,s=this.hot.getSelectedRangeLast(),u=s.getTopStartCorner(),c=s.getBottomEndCorner(),f=s.from;o.column=!0,o.cell=!0;var h=[];e.col<f.col?h.push(c.col,a):e.col>f.col?h.push(u.col,a+l-1):h.push(a,a+l-1),(r=this.hot).selectColumns.apply(r,h)}}}},{key:"onAfterGetColumnHeaderRenderers",value:function(t){t.length=0;for(var e=0;e<hT(this,hD).getLayersCount();e++)t.push(this.headerRendererFactory(e))}},{key:"onAfterViewportColumnCalculatorOverride",value:function(t){for(var e=hT(this,hD).getLayersCount(),n=t.startColumn,o=!!e,r=0;r<e;r++){var i=hT(this,hD).findLeftMostColumnIndex(r,t.startColumn),a=this.hot.columnIndexMapper.getRenderableFromVisualIndex(i);if(i>=0&&(o=!1),(0,t9.kE)(a)&&a<t.startColumn){n=a;break}}t.startColumn=o?hT(this,hD).getHeaderTreeNodeData(0,n).columnIndex:n}},{key:"onModifyColWidth",value:function(t,e){var n=this.ghostTable.getWidth(e);return t>n?t:n}},{key:"onInit",value:function(){this.updatePlugin()}},{key:"onAfterLoadData",value:function(t,e){e||this.updatePlugin()}},{key:"destroy",value:function(){hI(this,hD,null),null!==hT(this,hH)&&(hT(this,hH).unsubscribe(),hI(this,hH,null)),hR(hM(i.prototype),"destroy",this).call(this)}},{key:"_getHeaderTreeNodeDataByCoords",value:function(t){if(!(t.row>=0)&&!(t.col<0))return hT(this,hD).getHeaderTreeNodeData(t.row,t.col)}}],o=[{key:"PLUGIN_KEY",get:function(){return hx}},{key:"PLUGIN_PRIORITY",get:function(){return 280}}],n&&hO(i.prototype,n),o&&hO(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function hB(t){return function(t){if(Array.isArray(t))return hL(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hL(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hL(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function hV(t){return(hV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hU(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var hF=function(){var t,e;function n(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.hot=e,this.data=null,this.plugin=t,this.parentReference=new WeakMap,this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap}}return t=[{key:"setData",value:function(t){this.data=t}},{key:"getData",value:function(){return this.data}},{key:"getRawSourceData",value:function(){var t=null;return this.plugin.disableCoreAPIModifiers(),t=this.hot.getSourceData(),this.plugin.enableCoreAPIModifiers(),t}},{key:"updateWithData",value:function(t){this.setData(t),this.rewriteCache()}},{key:"rewriteCache",value:function(){var t=this;this.cache={levels:[],levelCount:0,rows:[],nodeInfo:new WeakMap},(0,t9.q4)(0,this.data.length-1,function(e){t.cacheNode(t.data[e],0,null)})}},{key:"cacheNode",value:function(t,e,n){var o=this;this.cache.levels[e]||(this.cache.levels[e]=[],this.cache.levelCount+=1),this.cache.levels[e].push(t),this.cache.rows.push(t),this.cache.nodeInfo.set(t,{parent:n,row:this.cache.rows.length-1,level:e}),this.hasChildren(t)&&(0,V.Bk)(t.__children,function(n){o.cacheNode(n,e+1,t)})}},{key:"getDataObject",value:function(t){return null==t?null:this.cache.rows[t]}},{key:"readTreeNodes",value:function(t,e,n,o){var r=this,i=!1,a=e;if(isNaN(a)&&a.end)return a;var l=t;return(l||(l={__children:this.data},i=!0,a-=1),null!=n&&a===n)?{result:l,end:!0}:null!=o&&l===o?{result:a,end:!0}:(a+=1,l.__children&&(0,V.Bk)(l.__children,function(t){if(r.parentReference.set(t,i?null:l),isNaN(a=r.readTreeNodes(t,a,n,o))&&a.end)return!1}),a)}},{key:"mockParent",value:function(){var t=this.mockNode();return t.__children=this.data,t}},{key:"mockNode",value:function(){var t={};return(0,I._l)(this.data[0],function(e,n){t[n]=null}),t}},{key:"getRowIndex",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).row}},{key:"getRowIndexWithinParent",value:function(t){var e=null;e=isNaN(t)?t:this.getDataObject(t);var n=this.getRowParent(t);return null==n?this.data.indexOf(e):n.__children.indexOf(e)}},{key:"countAllRows",value:function(){var t={__children:this.data};return this.countChildren(t)}},{key:"countChildren",value:function(t){var e=this,n=0,o=t;return(isNaN(o)||(o=this.getDataObject(o)),o&&o.__children)?((0,V.Bk)(o.__children,function(t){n+=1,t.__children&&(n+=e.countChildren(t))}),n):0}},{key:"getRowParent",value:function(t){var e;return e=isNaN(t)?t:this.getDataObject(t),this.getRowObjectParent(e)}},{key:"getRowObjectParent",value:function(t){return t&&"object"===hV(t)?this.cache.nodeInfo.get(t).parent:null}},{key:"getRowLevel",value:function(t){var e=null;return(e=isNaN(t)?t:this.getDataObject(t))?this.getRowObjectLevel(e):null}},{key:"getRowObjectLevel",value:function(t){return null==t?null:this.cache.nodeInfo.get(t).level}},{key:"hasChildren",value:function(t){var e=t;return isNaN(e)||(e=this.getDataObject(e)),!!(e.__children&&e.__children.length)}},{key:"isChild",value:function(t){return null!==this.getRowParent(t)}},{key:"getChild",value:function(t,e){var n;return(null===(n=t.__children)||void 0===n?void 0:n[e])||null}},{key:"isRowHighestLevel",value:function(t){return!this.isChild(t)}},{key:"isParent",value:function(t){var e,n=t;return isNaN(n)||(n=this.getDataObject(n)),n&&!!n.__children&&(null===(e=n.__children)||void 0===e?void 0:e.length)!==0}},{key:"addChild",value:function(t,e){var n=e;this.hot.runHooks("beforeAddChild",t,n);var o=null;t&&(o=this.getRowIndex(t)),this.hot.runHooks("beforeCreateRow",o+this.countChildren(t)+1,1);var r=t;t||(r=this.mockParent()),r.__children||(r.__children=[]),n||(n=this.mockNode()),r.__children.push(n),this.rewriteCache();var i=this.getRowIndex(n);this.hot.rowIndexMapper.insertIndexes(i,1),this.hot.runHooks("afterCreateRow",i,1),this.hot.runHooks("afterAddChild",t,n)}},{key:"addChildAtIndex",value:function(t,e,n){var o,r=n;if(r||(r=this.mockNode()),this.hot.runHooks("beforeAddChild",t,r,e),t){var i=this.getRowIndex(t)+e+1;this.hot.runHooks("beforeCreateRow",i,1),t.__children.splice(e,null,r),this.rewriteCache(),this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndexWithinParent(t),"__children",t.__children,"NestedRows.addChildAtIndex"),this.hot.rowIndexMapper.insertIndexes(i,1),this.plugin.enableCoreAPIModifiers(),this.hot.runHooks("afterCreateRow",i,1),o=i}else this.plugin.disableCoreAPIModifiers(),this.hot.alter("insert_row_above",e,1,"NestedRows.addChildAtIndex"),this.plugin.enableCoreAPIModifiers(),o=this.getRowIndex(this.data[e]);r=this.getDataObject(o),this.hot.runHooks("afterAddChild",t,r,e)}},{key:"addSibling",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",n=this.translateTrimmedRow(t),o=this.getRowParent(n),r=this.getRowIndexWithinParent(n);switch(e){case"below":this.addChildAtIndex(o,r+1,null);break;case"above":this.addChildAtIndex(o,r,null)}}},{key:"detachFromParent",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=null,r=[];Array.isArray(t)?((0,t9.q4)(t[0],t[2],function(t){var n=e.translateTrimmedRow(t);r.push(e.getDataObject(n))}),(0,t9.q4)(0,r.length-2,function(t){e.detachFromParent(r[t],!1)}),o=r[r.length-1]):o=t;var i=this.getRowIndex(o),a=this.countChildren(o),l=this.getRowIndexWithinParent(o),s=this.getRowParent(o),u=this.getRowParent(s),c=this.getRowIndex(u),f=null;if(this.hot.runHooks("beforeDetachChild",s,o),null!=l){var h=Array.from(Array(i+a+1).keys()).splice(-1*(a+1));if(this.hot.runHooks("beforeRemoveRow",i,a+1,h,this.plugin.pluginName),s.__children.splice(l,1),this.rewriteCache(),this.hot.runHooks("afterRemoveRow",i,a+1,h,this.plugin.pluginName),u){f=c+this.countChildren(u);var d=this.getChild(u,this.countChildren(u)-1),p=this.getRowIndex(d);this.hot.runHooks("beforeCreateRow",p+1,a+1,this.plugin.pluginName),u.__children.push(o)}else f=this.hot.countRows()+1,this.hot.runHooks("beforeCreateRow",f-2,a+1,this.plugin.pluginName),this.data.push(o)}this.rewriteCache(),this.hot.runHooks("afterCreateRow",f-2,a+1,this.plugin.pluginName),this.hot.runHooks("afterDetachChild",s,o,this.getRowIndex(o)),n&&this.hot.render()}},{key:"filterData",value:function(t,e,n){var o=this,r=[];(0,V.Bk)(n,function(t){r.push(o.getDataObject(t))}),(0,V.Bk)(r,function(t){var e=o.getRowIndexWithinParent(t),n=o.getRowParent(t);null===n?o.data.splice(e,1):n.__children.splice(e,1)}),this.rewriteCache()}},{key:"spliceData",value:function(t,e,n){var o,r,i=this.getDataObject(t-1),a=null,l=t;i&&i.__children&&0===i.__children.length?(a=i,l=0):t<this.countAllRows()&&(a=this.getRowParent(t),l=this.getRowIndexWithinParent(t)),a?n?(o=a.__children).splice.apply(o,[l,e].concat(hB(n))):a.__children.splice(l,e):n?(r=this.data).splice.apply(r,[l,e].concat(hB(n))):this.data.splice(l,e),this.rewriteCache()}},{key:"syncRowWithRawSource",value:function(t){var e=t,n=null;do null!==(n=this.getRowParent(n))&&(e=n);while(null!==n);this.plugin.disableCoreAPIModifiers(),this.hot.setSourceDataAtCell(this.getRowIndex(e),"__children",e.__children,"NestedRows.syncRowWithRawSource"),this.plugin.enableCoreAPIModifiers()}},{key:"moveRow",value:function(t,e,n,o){var r=e===this.hot.countRows(),i=this.getRowParent(t),a=this.getRowIndexWithinParent(t),l=i.__children.slice(a,a+1),s=r?this.getRowParent(e-1):this.getRowParent(e);null==s&&(s=this.getRowParent(e-1)),null==s&&(s=this.getDataObject(e-1)),s?s.__children||(s.__children=[]):(s=this.getDataObject(e)).__children=[];var u=r||n||o?s.__children.length:this.getRowIndexWithinParent(e),c=i===s;s.__children.splice(u,0,l[0]),i.__children.splice(a+(t>e&&c?1:0),1),this.syncRowWithRawSource(i),c||this.syncRowWithRawSource(s)}},{key:"translateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.translateTrimmedRow(t):t}},{key:"untranslateTrimmedRow",value:function(t){return this.plugin.collapsingUI?this.plugin.collapsingUI.untranslateTrimmedRow(t):t}}],hU(n.prototype,t),e&&hU(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function hW(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var hz=(l=function t(e,n){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,t),this.hot=n,this.plugin=e},s&&hW(l.prototype,s),u&&hW(l,u),Object.defineProperty(l,"prototype",{writable:!1}),l);function hY(t){return(hY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hG(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hK(t,e){return(hK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hq(t){return(hq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hZ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hK(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=hq(i);if(e){var o=hq(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===hY(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsingUI=n.plugin.collapsingUI,n.rowHeaderWidthCache=null,n}return o=[{key:"CSS_CLASSES",get:function(){return{indicatorContainer:"ht_nestingLevels",parent:"ht_nestingParent",indicator:"ht_nestingLevel",emptyIndicator:"ht_nestingLevel_empty",button:"ht_nestingButton",expandButton:"ht_nestingExpand",collapseButton:"ht_nestingCollapse"}}}],n=[{key:"appendLevelIndicators",value:function(t,e){var n=this.hot.toPhysicalRow(t),o=this.dataManager.getRowLevel(n),r=this.dataManager.getDataObject(n),a=e.getElementsByTagName("DIV")[0],l=a.querySelector("span.rowHeader"),s=a.querySelectorAll('[class^="ht_nesting"]');if((0,V.Bk)(s,function(t){t&&a.removeChild(t)}),(0,_.cn)(e,i.CSS_CLASSES.indicatorContainer),o){var u=this.hot.rootDocument,c=l.cloneNode(!0);a.innerHTML="",(0,t9.q4)(0,o-1,function(){var t=u.createElement("SPAN");(0,_.cn)(t,i.CSS_CLASSES.emptyIndicator),a.appendChild(t)}),a.appendChild(c)}if(this.dataManager.hasChildren(r)){var f=this.hot.rootDocument.createElement("DIV");(0,_.cn)(e,i.CSS_CLASSES.parent),this.collapsingUI.areChildrenCollapsed(n)?(0,_.cn)(f,"".concat(i.CSS_CLASSES.button," ").concat(i.CSS_CLASSES.expandButton)):(0,_.cn)(f,"".concat(i.CSS_CLASSES.button," ").concat(i.CSS_CLASSES.collapseButton)),a.appendChild(f)}}},{key:"updateRowHeaderWidth",value:function(t){var e=t;e||(e=this.dataManager.cache.levelCount),this.rowHeaderWidthCache=Math.max(50,11+10*e+25),this.hot.render()}}],hG(i.prototype,n),o&&hG(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(hz);function h$(t){return(h$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hX(t){return function(t){if(Array.isArray(t))return hJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hJ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hJ(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function hQ(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h0(t,e){return(h0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h1(t){return(h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h2=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h0(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=h1(i);if(e){var o=h1(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===h$(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(n=r.call(this,t,e)).dataManager=n.plugin.dataManager,n.collapsedRows=[],n.collapsedRowsStash={stash:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.lastCollapsedRows=n.collapsedRows.slice(0),n.expandMultipleChildren(n.lastCollapsedRows,t)},shiftStash:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;null==e&&(e=1/0),(0,V.Bk)(n.lastCollapsedRows,function(r,i){r>=t&&r<e&&(n.lastCollapsedRows[i]=r+o)})},applyStash:function(){var t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];n.collapseMultipleChildren(n.lastCollapsedRows,t),n.lastCollapsedRows=void 0},trimStash:function(t,e){(0,t9.q4)(t,t+e-1,function(t){var e=n.lastCollapsedRows.indexOf(t);e>-1&&n.lastCollapsedRows.splice(e,1)})}},n}return n=[{key:"collapseChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=[],i=null,a=null,l=null;return isNaN(t)?(i=t,a=this.dataManager.getRowIndex(i)):(i=this.dataManager.getDataObject(t),a=t),this.dataManager.hasChildren(i)&&(0,V.Bk)(i.__children,function(t){r.push(e.dataManager.getRowIndex(t))}),l=this.collapseRows(r,!0,!1),o&&this.trimRows(l),n&&this.renderAndAdjust(),-1===this.collapsedRows.indexOf(a)&&this.collapsedRows.push(a),l}},{key:"collapseMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=[];(0,V.Bk)(t,function(t){r.push.apply(r,hX(e.collapseChildren(t,!1,!1)))}),o&&this.trimRows(r),n&&this.renderAndAdjust()}},{key:"collapseRow",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.collapseRows([t],e)}},{key:"collapseRows",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return(0,V.Bk)(t,function(t){r.push(t),n&&e.collapseChildRows(t,r)}),o&&this.trimRows(r),r}},{key:"collapseChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var r=this.dataManager.getDataObject(t);(0,V.Bk)(r.__children,function(t){var o=e.dataManager.getRowIndex(t);n.push(o),e.collapseChildRows(o,n)})}o&&this.trimRows(n)}},{key:"expandRow",value:function(t){var e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];this.expandRows([t],e)}},{key:"expandRows",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return(0,V.Bk)(t,function(t){r.push(t),n&&e.expandChildRows(t,r)}),o&&this.untrimRows(r),r}},{key:"expandChildRows",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&arguments[2];var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.dataManager.hasChildren(t)){var r=this.dataManager.getDataObject(t);(0,V.Bk)(r.__children,function(t){if(!e.isAnyParentCollapsed(t)){var o=e.dataManager.getRowIndex(t);n.push(o),e.expandChildRows(o,n)}})}o&&this.untrimRows(n)}},{key:"expandChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=[],i=null,a=null,l=null;return isNaN(t)?(i=t,a=this.dataManager.getRowIndex(t)):(i=this.dataManager.getDataObject(t),a=t),this.collapsedRows.splice(this.collapsedRows.indexOf(a),1),this.dataManager.hasChildren(i)&&(0,V.Bk)(i.__children,function(t){var n=e.dataManager.getRowIndex(t);r.push(n)}),l=this.expandRows(r,!0,!1),o&&this.untrimRows(l),n&&this.renderAndAdjust(),l}},{key:"expandMultipleChildren",value:function(t){var e=this,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=[];(0,V.Bk)(t,function(t){r.push.apply(r,hX(e.expandChildren(t,!1,!1)))}),o&&this.untrimRows(r),n&&this.renderAndAdjust()}},{key:"collapseAll",value:function(){var t=this,e=this.dataManager.getData(),n=[];(0,V.Bk)(e,function(e){t.dataManager.hasChildren(e)&&n.push(e)}),this.collapseMultipleChildren(n),this.renderAndAdjust()}},{key:"expandAll",value:function(){var t=this,e=this.dataManager.getData(),n=[];(0,V.Bk)(e,function(e){t.dataManager.hasChildren(e)&&n.push(e)}),this.expandMultipleChildren(n),this.renderAndAdjust()}},{key:"trimRows",value:function(t){var e=this;this.hot.batchExecution(function(){(0,V.Bk)(t,function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!0)})},!0)}},{key:"untrimRows",value:function(t){var e=this;this.hot.batchExecution(function(){(0,V.Bk)(t,function(t){e.plugin.collapsedRowsMap.setValueAtIndex(t,!1)})},!0)}},{key:"areChildrenCollapsed",value:function(t){var e=this,n=isNaN(t)?t:this.dataManager.getDataObject(t),o=!0;return null===n&&(n={__children:this.dataManager.data}),this.dataManager.hasChildren(n)&&(0,V.Bk)(n.__children,function(t){var n=e.dataManager.getRowIndex(t);if(!e.plugin.collapsedRowsMap.getValueAtIndex(n))return o=!1,!1}),o}},{key:"isAnyParentCollapsed",value:function(t){for(var e=t;null!==e;){e=this.dataManager.getRowParent(e);var n=this.dataManager.getRowIndex(e);if(this.collapsedRows.indexOf(n)>-1)return!0}return!1}},{key:"toggleState",value:function(t,e){if(!(e.col>=0)){var n=this.translateTrimmedRow(e.row);(0,_.pv)(t.target,hZ.CSS_CLASSES.button)&&(this.areChildrenCollapsed(n)?this.expandChildren(n):this.collapseChildren(n),(0,A.mM)(t))}}},{key:"translateTrimmedRow",value:function(t){return this.hot.toPhysicalRow(t)}},{key:"untranslateTrimmedRow",value:function(t){return this.hot.toVisualRow(t)}},{key:"renderAndAdjust",value:function(){this.hot.render(),this.hot.view.adjustElementsSize()}}],hQ(i.prototype,n),o&&hQ(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(hz);function h3(t){return(h3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h4(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h8(t,e){return(h8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h9(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h6(t){return(h6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var h7=new WeakMap,h5=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h8(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=h6(i);if(e){var o=h6(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===h3(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return h9(t)}(this,t)});function i(t,e){var n;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),n=r.call(this,t,e),h7.set(h9(n),{row_above:function(t,e){var o=e[e.length-1];n.dataManager.addSibling(o.start.row,"above")},row_below:function(t,e){var o=e[e.length-1];n.dataManager.addSibling(o.start.row,"below")}}),n.dataManager=n.plugin.dataManager,n}return n=[{key:"appendOptions",value:function(t){var e=this,n=[{key:"add_child",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_NESTED_ROWS_INSERT_CHILD)},callback:function(){var t=e.dataManager.translateTrimmedRow(e.hot.getSelectedLast()[0]),n=e.dataManager.getDataObject(t);e.dataManager.addChild(n)},disabled:function(){var t=e.hot.getSelectedLast();return!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{key:"detach_from_parent",name:function(){return this.getTranslatedPhrase(ro.CONTEXTMENU_ITEMS_NESTED_ROWS_DETACH_CHILD)},callback:function(){e.dataManager.detachFromParent(e.hot.getSelectedLast())},disabled:function(){var t=e.hot.getSelectedLast(),n=e.dataManager.translateTrimmedRow(t[0]);return!e.dataManager.getRowParent(n)||!t||t[0]<0||e.hot.selection.isSelectedByColumnHeader()||e.hot.countRows()>=e.hot.getSettings().maxRows}},{name:"---------"}];return(0,t9.q4)(0,t.items.length-1,function(e){if(0===e)return(0,V.Bk)(n,function(n,o){t.items.splice(e+o,0,n)}),!1}),this.modifyRowInsertingOptions(t)}},{key:"modifyRowInsertingOptions",value:function(t){var e=h7.get(this);return(0,t9.q4)(0,t.items.length-1,function(n){var o=e[t.items[n].key];null!=o&&(t.items[n].callback=o)}),t}}],h4(i.prototype,n),o&&h4(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(hz);function dt(t){return function(t){if(Array.isArray(t))return de(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function dn(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var dr=function(){var t,e;function n(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),this.plugin=t,this.hot=t.hot,this.dataManager=t.dataManager,this.collapsingUI=t.collapsingUI}return t=[{key:"onBeforeRowMove",value:function(t,e,n,o){var r=this;if(this.displayAPICompatibilityWarning({rows:t,finalIndex:e,dropIndex:n,movePossible:o}))return!1;this.movedToCollapsed=!1;var i=n===this.hot.countRows(),a=i?this.hot.countSourceRows():this.dataManager.translateTrimmedRow(n),l=!0,s=t.map(function(t){if(!l)return!1;var e=r.dataManager.translateTrimmedRow(t);return l=r.shouldAllowMoving(e,a),e}),u=-1===s.indexOf(a);if(!l||!u)return!1;var c=this.getBaseParent(s),f=this.getTargetParent(i,a);return this.movedToCollapsed=this.collapsingUI.areChildrenCollapsed(f),this.collapsingUI.collapsedRowsStash.stash(),this.shiftCollapsibleParentsLocations(s,a,c===f),this.moveRows(s,a,f),this.dataManager.rewriteCache(),this.moveCellsMeta(s,a),this.collapsingUI.collapsedRowsStash.applyStash(!1),this.hot.runHooks("afterRowMove",t,e,n,o,o&&this.isRowOrderChanged(t,e)),this.hot.render(),this.selectCells(t,n),!1}},{key:"displayAPICompatibilityWarning",value:function(t){var e=t.rows,n=t.finalIndex,o=t.dropIndex,r=t.movePossible,i=!1;return(0,U.o8)(o)&&((0,nL.ZK)((0,oW.e)(E||(E=Object.freeze(Object.defineProperties(["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows \n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."],{raw:{value:Object.freeze(["Since version 8.0.0 of the Handsontable the 'moveRows' method isn't used for moving rows\\x20\n      when the NestedRows plugin is enabled. Please use the 'dragRows' method instead."])}}))))),this.hot.runHooks("afterRowMove",e,n,o,r,!1),i=!0),i}},{key:"shouldAllowMoving",value:function(t,e){return!(this.dataManager.isParent(t)||this.dataManager.isRowHighestLevel(t)||t===e||0===e)}},{key:"getBaseParent",value:function(t){return this.dataManager.getRowParent(t[0])}},{key:"getTargetParent",value:function(t,e){var n=this.dataManager.getRowParent(t?e-1:e);return null==n&&(n=this.dataManager.getRowParent(e-1)),n}},{key:"shiftCollapsibleParentsLocations",value:function(t,e,n){n||(Math.max.apply(Math,dt(t))<=e?this.collapsingUI.collapsedRowsStash.shiftStash(t[0],e,-1*t.length):this.collapsingUI.collapsedRowsStash.shiftStash(e,t[0],t.length))}},{key:"moveRows",value:function(t,e,n){var o=this,r=e===this.dataManager.getRowIndex(n)+this.dataManager.countChildren(n)+1;this.hot.batchRender(function(){t.forEach(function(t){o.dataManager.moveRow(t,e,o.movedToCollapsed,r)})})}},{key:"moveCellsMeta",value:function(t,e){var n,o=this,r=[],i=Math.max.apply(Math,dt(t))<e;t.forEach(function(t){r.push(o.hot.getCellMetaAtRow(t))}),this.hot.spliceCellsMeta(t[0],t.length),(n=this.hot).spliceCellsMeta.apply(n,[e-(i?r.length:0),0].concat(r))}},{key:"selectCells",value:function(t,e){var n=t.length,o=0,r=0,i=null,a=null;if(this.movedToCollapsed){var l=null;l=t[n-1]<e?this.dataManager.translateTrimmedRow(e-n):this.dataManager.translateTrimmedRow(e);var s=this.dataManager.getRowParent(null===l?this.hot.countSourceRows()-1:l-1),u=this.dataManager.getRowIndex(s);r=o=this.dataManager.untranslateTrimmedRow(u)}else t[n-1]<e?o=(r=e-1)-n+1:r=(o=e)+n-1;i=this.hot.selection,a=this.hot.countCols()-1,i.setRangeStart(this.hot._createCellCoords(o,0)),i.setRangeEnd(this.hot._createCellCoords(r,a),!0)}},{key:"isRowOrderChanged",value:function(t,e){return t.some(function(t,n){return t-n!==e})}}],dn(n.prototype,t),e&&dn(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function da(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function dl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ds(){return(ds="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=df(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function du(t,e){return(du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dc(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function df(t){return(df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dh="nestedRows",dd=new WeakMap,dp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&du(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=df(i);if(e){var o=df(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return dc(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).dataManager=null,e.headersUI=null,e.collapsedRowsMap=null,dd.set(dc(e),{movedToCollapsed:!1,skipRender:null,skipCoreAPIModifiers:!1}),e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[dh]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.collapsedRowsMap=this.hot.rowIndexMapper.registerMap("nestedRows",new sf.n),this.dataManager=new hF(this,this.hot),this.collapsingUI=new h2(this,this.hot),this.headersUI=new hZ(this,this.hot),this.contextMenuUI=new h5(this,this.hot),this.rowMoveController=new dr(this),this.addHook("afterInit",function(){return t.onAfterInit.apply(t,arguments)}),this.addHook("beforeViewRender",function(){return t.onBeforeViewRender.apply(t,arguments)}),this.addHook("modifyRowData",function(){return t.onModifyRowData.apply(t,arguments)}),this.addHook("modifySourceLength",function(){return t.onModifySourceLength.apply(t,arguments)}),this.addHook("beforeDataSplice",function(){return t.onBeforeDataSplice.apply(t,arguments)}),this.addHook("filterData",function(){return t.onFilterData.apply(t,arguments)}),this.addHook("afterContextMenuDefaultOptions",function(){return t.onAfterContextMenuDefaultOptions.apply(t,arguments)}),this.addHook("afterGetRowHeader",function(){return t.onAfterGetRowHeader.apply(t,arguments)}),this.addHook("beforeOnCellMouseDown",function(){return t.onBeforeOnCellMouseDown.apply(t,arguments)}),this.addHook("beforeRemoveRow",function(){return t.onBeforeRemoveRow.apply(t,arguments)}),this.addHook("afterRemoveRow",function(){return t.onAfterRemoveRow.apply(t,arguments)}),this.addHook("beforeAddChild",function(){return t.onBeforeAddChild.apply(t,arguments)}),this.addHook("afterAddChild",function(){return t.onAfterAddChild.apply(t,arguments)}),this.addHook("beforeDetachChild",function(){return t.onBeforeDetachChild.apply(t,arguments)}),this.addHook("afterDetachChild",function(){return t.onAfterDetachChild.apply(t,arguments)}),this.addHook("modifyRowHeaderWidth",function(){return t.onModifyRowHeaderWidth.apply(t,arguments)}),this.addHook("afterCreateRow",function(){return t.onAfterCreateRow.apply(t,arguments)}),this.addHook("beforeRowMove",function(){return t.onBeforeRowMove.apply(t,arguments)}),this.addHook("beforeLoadData",function(e){return t.onBeforeLoadData(e)}),ds(df(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("nestedRows"),ds(df(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin();var t=this.dataManager.getData();this.enablePlugin(),this.dataManager.updateWithData(t),ds(df(i.prototype),"updatePlugin",this).call(this)}},{key:"onBeforeRowMove",value:function(t,e,n,o){return this.rowMoveController.onBeforeRowMove(t,e,n,o)}},{key:"disableCoreAPIModifiers",value:function(){dd.get(this).skipCoreAPIModifiers=!0}},{key:"enableCoreAPIModifiers",value:function(){dd.get(this).skipCoreAPIModifiers=!1}},{key:"onBeforeOnCellMouseDown",value:function(t,e,n){this.collapsingUI.toggleState(t,e,n)}},{key:"onModifyRowData",value:function(t){if(!dd.get(this).skipCoreAPIModifiers)return this.dataManager.getDataObject(t)}},{key:"onModifySourceLength",value:function(){if(!dd.get(this).skipCoreAPIModifiers)return this.dataManager.countAllRows()}},{key:"onBeforeDataSplice",value:function(t,e,n){return!!(dd.get(this).skipCoreAPIModifiers||this.dataManager.isRowHighestLevel(t))||(this.dataManager.spliceData(t,e,n),!1)}},{key:"onFilterData",value:function(t,e,n){var o=dd.get(this);return this.collapsingUI.collapsedRowsStash.stash(),this.collapsingUI.collapsedRowsStash.trimStash(n[0],e),this.collapsingUI.collapsedRowsStash.shiftStash(n[0],null,-1*e),this.dataManager.filterData(t,e,n),o.skipRender=!0,this.dataManager.getData().slice()}},{key:"onAfterContextMenuDefaultOptions",value:function(t){return this.contextMenuUI.appendOptions(t)}},{key:"onAfterGetRowHeader",value:function(t,e){this.headersUI.appendLevelIndicators(t,e)}},{key:"onModifyRowHeaderWidth",value:function(t){return this.headersUI.rowHeaderWidthCache||t}},{key:"onAfterRemoveRow",value:function(t,e,n,o){var r=this;if(o!==this.pluginName){var i=dd.get(this);setTimeout(function(){i.skipRender=null,r.headersUI.updateRowHeaderWidth(),r.collapsingUI.collapsedRowsStash.applyStash()},0)}}},{key:"onBeforeRemoveRow",value:function(t,e,n){var o=this,r=Array.from(n.reduce(function(t,e){if(o.dataManager.isParent(e)){var n=o.dataManager.getDataObject(e).__children;return t.add(e),Array.isArray(n)&&n.forEach(function(e){return t.add(o.dataManager.getRowIndex(e))}),t}return t.add(e)},new Set));n.length=0,n.push.apply(n,r)}},{key:"onBeforeAddChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterAddChild",value:function(t,e){this.collapsingUI.collapsedRowsStash.shiftStash(this.dataManager.getRowIndex(e)),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onBeforeDetachChild",value:function(){this.collapsingUI.collapsedRowsStash.stash()}},{key:"onAfterDetachChild",value:function(t,e,n){this.collapsingUI.collapsedRowsStash.shiftStash(n,null,-1),this.collapsingUI.collapsedRowsStash.applyStash(),this.headersUI.updateRowHeaderWidth()}},{key:"onAfterCreateRow",value:function(){this.dataManager.rewriteCache()}},{key:"onAfterInit",value:function(){var t,e=Math.max.apply(Math,function(t){if(Array.isArray(t))return da(t)}(t=this.dataManager.cache.levels)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return da(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());e>0&&this.headersUI.updateRowHeaderWidth(e)}},{key:"onBeforeViewRender",value:function(t,e){dd.get(this).skipRender&&(e.skipRender=!0)}},{key:"destroy",value:function(){ds(df(i.prototype),"destroy",this).call(this)}},{key:"onBeforeLoadData",value:function(t){if(!(0,lI.Pj)(t)){(0,nL.vU)("The Nested Rows plugin requires an Array of Objects as a dataset to be provided. The plugin has been disabled."),this.hot.getSettings()[dh]=!1,this.disablePlugin();return}this.dataManager.setData(t),this.dataManager.rewriteCache()}}],o=[{key:"PLUGIN_KEY",get:function(){return dh}},{key:"PLUGIN_PRIORITY",get:function(){return 300}}],n&&dl(i.prototype,n),o&&dl(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function dy(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var dg=function(){var t;function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.rootWindow=n,this.prefix=t,this.savedKeys=[],this.loadSavedKeys()}return dy(e.prototype,[{key:"saveValue",value:function(t,e){this.rootWindow.localStorage.setItem("".concat(this.prefix,"_").concat(t),JSON.stringify(e)),-1===this.savedKeys.indexOf(t)&&(this.savedKeys.push(t),this.saveSavedKeys())}},{key:"loadValue",value:function(t,e){var n=this.rootWindow.localStorage.getItem("".concat(this.prefix,"_").concat(void 0===t?e:t));return null===n?void 0:JSON.parse(n)}},{key:"reset",value:function(t){this.rootWindow.localStorage.removeItem("".concat(this.prefix,"_").concat(t))}},{key:"resetAll",value:function(){var t=this;(0,V.Bk)(this.savedKeys,function(e,n){t.rootWindow.localStorage.removeItem("".concat(t.prefix,"_").concat(t.savedKeys[n]))}),this.clearSavedKeys()}},{key:"loadSavedKeys",value:function(){var t=this.rootWindow.localStorage.getItem("".concat(this.prefix,"__persistentStateKeys")),e="string"==typeof t?JSON.parse(t):void 0;this.savedKeys=e||[]}},{key:"saveSavedKeys",value:function(){this.rootWindow.localStorage.setItem("".concat(this.prefix,"__persistentStateKeys"),JSON.stringify(this.savedKeys))}},{key:"clearSavedKeys",value:function(){this.savedKeys.length=0,this.saveSavedKeys()}}]),t&&dy(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function dv(t){return(dv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dm(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function db(){return(db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dC(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function dw(t,e){return(dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dC(t){return(dC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}tg.Z.getSingleton().register("persistentStateSave"),tg.Z.getSingleton().register("persistentStateLoad"),tg.Z.getSingleton().register("persistentStateReset");var dk="persistentState",dS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dw(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=dC(i);if(e){var o=dC(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===dv(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).storage=void 0,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[dk]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.storage||(this.storage=new dg(this.hot.rootElement.id,this.hot.rootWindow)),this.addHook("persistentStateSave",function(e,n){return t.saveValue(e,n)}),this.addHook("persistentStateLoad",function(e,n){return t.loadValue(e,n)}),this.addHook("persistentStateReset",function(){return t.resetValue()}),db(dC(i.prototype),"enablePlugin",this).call(this))}},{key:"disablePlugin",value:function(){this.storage=void 0,db(dC(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),db(dC(i.prototype),"updatePlugin",this).call(this)}},{key:"loadValue",value:function(t,e){e.value=this.storage.loadValue(t)}},{key:"saveValue",value:function(t,e){this.storage.saveValue(t,e)}},{key:"resetValue",value:function(t){void 0===t?this.storage.resetAll():this.storage.reset(t)}},{key:"destroy",value:function(){db(dC(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return dk}},{key:"PLUGIN_PRIORITY",get:function(){return 0}}],n&&dm(i.prototype,n),o&&dm(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function dO(t){return(dO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function dP(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dE(){return(dE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d_(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function dM(t,e){return(dM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d_(t){return(d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dA="search",dI=function(t,e,n,o,r){t.getCellMeta(e,n).isSearchResult=r},dT=function(t,e,n){return!((0,U.o8)(t)||null===t||!t.toLocaleLowerCase||0===t.length||(0,U.o8)(e)||null===e)&&-1!==e.toString().toLocaleLowerCase(n.locale).indexOf(t.toLocaleLowerCase(n.locale))},dj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dM(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=d_(i);if(e){var o=d_(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===dO(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).callback=dI,e.queryMethod=dT,e.searchResultClass="htSearchResult",e}return n=[{key:"isEnabled",value:function(){return this.hot.getSettings()[dA]}},{key:"enablePlugin",value:function(){var t=this;if(!this.enabled){var e=this.hot.getSettings()[dA];this.updatePluginSettings(e),this.addHook("beforeRenderer",function(){return t.onBeforeRenderer.apply(t,arguments)}),dE(d_(i.prototype),"enablePlugin",this).call(this)}}},{key:"disablePlugin",value:function(){var t=this,e=function(){return t.onBeforeRenderer.apply(t,arguments)};this.hot.addHook("beforeRenderer",e),this.hot.addHookOnce("afterViewRender",function(){t.hot.removeHook("beforeRenderer",e)}),dE(d_(i.prototype),"disablePlugin",this).call(this)}},{key:"updatePlugin",value:function(){this.disablePlugin(),this.enablePlugin(),dE(d_(i.prototype),"updatePlugin",this).call(this)}},{key:"query",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCallback(),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getQueryMethod(),r=this.hot.countRows(),i=this.hot.countCols(),a=[],l=this.hot;return(0,t9.q4)(0,r-1,function(r){(0,t9.q4)(0,i-1,function(i){var s=e.hot.getDataAtCell(r,i),u=e.hot.getCellMeta(r,i),c=u.search.callback||n,f=(u.search.queryMethod||o)(t,s,u);f&&a.push({row:r,col:i,data:s}),c&&c(l,r,i,s,f)})}),a}},{key:"getCallback",value:function(){return this.callback}},{key:"setCallback",value:function(t){this.callback=t}},{key:"getQueryMethod",value:function(){return this.queryMethod}},{key:"setQueryMethod",value:function(t){this.queryMethod=t}},{key:"getSearchResultClass",value:function(){return this.searchResultClass}},{key:"setSearchResultClass",value:function(t){this.searchResultClass=t}},{key:"updatePluginSettings",value:function(t){(0,I.Kn)(t)&&(t.searchResultClass&&this.setSearchResultClass(t.searchResultClass),t.queryMethod&&this.setQueryMethod(t.queryMethod),t.callback&&this.setCallback(t.callback))}},{key:"onBeforeRenderer",value:function(t,e,n,o,r,i){var a,l=i.className||[],s=[];"string"==typeof l?s=l.split(" "):(a=s).push.apply(a,function(t){if(Array.isArray(t))return dR(t)}(l)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(l)||function(t,e){if(t){if("string"==typeof t)return dR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dR(t,e)}}(l)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.isEnabled()&&i.isSearchResult?s.includes(this.searchResultClass)||s.push("".concat(this.searchResultClass)):s.includes(this.searchResultClass)&&s.splice(s.indexOf(this.searchResultClass),1),i.className=s.join(" ")}},{key:"destroy",value:function(){dE(d_(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return dA}},{key:"PLUGIN_PRIORITY",get:function(){return 190}}],n&&dP(i.prototype,n),o&&dP(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function dx(t){return(dx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dD(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dH(){return(dH="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dB(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function dN(t,e){return(dN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dB(t){return(dB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dN(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=dB(i);if(e){var o=dB(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===dx(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).scrollbars=[],e.clones=[],e.lockedCollection=!1,e.freezeOverlays=!1,e}return o=[{key:"PLUGIN_KEY",get:function(){return"touchScroll"}},{key:"PLUGIN_PRIORITY",get:function(){return 200}},{key:"SETTING_KEYS",get:function(){return!0}}],n=[{key:"isEnabled",value:function(){return(0,eI.JS)()}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.addHook("afterViewRender",function(){return t.onAfterViewRender()}),this.registerEvents(),dH(dB(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){this.lockedCollection=!1,dH(dB(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){dH(dB(i.prototype),"disablePlugin",this).call(this)}},{key:"registerEvents",value:function(){var t=this;this.addHook("beforeTouchScroll",function(){return t.onBeforeTouchScroll()}),this.addHook("afterMomentumScroll",function(){return t.onAfterMomentumScroll()})}},{key:"onAfterViewRender",value:function(){if(!this.lockedCollection){var t=this.hot.view._wt.wtOverlays,e=t.topOverlay,n=t.bottomOverlay,o=t.inlineStartOverlay,r=t.topInlineStartCornerOverlay,i=t.bottomInlineStartCornerOverlay;this.lockedCollection=!0,this.scrollbars.length=0,this.scrollbars.push(e),n.clone&&this.scrollbars.push(n),this.scrollbars.push(o),r&&this.scrollbars.push(r),i&&i.clone&&this.scrollbars.push(i),this.clones=[],e.needFullRender&&this.clones.push(e.clone.wtTable.holder.parentNode),n.needFullRender&&this.clones.push(n.clone.wtTable.holder.parentNode),o.needFullRender&&this.clones.push(o.clone.wtTable.holder.parentNode),r&&this.clones.push(r.clone.wtTable.holder.parentNode),i&&i.clone&&this.clones.push(i.clone.wtTable.holder.parentNode)}}},{key:"onBeforeTouchScroll",value:function(){this.freezeOverlays=!0,(0,V.Bk)(this.clones,function(t){(0,_.cn)(t,"hide-tween")})}},{key:"onAfterMomentumScroll",value:function(){var t=this;this.freezeOverlays=!1,(0,V.Bk)(this.clones,function(t){(0,_.IV)(t,"hide-tween"),(0,_.cn)(t,"show-tween")}),this.hot._registerTimeout(function(){(0,V.Bk)(t.clones,function(t){(0,_.IV)(t,"show-tween")})},400),(0,V.Bk)(this.scrollbars,function(t){t.refresh(),t.resetFixedPosition()}),this.hot.view._wt.wtOverlays.syncScrollWithMaster()}}],dD(i.prototype,n),o&&dD(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function dV(t){return(dV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dU(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dF(){return(dF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dz(t)););return t}(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function dW(t,e){return(dW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dz(t){return(dz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dY="trimRows",dG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dW(t,e)}(i,t);var e,n,o,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=dz(i);if(e){var o=dz(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return function(t,e){if(e&&("object"===dV(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).trimmedRowsMap=null,e}return n=[{key:"isEnabled",value:function(){return!!this.hot.getSettings()[dY]}},{key:"enablePlugin",value:function(){var t=this;this.enabled||(this.trimmedRowsMap=this.hot.rowIndexMapper.registerMap("trimRows",new sf.n),this.trimmedRowsMap.addLocalHook("init",function(){return t.onMapInit()}),dF(dz(i.prototype),"enablePlugin",this).call(this))}},{key:"updatePlugin",value:function(){var t=this,e=this.hot.getSettings()[dY];Array.isArray(e)&&this.hot.batchExecution(function(){t.trimmedRowsMap.clear(),(0,V.Bk)(e,function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)})},!0),dF(dz(i.prototype),"updatePlugin",this).call(this)}},{key:"disablePlugin",value:function(){this.hot.rowIndexMapper.unregisterMap("trimRows"),dF(dz(i.prototype),"disablePlugin",this).call(this)}},{key:"getTrimmedRows",value:function(){return this.trimmedRowsMap.getTrimmedIndexes()}},{key:"trimRows",value:function(t){var e=this,n=this.getTrimmedRows(),o=this.isValidConfig(t),r=n;o&&(r=Array.from(new Set(n.concat(t)))),!1!==this.hot.runHooks("beforeTrimRow",n,r,o)&&(o&&this.hot.batchExecution(function(){(0,V.Bk)(t,function(t){e.trimmedRowsMap.setValueAtIndex(t,!0)})},!0),this.hot.runHooks("afterTrimRow",n,r,o,o&&r.length>n.length))}},{key:"trimRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.trimRows(e)}},{key:"untrimRows",value:function(t){var e=this.getTrimmedRows(),n=this.isValidConfig(t),o=e,r=this.trimmedRowsMap.getValues().slice(),i=t.length>0;n&&i&&((0,V.Bk)(t,function(t){r[t]=!1}),o=(0,V.k$)(r,function(t,e,n){return e&&t.push(n),t},[])),!1!==this.hot.runHooks("beforeUntrimRow",e,o,n&&i)&&(n&&i&&this.trimmedRowsMap.setValues(r),this.hot.runHooks("afterUntrimRow",e,o,n&&i,n&&o.length<e.length))}},{key:"untrimRow",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.untrimRows(e)}},{key:"isTrimmed",value:function(t){return this.trimmedRowsMap.getValueAtIndex(t)||!1}},{key:"untrimAll",value:function(){this.untrimRows(this.getTrimmedRows())}},{key:"isValidConfig",value:function(t){var e=this.hot.countSourceRows();return t.every(function(t){return Number.isInteger(t)&&t>=0&&t<e})}},{key:"onMapInit",value:function(){var t=this,e=this.hot.getSettings()[dY];Array.isArray(e)&&this.hot.batchExecution(function(){(0,V.Bk)(e,function(e){t.trimmedRowsMap.setValueAtIndex(e,!0)})},!0)}},{key:"destroy",value:function(){dF(dz(i.prototype),"destroy",this).call(this)}}],o=[{key:"PLUGIN_KEY",get:function(){return dY}},{key:"PLUGIN_PRIORITY",get:function(){return 330}}],n&&dU(i.prototype,n),o&&dU(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i}(e_);function dK(t){return(dK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dq(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function dZ(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d$(t,e,n){return e&&dZ(t.prototype,e),n&&dZ(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dX(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dJ(t,e)}function dJ(t,e){return(dJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dQ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n,o=d0(t);if(e){var r=d0(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(t,e){if(e&&("object"===dK(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function d0(t){return(d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d1(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,o,r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,e)||d2(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d2(t,e){if(t){if("string"==typeof t)return d3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d3(t,e)}}function d3(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var d4="undoRedo";function d8(t){var e=this;this.instance=t,this.doneActions=[],this.undoneActions=[],this.ignoreNewActions=!1,this.enabled=!1,t.addHook("afterChange",function(n,o){var r=this,i=n&&n.length;if(i&&n.find(function(t){var e=d1(t,4);return e[2]!==e[3]})){var a=function(){var e=n.reduce(function(t,e){return t.push(function(t){if(Array.isArray(t))return d3(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||d2(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),t},[]);(0,V.Bk)(e,function(e){e[1]=t.propToCol(e[1])});var o=i>1?r.getSelected():[[e[0][0],e[0][1]]];return new d8.ChangeAction(e,o)};e.done(a,o)}}),t.addHook("afterCreateRow",function(t,n,o){e.done(function(){return new d8.CreateRowAction(t,n)},o)}),t.addHook("beforeRemoveRow",function(n,o,r,i){var a=function(){var r=e.instance.getSourceDataArray(),i=(r.length+n)%r.length,a=t.toPhysicalRow(i),l=(0,I.I8)(r.slice(a,a+o));return new d8.RemoveRowAction(i,l,t.getSettings().fixedRowsBottom,t.getSettings().fixedRowsTop)};e.done(a,i)}),t.addHook("afterCreateCol",function(t,n,o){e.done(function(){return new d8.CreateColumnAction(t,n)},o)}),t.addHook("beforeRemoveCol",function(n,o,r,i){var a=function(){var r=e.instance.getSourceDataArray(),i=(e.instance.countCols()+n)%e.instance.countCols(),a=[],l=[],s=[];(0,t9.q4)(r.length-1,function(e){var n=[],l=r[e];(0,t9.q4)(i,i+(o-1),function(e){n.push(l[t.toPhysicalColumn(e)])}),a.push(n)}),(0,t9.q4)(o-1,function(e){s.push(t.toPhysicalColumn(i+e))}),Array.isArray(t.getSettings().colHeaders)&&(0,t9.q4)(o-1,function(e){l.push(t.getSettings().colHeaders[t.toPhysicalColumn(i+e)]||null)});var u=t.columnIndexMapper.getIndexesSequence(),c=t.rowIndexMapper.getIndexesSequence();return new d8.RemoveColumnAction(i,s,a,l,u,c,t.getSettings().fixedColumnsStart)};e.done(a,i)}),t.addHook("beforeCellAlignment",function(t,n,o,r){e.done(function(){return new d8.CellAlignmentAction(t,n,o,r)})}),t.addHook("beforeFilter",function(t){e.done(function(){return new d8.FiltersAction(t)})}),t.addHook("beforeRowMove",function(t,n){!1!==t&&e.done(function(){return new d8.RowMoveAction(t,n)})}),t.addHook("beforeMergeCells",function(n,o){o||e.done(function(){return new d8.MergeCellsAction(t,n)})}),t.addHook("afterUnmergeCells",function(n,o){o||e.done(function(){return new d8.UnmergeCellsAction(t,n)})}),t.addHook("afterInit",function(){e.init()})}d8.prototype.done=function(t,e){if(!this.ignoreNewActions&&"UndoRedo.undo"!==e&&"UndoRedo.redo"!==e&&"auto"!==e){var n=this.doneActions.slice();if(!1!==this.instance.runHooks("beforeUndoStackChange",n,e)){var o=t(),r=this.undoneActions.slice();this.doneActions.push(o),this.instance.runHooks("afterUndoStackChange",n,this.doneActions.slice()),this.instance.runHooks("beforeRedoStackChange",r),this.undoneActions.length=0,this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice())}}},d8.prototype.undo=function(){if(this.isUndoAvailable()){var t=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",t);var e=this.doneActions.pop();this.instance.runHooks("afterUndoStackChange",t,this.doneActions.slice());var n=(0,I.I8)(e);if(!1!==this.instance.runHooks("beforeUndo",n)){this.ignoreNewActions=!0;var o=this,r=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",r),e.undo(this.instance,function(){o.ignoreNewActions=!1,o.undoneActions.push(e)}),this.instance.runHooks("afterRedoStackChange",r,this.undoneActions.slice()),this.instance.runHooks("afterUndo",n)}}},d8.prototype.redo=function(){if(this.isRedoAvailable()){var t=this.undoneActions.slice();this.instance.runHooks("beforeRedoStackChange",t);var e=this.undoneActions.pop();this.instance.runHooks("afterRedoStackChange",t,this.undoneActions.slice());var n=(0,I.I8)(e);if(!1!==this.instance.runHooks("beforeRedo",n)){this.ignoreNewActions=!0;var o=this,r=this.doneActions.slice();this.instance.runHooks("beforeUndoStackChange",r),e.redo(this.instance,function(){o.ignoreNewActions=!1,o.doneActions.push(e)}),this.instance.runHooks("afterUndoStackChange",r,this.doneActions.slice()),this.instance.runHooks("afterRedo",n)}}},d8.prototype.isUndoAvailable=function(){return this.doneActions.length>0},d8.prototype.isRedoAvailable=function(){return this.undoneActions.length>0},d8.prototype.clear=function(){this.doneActions.length=0,this.undoneActions.length=0},d8.prototype.isEnabled=function(){return this.enabled},d8.prototype.enable=function(){if(!this.isEnabled()){var t,e=this.instance;this.enabled=!0,(t=e).undo=function(){return t.undoRedo.undo()},t.redo=function(){return t.undoRedo.redo()},t.isUndoAvailable=function(){return t.undoRedo.isUndoAvailable()},t.isRedoAvailable=function(){return t.undoRedo.isRedoAvailable()},t.clearUndo=function(){return t.undoRedo.clear()},this.registerShortcuts(),e.addHook("afterChange",d7)}},d8.prototype.disable=function(){if(this.isEnabled()){var t,e=this.instance;this.enabled=!1,delete(t=e).undo,delete t.redo,delete t.isUndoAvailable,delete t.isRedoAvailable,delete t.clearUndo,this.unregisterShortcuts(),e.removeHook("afterChange",d7)}},d8.prototype.destroy=function(){this.clear(),this.instance=null,this.doneActions=null,this.undoneActions=null},d8.Action=function(){},d8.Action.prototype.undo=function(){},d8.Action.prototype.redo=function(){},d8.ChangeAction=function(t,e){this.changes=t,this.selected=e,this.actionType="change"},(0,I.ED)(d8.ChangeAction,d8.Action),d8.ChangeAction.prototype.undo=function(t,e){for(var n=(0,I.I8)(this.changes),o=t.countEmptyRows(!0),r=t.countEmptyCols(!0),i=0,a=n.length;i<a;i++)n[i].splice(3,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.undo");for(var l=0,s=n.length;l<s;l++){var u=d1(n[l],2),c=u[0],f=u[1];t.getSettings().minSpareRows&&c+1+t.getSettings().minSpareRows===t.countRows()&&o===t.getSettings().minSpareRows&&(t.alter("remove_row",parseInt(c+1,10),t.getSettings().minSpareRows),t.undoRedo.doneActions.pop()),t.getSettings().minSpareCols&&f+1+t.getSettings().minSpareCols===t.countCols()&&r===t.getSettings().minSpareCols&&(t.alter("remove_col",parseInt(f+1,10),t.getSettings().minSpareCols),t.undoRedo.doneActions.pop())}t.selectCells(this.selected,!1,!1)},d8.ChangeAction.prototype.redo=function(t,e){for(var n=(0,I.I8)(this.changes),o=0,r=n.length;o<r;o++)n[o].splice(2,1);t.addHookOnce("afterChange",e),t.setDataAtCell(n,null,null,"UndoRedo.redo"),this.selected&&t.selectCells(this.selected,!1,!1)},d8.CreateRowAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_row"},(0,I.ED)(d8.CreateRowAction,d8.Action),d8.CreateRowAction.prototype.undo=function(t,e){var n=t.countRows(),o=t.getSettings().minSpareRows;this.index>=n&&this.index-o<n&&(this.index-=o),t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.amount,"UndoRedo.undo")},d8.CreateRowAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateRow",e),t.alter("insert_row_above",this.index,this.amount,"UndoRedo.redo")},d8.RemoveRowAction=function(t,e,n,o){this.index=t,this.data=e,this.actionType="remove_row",this.fixedRowsBottom=n,this.fixedRowsTop=o},(0,I.ED)(d8.RemoveRowAction,d8.Action),d8.RemoveRowAction.prototype.undo=function(t,e){var n=t.getSettings();n.fixedRowsBottom=this.fixedRowsBottom,n.fixedRowsTop=this.fixedRowsTop,t.alter("insert_row_above",this.index,this.data.length,"UndoRedo.undo"),t.addHookOnce("afterViewRender",e),t.populateFromArray(this.index,0,this.data,void 0,void 0,"UndoRedo.undo")},d8.RemoveRowAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveRow",e),t.alter("remove_row",this.index,this.data.length,"UndoRedo.redo")},d8.CreateColumnAction=function(t,e){this.index=t,this.amount=e,this.actionType="insert_col"},(0,I.ED)(d8.CreateColumnAction,d8.Action),d8.CreateColumnAction.prototype.undo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.undo")},d8.CreateColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterCreateCol",e),t.alter("insert_col_start",this.index,this.amount,"UndoRedo.redo")},d8.RemoveColumnAction=function(t,e,n,o,r,i,a){this.index=t,this.indexes=e,this.data=n,this.amount=this.data[0].length,this.headers=o,this.columnPositions=r.slice(0),this.rowPositions=i.slice(0),this.actionType="remove_col",this.fixedColumnsStart=a},(0,I.ED)(d8.RemoveColumnAction,d8.Action),d8.RemoveColumnAction.prototype.undo=function(t,e){var n=this;t.getSettings().fixedColumnsStart=this.fixedColumnsStart;for(var o=this.indexes.slice(0).sort(),r=function(t,e,r){return r[n.indexes.indexOf(o[e])]},i=this.data.length,a=[],l=0;l<i;l++)a.push((0,V.Sc)(this.data[l],r));var s=(0,V.Sc)(this.headers,r),u=[];t.alter("insert_col_start",this.indexes[0],this.indexes.length,"UndoRedo.undo"),(0,V.Bk)(t.getSourceDataArray(),function(t,e){(0,V.Bk)(o,function(n,o){t[n]=a[e][o],u.push([e,n,t[n]])})}),t.setSourceDataAtCell(u,void 0,void 0,"UndoRedo.undo"),t.columnIndexMapper.insertIndexes(o[0],o.length),void 0!==this.headers&&(0,V.Bk)(s,function(e,n){t.getSettings().colHeaders[o[n]]=e}),t.batchExecution(function(){t.rowIndexMapper.setIndexesSequence(n.rowPositions),t.columnIndexMapper.setIndexesSequence(n.columnPositions)},!0),t.addHookOnce("afterViewRender",e),t.render()},d8.RemoveColumnAction.prototype.redo=function(t,e){t.addHookOnce("afterRemoveCol",e),t.alter("remove_col",this.index,this.amount,"UndoRedo.redo")},d8.CellAlignmentAction=function(t,e,n,o){this.stateBefore=t,this.range=e,this.type=n,this.alignment=o},d8.CellAlignmentAction.prototype.undo=function(t,e){var n=this;(0,V.Bk)(this.range,function(e){e.forAll(function(e,o){e>=0&&o>=0&&t.setCellMeta(e,o,"className",n.stateBefore[e][o]||" htLeft")})}),t.addHookOnce("afterViewRender",e),t.render()},d8.CellAlignmentAction.prototype.redo=function(t,e){o9(this.range,this.type,this.alignment,function(e,n){return t.getCellMeta(e,n)},function(e,n,o,r){return t.setCellMeta(e,n,o,r)}),t.addHookOnce("afterViewRender",e),t.render()},d8.FiltersAction=function(t){this.conditionsStack=t,this.actionType="filter"},(0,I.ED)(d8.FiltersAction,d8.Action),d8.FiltersAction.prototype.undo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack.slice(0,this.conditionsStack.length-1)),n.filter()},d8.FiltersAction.prototype.redo=function(t,e){var n=t.getPlugin("filters");t.addHookOnce("afterViewRender",e),n.conditionCollection.importAllConditions(this.conditionsStack),n.filter()};var d9=function(t){dX(n,t);var e=dQ(n);function n(t,o){dq(this,n),(r=e.call(this)).cellRange=o;var r,i=r.cellRange.getTopStartCorner(),a=r.cellRange.getBottomEndCorner();return r.rangeData=t.getData(i.row,i.col,a.row,a.col),r}return d$(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0);var o=this.cellRange.getTopStartCorner();t.populateFromArray(o.row,o.col,this.rangeData,void 0,void 0,"MergeCells")}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange)}}]),n}(d8.Action);d8.MergeCellsAction=d9;var d6=function(t){dX(n,t);var e=dQ(n);function n(t,o){var r;return dq(this,n),(r=e.call(this)).cellRange=o,r}return d$(n,[{key:"undo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.mergeRange(this.cellRange,!0)}},{key:"redo",value:function(t,e){var n=t.getPlugin("mergeCells");t.addHookOnce("afterViewRender",e),n.unmergeRange(this.cellRange,!0),t.render()}}]),n}(d8.Action);function d7(t,e){if("loadData"===e)return this.undoRedo.clear()}d8.UnmergeCellsAction=d6,d8.RowMoveAction=function(t,e){this.rows=t.slice(),this.finalIndex=e,this.actionType="row_move"},(0,I.ED)(d8.RowMoveAction,d8.Action),d8.RowMoveAction.prototype.undo=function(t,e){var n=this,o=t.getPlugin("manualRowMove"),r=[].concat(this.rows),i=r.filter(function(t){return t>n.finalIndex}),a=r.filter(function(t){return t<=n.finalIndex}),l=i.sort(function(t,e){return e-t}).concat(a.sort(function(t,e){return t-e}));t.addHookOnce("afterViewRender",e);for(var s=0;s<l.length;s+=1){var u=t.toVisualRow(l[s]);o.moveRow(u,l[s])}t.render(),t.deselectCell(),t.selectRows(this.rows[0],this.rows[0]+this.rows.length-1)},d8.RowMoveAction.prototype.redo=function(t,e){var n=t.getPlugin("manualRowMove");t.addHookOnce("afterViewRender",e),n.moveRows(this.rows.slice(),this.finalIndex),t.render(),t.deselectCell(),t.selectRows(this.finalIndex,this.finalIndex+this.rows.length-1)},d8.prototype.init=function(){var t=this.instance.getSettings().undo;this.instance.undoRedo||(this.instance.undoRedo=this),void 0===t||t?this.instance.undoRedo.enable():this.instance.undoRedo.disable()},d8.prototype.registerShortcuts=function(){var t=this,e=this.instance.getShortcutManager().getContext("grid"),n=function(t){return!t.altKey};e.addShortcuts([{keys:[["Control/Meta","z"]],callback:function(){t.undo()}},{keys:[["Control/Meta","y"],["Control/Meta","Shift","z"]],callback:function(){t.redo()}}],{runOnlyIf:n,group:d4})},d8.prototype.unregisterShortcuts=function(){this.instance.getShortcutManager().getContext("grid").removeShortcutsByGroup(d4)};var d5=tg.Z.getSingleton();function pt(){(0,eC.fo)(eZ),(0,eC.fo)(e6),(0,eC.fo)(ni),(0,eC.fo)(nB),(0,eC.fo)(n3),(0,eC.fo)(oV),(0,eC.fo)(oX),(0,eC.fo)(rv),(0,eC.fo)(r3),(0,eC.fo)(ik),(0,eC.fo)(iU),(0,eC.fo)(iZ),(0,eC.fo)(i4),(0,eC.fo)(au),(0,eC.fo)(sw),(0,eC.fo)(s1),(0,eC.fo)(uu),(0,eC.fo)(uP),(0,eC.fo)(uN),(0,eC.fo)(ct),(0,eC.fo)(cc),(0,eC.fo)(cN),(0,eC.fo)(cq),(0,eC.fo)(fs),(0,eC.fo)(fC),(0,eC.fo)(fE),(0,eC.fo)(hN),(0,eC.fo)(dp),(0,eC.fo)(dS),(0,eC.fo)(dj),(0,eC.fo)(dL),(0,eC.fo)(dG),(0,eC.fo)(d8)}function pe(){tq(),ee(),eu(),ew(),pt()}d5.add("afterUpdateSettings",function(){var t;null===(t=this.getPlugin("undoRedo"))||void 0===t||t.init()}),d5.register("beforeUndo"),d5.register("afterUndo"),d5.register("beforeRedo"),d5.register("afterRedo"),d8.PLUGIN_KEY="undoRedo",d8.SETTING_KEYS=!0}}]);